---

title: Redirection of an ongoing backup
abstract: One method of redirecting an in-process backup operation to a new storage device involves receiving a request to perform a backup from a backup application. In response to reception of the request, the method causes backup information generated by the backup application to be stored on a first storage device. The first storage device is monitored in order to detect how much free space is available. If the amount of space available on the first storage device drops below a threshold amount prior to completion of the backup, the backup is redirected by causing any subsequent backup information generated by the backup application to be stored on a second storage device. Metadata associated with the backup identifies that information associated with the backup is stored on both the first storage device and the second storage device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07890714&OS=07890714&RS=07890714
owner: Symantec Operating Corporation
number: 07890714
owner_city: Mountain View
owner_country: US
publication_date: 20070928
---
This invention relates to data storage and more particular to performing backups and recoveries of stored data.

In the most conventional backup systems the amount of information that will be written by a backup operation is unknown at the time that the backup operation begins. Accordingly it is possible to select a destination storage device for the backup that ultimately does not have enough free storage space to store the entire backup. For example assume the total amount of backup information is 120 GB and the free storage space of the selected storage device is only 100 GB. When the backup operation attempts to transfer information in excess of 100 GB to the selected storage device the selected storage device will not be able to store the additional information. This in turn causes the backup operation to fail due to the storage overflow.

A storage overflow significantly delays completion of the backup since a new backup operation targeting a different storage device will need to be started and any information that was already written to backup by the failed backup operation will need to be transferred again to the new storage device. As this example shows it is desirable to be able to increase backup efficiency in situations in which the originally selected target storage device is not able to store all of the backup information.

Various embodiments of systems and methods for redirecting an in process backup operation to a new storage device are disclosed. In one embodiment a method involves receiving a request to perform a backup from a backup application. In response to reception of the request backup information generated by the backup application as part of the backup is caused to be stored on a first storage device e.g. by establishing a first connection between the backup application and the first storage device . The method then monitors the first storage device in order to detect how much available space is available for use to store the backup. If the amount of space available on the first storage device subsequently drops below a threshold amount prior to completion of the backup the method redirects the backup by causing any subsequent backup information generated by the backup application to be stored on a second storage device e.g. by establishing a second connection between the backup application and the second storage device . The subsequent backup information is stored on the second storage device prior to completion of the backup. In one embodiment the backup is paused while the second connection is being established. The method can then generate metadata associated with the backup. The metadata identifies that information associated with the backup is stored on both the first storage device and the second storage device.

In one embodiment the method operates in a grid storage system and a centralized redirection module controls the establishment of connections e.g. by selecting which storage node s to use when performing a particular backup and the redirection of backups. In another embodiment the method operates in a non grid system and separate media servers can be involved in establishing respective connections. One media server or a master media server can redirect the backup and cause the second connection to be established by communicating with a second media server.

The foregoing is a summary and thus contains by necessity simplifications generalizations and omissions of detail consequently those skilled in the art will appreciate that the summary is illustrative only and is not intended to be in any way limiting. Other aspects inventive features and advantages of the present invention as defined solely by the claims will become apparent in the non limiting detailed description set forth below.

While the invention is susceptible to various modifications and alternative forms specific embodiments of the invention are provided as examples in the drawings and detailed description. It should be understood that the drawings and detailed description are not intended to limit the invention to the particular form disclosed. Instead the intention is to cover all modifications equivalents and alternatives falling within the spirit and scope of the invention as defined by the appended claims.

Network can include one or local and or wide area networks. Network can be implemented using various topologies communication protocols and physical links e.g. wireless links coaxial cables and the like .

Computing device implements media server and computing device similarly implements media server . Computing device implements a backup application . In one embodiment backup application is Symantec Backup Exec available from Symantec Corporation of Cupertino Calif. In other embodiments other types of backup applications other than Backup Exec can be used as backup application .

Computing device is coupled to access information stored by storage media . Similarly computing device is coupled to access information stored by storage media . Storage media and can each include one or more physical storage devices e.g. hard disks compact discs CDs digital versatile discs DVDs and the like . In some embodiments storage media and or storage media are logical storage devices e.g. logical volumes that are implemented using multiple underlying physical storage devices e.g. according to techniques such as Redundant Array of Independent Disks RAID that provide for mirroring striping or the like .

Backup application is configured to interact with media server or media server in order to request a backup or restore. For example backup application can send a request to perform a backup to media server . In response to receiving the request media server can facilitate establishment of a connection between backup application and storage media allowing backup application to write a copy of the information being backed up to storage media . Generally media servers and are configured to receive requests to perform backups and restores from agents or clients such as backup application and in response to manage the backups and restores by scheduling and otherwise controlling performance of the backups and restores.

Performing a backup involves creating a copy of a set of information and storing that copy e.g. on storage media and or . Performing a restore involves restoring a particular set of information e.g. a file from a backup of that set of information.

Media server includes a redirection module that is configured to redirect ongoing backups if a storage overflow occurs. Media server includes a similar redirection module . Redirection modules and are configured to monitor ongoing backups and if needed to trigger the redirection of an ongoing backup as described in more detail below.

Redirection module is configured to monitor the amount of space remaining in storage media as a backup is being performed i.e. as a copy of the information being backed up is being written to storage device . If the amount of free space i.e. the space available to store the backup drops below a threshold level redirection module is configured to notify media server . This in turn causes media server to pause or otherwise inhibit the ongoing backup and to locate another media server that may be able to complete the ongoing backup. Once another media server e.g. media server has been located media server communicates with the other media server in order to cause the backup to be completed by the other media server.

As an example backup application can request a backup from media server . Media server can schedule the backup and at the scheduled time allow backup application to begin writing the copy of the information being backed up to storage media . This copied information is stored at least in part as backup information info . As the backup is being performed redirection module monitors the amount of space available on storage media . When the amount of space is less than a threshold amount redirection module communicates with media server and or backup application in order to pause the backup such that no additional information is written to storage media after the backup is paused. Redirection module then communicates information indicative of the original backup request to redirection module of media server which causes media server to begin interacting with backup application in order to complete the paused backup by writing the remainder of the copy of the backed up information to storage media . This remaining information is stored as backup information .

Thus backup information and backup information make up the entire set of information written by a single backup. Media servers and can generate metadata that associates these two sets of backup information with the backup e.g. by identifying the date time original data that was copied by the backup etc. indicating that both sets of backup information are part of the same backup. The metadata can also identify which of several backed up objects e.g. files directories databases and the like are stored on each storage media. This metadata can be used when restoring information from a backup that was redirected. Each media server can generate a piece of metadata describing the portion of the backup that was handled by that particular media server and both pieces of metadata can then be stored in a manner that associates both pieces with the same backup.

It is noted that the same backup can be redirected more than once. Thus after being redirected to storage media the backup can again be redirected if redirection module detects that the amount of space available on storage media is less than a threshold amount. A given backup can be redirected as many times as needed in order to complete the backup.

In one embodiment media servers and operate as a cluster and one media server acts as the master server. Alternatively an additional server not shown in can be included in the system and this additional server can act as the master server to media servers and . In such embodiments the individual media servers can be configured to notify the master server whenever a backup needs to be paused and redirected. In response to being notified that a backup needs to be paused and redirected the master server can pause the backup and select the next media server to manage the paused backup. The master server can collect information e.g. from redirection modules and about the amount of space remaining on each media server s storage media and use that information to select the next media server. The master server can then cause another media server to establish a new connection with the backup application and un pause the backup.

At a connection is established between the backup application and a first storage device. Establishing the connection involves facilitating the writing of information which is a copy of the information being backed up by the backup to the first storage device. Operation can be performed by a media server. The first storage device can be a logical or physical device. In some embodiments the first storage device includes a several component storage devices e.g. the first storage device can be a storage array made up of multiple hard drives .

At the amount of space available on the first storage device is monitored. Monitoring the amount of space available can involve repeatedly e.g. at prespecified intervals or continuously ascertaining the amount of free i.e. unutilized space remains on the first storage device. Operation can be performed by a redirection module within a media server.

At a determination is made as to whether the available space on the first storage device is less than a threshold amount. Operations and can be repeated until the backup completes as indicated at .

If the available space monitored at is less than a threshold amount the backup is redirected by establishing a connection between the backup application and a second storage device as shown at . Operation can be performed by a redirection module within a media server and operation can be performed by one or more redirection modules media servers and or master servers. For example in one embodiment operation can be performed by a media server coupled to the second storage device in response to a redirection request generated by a master server.

Establishment of the connections between the backup application and the storage devices shown at and can be performed by individual media servers and or a combination of media servers and a master server. For example the master server can initiate the establishment of each connection by selecting a media server to initially handle the backup and then selecting another media server to handle the backup when the backup is redirected and communicating with the selected media servers. In an alternative embodiment that does not include a master server the first media server that is initially handling the backup can initiate establishment of the second connection by communicating with the second media server.

It is noted that the establishment of a new connection as a result of a redirection can be performed in a manner that is not detected by the backup application itself. Thus the redirections can be transparent to the backup application.

To avoid any loss of information the backup may be paused as soon as the amount of space available on the first storage device is determined to be less than the threshold amount. The backup can resume i.e. pausing of the backup can cease as soon as the connection with the second storage device is established.

In some embodiments there are several candidate storage devices to which the backup can be redirected. In some such embodiments the next storage device is selected in a manner e.g. randomly based on a round robin scheme or the like that is independent of the amount of storage space available on each candidate storage devices. In other embodiments the next storage device is selected based upon the amount of space available on each storage device. For example in one embodiment the candidate storage device with the greatest amount of free space is selected as the next storage device.

The threshold indicated at is a value that indicates an amount of storage space. The threshold can be specified in absolute terms e.g. 1 Gigabyte as a percentage e.g. 5 free space or in any other desired manner. In some embodiments the same threshold is used for all storage devices in other embodiments different thresholds can be specified for different storage devices.

If the backup was redirected e.g. if operation was performed metadata mapping the backup information generated by the backup to both the first and the second storage device is generated as shown at . This metadata can be generated by one or more media servers e.g. metadata relating to the portion of the backup information stored on the first storage device can be generated by a first media server and metadata relating to the portion of the backup information stored on the second storage device can be generated by a second media server . The metadata can be stored in a centralized repository e.g. managed by the master server in a cluster of media servers or distributed among the media servers e.g. each media server can store metadata . If the backup was not redirected similar metadata mapping the backup information generated by the backup to a single storage can be generated not shown .

It is noted that redirection of the ongoing backup is transparent to the backup application that initiated the backup. In particular redirection of the ongoing backup is done without signaling an error to the backup application and the backup application may not receive any indicating that some of the backup information is written to a different storage device than other portions of the backup information.

While the flowchart of allows for only a single redirection of an ongoing backup it is noted that other embodiments can support multiple redirections of the same backup. Thus operations and can be repeated for additional storage devices. If a backup is redirected to a storage device that does not have sufficient room to store the remaining backup information generated by the backup that backup can thus be redirected again.

In this example three computing devices are shown as implementing a backup application. In particular computing device implements backup application computing device implements backup application and computing device implements backup application . Backup applications can be implemented using any of a variety of backup applications including proprietary solutions such as Symantec Backup Exec and open source solutions such as Bacula .

Each computing device that implements a backup application also implements a storage grid agent. In particular computing device implements storage grid agent computing device implements storage grid agent and computing device implements storage grid agent .

Three additional computing devices and are shown as providing storage to the storage grid. In particular computing device is coupled to storage media computing device is coupled to storage media and computing device is coupled to storage media . Each storage media can be used to store all or part of the information generated by a backup application as part of a backup. Additionally each storage media can include one or more physical storage devices.

A redirection module is also coupled to the network that couples computing devices . In some embodiments redirection module can be implemented in software that is executed on a separate computing device not shown . Alternatively redirection module can be implemented on one or more of computing devices . Like the redirection module of redirection module of is configured to monitor the space available on storage media that is being written to as part of an ongoing backup and if needed to redirect that ongoing backup to another storage media. Additionally redirection module of can include storage grid specific components such as a job manager scheduler and the like as shown in . In general in a storage grid environment redirection module can include functionality to select a node and schedule a backup that writes backup information to the selected node.

In one embodiment the storage grid specific components e.g. storage grid agents redirection module and storage grid specific monitoring software on each storage node e.g. computing devices can be implemented using the Globus Toolkit available from the Globus Alliance. Specifically the Globus Toolkit security components collectively referred to as the Grid Security Infrastructure GSI facilitate secure communications e.g. between storage grid agents and the redirection module and the application of uniform policies across distinct systems. The Globus Toolkit Data Management components provide for the discovery transfer and access of large amounts of data e.g. between a backup application and a storage node . The Globus Toolkit Execution Management components deal with the deployment scheduling and monitoring of executable programs e.g. such as the scheduling of backups . The Globus Toolkit Information Services commonly referred to as the Monitoring and Discovery Systems MDS include components to monitor and discover resources in a virtual organization e.g. such as components to monitor the amount of space available on a storage device .

In the storage grid of each storage grid agent provides an interface to a backup application that is much the same as the interface provided by one of the media servers of . In particular each storage grid agent can provide a standard Application Programming Interface API to a backup application for information storage and access. This interface acts to abstract the details of the storage grid away from the backup applications. In other words the backup application can write information to the storage grid in the same manner that the backup application would write information to a storage medium provided by a media server despite the fact that the actual information written to the storage grid may be distributed among multiple heterogeneous nodes each node is a computing device that provides storage to the storage grid .

In response to receiving a request to perform a backup from a respective backup application a storage grid agent is configured to submit the request to redirection module . Redirection module will select a node and schedule the backup. At the scheduled time a connection is established between the backup application and the selected node via the storage grid agent coupled to the backup application allowing the backup application to write backup information to the storage media included in the selected node.

After the connection is established and the backup begins redirection module monitors the status of the storage media being written to by the backup application. For example if a connection has been established between backup application and the node that includes storage media via storage grid agent redirection module can monitor the status of storage media . Monitoring the status can involve monitoring the amount of space available in storage media connection efficiency and the like.

In some embodiments redirection module monitors storage media provided by a node by communicating with a node specific monitoring module executing on that particular node. For example a node specific monitoring module executing on computing device can monitor the amount of space available on storage media and communicate information indicative of the results of the monitoring to redirection module . If an imminent storage overflow is detected e.g. due to the amount of space available on storage media being less than a threshold amount during an ongoing backup operation the node specific monitoring module can send information indicative of that imminent storage overflow to redirection module .

If the amount of space remaining on storage media drops below a threshold amount after a portion backup info of the backup information has been written to storage media I and before the backup has completed redirection module can send storage grid agent a request to pause the backup. Alternatively this pause request can be generated and sent to storage grid agent by a node specific monitoring module executing on computing device .

Redirection module can then select another node e.g. the node containing storage media in this example and establish a connection between that node and backup application . Redirection module can then communicate with storage grid agent to resume the paused backup operation. The backup can then write the remaining backup information backup info to storage media . Redirection module can also generate metadata identifying that the backup information backup info and generated by the backup is distributed among storage media and .

In the illustrated embodiment the storage grid includes a centralized job manager e.g. redirection module . It is noted that other embodiments may include decentralized job management functionality such that multiple modules can schedule and redirect ongoing backups at the same time.

It is further noted that provides just one example of a distributed computing architecture. It is noted that other distributed computing environments e.g. peer to peer computing environments can also employ the redirection techniques described herein. Such distributed computing environments can employ a centralized redirection module e.g. as shown in the grid storage environment of or a distributed redirection module. For example in one such embodiment each node in the distributed computing environment can include a redirection module. In such an embodiment an individual storage node that is selected as the initial target of a backup can be configured to redirect the ongoing backup to a second node. In such a situation the second connection which is established between the backup application and the second node can include the initial node from which the backup is being redirected.

In some embodiments the storage grid of is configured to replicate some or all of the backup information generated by the backup applications. For example in order to provide increased availability and or increased read performance the storage grid can be configured to replicate each set of backed up information stored by storage media onto an independent storage medium.

It is noted that not all of the capacity within the storage grid is necessarily used to store backup information. For example in the illustrated embodiment storage media is not currently used to store any backup information. This available capacity can be used by other applications i.e. non backup applications or by future backups.

Signature can be a checksum or other signature that is generated based upon the actual value of file data . In one embodiment signature is used to implement single instance storage. For example as backup information is written to the storage grid a redirection module and or one of storage grid agents of can compare each file chunk s signature with a set of signatures that represent file chunks already stored by the storage grid. If the file chunk s signature matches the signature of an already stored file chunk the redirection module and or storage grid agent can prevent the file chunk from being written as part of the backup. Instead the redirection module and or storage grid agent can generate metadata indicating the storage location that already stores a copy of that file chunk. Alternatively other techniques e.g. such as a bit by bit comparison of some or all of each file chunk to already stored file chunks can be used to implement single instance storage instead of and or in addition to comparing the signatures of file chunks.

In one embodiment each storage grid agent of is configured to generate new signatures for file chunks being written as part of a backup insert the signatures into the backup stream compare the new signatures to signatures of file chunks already stored by the storage grid and at least occasionally broadcast newly generated signatures to other storage grid agents.

As shown redirection module of includes a job management module and a catalog . Job management module includes a job request receiver a queue a scheduler a dispatcher a monitor a resource information listener system status information and a running queue .

Job request receiver is configured to receive job requests e.g. requests to perform backups or restores or information indicating that an ongoing backup should be redirected from storage grid agents and or monitor . Job request receiver can store job requests that are not able to be scheduled immediately in queue . High priority job requests e.g. requests to redirect an ongoing backup can be added to the front or beginning of the queue and low priority job requests e.g. requests to perform a backup or restore can be added to the back or end of the queue. In some embodiments queue is subdivided into multiple queues e.g. a high priority queue and a low priority queue .

Scheduler selects job requests from the beginning of queue for scheduling. In some embodiments scheduler is configured to wait to select new jobs from queue whenever there are no jobs in the queue and or whenever all nodes are currently involved in ongoing backup requests. If scheduler is in a waiting mode and job request receiver receives a request to redirect an ongoing backup e.g. such a request can be indicated if information indicating an imminent storage overflow is received from a storage node by resource information listener job request receiver can communicate with scheduler directly in order to cause scheduler to exit the waiting mode.

System status information includes information corresponding to each storage node currently in the storage grid. For each storage node system status information indicates a disk quota a data rate and or the round trip time to communicate with all other storage nodes and all storage grid agents.

Resource information listener is configured to update system status information based upon information received from each storage node. In one embodiment resource information listener subscribes to a resource monitor service that provides updated status information from individual storage nodes each time there is a change in that status information.

Scheduler decides when to schedule the job requests in queue . Scheduler bases its scheduling decisions on the current workload of each individual storage node the network conditions and the requests in queue . In one embodiment each individual storage node has a specific resource limit which is specified at the beginning when the node joins the storage grid. If a storage node s current resource utilization is already beyond that storage node s resource limit then that storage node is not available to handle new backup jobs. The whole storage grid is unavailable if all of the storage nodes are unavailable.

Dispatcher decides which storage node s should actually be used to handle a scheduled job request based on the job specification and the current system workload. Once dispatcher selects a storage node or nodes the job request and information identifying the selected storage node or nodes are forwarded to monitor . For example if the job request is a redirection request or a backup request dispatcher can select a single storage node. If instead the job request is a request to restore a volume from a backup and if the specified backup was redirected dispatcher can select each storage node that stores a portion of the backup information generated by that backup. Similarly if a restore from a particular backup is specified and single instance storage is being implemented dispatcher can select each storage node that stores a file chunk included in the backup information generated by that particular backup.

In one embodiment when selecting a node to which an ongoing backup should be redirected dispatcher uses the following formula to calculate a score for each candidate storage node and then selects the storage node with the highest score. The formula takes into account the difference between the disk quota of each candidate storage node and the length of the backup job so far in terms of amount of storage consumed by the backup so far . If a given storage node s disk quota is smaller than the length of the job so far that storage node will receive a negative score which in turn makes it very unlikely that the storage node will be selected.

In the formula LJ length of the redirected backup job so far DQ is the disk quota on the candidate storage node DR is the current data rate of the candidate storage node DRL is the data rate limit of the candidate storage node RTTAN is the round trip time between the storage grid agent involved in the backup and the candidate storage node NWJ is the number of waiting jobs that have been assigned to the candidate storage node but not yet executed and NRJ is the number of running jobs that are currently executing on the candidate storage node. Thus the formula takes into account the amount of resources e.g. current and future processing usage disk space and the like available on the candidate storage node.

Monitor executes and monitors all of the running jobs in the storage grid. Upon receiving a job request from dispatcher monitor communicates with the appropriate storage grid agent in order to cause the requested job to be performed on the selected storage node. The monitor adds all running jobs to running queue and monitors e.g. by receiving information generated by a node specific monitoring module on a storage node the ongoing jobs.

Running queue stores information identifying all jobs that are already scheduled but have not yet finished. Running queue is mainly maintained by monitor . Entries in running queue include a job identifier that uniquely identifies a job a job start time e.g. indicating the time at which the job was requested by a storage grid agent or other initiator and or executed by monitor a job type e.g. indicating whether the job is a backup restore or redirection a job source e.g. identifying the backup application that initiated the job and or the storage media storing the source information that will be copied by the job and a job destination e.g. identifying the storage media that acts as the destination to which information will be written by the job .

When a job completes e.g. as detected by monitor or is redirected monitor can update catalog . Catalog contains information e.g. metadata about the physical location i.e. storage node s of a backup file chunk or other logical set of information. Catalog permits dispatcher to map between logical sets of information and the corresponding physical storage nodes e.g. when selecting storage nodes to act as sources for a restore job . Catalog can be stored on a storage device that is part of and or accessible to the computing device that implements redirection module .

While the example of shows a centralized catalog that provides a centralized repository for the metadata describing the location of each portion of each backup other embodiments can be implemented differently. For example in one alternative embodiment the metadata can be distributed throughout the grid computing system.

At a first storage node is selected. The first storage node can be selected by a redirection module. In particular a dispatcher within a job management module of a redirection module can select the first storage node. Selection of the first storage node can be dependent upon the amount of space available on the first storage node as well as other considerations e.g. the number of jobs running on and or waiting to run on that storage node the data rate and or data rate limit of that storage node and the like .

At a connection is established between the backup application and a first storage node. Establishing the connection can involve facilitating the writing of information which is a copy of the information being backed up by the backup to the first storage node. Operation can be performed by a storage grid agent.

At the amount of space available on the first storage device is monitored. Monitoring the amount of space available can involve repeatedly e.g. at prespecified intervals or continuously ascertaining the amount of free i.e. unutilized space remains on the first storage device. Operation can be performed by a redirection module and or a node specific monitoring module within the storage node itself e.g. the node can signal the redirection module if certain conditions involving the amount of available space arise .

At a determination is made as to whether the available space on the first storage device is less than a threshold amount. Operations and can be repeated until the backup completes as indicated at .

If the available space monitored at is less than a threshold amount the backup is redirected. Redirecting the backup involves selecting a next storage node as shown at and then establishing a connection between the backup application and the next storage node as shown at . Operation can be performed by a redirection module e.g. a dispatcher within a job management module in the redirection module can perform this operation and operation can be performed by a storage grid agent.

In some embodiments the second connection can include the first direction. For example when a backup is redirected from a first storage node to a second storage node the redirection can be effected by establishing a new connection between the first storage node and the second storage node such that backup information generated by the backup application can now be written to the second storage node via a second connection that includes the original first connection with the first storage node and the new connection between the first storage node and the second storage node.

To avoid any loss of information the backup may be paused as soon as the amount of space available on the first storage node is determined to be less than the threshold amount. The backup can resume i.e. pausing of the backup can cease as soon as the connection with the next storage node is established.

Upon completion of the backup metadata mapping the backup information generated by the backup to each storage node selected to store the backup information e.g. by operations and is generated as shown at . This metadata can be generated by one or more monitors within a job management module of a redirection module and stored in a catalog.

In the embodiment of second and subsequent connections are established in response to detection of a situation requiring redirection. In alternative embodiments instead of waiting until a situation requiring redirection arises to establish a connection with a second or subsequent storage node the redirection module or another system component can establish connections with all of the nodes that can potentially store backup information at the time that the backup request is detected or at some other time prior to detecting the need to redirect the backup . For example such connections can be established by configuring all nodes that can potentially store backup information for a given backup to receive network traffic addressed to a particular multicast address and then causing the backup information generated as part of the backup to be sent to this multicast address. Alternatively the backup information can be sent to a broadcast address that all nodes listen to.

The redirection module can then select one of the nodes that is listening to the multicast address to initially store the backup information and send the selected node a message or other signal informing that node that the receiving node should store the backup information received via the multicast connection. The other nodes will receive but not store the backup information being sent via the multicast connection. If the backup needs to be redirected the redirection module can effect the redirection by sending a message causing the first selected node to stop storing the information received via the multicast connection and causing another node that is already listening to the multicast address to begin storing the information. Thus the connections between the nodes and the backup application are established before any redirection occurs however only one of the nodes will actually be storing the backup data being sent via those connections at any time. The nodes that are not currently storing the backup information can drop or otherwise discard any backup information received via the multicast connection. It is noted that this multicasting technique for establishing connections can also be used in other environments in addition to being used in environments like those shown in .

Computing device can be a personal computer network appliance server personal digital assistant mobile phone storage controller e.g. an array controller tape drive controller or hard drive controller or the like. As illustrated computing device includes one or more processors e.g. microprocessors Programmable Logic Devices PLDs or Application Specific Integrated Circuits ASICs configured to execute program instructions stored in memory . Memory can include various types of RAM Random Access Memory Read Only Memory ROM Flash memory Micro Electro Mechanical Systems MEMS memory magnetic core memory and the like. Memory can include both volatile and non volatile memory. Computing device also includes one or more interfaces . Processor interface and memory are coupled to send and receive data and control signals by a bus or other interconnect.

Interface can include a network interface to various networks and or interfaces to various peripheral buses. For example interface can include a network interface via which redirection module receives backup requests from backup applications and or storage grid agents. Redirection module can also send requests to pause backups and to redirect backups via interface . Interface can also include an interface to one or more storage devices. For example redirection module can write new metadata to a catalog via interface .

In this example program instructions and data executable to implement all or part of redirection module are stored in memory . The program instructions and data implementing redirection module can be stored on various computer readable storage media such as memory . In some embodiments such software is stored on a computer readable medium such as a Compact Disc CD Digital Versatile Disc DVD hard disk optical disk tape device floppy disk and the like . In order to be executed by processor the instructions and data can be loaded into memory from the other computer readable storage medium. The instructions and or data can also be transferred to computing device for storage in memory via a network such as the Internet or upon a carrier medium.

Although the present invention has been described in connection with several embodiments the invention is not intended to be limited to the specific forms set forth herein. On the contrary it is intended to cover such alternatives modifications and equivalents as can be reasonably included within the scope of the invention as defined by the appended claims.

