---

title: Systems and methods for reducing cross process direction registration errors of a printhead using a linear array sensor
abstract: Systems and methods are provided for determining registration errors in the cross process direction of a printer. A first straight line is obtained by detecting line centers of a first plurality of dashes in a test pattern. A second straight line is obtained by detecting a line center positions of a second plurality of dashes in the test pattern. A difference between the off-set of the first straight line and the off-set of the second straight line is used in determining registration errors.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07543911&OS=07543911&RS=07543911
owner: Xerox Corporation
number: 07543911
owner_city: Norwalk
owner_country: US
publication_date: 20071030
---
This is a Division of application Ser. No. 10 998 544 filed Nov. 30 2004. The entire disclosure of the prior application is hereby incorporated by reference herein in its entirety.

This invention relates to systems and methods for reducing cross process direction registration errors of a printhead using a linear array sensor.

Fast printing with a direct marking engine requires the use of multiple printheads. For example four aligned printheads may be used in a printer to write to a drum rotating underneath them. Each printhead has six degrees of positional freedom three translational and three rotational. The printheads need be precisely aligned so that there is a smooth transition from one printhead to the other in the printed image.

In order to achieve a high resolution it may also be necessary for the drum of the printer to make multiple passes while the printheads are translated in the cross process direction after each rotation along the axis of the drum. In this case the transition of the printhead needs to be precise to achieve equal spacing between the centers of the printed lines during the passes.

For a printer having multiple printheads when the printheads are not precisely aligned a print defect can occur at the boundary between two printheads. An example of such print defect is x stitch defined as a displacement of the printhead in the cross process direction from its optimal spacing. Stitch can open or close a gap between the printheads and lead to a streak in the printed images. Even for small values of stitch a noticeable streak may be observed at the interface between two printheads.

Also when the drum makes multiple passes while the printheads are translated in the cross process direction after each rotation along the axis of the drum if the translation of the printheads is not precise the centers upon which image pixels are written will not be equally spaced leading to a high frequency periodic streaking in the image.

Various exemplary embodiments according to this invention provide systems and methods for aligning and controlling printheads and for reducing cross process direction registration errors of a printhead using a linear array sensor. Test patterns are used in such exemplary embodiments of systems and methods.

In one exemplary embodiment a method for detecting an x stitch error between two printheads includes printing a test pattern in a single pass consisting of process direction dashes printed using a plurality of nozzles on each side of the interface obtaining the positions of the process direction dashes in the cross process direction by processing an image collected with a linear array and calculating an appropriate linear combination of the dash positions that best eliminates the misdirection error in the dash x position and results in the x stitch.

In another exemplary embodiment a method for detecting an x interlace error includes of printing a test pattern that consists of a plurality of process direction dashes written during different passes of the print head and obtaining the positions of the process direction dashes in the cross process direction. For one test pattern consisting of a series of strips where each strip is written using the same nozzles in a different pass the x interlace is given by the mean of the differences between the cross process positions of dashes written with the same nozzle. For another test pattern consisting of a single strip with nominally equally spaced dashes written during different passes an measurement of nonequal spacing signifies a failure in the calibration of the x interlace step size.

This and other features and advantages of this invention are described in or apparent from the following detailed description of various exemplary embodiments of the systems and methods according to this invention.

Each printhead has a plurality of degrees of positional freedom. In various exemplary embodiments of the present invention each print head has six degrees of positional freedom including three translational and three rotational degrees of freedom.

As shown in a test pattern printed by the nozzles of the printheads includes a row of dashes with each dash running in the process direction vertical direction or y axis direction . The dashes are spaced apart in the cross process direction horizontal direction or x axis direction . In various exemplary embodiments the dashes are of substantially the same length. In other various exemplary embodiments the dashes are repeated in the process direction.

In various exemplary embodiments the dashes are spaced in the horizontal direction x axis direction far enough apart so that they can be distinguished by a linear array sensor. The dashes are long enough in the vertical direction y axis direction so that they can be distinguished over the substrate noise.

In various exemplary embodiments the test pattern is used to detect x axis stitch or x stitch which is a translation of the printhead in the cross process direction . In such exemplary embodiments the dashes are produced in a single pass by the nozzles of the printheads . When the printheads are precisely aligned there is a smooth transition from one printhead to the other in the image. Thus the dashes produced by the nozzles of different printheads are spaced with an equal distance in the cross process direction as shown in .

In various exemplary embodiments the test pattern is used to detect x axis stitch or x stitch which is a translation of the printhead in the cross process direction . In such exemplary embodiments the dashes are produced in a single pass by the nozzles of the printheads . When the printheads are precisely aligned there is a smooth transition from one printhead to the other in the image. Thus the dashes produced by the nozzles of different printheads are spaced with an equal distance in the cross process direction . However when the printheads are not precisely aligned a print defect can occur at the boundary between two printheads .

The linear array sensor detects along a line of response . The line of response extends in the x axis direction as shown in .

As shown in the ink and drum image includes a plurality of groups of printed dashes such as group and group . Each printed group of dashes is produced by a plurality of nozzles of a corresponding printhead . For example group of printed dashes is produced by the nozzles of printhead . Group of dashes is produced by the nozzles of printhead .

As shown in the printed dashes in group are spaced substantially equally with a distance in the cross process direction . Similarly the printed dashes in group are also spaced substantially equally with a distance in the cross process direction . In addition the distance is substantially the same as the distance .

However when 14 printhead and 16 printhead are not precisely aligned a stitch error occurs in the printed dashes. In particular as shown in the distance between the last printed dash of group the dash at the right hand side end of group and the first printed dash of group the dash at the left hand side end of group is different from the distance among the printed dashes of group .

Imperfections in the printing process may cause the intended position of the drop to differ from the actual position. Specifically if the drop does not eject normal to the orifice the actual position will vary. This error is uncorrelated for each nozzle. If only the spacing of the dashes at the interface is measured a measurement of the x stitch may be inaccurate because of the drop position error. However if x stitch is inferred from the measurement of the position of jets written by multiple nozzles then the position errors tend to cancel out and the measurement of x stitch is more accurate.

The presence of dashes changes sensor response. In particular the presence of ink on the drum can either decrease or increase the response of sensors depending on the relative colors of the ink and the drum and the texture of the ink and the drum. For the ease of discussion it is assumed that the presence of ink decreases sensor response. However it should be appreciated that the discussion below also applies when the presence of ink increases sensor response.

In various exemplary embodiments a cross section of sensor response is used to detect errors in a printed image. The cross section of the sensor response is a collection of profiles through the dashes in the test pattern. A profile includes sensor response along the cross process direction at a particular process direction location. In various exemplary embodiments the cross section is a collection of profiles through all the dashes in a test pattern. In various other exemplary embodiments the cross section is a collection of profiles through the dashes near the interface between two printhead.

In a response profile of a cross section of sensor response sensor response maxima occur at locations corresponding to positions where dashes do not exist such as the gaps between dashes. On the other hand sensor response minima occur in the response profile at positions corresponding to locations where dashes are printed. The positions of the minima are used to obtain the locations of the corresponding dashes. In various exemplary embodiments the positions of the minima are also used to obtain information of the nozzles which produced the dashes.

In various exemplary embodiments the centers of the dashes may be determined based on the cross section of sensor response using the minima in the response profile. The determination may be achieved by any existing or later developed techniques. In various exemplary embodiments the center of a dash line is determined based on an interpretation of the response data near the dash line a mid point of the line edges of a detected dash line a non linear least squares fit or a multi dimension vector under the Radar theory.

Once the x positions of a plurality of dashes are obtained an appropriate linear combination of them will result in an estimation of the true x stitch between the two printheads.

In various exemplary embodiments the measured position of a dash is extracted from the linear array signal. The expected position of the dash corresponds to the physical position of the nozzle that ejects the drop for perfect head alignment and perfect drop ejection geometry.

In various exemplary embodiments the difference between the off sets of the two straight lines and in is used to detect x axis stitch between two printheads. In such exemplary embodiments the first plurality of dashes are produced by the nozzles of the first printhead and the second plurality of dashes are produced by the nozzles of the second printhead see . When the two printheads are precisely aligned the spacing or distance between the last dash in the first plurality of dashes and the first dash in the second plurality of dashes is the same as the spacing or distance among the dashes of the first plurality of dashes or among the dashes of the second plurality of dashes see . Thus the two straight lines in will have the same off set and therefore will match to become one straight line not shown .

However when the two printheads are not precisely aligned the spacing or distance between the last dash of the first plurality of dashes and the first dash in the second plurality of dashes will be different from the spacing or distance among the first plurality of dashes or among the second plurality of dashes . Thus the two straight lines in will have different off sets. In particular as shown in there will be a mismatch between the two straight lines. Such a displacement between the two straight lines indicates the x axis stitch error.

In various exemplary embodiments each straight line in is obtained by a least squares fit. A line is described by a slope and an offset. If the position of the interface is defined as zero then the offset between the lines obtained by the least squares fit is the difference between the offsets. If N dashes are measured on the left side of the interface and N dashes are measured on the right side of the interface and the expected spacing between the dashes are all equal then the difference between the offsets can be solved analytically and that expression is

Equation 1 is a particular linear combination of the measured positions of the dashes. In this particular linear combination the dashes further from the interface have a larger contribution to the sum than the dashes closer to the interface. However the position of the dashes closer to the interface have a more significant contribution to the appearance of the image defect if there is a stitch error. A mathematical technique to increase the significance of these dashes is to perform a least squares fit by weighting the contribution of each dash according to its distance from the interface. This weighting will result in an expression similar to Equation 1 . It will also be a linear combination of the dash positions but with a different set of coefficients depending on the weights given to each dash.

In various other exemplary embodiments the x stitch is estimated by calculating the mean difference between the set of dashes on the left side of the interface and the set of dashes on the right side of the interface. As shown in . The stitch is given by

For some linear array sensors the magnification of the sensor may be unknown. It is possible to use the measured spacing between dashes to self calibrate the measurement. The expected distance between adjacent dashes may be calculated from the measured position of pairs of dashes on the same side of a print head interface. One particular embodiment of calculating the dash spacing is illustrated in . The arrows below the test pattern indicate one particular way to measure the average spacing between dashes. The length of each arrow corresponds to the dash spacing and the tip of each arrow is below the dash being measured. The mean of the arrow lengths divided by N 2 gives the nominal dash spacing.

The stitch error changes the spacing between dashes measured on opposite sides of the interface. There may be a number of combinations of dashes that may be used to estimate these quantities. In one exemplary embodiment each dash contributes once to the sum. When there are N printed dashes on the left side of the interface and N printed dashes on the right side of the interface the determination of the expected dash spacing is made based on the arrows above the test pattern shown in . The mean of all the arrow lengths above the test pattern should equal N times the expected dash spacing. The presence of a gap between the print heads will increase the spacing between dashes on opposite sides of the interface. The difference between the expected spacing between dashes across the print head and the measured spacing gives the x stitch. In the exemplary embodiment shown in estimate of this quantity is obtained by averaging the spacing between all dash pairs indicated by the upper arrows in The x stitch is then given by

In various exemplary embodiments the x axis stitch is determined based on an average of results from multiple measurements. Such average may smooth out noises such as errors introduced by misdirectionality of nozzles.

Then in step S an appropriate linear combination of the dash x positions are calculated to obtain the x stitch error. The weights of the linear combination are derived from the algorithm to estimate x stitch most accurately in the presence of drop misdirectionaility within a predetermined accuracy.

In step S a determination is made whether to adjust a printhead or printheads. If it is determined in step S to adjust a printhead or printheads operation continues to step S. If not operation proceeds to step S.

In step S the printhead or printheads is adjusted to reduce correct eliminate or minimize errors. Then operation continues to step S.

In step S a determination is made whether to detect errors again. If it is determined in step S to detect errors again operation jumps back to step S where the detection process gets repeated. If not operation proceeds to step S where operation of the method ends.

The drum of a printing device may make multiple passes to achieve high resolution. The drum makes multiple passes while the printheads are translated after each rotation along the axis of the drum. When the translation of the printhead is not precise the spacing or distance between the centers upon which the image pixels are written will not be equally spaced leading to a high frequency periodic streaking in the image.

In various exemplary embodiments a test pattern is used to detect whether the printhead is precisely translated when the drum makes multiple passes. As shown in the test pattern includes a plurality of dashes each dash running in the process direction . The dashes are written using N passes where N is the number of passes required to make a complete image. In various exemplary embodiments the dashes are far enough apart in the cross process direction so that the centers can be individually distinguished by a sensor. The dashes are long enough in the process direction so that they can be distinguished over the substrate noise.

In the exemplary embodiment shown in the test pattern contains dashes from six passes with a interlace pattern of a pass to pass translation scheme 1 6 3 5 2 4 1 6 3 5 2 4. Accordingly the pass 1 to pass 6 spacing or distance is 7 6 times the corresponding nozzle spacing or distance . It should be appreciated that other numbers of passes and other pass to pass translation schemes may also be used.

When the translation of the printhead is precise the spacing between the dashes of different passes are substantially the same. However when the translation of the printhead is not precise the spacing will not be the same leading to an x axis interlace error.

The presence of a random drop misdirectionality may make the determination of an interlace error less precise. In another embodiment of a test pattern according to the present invention the same nozzles are used to write the test pattern during each pass as shown in . Because the drop misdirectionaility is the same for the dashes being compared it does not introduce an error in the determination of the interlace.

As shown in the test pattern includes a plurality of strips . Each strip contains a plurality of dashes each dash running in the process direction . The number of strips is equal to the number of passes used in printing a full image. Each pass is printed using the same nozzles. In various exemplary embodiments the dashes are far enough apart in the cross process direction so that the centers can be individually distinguished by a sensor. The dashes are long enough in the process direction so that they can be distinguished over the substrate noise.

When the translation of the printhead is precise the average spacing between the dashes in the different strips will be as intended. When the translation of the printhead is not precise the spacing will be measured different as intended leading to an x axis interlace error.

For the test pattern as shown in when the motion from pass to pass is as intended and drop misdirectionality is absent then the dashes would be equally spaced. When the motion from pass to pass is not as intended but there is significant drop misdirectionality then the motion error may not be significant enough to affect image quality. When the motion from pass to pass is not as intended and exceeds the magnitude of the drop misdirectionality then streaking from this error would occur. To determine if this latter condition is met then the average spacing between adjacent pairs of dashes written during the same two passes is calculated. In various exemplary embodiments when the range of these set of numbers significantly exceeds the distribution tails of the misdirection of the dashes then the control to the motor is modified so the intended displacement is achieved.

In the exemplary test pattern shown in xis the position of dash number i counting from the strip printed during pass j. The average spacing between a dash in pass j j1 and a corresponding dash in pass j j2 is given by

In some exemplary embodiments different print heads are controlled by different motors. In these embodiments the dashes corresponding to each print head are summed separately and a motion of each print head is calculated independently.

In some exemplary embodiments the spatial calibration of the linear array sensor is known. For these embodiments the measured displacement for each pass is compared to the intended displacement. If the difference is too large then the control to the motor is modified so the intended displacement is achieved.

In other exemplary embodiments the spatial calibration of the linear array sensor is not known. For these embodiments the spacing between the dashes in the test pattern is used to scale the position measurements. In various exemplary embodiments when the test pattern dashes are spaced 12 450 inch apart and a step size of 4 450 of an inch is desired then it is determined if the strips are offset by of the spacing between dashes in the strip.

In various exemplary embodiments the x axis stitch is determined based on an average of results from multiple measurements. Such average may smooth out noises such as errors introduced by misdirectionality of nozzles.

Next in step S step sizes are calculated from combinations of X positions. If the test pattern is a multiple strip test pattern then in step S the displacements between dashes printed with the same nozzles for different passes are averaged to obtain the motion for each step and for each print head. If the test pattern is a single strip test pattern then in step a set of displacements between adjacent dashes corresponding to the same pass numbers are calculated. Then in step S the measured calculated step sizes are compared to desired step sizes.

In step S a determination is made whether to adjust the target step sizes. If it is determined in step S to adjust a the target step size operation continues to step S. If not operation proceeds to step S.

In step S the target step size is adjusted to reduce correct eliminate or minimize errors. Then operation continues to step S.

In step S a determination is made whether to detect the step sizes again. If it is determined in step S to detect errors again operation jumps back to step S where the detection process gets repeated. If not operation proceeds to step S where operation of the method ends.

In various exemplary embodiments the printhead alignment system is implemented on a programmable general purpose computer. However the printhead alignment system can also be implemented on a special purpose computer a programmed microprocessor or microcontroller and peripheral integrated circuit elements an ASIC or other integrated circuits a digital signal processor DSP a hard wired electronic or logic circuit such as a discrete element circuit a programmable logic device such as a PLD PLA FPGA or PAL or the like. In general any device capable of implementing a finite state machine that is in turn capable of implementing the flowchart show in can be used to implement the printhead alignment system .

The input output interface interacts with the outside of the printhead alignment system . In various exemplary embodiments the input output interface may receive input from the input via one or more links . The input output interface may output data to the output via one or more links .

The memory may also store any data and or program necessary form implementing the functions of the printhead alignment system . The memory can be implemented using any appropriate combination of alterable volatile or non volatile memory or non alterable or fixed memory. The alterable memory whether volatile or non volatile can be implemented using any one or more of static or dynamic RAM a floppy disk and a disk drive a writable or rewritable optical disk and disk drive a hard drive flash memory or the like. Similarly the non alterable or fixed memory can be implemented using any one or more of ROM PROM EPROM EEPROM and optical ROM disk such as a CD ROM or a DVD ROM disk and disk drive or the like.

In the exemplary embodiments of the print head alignment system the response obtaining circuit routine or application obtains a cross section of sensor response. The line center determining circuit routine or application determines line center positions of a set of dashes based on the cross section of sensor responses. The linear combination of x centers circuit routine or application obtains a metric for x stitch or x interlace based on the line center positions. The error determining circuit routine or application determines registration errors based on a difference between the off sets of two straight lines or between the offset of one line and a reference. The printhead adjusting circuit routine or application adjust a printhead or printheads to reduce or correct errors.

In operation of the exemplary embodiments of the printhead alignment system shown in the response obtaining circuit routine or application under control of the controller obtains cross section of sensor response from the input via the one or more links and the input output interface . The line center determining circuit routine or application under control of the controller determines the line center positions of a plurality of dashes of a test pattern based on the cross section of sensor responses. The straight line determining circuit routine or application under control of the controller determines a straight line based on the line center positions.

The error determining circuit routine or application under control of the controller determines whether there is a difference between the off sets of two straight lines or between the offset of one straight line and a reference. A difference when determined indicates a registration error. In various exemplary embodiments the difference and or its related data is output at the output via the one or more links and the input output interface . The output difference may be used to adjust or correct printhead alignment.

In various other exemplary embodiments the difference and or its related data is used for the printhead adjusting circuit routine or application to adjust a printhead or printheads to reduce or correct errors. Further in such exemplary embodiments the controller may control the various circuits routines or applications to detect errors again after adjusting the printhead or printheads.

In various exemplary embodiments the response obtaining circuit routine or application the line center determining circuit routine or application the straight line determining circuit routine or application the error determining circuit routine or application and the printhead adjusting circuit routine or application may store their respective processed data in memory . They may also access the data to be processed from the memory .

The method illustrated in may be implemented in a computer program product that can be executed on a computer. The computer program product may be a computer readable recording medium on which a control program is recorded or it may be a transmittable carrier wave in which the control program is embodied as a data signal.

In various exemplary embodiments systems such as the system shown may be included in a marking device such as a direct marking printer or the like.

While particular embodiments have been described alternatives modifications variations and improvements may be implemented within the spirit and scope of the invention.

