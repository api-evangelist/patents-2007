---

title: Information processing device, information processing method, recording medium, and program
abstract: An information processing apparatus, an information processing method, a recording medium, and a program that can run an application for playing an optical disc and an application that provides a unique function of the apparatus in cooperation with each other. A JVM converts JAVAâ„¢ bytecode into native code and executes the native code. An API library is a set of commands and functions that can be used when developing a navigation program and a set of protocols defining procedures. The navigation program is a program that reproduces data recorded on an optical disc and can control hardware of a reproducing apparatus only within the range of the API library. An application program provides a function unique to the reproducing apparatus. The navigation program and the application program execute a process in cooperation with each other using IXC.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08504607&OS=08504607&RS=08504607
owner: Sony Corporation
number: 08504607
owner_city: Tokyo
owner_country: JP
publication_date: 20070629
---
The present invention relates to an information processing apparatus an information processing method a recording medium and a program and particularly relates to an information processing apparatus an information processing method a recording medium and a program suitable for use in the case of playing a recording medium.

There is a technique of downloading via a network update data of content recorded on an optical disc mounted in a reproducing apparatus and a program for reproducing the update data as content recorded on the optical disc.

A program downloaded using the above described conventional technique is to be executed in the case where a corresponding optical disc is mounted in a reproducing apparatus and data recorded on the optical disc is reproduced.

That is when applications executable on a reproducing apparatus are provided to users using optical discs processes executed by the applications provided in association with the individual optical discs are completed on an optical disc by optical disc basis. For example although downloading and playing bonus tracks corresponding to the individual optical discs can be performed it has been difficult to provide a service related to a plurality of optical discs such as making it possible to download a bonus track only when movies belonging to a series are all played.

In contrast an application program embedded in a reproducing apparatus has not hitherto been adapted to perform different processes depending on the mounted optical disc.

In addition operating a function of an apparatus using an application program included in content has hitherto been done. In such a case the provider of content has provided an application program with which similar operations are executed on all apparatuses that play the content. In particular since content provided to users via broadcasting is created assuming that basically the same screen is similarly displayed on any receiver no content has been created to provide to users specific services only on specific apparatuses. Accordingly a content provider can provide content of the same quality to users without depending on specific apparatuses. In contrast an apparatus provider has difficulty in differentiating apparatuses.

Further with regard to program content and a corresponding application that have hitherto been provided using an optical disc or provided via a wired cable such as a cable television or wirelessly using broadcasting waves or the like and an application included in a reproducing apparatus one operating the other has been done. However it has not been assumed that the individual applications cooperatively perform a process.

Note that in MHP Multimedia Home Platform which is the data broadcasting standard defined by the European standardization organization DVB Digital Video Broadcasting it has been defined to deliver a JAVA registered trademark applet using an empty slot of digital broadcasting. In this case the life of an application is managed by an application manager and an AMT Application Management Table transmits application information. Therefore the life of an application does not depend on the frame of a program and an application can exist over multiple programs. However even in this case a delivered application is provided assuming that the delivered application is to be similarly executed on all receiving apparatuses and it has not been assumed that the delivered application is to be executed in cooperation with an application that is included in a predetermined apparatus and is not necessarily executed similarly on all receiving apparatuses in other words not essential .

The present invention has been made in view of such circumstances and makes it possible to execute an application that is executable when a predetermined recording medium is mounted in an apparatus that is an application that is provided in association with a recording medium and is essential to play the recording medium and an application that is included in the predetermined apparatus and is not necessarily executed similarly on all apparatuses in other words not essential in cooperation with each other.

An information processing apparatus of one aspect of the present invention is an information processing apparatus that reproduces data recorded on a mounted recording medium including one or a plurality of storage means for storing information and execution means for executing a first application that is an essential application for reproducing data recorded on the recording medium the first application being an application stored on the mounted recording medium or any of the storage means in association with the mounted recording medium and realizing a first function of processing the data recorded on the recording medium and a second application that is stored in any of the storage means and realizes a second function different from the first function. The execution means executes the first application and the second application in cooperation with each other by mutually exchanging information using inter first application communication.

The second application may be adapted to be associated with the at least one predetermined recording medium. The execution means may be configured to detect when executing the first application the second application associated with the recording medium having recorded thereon the first application or being associated with the first application and activate the detected second application.

The second application may be adapted to be associated with identification information for identifying the at least one predetermined recording medium.

The execution means may be configured to treat when the recording medium is mounted a region that is included in a storage region of the storage means and stores information associated with the mounted recording medium and a recording region of the mounted recording medium as one data storage region and activate the first application stored in any portion of the data storage region.

The second application may be adapted to be associated with the at least one predetermined recording medium. The execution means may be configured to detect using the first application activated by mounting the recording medium the second application associated with the recording medium and activate the detected second application.

The second application may be adapted to be associated with identification information for identifying the at least one predetermined recording medium.

A storage region including a first region storing information associated with the at least one recording medium and a second region storing the second application the second region being different from the first region may be adapted to be set in any of the plurality of storage means.

The execution means may be configured to treat by executing the first application the first region storing the information associated with the mounted recording medium and a recording region of the mounted recording medium as one data storage region.

Obtaining means for obtaining program content data may be further provided. The storage means may be configured to store the second application included in the program content data obtained by the obtaining means.

The execution means may be configured to include a virtual machine environment execute the first application and the second application on the virtual machine and further execute a third application that is not executed on the virtual machine. The second application may be adapted to exchange information with the third application using inter second application communication.

The third application may be adapted to be an application that can be executed independently of the first application.

The execution means may be configured to execute the first application and the second application on a JAVA registered trademark Virtual Machine which is the virtual machine.

The first application and the second application may be adapted to be executed in cooperation with each other by mutually exchanging information using Inter Xlet communication as the inter first application communication.

The second application may be adapted to exchange information with the third application using JAVA registered trademark Native Interface.

The execution means may be configured to further execute a third application that can be executed independently of the first application. The second application may be adapted to exchange information with the third application using inter second application communication.

The execution means can execute a plurality of the second applications and by executing the predetermined second application may be configured to control obtaining of the different second application based on information recorded on the mounted first recording medium.

The execution means may be configured to control by executing the predetermined second application obtaining of the different second application from another apparatus via a network. The information recorded on the mounted first recording medium may be adapted to include address information of the other apparatus in the network.

The execution means which executes the second application obtained via the network may be configured to execute a predetermined authentication process by exchanging information with the other apparatus.

The execution means which executes the second application obtained via the network may be configured to execute a process of copying at least a portion of the data recorded on the first recording medium to the second recording medium which is different from the first recording medium based on a predetermined copyright protection framework.

An information processing method of one aspect of the present invention is an information processing method for an information processing apparatus that reproduces data recorded on a mounted recording medium. The information processing apparatus can execute a plurality of applications. A first application that is an essential application for reproducing data recorded on the recording medium the first application being an application stored on the mounted recording medium or any of one or a plurality of storage units in association with the mounted recording medium and realizing a first function of processing the data recorded on the recording medium and a second application that is stored in any of the storage units and realizes a second function different from the first function are executed in cooperation with each other by mutually exchanging information using predetermined inter application communication on the virtual machine.

According to the information processing apparatus and method of one aspect of the present invention a first application that is an essential application for reproducing data recorded on the recording medium the first application being an application stored on the mounted recording medium or any of one or a plurality of storage units in association with the mounted recording medium and realizing a first function of processing the data recorded on the recording medium and a second application that is stored in any of the storage units and realizes a second function different from the first function are executed in cooperation with each other by mutually exchanging information using predetermined inter application communication.

A program of one aspect of the present invention is a program for causing a computer to execute a process of reproducing information recorded on a recording medium the process including the steps of realizing a first function of processing data recorded on the recording medium detecting among other programs that are stored in any of one or a plurality of predetermined storage units and that realize a second function different from the first function the other program associated with itself activating the detected other program and exchanging information with the other program using predetermined inter application communication and executing a predetermined operation.

The first function may be adapted to include a function of treating when the recording medium is mounted a region that is included in storage regions of the storage units and stores information associated with the mounted recording medium and a recording region of the mounted recording medium as one data storage region.

The computer may be configured to include a virtual machine environment and the program may be adapted to be executed together with the other program on the virtual machine.

According to the program of one aspect of the present invention a first function of processing data recorded on a recording medium is realized. Among other programs that are stored in one or a plurality of predetermined storage units and realize a second function different from the first function another program associated with itself is detected. The detected other program is activated. Information is exchanged with the other program using predetermined inter application communication and a predetermined operation is executed.

The network refers to a scheme that connects at least two apparatuses and enables one apparatus to transmit information to another apparatus. Apparatuses that communicate with each other via the network may be independent apparatuses or may be internal blocks constituting one apparatus.

In addition communication may be not only wireless communication and wired communication but also communication in which wireless communication and wired communication are mixed that is one such that wireless communication is performed in one section and wired communication is performed in another section. Further communication may be such that communication from one apparatus to another apparatus is performed using wired communication and communication from the other apparatus to the apparatus is performed using wireless communication.

A reproducing apparatus may be an independent apparatus or may be a block that performs reproduction in a recording reproducing apparatus or a picture recording reproducing apparatus. A recording apparatus or a picture recording apparatus may be an independent apparatus or may be a block that performs a recording process or a picture recording process in a recording reproducing apparatus or a picture recording reproducing apparatus. Also a recording reproducing apparatus or a picture recording recording reproducing apparatus may be an independent apparatus or may be a block that performs a predetermined process in an information processing apparatus including many functions 

According to the present invention a plurality of applications can be executed. In particular two applications are cooperatively executed using predetermined inter application communication. Therefore a first application that is essential to play the recording medium and a second application that controls a process not directly related to playback of the recording medium can be cooperatively executed and the degree of freedom of functions that can be provided on an apparatus by apparatus basis is increased.

A controller expands in a memory a navigation program described later stored in a local storage and executes the navigation program or the controller controls an optical disc drive to read out a navigation program recorded on an optical disc expands the navigation program in the memory and executes the navigation program thereby controlling an operation of playing the optical disc mounted in the recording reproducing apparatus . In addition the controller can control obtaining of an application program or a navigation program via an Internet interface or a removable medium to store the obtained application program or navigation program in the local storage . Additionally the controller can expand the application program or the navigation program in the memory and execute the application program or the navigation program.

Further the controller can execute a navigation program for reproducing information recorded on the mounted optical disc an application program that is executable in cooperation with the navigation program and an embedded application that is solely executable regardless of whether or not the optical disc having recorded thereon the navigation program is mounted in the recording reproducing apparatus . At least a portion of each of the navigation program and the application program is adapted to be capable of running on a multi platform due to the mounting of a virtual machine such as JAVA registered trademark . Also the embedded application may be adapted to be capable of running only in an execution environment of the controller or to be capable of running on a multi platform due to the mounting of a virtual machine.

In addition when both the application program stored in the local storage or the memory and the navigation program recorded on the optical disc or in the local storage can run on similar virtual machines and when an inter application communication function is provided the controller expands each of them in the memory and runs them in cooperation with each other whereby the controller can control the operation of the recording reproducing apparatus .

Under control of the controller the optical disc drive reads out data from the optical disc outputs the read data to the controller the memory or a transcoder and records a signal supplied from the memory the local storage or the transcoder onto the mounted optical disc . When information read out from the optical disc is a navigation program a PlayList or the like the information read out by the optical disc drive is output to the controller or the memory . When information read out from the optical disc is an AV stream or text data the information read out by the optical disc drive is output to the transcoder .

The application format has two layers a PlayList and a Clip for managing an AV Audio Visual stream. Here a pair of one AV stream or item of text data and Clip Information that is information accompanying the AV stream or text data is regarded as one object and these are collectively referred to as a Clip. Hereinafter a data file of an AV stream is referred to as an AV stream file. In addition a data file of Clip Information is referred to as a Clip Information file.

In general a file used in a computer or the like is handled as a byte sequence. Content in an AV stream file is expanded on a time axis and an access point in a Clip is mainly designated by a PlayList using a timestamp.

When an access point in a Clip is indicated by a PlayList using a timestamp the Clip Information file is used to find based on the timestamp address information at which decoding should begin in the AV stream file.

A PlayList is a set of items of information indicating playback sections of an AV stream. Information indicating one playback section in an AV stream is called a PlayItem. A PlayItem is represented by a pair of an IN point playback start point and an OUT point playback end point of a playback section on the time axis. Therefore a PlayList is constituted of as shown in one or a plurality of PlayItems.

In a first PlayList which is shown first from the left is constituted of two PlayItems. With these two PlayItems reference is made to a first half portion and a second half portion of an AV stream included in a first Clip shown on the left side. In addition a second PlayList which is shown second from the left is constituted of one PlayItem. With this reference is made to the whole AV stream included in a second Clip shown on the right side. Further a third PlayList which is shown third from the left is constituted of two PlayItems. With these two PlayItems reference is respectively made to a predetermined portion of the AV stream included in the first Clip which is shown on the left side and to a predetermined portion of the AV stream included in the second Clip which is shown on the right side.

A navigation program is a program for causing the controller to execute a function of controlling the order of playing PlayLists and interactive playback of the PlayLists. In addition the navigation program has a function of displaying a menu screen for a user to designate execution of various types of playback. In addition all or at least some of the functions of the navigation program are written using a programming language executable on a multi platform due to the mounting of a virtual machine such as JAVA registered trademark . In addition among functions of the navigation program some other functions other than portions written in a programming language executable on a multi platform may be written in a programming language executable not on a multi platform but in an execution environment unique to the apparatus.

For example when the navigation program is executed by the controller and a first PlayItem included in the first PlayList shown first from the left in is designated as information indicating a playback position at that time the first half portion of the AV stream included in the first Clip shown on the left side to which the PlayItem refers is played.

Also the PlayLists described using may be adapted to include information of a Sub path designated using a Sub Play Item as shown in in addition to a Main Path designated by a PlayItem. SubPlayItem is defined as follows. For example an independent data stream that is not multiplexed with a Clip e.g. an MPEG2 transport stream designated by a PlayItem can be played in synchronization with playback of the AV stream.

For example by preparing subtitle related information constituted of a text subtitle file and a font file needed for rendering and a SubPlayItem designating a playback section of the subtitle related information in association with a Clip AV stream at a Main Path designated by a PlayItem subtitles corresponding to data written in the text subtitle file can be displayed using a display font based on font data written in the font file on a display device simultaneously with playback of the Clip AV stream. Alternatively for example by preparing audio data for dubbing in a different language and a SubPlayItem corresponding to the audio data for dubbing in association with a Clip AV stream at a Main Path designated by a PlayItem the audio data for dubbing in the different language can be reproduced and output simultaneously with playback of the Clip AV stream.

In this manner a SubPlayItem and corresponding data clip may be recorded in advance on the optical disc downloaded as additional data update data via a network from a server or obtained using a removable medium . Details of the case where such additional data is downloaded from the server will be described later using .

The memory appropriately stores data and programs needed for the controller to execute various processes. The local storage is constituted of for example an HDD Hard Disk Drive or the like.

The Internet interface is connected via cable or wirelessly to the network . Under control of the controller the Internet interface communicates with the server via the network and supplies data a navigation program an application program or the like downloaded from the server to the local storage . From the server for example data for updating data that is recorded on the optical disc mounted in the recording reproducing apparatus at that time and has been described using is downloaded as content. The local storage can record the content downloaded from the server via the network .

The transcoder decodes an AV stream or text data supplied from the optical disc drive or the local storage and outputs the obtained video signal and audio signal to an external display device. In the display device on the basis of the signals decoded by the transcoder for example an output of the content recorded on the optical disc displaying of video and outputting of audio is performed. In addition the transcoder can perform format conversion of an AV stream or text data supplied from the optical disc drive or the local storage into a predetermined format that is execute a decoding process and then encode the format converted AV stream or text data in a predetermined format. The transcoder can again supply the encoded AV stream or text data to the optical disc drive and record the encoded AV stream or text data on the mounted optical disc needless to say this may be a disc different from the optical disc from which the format converted data was read out .

An operation input unit is constituted of input devices such as buttons keys a touch panel a jog dial and a mouse and a receiver that receives signals such as infrared ray signals sent from a predetermined remote commander. The operation input unit obtains a user operation input and supplies the user operation input to the controller .

In addition the controller is also connected to a drive according to need. The removable medium constituted of for example a magnetic disk including a flexible disk an optical disc including a CD ROM Compact Disk Read Only Memory and a DVD a magneto optical disk including an MD registered trademark Mini Disk a semiconductor memory or the like is mounted onto the drive .

Note that the recording reproducing apparatus may be provided with a module that is not described here or may be connected to another apparatus and be configured to be capable of cooperatively performing a process. For example a function of receiving broadcast waves a function of connecting to a cable television network and the like may be added to the recording reproducing apparatus shown in whereby the recording reproducing apparatus is configured to be capable of obtaining so called program content or the like. A function of recording the obtained program content or the like on a predetermined recording medium an example of which is described later using may be added to the recording reproducing apparatus or another apparatus having such a function may be connected to the recording reproducing apparatus thereby making it possible to control with the controller processes of obtaining program content or the like recording it and the like. On this occasion an application program that controls the function of receiving broadcast waves and the function of connecting to a cable television network that is an application program that executes a process different from a process of reproducing content data recorded on the mounted optical disc or downloaded data stored in the local storage in association with the optical disc is stored in the memory or the local storage and executed by the controller .

Also when the function of receiving broadcast waves the function of connecting to the cable television network and the like are added to the recording reproducing apparatus shown in and the recording reproducing apparatus is thus configured to be capable of obtaining so called program content or the like various applications executable by the controller may be downloaded together with broadcast waves and installed in the memory or the local storage .

Next a method of reproducing data recorded on the optical disc mounted in the recording reproducing apparatus and data stored in the local storage will be described.

The recording reproducing apparatus contains the local storage constituted of an HDD Hard Disk Drive or the like. The recording reproducing apparatus is connected via cable or wirelessly to the network and can record content downloaded from the server via the network in the local storage . From the server for example data for updating content such as a movie recorded on the optical disc mounted in the recording reproducing apparatus at that time can be downloaded.

In a state in which downloaded content is recorded in the local storage when an instruction to play content recorded on the optical disc is given from the operation input unit the controller executes a process of associating the content recorded on the optical disc with the content recorded in the local storage and playing these items of content.

Here a method of playing content recorded on the optical disc and content recorded in the local storage in association with each other will be described using .

For example it is assumed that the optical disc is a packaged medium on sale and an item of movie content is recorded on the optical disc . It is also assumed that only an English text subtitle file is recorded on the optical disc as a subtitle data file that can be superimposed and displayed on video of the movie content.

For example in an AV stream of a Clip referred to by PlayItems in a PlayList which is recorded on the optical disc is a stream for displaying video of the movie content and playing corresponding audio. Subtitle related information of a Clip referred to by a SubPlayItem in the PlayList is a text subtitle file for displaying English subtitles together with displaying of the video.

In this case when a user wishes to view the movie content recorded on the optical disc while displaying subtitles in a language different from English since no subtitle data in a language different from English has been recorded on the optical disc if nothing is done the user cannot view the movie while displaying subtitle data in a language different from English.

Therefore the user causes the recording reproducing apparatus to download or obtain using the removable medium a text subtitle file in a desired language of the movie recorded on the optical disc from the server via the network . A state in which a text subtitle file in Arabic for example which has not been recorded in advance on the optical disc is downloaded or copied from the removable medium to the local storage will be described.

That is when the user gives an instruction to download a text subtitle file in Arabic which corresponds to the PlayList recorded in advance on the optical disc it is assumed in the recording reproducing apparatus that access is to be gained to the server and updating of the content recorded on the optical disc is to be performed and a file prepared in the server is downloaded.

In the example in a Clip constituted of a text subtitle file in Arabic subtitle related information and a Clip Information file accompanying the text subtitle file a PlayList file Updated PlayList file that can control reproducing and displaying of subtitle data of the corresponding Clip in addition to for example a video Clip and an audio Clip AV stream data of the movie content and the English text subtitle file which are recorded in advance on the optical disc and a new navigation program file that has been updated compared with that recorded on the optical disc are downloaded and these are recorded in the local storage .

Note that besides the PlayItems indicating main paths a SubPlayItem and a SubPlayItem indicating sub paths are added to the Updated PlayList. The PlayItems in the Updated PlayList are adapted to refer to the Clip including the AV stream recorded on the optical disc . The SubPlayItem is adapted to refer to the Clip including the subtitle related information recorded on the optical disc . The SubPlayItem is adapted to refer to the Clip including the subtitle related information which is the text subtitle file in Arabic which has been downloaded together with the Updated PlayList from the server .

The new navigation program in is adapted to be capable of designating together with the PlayItems in the Updated PlayList the SubPlayItem or SubPlayItem as a playback section. Accordingly for example of English subtitles defined by the text subtitle file in English which has been recorded in advance on the optical disc or Arabic subtitles defined by the text subtitle file in Arabic which has not been recorded in advance on the optical disc subtitles in a language desired by the user can be displayed in association with desired video and audio data.

In this manner with the downloading from the server or the copying from the removable medium the recording reproducing apparatus is enabled to reproduce and display either the Clip which is the English text subtitle file or the Clip which is the Arabic text subtitle file and has not been prepared in advance in the optical disc as subtitles of the movie. That is the user can view the movie with subtitles in a desired language English or Arabic by selecting a desired language from displayable subtitle languages described on a menu screen displayed on the display device.

Note that the AV stream recorded on the optical disc has the structure of an MPEG2 Moving Picture Experts Group 2 transport stream such as that shown in . The MPEG2 transport stream is constituted of an integer number of Aligned units. An Aligned unit has a size of 6144 bytes bytes and starts with the first byte of a source packet. A source packet has a 192 byte length. One source packet consists of a TP extra header and a transport packet. A TP extra header has a 4 byte length and a transport packet has a 188 byte length. One Aligned unit consists of 32 source packets. Data in a video stream and an audio stream is packetized into an MPEG2 PES Packetized Elementary Stream packet. The PES packet is packetized into a transport packet.

Also it is described here that the whole navigation program executed by the controller and application programs executable in cooperation with the navigation program are written using the JAVA registered trademark language. However these programs are similarly executable even in the case where they are written using any programming language such as C or Visual Basic as long as the programming language can run on a virtual machine that is the programming language can run on a multi platform. Also embedded applications which are programs that control functions embedded in advance in the recording reproducing apparatus are not necessarily written using a programming language that can run on a multi platform but are preferably written using a language that makes it possible to perform inter application communication with a JAVA registered trademark Xlet such as C or C .

Drivers are items of dedicated software for activating hardware of the recording reproducing apparatus . The drivers include drivers for controlling hardware such as various motors and an optical pickup included in the optical disc drive and the drive drivers for displaying images on an externally connected display device and outputting audio from an externally connected loudspeaker a driver for controlling operations of buttons and keys provided in the operation input unit or a receiver or the like of commands from a remote commander which is not shown in the drawings a driver for controlling information exchange via the Internet interface and the like.

The OS Operation System serves as a basic operation base of the controller and is software that provides basic functions commonly used by many application programs here a navigation program and application programs through such as managing the drivers which are items of software for activating the hardware and managing the memory and the local storage recording various items of information and that manages the entire system of the recording reproducing apparatus .

An application manager is adapted to manage processes executed by a plurality of applications here the navigation program and the application programs through adapted to be executable in this software stack.

A JVM JAVA registered trademark Virtual Machine is software that converts JAVA registered trademark bytecode into native code of the platform and executes the native code. The navigation program and application programs through which are items of software developed using JAVA registered trademark are in a unique format JAVA registered trademark bytecode independent of the platform and cannot be executed as they are. Therefore the JVM executes the navigation program and application programs through by converting JAVA registered trademark bytecode into native code of the recording reproducing apparatus .

The navigation program is for example as has been described using through a program provided to reproduce data recorded on the optical disc and in the local storage and is a program for controlling processes relating to data stored on the mounted optical disc and in a region in the local storage which is associated with the mounted optical disc .

An API library is a set of commands and functions that can be used when developing the navigation program which is software running on the JVM or a set of protocols defining program related procedures for using these commands and functions. The developer of the navigation program can create software using a function thereof simply by calling the function in accordance with the protocols without programming the software by himself herself. As a specific example of API an API relating to file access will be described later.

That is the navigation program can control the hardware of the recording reproducing apparatus only within the range of the commands and functions prepared as the API library .

The application programs through are written in a programming language such as JAVA registered trademark and run on the JVM . Whereas the navigation program is basically adapted to provide a predetermined function associated with the optical disc the application programs through are application programs for providing unique functions of the recording reproducing apparatus . The application programs through may be saved in advance in the local storage in the recording reproducing apparatus may be installed using the optical disc or the removable medium or may be downloaded via the network and installed.

In the following description when it is unnecessary to distinguish the individual application programs through the application programs through are simply referred to as the application programs .

Middleware is adapted to operate on the OS and to provide specific functions that are more advanced than the OS to the embedded applications which may be adapted to be executed in the unique environment of the recording reproducing apparatus controller in contrast to the multi platform. Note that the embedded applications may be written in a language that can run in a virtual machine environment such as JAVA registered trademark . In that case the middleware becomes substantially the JVM .

The embedded applications are adapted to be executable on the middleware regardless of whether or not the optical disc having recorded thereon the navigation program is mounted in the recording reproducing apparatus . The embedded applications are applications higher than the application programs the embedded applications are shown in the drawing so that the embedded applications are applications higher than the application programs this does not mean that a portion thereof is executable on the JVM but the embedded applications are only executable on the middleware .

Alternatively the embedded applications may be adapted to realize functions that are not directly related to a process of reproducing information recorded on the optical disc . That is the embedded applications are not programs needed for a process of reproducing content data recorded on the mounted optical disc or downloaded data stored in the local storage in association with the optical disc such as a program that controls recording of program content provided to the user via broadcast waves a cable network or the like a program that executes web browser and database processes a program that controls displaying of a display screen so called GUI serving as an assistant to the user operation input an interface in the case where information is exchanged with a predetermined server via the network or a process of recording data onto a mounted recording medium such as an optical disc.

In this manner when the embedded applications which are not essential for a process of reproducing content data recorded on the mounted optical disc or downloaded data stored in the local storage in association with the optical disc are adapted to be executable in environments other than a virtual machine environment such as JAVA registered trademark hardware and software resources that have hitherto been used or that are used in other apparatuses or the like although not corresponding to the multi platform can be diverted for use or commonly used. Therefore the development cost can be significantly suppressed.

This case here is basically similar to the case described using except that a portion of the navigation program executed by the controller and the application programs executable in cooperation with the navigation program are written using the JAVA registered trademark language and that a portion of the navigation program and the embedded applications need not necessarily be written using the JAVA registered trademark language executed on the middleware .

Even in the case with such a structure since the portion of the navigation program and the application programs which are executable in cooperation with the navigation program are written using a programming language that can run on a virtual machine that is that can run on the multi platform such as the JAVA registered trademark language inter application communication is executed using IXC and a cooperative process is executed.

Also similarly in this case when the embedded applications which are not essential for a process of reproducing content data recorded on the mounted optical disc or downloaded data stored in the local storage in association with the optical disc are adapted to be executable in environments other than a virtual machine environment such as JAVA registered trademark hardware and software resources that have hitherto been used or that are used in other apparatuses or the like although not corresponding to the multi platform can be diverted for use or commonly used. Therefore the development cost can be significantly suppressed.

In this manner the application programs can control the hardware of the recording reproducing apparatus using unique APIs different from the API library prepared for the navigation program that is an API and an API described later using . In other words the application programs can operate various parameters in the recording reproducing apparatus . Also the application programs can perform control of a system that is included in advance in the recording reproducing apparatus for realizing a specific function that is not written in JAVA registered trademark .

For example when the recording reproducing apparatus has a function of receiving broadcast programs a function of changing the channel of a broadcast program to receive a function of recording the received broadcast program a function of connecting to a wide area network such as the Internet and performing web browsing an interface function in the case of exchanging information with a predetermined server via the network or a function of recording data on a mounted recording medium such as an optical disc the embedded applications which provide these functions and the application programs capable of controlling these functions in cooperation with the navigation program can be prepared. Note that when commands and the like that control these functions are not included in the commands and functions prepared as the API library the navigation program cannot directly control these functions.

The optical disc is configured to be playable by apparatuses other than the recording reproducing apparatus as long as the apparatuses have a certain function needed to execute the navigation program and the navigation program is installed in these apparatuses. That is the navigation program and the API library for reproducing data recorded on the optical disc together with data recorded in the local storage according to need are essential applications that should be included in all apparatuses that play the optical disc . It is difficult to prepare in the API library all functions that are respectively unique to various apparatuses that play the optical disc i.e. all functions other than the certain function needed to execute the navigation program . Therefore it is highly likely that APIs relating to functions that are not essential for a process of playing the optical disc functions unique to the recording reproducing apparatus are not prepared in the API library . The navigation program cannot directly control the functions unique to the recording reproducing apparatus .

In other words even when the application programs and the embedded applications do not exist the recording reproducing apparatus can execute a process of playing the optical disc . Specifically for example even an apparatus not provided with as the functions unique to the recording reproducing apparatus the function of receiving broadcast programs the function of recording obtained program content the database function the web browsing function and the like or an apparatus that has no function of recording data to the mounted recording medium i.e. that has only a playback function can play the optical disc as long as an environment in which the navigation program is executable is provided.

Also the embedded applications are applications that are solely executable independent of the navigation program . Alternatively the application programs may conversely be adapted to run only when in cooperation with the navigation program . The navigation program and the embedded applications can be executed completely independent of each other. In order that the navigation program and the embedded applications be executed in cooperation association with each other the application programs must be provided therebetween.

The navigation program in the case where the application programs and the navigation program are adapted to run in cooperation with each other is adapted to be capable of detecting and activating the application programs which are saved in the local storage or the memory and which run in cooperation with itself. That is for example at least one item of identification information for identifying the optical disc e.g. disc id or content id described later at least one item of identification information for identifying the provider of the content e.g. org id described later or the like that is when the application programs are adapted to run in cooperation with a plurality of navigation programs a plurality of items of identification information are associated with the application programs . The navigation program is adapted to detect and activate the application programs associated with the predetermined identification information and to execute an operation in cooperation with the application programs .

Alternatively for example the application programs may be adapted to be activated by a user operation input. Even in such a case the application programs are adapted to run in cooperation with the navigation program . Also for example one or a plurality of items of identification information for identifying the optical disc e.g. disc id or content id described later one or a plurality of items of identification information for identifying the provider of the content e.g. org id described later or the like can be associated with the application programs .

Also the application programs and the navigation program or a portion of the navigation program running on the JVM can be configured as JAVA registered trademark Xlets and communication between these applications is executed using IXC Inter Xlet Communication .

Further mutual inter application communication between the multiple application programs running on the JVM is also executed using IXC.

An Xlet is an application execution model whose specification has been defined using profiles of a PBP Personal basis Profile and a PP Personal Profile . An Xlet is originally defined in JAVA registered trademark TV which is a JAVA registered trademark execution environment specification for television set top boxes. Inter Xlet communication that is IXC specification has been added to the specification and the specification defines an Xlet as an application model on a CDC Connected Device configuration .

An Xlet execution environment supports simultaneous execution of multiple Xlets. Since the individual Xlets use independent class loaders the individual Xlets cannot directly refer to the other Xlets. IXC is defined for exchanging information between the multiple Xlets. A specific example in the case where information is exchanged using IXC between Xlets that is between the application programs and the navigation program and a cooperative process is executed will be described later using through .

Next is a diagram for describing relations between description languages and applications in the individual items of application software represented in the software stack described using and .

That is at least a portion of the navigation program is written in JAVA registered trademark and another portion of the navigation program may be written in another language. The navigation program controls a function group that is essential for a process of reproducing content data recorded on the mounted optical disc or downloaded data stored in the local storage in association with the optical disc e.g. including various functions realized by the drivers such as a playback controlling function group and a display controlling function block basically by calling a method from the API library . Also in the navigation program a portion written in another language may be adapted to directly control the function group using a predetermined command.

In the recording reproducing apparatus in order to play optical discs of a plurality of types provided by various content authors or in order to make the individual optical discs to be playable not only by the recording reproducing apparatus but also by recording reproducing apparatuses reproducing apparatuses or the like provided by various manufacturers there is a need for a standard or protocols pursuant to the standard to which the content authors providing the optical discs and the manufacturers providing the reproducing apparatuses including the recording reproducing apparatus conform.

That is in order to execute a process of reproducing content data recorded on the optical disc mounted in the recording reproducing apparatus or downloaded data stored in the local storage in association with the optical disc using the navigation program associated with the optical disc i.e. in order to control the function group which is essential for a playback process an API library method in the case of calling a method in the API library or a command in the case of directly issuing a command needs to be defined by the standard or protocols pursuant to the standard .

In contrast since the application program which is activated by the navigation program runs in cooperation with the navigation program by performing inter application communication using IXC and is written in JAVA registered trademark is not essential for a playback process the application program need not conform to the standard or protocols pursuant to the protocol .

Therefore the application program prepares the unique API libraries and different from the API library and accordingly the application program can access the function group whish is essential for a playback process and can access a function group that is included in the recording reproducing apparatus and is not essential for a playback process. Further the application program can access the embedded applications which are local functions of the recording reproducing apparatus using JNI JAVA registered trademark Native Interface .

The embedded applications which are local functions of the recording reproducing apparatus include for example an embedded application that controls a web browsing function so called web browser an embedded application that controls a picture recording function an embedded application that controls a data library function e.g. so called database software or a part of the function thereof an embedded application that controls functions relating to a GUI display screen and obtaining of a user operation entered by a user who refers to the GUI display screen and the like.

Note that the embedded applications have been described here as being written in another language different from JAVA registered trademark . Needless to say however the embedded applications may be written in JAVA registered trademark . In that case the application program and the embedded applications execute inter application communication using IXC. In other words the application program which is not required to conform to the standard or protocols pursuant to the standard for playing the optical disc on a reproducing apparatus or the like is adapted to be capable of performing inter application communication regardless of whether the embedded applications are written in another language different from JAVA registered trademark or are written in JAVA registered trademark . In contrast the navigation program which is required to conform to the standard or protocols pursuant to the standard cannot perform inter application communication with the embedded applications .

In some cases the versions of these embedded applications are updated. Since it is normally the case that these embedded applications are commonly used in a plurality of information processing apparatuses or the like and that the embedded applications are designed assuming in advance that the versions thereof are to be updated it is often the case that the versions of the embedded applications are updated without changing interfaces with the OS and other applications. Therefore even when the versions of the embedded applications are updated if the interface with the application program is not changed the inter application communication function with the application program is maintained. Therefore even when the versions of the embedded applications which are used in the case where the navigation program and the application program run in cooperation with each other are updated similar processing can be executed without changing the navigation program and the application program .

Specifically for example in the embedded application which controls the functions relating to the GUI display screen for example by determining in advance a class library regarding scrolling of the screen a method of selecting and determining an icon or the like obtaining of a user operation entered by a user who refers to the GUI display screen or the like even when the versions of the embedded applications are updated similar processing can be executed without changing the navigation program and the application program .

With such a structure when a predetermined apparatus is configured to be controllable from a remote place by supplying a control program that directly controls functions included in the predetermined apparatus supplying a command for a control program that has already been installed in the predetermined apparatus or the like using various recording media or wired or wireless communication that is unlike the case where a single application is merely executed in the predetermined apparatus since a program supplied from the outside here the navigation program and an application that has already been installed in the apparatus here the application program in some cases substantially including the embedded applications run in cooperation with each other it is possible to provide the recording reproducing apparatus which can provide a service unique to the apparatus in association not solely with the apparatus but with the optical disc while conforming to the standard or protocols pursuant to the standard defined so that content associated with the optical disc can be played by various reproducing apparatuses or the like.

Each structure in is realized by executing using the controller the navigation program prepared in advance or recorded on the optical disc .

An operation input obtaining unit obtains a signal indicating an operation input from the user which has been input from the operation input unit and outputs the signal indicating the operation input from the user to a corresponding unit s among a menu screen display control unit a data obtaining unit a local storage directory management unit or a reproducing control unit .

The menu screen display control unit displays on an external display device a menu screen including buttons operated by the user when selecting audio the language of subtitles and the angle of video of content recorded on the optical disc buttons operated by the user when selecting an update file to download and a file to delete and the like.

The data obtaining unit controls communication performed using the Internet interface in or information exchange with the removable medium using the drive . For example the data obtaining unit downloads and obtains from the server an update file designated by the user and outputs the obtained file to the local storage directory management unit . In addition the data obtaining unit receives supply of information indicating a necessary file from a file system merge processing unit described later downloads and obtains the necessary file from the server and outputs the obtained file to the local storage directory management unit .

The local storage directory management unit manages a directory of the local storage and controls writing of data into the local storage reading of data from the local storage and deletion of data from the local storage . For example a PlayList that has been read out from the local storage under control of the local storage directory management unit is output to the memory and audio data and video data in an AV stream and text data in a text subtitle file which are read out from the local storage are output to the transcoder . In addition when merging of the file system of the optical disc and the file system of the local storage is to be performed by the file system merge processing unit the local storage directory management unit outputs information regarding the file system of the local storage to the file system merge processing unit .

An optical disc directory management unit detects and manages the directory of the optical disc and controls reading of each item of data from the optical disc . On the optical disc organization id which is identification information hereinafter may also be referred to as org id disc id and according to need content id are set. Under control of the optical disc directory management unit org id and disc id content id according to need read out from the optical disc are output to the data obtaining unit and the local storage directory management unit . In addition a PlayList that has been read out from the local storage under control of the optical disc directory management unit is output to the memory and audio data and video data in an AV stream and text data in a text subtitle file which are read out from the optical disc are output to the transcoder . In addition when merging of the file system of the optical disc and the file system of the local storage is to be performed by the file system merge processing unit the optical disc directory management unit outputs information regarding the file system of the optical disc to the file system merge processing unit . A description of org id disc id and content id will be given later.

The file system merge processing unit merges the file system of the optical disc which is supplied from the optical disc directory management unit and the file system of the local storage which is supplied from the local storage directory management unit to generate one virtual file system. The file system merge processing unit outputs the virtual file system generated by the merging to the reproducing control unit .

In addition when several files recorded in the local storage are deleted erased that is data is deleted the file system merge processing unit determines whether or not a failure occurs in a link structure of files in the virtual file system that is link of data for playing a Clip using a PlayList on the basis of the application format of the optical disc such as that described using through due to the deletion of the several files. When it is determined that a failure occurs in the link structure of the files in the virtual file system the file system merge processing unit extracts a file necessary to remedy the failure and supplies information indicating the necessary file to the data obtaining unit so as to enable the data obtaining unit to download the necessary file.

Further for example when files that are not played by any PlayList occur not designated by all PlayLists in the virtual file system due to the deletion of the several files recorded in the local storage the file system merge processing unit can instruct the local storage directory management unit to delete such unnecessary files.

Note that whether or not to delete unnecessary files that occur due to deletion of several files may be set by the user.

The reproducing control unit executes the navigation program designated by the virtual file system supplied from the file system merge processing unit and controls playback of content. Specifically the reproducing control unit refers to a PlayList supplied to and stored in the memory controls the local storage directory management unit or the optical disc directory management unit to read out audio data and video data in an AV stream and according to need text data in a text subtitle file which are recorded on the optical disc or in the local storage on the basis of the virtual file system and controls the transcoder in to perform decoding playback of the audio data and video data in the AV stream and according to need the text data in the text subtitle file which are recorded on the optical disc or in the local storage .

An application program cooperation processing control unit detects whether or not at the time of executing the navigation program the application program to be executed in cooperation with itself exists. When the application program to be executed in cooperation with itself exists the application program cooperation processing control unit exchanges information with the application program using an IXC control unit and executes a predetermined operation. A specific example of a process executed by the application program cooperation processing control unit will be described later using through .

The IXC control unit is configured to control the above described IXC and has an interface function between the navigation program and the application program . That is the IXC control unit controls sending of data or parameters obtained by the process executed with the functions of the operation input obtaining unit through the reproducing control unit to the application program specifically binding to IxcRegistry and controls reception of information from the application program specifically looking up IxcRegistry . Further the IXC control unit also has an interface function between the plurality of application programs .

An application program execution processing unit controls execution of the application program . A JNI control unit has a JNI based interface function between the application program and the embedded applications . An embedded application execution control unit controls execution of the embedded applications . In addition when the embedded applications are not executed inside the recording reproducing apparatus and are executed by another apparatus connected to the recording reproducing apparatus the embedded application execution control unit may be adapted to control processes executed by the other external apparatus.

Next using through merging performed by the file system merge processing unit in the navigation program of a file system of the optical disc and a file system that manages a data group recorded in the local storage by downloading from the server copying from the removable medium copying from the optical disc or the like will be described.

Merging of the file systems is performed when for example the optical disc is mounted in the recording reproducing apparatus when an instruction to play content recorded on the optical disc is given when an instruction to input output any item of data recorded on the optical disc or in the local storage is given when an instruction for merging is given by the user or the like.

A virtual file system is defined as an upper layer of a native file system of the system of the recording reproducing apparatus file system of data actually recorded on the optical disc or in the local storage . That is as shown in only the virtual file system which is the upper layer can be recognized by the navigation program which executes a process of downloading new data from the server and recording the new data in the local storage or reproducing data actually recorded on the optical disc or in the local storage or by the user who handles the navigation program . In other words the virtual file system is constructed to make the native file system abstract and to conceal the native structure such as a physical device and the operating system in the recording reproducing apparatus .

The role of the virtual file system is mainly to mount a file directory in the physical device the optical disc or the local storage to construct a file system of a virtual disc recognized by the user and to provide to the navigation program a file access API for the constructed virtual disc.

For example when the user performs an operation input to request access to any file recorded on the optical disc or in the local storage as shown in the navigation program can recognize only the virtual file system.

A local file system or a local file system recorded on the optical disc or in the local storage which is the actual physical device or the structure of the file system in the optical disc is concealed from the navigation program and the user who handles the navigation program and is configured to be accessible via the virtual file system.

In order to execute a file access request shown in the navigation program in the recording reproducing apparatus calls a file input output API Application Programming Interface provided by the virtual file system thereby making the data actually recorded on the optical disc or in the local storage accessible without being conscious of the physical structure of the disk drive the software structure of the file system and the like. That is the API of the virtual file system is actually calling the API of the native file system in the recording reproducing apparatus .

The virtual file system provides various APIs APIs included in the API library in . APIs such as open that opens a designated file close that closes a designated file seek that sets a reading position or writing position of a designated file stat that obtains the state of a designated file read that reads out a designated file write that writes a designated file are provided. When the navigation program is being executed that is when the functions described using are being realized the reproducing control unit uses these APIs to operate a file recorded on the optical disc or in the local storage .

Also the virtual file system has a function of splitting and managing a disk region of the local storage . In the disk region of the local storage a storage region for a file group managed by the navigation program has for example a directory structure split for each org id as shown in . Below disc id which is a directory immediately below org id a flexible file directory structure can be constructed by a content author provider of the content . Where in the disk region of the local storage data to be stored in the local storage is to be located that is the file directory structure of a file to be downloaded is designated by a description of file management information Manifest file described later included in data to be downloaded.

In the file directory structure of the local storage org id which splits the directory is an identifier for use in constructing a virtual file system in a corresponding optical disc and disc id is an identifier for identifying each item of content associated with the same org id and is used to construct a virtual file system in a corresponding optical disc as in org id. org id and disc id are items of information included in file management information Manifest data described later of data downloaded via the network or detected from the optical disc by the optical disc directory management unit .

org id may be given for each organization or group such as the provider of content content author or the manufacturer of content. Alternatively a plurality of organizations or groups may use one org id. Alternatively one organization or group may use a plurality of org ids. In addition when it is assumed that one item of content is recorded on one optical disc one disc id is associated with the one optical disc . Alternatively for example a plurality of items of content may be recorded on one optical disc and disc ids may be associated with the individual items of content. Alternatively when a plurality of items of content are recorded on one optical disc one disc id may be associated with the one optical disc and content ids different from disc id may be associated with the individual items of content. That is content id is an identifier for identifying content. In this manner regardless of how org id and disc id are used the virtual file system is constructed on the basis of individual ids. Details of file management information Manifest file org id and disc id will be described later using .

In contrast the directory file structure of the virtual disc accessible from an application is adapted to conform to the directory file structure of the optical disc . That is the file structure of data below org id and disc id corresponding to the optical disc mounted in the recording reproducing apparatus is merged with the file structure of data recorded on the optical disc thereby constructing a virtual file system of a virtual disc having a directory file structure based on the directory file structure of the optical disc .

In addition the virtual file system has a function of managing besides a directory and file management scheme file management information that is a Manifest file described later in increments of a disc. There are three purposes for defining by the virtual file system for the file model of the native file system the field of a Manifest file which is file management information as metadata to provide instead of providing to the user a path or file name of a file actually recorded in the local storage a name representing the contents of content to the user to prevent double updating of the same file in a downloading process and to define a path name in the virtual file system that is a path name at the time of playing the optical disc .

The virtual file system provides two functions for metadata management a Manifest file and a metadata operation procedure. A Manifest file is metadata indicating various properties of a downloaded file. Manifest may be saved in increments of a corresponding file or Manifest sections may be merged into one file and set to be identifiable using manifest id described later in which is the identifier of a Manifest section as a key. Regardless of any format here they are collectively referred to as a Manifest file. The recording reproducing apparatus holding a file that has been downloaded to the local storage must hold a Manifest file. Also a Manifest file may be represented as text using a tagged language represented by XML.

organization id org id is a field for designating an identifier used to construct a virtual file system in a corresponding optical disc. This identifier is determined by referring to the org id field of a content distribution file which will be described later using . An application program or the user cannot freely set a value in this field.

disc id is a field for designating an identifier for uniquely identifying each optical disc or each item of content associated with the same org id. disc id is also used as in org id to construct a virtual file system in a corresponding optical disc. This identifier is determined by referring to the disc id field of a content distribution file which will be described later using . An application program or the user cannot freely set a value in this field.

Next permission is a field for designating by a content author permission information indicating whether or not to make the property visible or invisible to a user whether or not to forbid overwriting of the file or the like. Note that information in permission may be written in any file other than the Manifest file or configured as an independent file.

As shown in when 0x00 is written in the 8 bit field of permission the property of a file accompanied with this metadata is an invisible property to the user. When 0x01 is written in the 8 bit field of permission the property of a file accompanied with this metadata is a visible property to the user. When 0x02 is written in the 8 bit field of permission the property of a file accompanied with this metadata is an overwriting forbidden property.

src file name is a field for designating a path name representing a so called path that specifies a file using information that can uniquely designate in the disk region of the local storage where in the directory structure in the file system of a storage region managed by the navigation program this file is to be recorded that is a file position in the hierarchical structure of the file system of the local storage . It is assumed that the names of files and directories for representing a path name are encoded in accordance with the ISO IEC 646 standard.

dst file name is a field for designating a path name representing a so called path that specifies a file using information that can uniquely designate in a binding destination in the virtual disc of a file actually stored in the local storage where in the directory structure this file is to be recorded that is a file position in the hierarchical structure of the virtual file system. It is assumed that the names of files and directories for representing a path name are encoded in accordance with the ISO IEC 646 standard.

When a file designated by src file name exists below directories with different org ids information for checking a file access permission is written in credential. Accordingly a content file can be shared in directories below a plurality of org ids in the local storage .

The virtual file system defines an API for reading out the contents of Manifest without publicizing the file name file position physical structure or the like of Manifest to the navigation program or the user.

That is the navigation program or a resident program executed by software embedded in advance in the recording reproducing apparatus can indirectly access Manifest by calling the following API.

Note that actually detailed definitions of the API such as type information must be changed depending on the specification of the programming language of the software execution environment of the recording reproducing apparatus .

Below root of the optical disc a directory whose name has been set to BDMV is prepared. In that directory a file whose name has been set to Info.bdmv and a file whose name has been set to MovieObjects.bdmv are stored. Hereinafter these files are appropriately referred to as an Info file and a MovieObject file respectively. In addition each file is appropriately referred to by adding file to the file name or each directory is appropriately referred to by adding directory to the directory name .

The Info file includes information regarding a menu for playing the optical disc . The recording reproducing apparatus displays a playback menu screen on the display device on the basis of the Info file the playback menu screen including items whose contents include for example playing the whole content on the optical disc playing only a specific chapter performing repeated playback displaying an initial menu and the like. A MovieObject to be executed when each item is selected can be set in the Info file. When one item is selected by the user from the playback menu screen the recording reproducing apparatus executes the command of the MovieObject set in the Info file.

The MovieObject file is a file including MovieObjects. A MovieObject includes a command that controls playback of a PlayList recorded on the optical disc that is a command issued by the navigation program . For example the recording reproducing apparatus can play content recorded on the optical disc by selecting and executing one from among MovieObjects recorded on the optical disc .

Further a MovieObject includes various commands needed to execute a process in cooperation with the application program . Specifically for example a command that inquires as to whether or not the application program executed in cooperation with the navigation program is installed in the recording reproducing apparatus a command that activates the application program when the application program executed in cooperation with the navigation program is installed in the recording reproducing apparatus and the like are included in a MovieObject.

In the BDMV directory additionally a directory whose name has been set to BACKUP BACKUP directory a directory whose name has been set to PLAYLIST PLAYLIST directory a directory whose name has been set to CLIPINF CLIPINF directory a directory whose name has been set to STREAM STREAM directory and a directory whose name has been set to AUXDATA AUXDATA directory are provided.

In the BACKUP directory files and data for backing up files and data recorded on the optical disc are recorded.

In the PLAYLIST directory PlayList files are stored. Each PlayList file is given a name obtained by adding the extension .mpls to a file name consisting of a 5 digit number as shown in the drawing.

In the CLIPINF directory Clip Information files are stored. Each Clip Information file is given a name obtained by adding the extension .clpi to a file name consisting of a 5 digit number as shown in the drawing.

In the STREAM directory Clip AV stream files and sub stream files are stored. Each stream file is given a name obtained by adding the extension .m2ts to a file name consisting of a 5 digit number as shown in the drawing.

In the AUXDATA directory files of data that are not included in Clip AV stream files or sub stream files and are referred to by Clip AV stream files or sub stream files files of data used independently of Clip AV stream files or sub stream files and the like are stored. In the example in in the AUXDATA directory a subtitle font file to which the name 11111.otf has been given and sound effects to which the name sound.bdmv has been set are stored.

In addition org id disc id and according to need content id which are identifiers are recorded on the optical disc as secure electronic data that cannot be rewritten by the user or the like or recorded physically using pits.

Below root of the local storage at least one directory whose name has been set to org id is prepared. Below the org id directory at least one directory whose name has been set to disc id is prepared. org id and disc id are used to construct a virtual file system. All disc ids included in individual org ids below root of the local storage are made different from one another so as to be distinguishable from one another. The disc id directory includes a Manifest file consisting of a set of Manifest sections or one Manifest section. The structure of other directories and files can be freely set by the content author. For example this may be similar to the directory file structure of the optical disc described using or as shown in totally different from the directory file structure of the optical disc described using .

For example in in the disc id directory besides the Manifest file a plurality of folders such as the MainMovie directory the SubTitle directory and the AUXDATA directory are set. These directories may further include folders or files.

The directory file structure of the local storage shown in is concealed from the navigation program executed by the recording reproducing apparatus or from the user.

For example in the Manifest section described using when the path name MainMovie movie01 main.r1.jp.mp2 is designated in the src file name field and the path name STREAM 01002.m2ts is designated in the dst file name field downloaded data is recorded as shown in with the file name main.r1.jp.mp2 in the movie01 directory in the MainMovie directory below corresponding org id and disc id in the local storage . In the virtual file system in the virtual disc this is treated as a file with the file name 01002.m2ts in the STREAM directory.

In this manner the content author can designate in the src file name field of the Manifest section of a downloaded file package a path name in the local storage and can designate in the dst file name field a path name in the virtual file system in the virtual disc. Therefore when the path name adapted to the virtual file system in the virtual disc is set in the dst file name field the content author can freely set the file directory structure below disc id of data actually recorded in the local storage in the recording reproducing apparatus and can add a new directory or file to regions below disc id.

Also when downloading the actual file if the dst file name field in the Manifest section is left empty that file cannot be referred to from an application program executed in the recording reproducing apparatus that is the existence of the file cannot be recognized from an application program executed in the recording reproducing apparatus or the user . That is the actual file is stored in the local storage and the file is correctly recognized in the file system of the local storage. However by leaving the dst file name field empty that file is regarded as not existing in the virtual file system and can be concealed from an application program executed in the recording reproducing apparatus or from the user.

Using this for example the actual file is downloaded while leaving the dst file name field of the Manifest section empty. At a future day a Manifest section that has the same Manifest id and has a predetermined path name in the virtual file system written in the dst file name field is newly downloaded thereby overwriting the Manifest section. Accordingly at the timing at which the new Manifest section was downloaded this can be handled by an application program executed in the recording reproducing apparatus in a manner similar to the case where the actual file was downloaded.

In this way for example by allowing a plurality of bonus tracks to be simultaneously downloaded or by simultaneously distributing a plurality of bonus tracks using a predetermined recording medium or the like and by subsequently allowing only the Manifest section in which the dst file name field is written so that the different bonus tracks can be recognized by an application to be downloaded and overwritten at predetermined times a service that adds bonus tracks at different times can be provided to a user without requiring a large capacity of data to be frequently downloaded.

In addition the scheme of synchronizing binding the actual file systems in the optical disc and the local storage and the file system of the virtual disc may be a so called static binding scheme or a dynamic binding scheme. Alternatively a new API for updating the virtual file system e.g. update may be defined and when the API is explicitly called by a user operation or an application program the virtual file system may be updated.

Note that static binding is adapted to at the point at which the optical disc is mounted in the recording reproducing apparatus or at the timing at which a playback title is switched refer to the actual file systems in the optical disc and the local storage and map the directory file structure of the virtual file system and dynamic binding is adapted to search for a necessary file at the point at which a file input output request is issued.

It is preferable that the directory file structure of the virtual disc be adapted to match the directory file structure of the optical disc as has been described above. In many cases the directory file structure of the optical disc is determined in advance by a standard or the like and is unchangeable. It is more preferable that the structure of directories and files in the actual file system in the local storage be freely settable by the content author. Therefore when the directory file structure of the virtual disc is adapted to be settable on the basis of the directory file structure of the optical disc which is unchangeable while the degree of freedom of data distributed by the content author is maintained a playback process conforming to the standard such as the application format of the optical disc can be executed which is preferable.

Below root in the directory file structure of the virtual disc shown in a directory whose name has been set to BDMV is prepared. In that directory a file whose name has been set to Info.bdmv and a file whose name has been set to Movieobjects.bdmv are stored.

The Info file includes information regarding a menu for playing content that is recorded on the optical disc and in the local storage and is treated by an application program as being recorded on the virtual disc. The recording reproducing apparatus displays a playback menu screen on the display device on the basis of the Info file the playback menu screen including items whose contents include for example playing the whole content treated as being recorded on the virtual disc playing only a specific chapter performing repeated playback displaying an initial menu and the like. A MovieObject to be executed when each item is selected can be set in the Info file. When one item is selected by the user from the playback menu screen the recording reproducing apparatus executes the command of the MovieObject set in the Info file.

The MovieObject file is a file including MovieObjects. A MovieObject includes a command that controls playback of a PlayList treated as being recorded on the virtual disc that is a command issued by the navigation program . For example the recording reproducing apparatus can play content treated as being recorded on the virtual disc by selecting and executing one from among MovieObjects treated as being recorded on the virtual disc. Further a MovieObject includes various commands needed to execute a process in cooperation with the application program .

In the BDMV directory additionally a directory whose name has been set to BACKUP BACKUP directory a directory whose name has been set to PLAYLIST PLAYLIST directory a directory whose name has been set to CLIPINF CLIPINF directory a directory whose name has been set to STREAM STREAM directory and a directory whose name has been set to AUXDATA AUXDATA directory are provided.

In the BACKUP directory files and data for backing up files and data treated as being recorded on the virtual disc are recorded.

In the PLAYLIST directory PlayList files are stored. Each PlayList file is given a name obtained by adding the extension .mpls to a file name consisting of a 5 digit number as with the case of the optical disc .

In the CLIPINF directory Clip Information files are stored. Each Clip Information file is given a name obtained by adding the extension .clpi to a file name consisting of a 5 digit number as with the case of the optical disc .

In the STREAM directory Clip AV stream files and sub stream files are stored. Each stream file is given a name obtained by adding the extension .m2ts to a file name consisting of a 5 digit number as with the case of the optical disc .

In the AUXDATA directory files of data that are not included in Clip AV stream files or sub stream files treated as being recorded on the virtual disc and are referred to by Clip AV stream files or sub stream files files of data used independently of Clip AV stream files or sub stream files and the like are stored.

Note that in the menu screen provided to the user information indicating a file is normally a name designated in the display name field. For example the directory file structure in the virtual disc which has been described using is not concealed from the navigation program other applications or the user. Depending on applications executed in the recording reproducing apparatus there is no problem in presenting the directory file structure in the virtual disc to the user.

Next using the definition of a content distribution file format at the time a content author distributes content will be described. The file format at the time of distributing content may be individual distribution in increments of a content file or as shown in an archive format including metadata Manifest .

Note that a Package header section and a Package Body section in the archive may be represented by text using a tagged language represented by XML.

Note that when a content author individually distributes content in increments of a file the metadata Manifest is treated as an independent binary file or text file. That is anticipating the directory structure after addition an appropriate state must be written in Manifest associated with content distributed in increments of a file.

compression type is a field for designating the compression format of data in Package Body . When 0 is designated in this field data in Package Body is regarded as being in the non compressed format.

encryption type is a field for designating the scramble scheme encryption scheme of data in Package Body . When 0 is designated in this field data in Package Body is regarded as being in the non scrambled plaintext format.

Note that scramble and compression of data in Package Body are performed in the order of 1. Compression process and 2. scramble process.

After archive data is downloaded the Manifest section may be saved in the local storage in increments of a corresponding downloaded file in increments of an item of archive data or Manifest sections may be merged into one file and set to be identifiable using manifest id which is the identifier of a Manifest section as a key.

organization id org id is a field for designating an identifier used to construct a virtual file system in a corresponding optical disc.

disc id is a field for designating an identifier for identifying each optical disc or each item of content associated with the same org id. That is this archive is update data corresponding to content on the optical disc designated by disc id.

permission is a field for designating by a content author permission information indicating whether or not to make the property visible or invisible to a user whether or not to permit overwriting of the file or the like. Values that can be designated in Permission are the same as those described using . Note that information in permission may be written in any file other than the Manifest file or configured as an independent file.

src file name is a field for designating the path name of a file that should be recorded in the local storage as has been described using . It is assumed that file directory names are encoded in accordance with the ISO IEC 646 standard.

dst file name is a field for designating the path name of a file at a binding destination in the virtual disc virtual file system as has been described using . It is assumed that file directory names are encoded in accordance with the ISO IEC 646 standard.

When a file designated by src file name exists below directories with different org ids information for checking a file access permission is written in credential. Accordingly a content file can be shared in directories below a plurality of org ids in the local storage .

Data in the content distribution file format such as that described using is downloaded and in the recording reproducing apparatus is merged with data recorded on the mounted optical disc thereby constructing a virtual file system in a virtual disc. Accordingly a user who plays content recorded on the optical disc using the recording reproducing apparatus feels as if for example a bonus track or audio or display subtitles in a different language were added to the content recorded on the optical disc and updated.

When content configured in accordance with the above described file format is to be updated for example in the virtual file system described using new data files are downloaded and bound so that an information file Info.bdmv a movie object file Movieobjects.bdmv a playlist file .mpls a clip information file .clpi a stream file or AUX data file .m2ts bdmv .otf and the like are added or updated. In order that these files are downloaded and played in association with content recorded on the mounted optical disc which has been mounted an addition of MainPath an addition of SubPath and the like are executed.

Note that at the time of adding or updating a file when a file saved in advance in the local storage and a newly obtained file have the same file name if the property written in permission permits file overwriting overwriting copy is executed if the property written in permission does not permit file overwriting overwriting copy is not executed. In that case even when a file copying process is not executed the file name may be changed and a file copying process may be executed. Alternatively when the file name of a newly obtained file is not the same file name of any file saved in advance in the local storage the file is newly added and stored in the local storage .

Note that AV stream data other than that with the above described file structure may be recorded on the optical disc decoded and reproduced by the transcoder and format converted and recorded on another optical disc . However regarding AV stream data other than that with the above described file structure a virtual file system cannot be constructed using a file downloaded into the local storage . Therefore when AV stream data other than that with the above described file structure is recorded on the optical disc the user who uses the recording reproducing apparatus cannot handle the data so as to add a file recorded on the optical disc or to update a portion thereof.

In addition in order to dispense the recording reproducing apparatus from executing PlayList file editing files needed for addition updating may be packaged in advance at a data distribution source content author and files may be downloaded on a disc by disc basis that is in increments of data in a directory indicated by Disc id .

In this manner in the recording reproducing apparatus for example new data having a structure such as that shown in is downloaded from the server via the network and stored in the local storage on the basis of the path name indicated in src file name written in Manifest which is metadata. A path in the virtual file system is set on the basis of the path name indicated in dst file name written in Manifest . An application in the recording reproducing apparatus e.g. the navigation program which performs a playback process is adapted to be capable of processing data recorded on the optical disc and data recorded in the local storage on the basis of the virtual file system that is the path indicated in dst file name without distinguishing between the two.

That is in the recording reproducing apparatus upon receipt of an instruction to add data download instruction corresponding Manifest files may be all the Manifest files or some of the Manifest files are sent to the server via the network and a list of items of content that can be currently added is obtained from the server . An application program presents to the user the list of items of content that can be added and the user selects content to download from the presented list.

When the user selects content to download an application that can execute a process of downloading data from the server e.g. this may be the same as or separate from an application program that can execute a data adding process or a data reproducing process starts downloading data.

When downloading is completed a downloaded file package group is mounted on the virtual file system using the navigation program which manages the file system and the native file system and the virtual file system are synchronized using static binding dynamic binding or the like.

Next with reference to the flowcharts in through with execution of the navigation program in the recording reproducing apparatus processes needed to reproduce information recorded on the optical disc and information stored in the local storage by newly obtaining a file from the outside storing the file in the local storage and constructing a virtual file system will be described.

First with reference to the flowchart in an adding and updating process on a file by file basis will be described.

In step S the operation input obtaining unit of the navigation program executed by the controller determines on the basis of a signal supplied from the operation input unit whether or not a command to start an adding process on a file by file basis that is a process of adding a file included in the directory indicated by a predetermined disc id is received from a user. When it is determined in step S that no command to start a file adding process has been received the processing in step S is repeated until it is determined that a command to start a file adding process is received.

When it is determined in step S that a command to start a file adding process is received in step S the local storage directory management unit controls the data obtaining unit to access the server via the Internet interface and the network and sends information indicating the current state of the virtual file system such as Manifest id of a corresponding Manifest section.

In step S the data obtaining unit controls the Internet interface to determine whether or not information corresponding to a list of files that can be downloaded has been received from the server via the network .

When it is determined in step S that no information corresponding to a list of files that can be downloaded has been received in step S the menu screen display control unit performs control to display an error message for notifying the user of the fact that the file adding process is impossible and the process is terminated.

When it is determined in step S that information corresponding to a list of files that can be downloaded has been received in step S the data obtaining unit supplies the information corresponding to a list of files that can be downloaded which has been sent from the server and received by the Internet interface to the menu screen display control unit . The menu screen display control unit displays on the display device a menu screen adapted to enable the user to select a desired one from the list of files that can be downloaded.

In step S the operation input obtaining unit determines whether or not a button icon or the like of the menu screen controlled to be displayed with the processing performed by the menu screen display control unit has been operated by the user to select an item to add. When it is determined in step S that no item to add has been selected the processing in step S is repeated until it is determined that an item to add has been selected.

When it is determined in step S that an item to add has been selected in step S the operation input obtaining unit supplies information indicating the contents of update selected by the user to the data obtaining unit . The data obtaining unit controls the Internet interface to send information indicating a requested file to the server and requests download of the file selected by the user.

In step S the data obtaining unit controls the Internet interface to download a PlayList file a ClipInformation file a ClipAV stream file an audio file a text subtitle stream file a font file or the like which is prepared by the server as a download file and notifies the local storage directory management unit that these files have been downloaded.

In step S the local storage directory management unit determines on the basis of org id and disc id included in Manifest of the downloaded file whether or not a directory identified by these IDs already exists in the local storage . When the corresponding directory already exists the downloaded data file is expanded in that directory. When the corresponding directory does not exist a new directory designated by org id and disc id is created in the local storage and the downloaded data file is expanded.

With such a process an update file can be downloaded from the server recorded in the local storage and treated as an update file of content recorded on the optical disc .

That is with such a process a virtual file system that enables for example a user who purchased the optical disc on which content such as a movie is recorded to obtain a file needed to display subtitles in a language that has not been recorded in advance on the optical disc or a file needed to view a bonus track and to store the obtained file in the local storage additionally that enables the navigation program which executes a playback process to handle data recorded on the optical disc and data stored in the local storage without distinguishing between the two and that can conceal the physical storage of data from the user or the navigation program can be constructed.

Downloading of an update file such as that described above may be performed at a cost or free of charge.

In step S the local storage directory management unit extracts the corresponding disc id directory from the downloaded data group recorded in the local storage and supplies the disc id directory to the file system merge processing unit .

In step S the file system merge processing unit refers to src file name and dst file name in the Manifest file.

In step S the file system merge processing unit binds the native file system and the virtual file system on the basis of src file name and dst file name referred to in step S.

Specifically a path name representing a so called path which is information that can uniquely designate in the file system of the local storage where in the directory structure this file is to be recorded is designated in src file name. A path name representing a so called path which is information that can uniquely designate in a biding destination in the virtual disc of the file which is actually to be stored in the local storage where in the directory structure this file is to be recorded is designated in dst file name.

For example in the Manifest section described using when the path name MainMovie movie01 main.r1.jp.mp2 is designated in the src file name field and the path name STREAM 01002.m2ts is designated in the dst file name field downloaded data is recorded in the local storage as has been described using with the file name main.r1.jp.mp2 in the movie01 folder in the MainMovie folder below corresponding org id and disc id. In the virtual file system in the virtual disc the file system merge processing unit binds this data so as to be treated as a file with the file name 01002.m2ts in the STREAM directory.

The content author can designate in the src file name field of the Manifest section of a downloaded file package a path name in the local storage and can designate in the dst file name field a path name in the virtual file system in the virtual disc. Therefore when the path name adapted to the virtual file system in the virtual disc adapted to the file system of the optical disc is set in the dst file name field the content author can freely set the file directory structure below disc id of data actually recorded in the local storage in the recording reproducing apparatus and can add a new directory or file to regions below disc id.

Next with reference to the flowchart in an adding and updating process on a disc by disc basis will be described.

In step S the operation input obtaining unit of the navigation program executed by the controller determines on the basis of a signal supplied from the operation input unit whether or not a command to start an adding process on a disc by disc basis that is a process of adding a file below disc id of data actually to be recorded in the local storage is received from a user. When it is determined in step S that no command to start a file adding process has been received the processing in step S is repeated until it is determined that a command to start a file adding process is received.

When it is determined in step S that a command to start a file adding process has been received in step S the local storage directory management unit of the controller controls the data obtaining unit to access the server via the Internet interface and the network and to send information indicating the current state of the virtual file system such as Manifest ids of all Manifest sections included in Manifest files below the corresponding disc id.

In step S the data obtaining unit controls the Internet interface to determine whether or not information corresponding to a list of files that can be downloaded on a disc by disc basis has been received from the server via the network .

When it is determined in step S that no information corresponding to a list of files that can be downloaded on a disc by disc basis has been received in step S the menu screen display control unit performs control to display an error message for notifying the user of the fact that the file adding process is impossible and the process is terminated.

When it is determined in step S that information corresponding to a list of files that can be downloaded has been received in step S the data obtaining unit supplies the information corresponding to a list of files that can be downloaded on a disc by disc basis which has been sent from the server and received by the Internet interface to the menu screen display control unit . The menu screen display control unit displays on the display device a menu screen adapted to enable the user to select a desired one from the list of files that can be downloaded.

In step S the operation input obtaining unit determines whether or not a button icon or the like of the menu screen controlled to be displayed with the processing performed by the menu screen display control unit has been operated by the user to select an item to add. When it is determined in step S that no item to add has been selected the processing in step S is repeated until it is determined that an item to add has been selected.

When it is determined in step S that an item to add has been selected in step S the operation input obtaining unit supplies information indicating the contents of update selected by the user to the data obtaining unit . The data obtaining unit controls the Internet interface to send information indicating a requested file to the server and requests download of the file s selected by the user on a disc by disc basis.

In step S the data obtaining unit controls the Internet interface to download a file group on a disc by disc basis which is prepared by the server as a download file s and notifies the local storage directory management unit that the file group on a disc by disc basis has been downloaded.

In step S the local storage directory management unit generates on the basis of org id and disc id included in Manifest of the downloaded file s a directory identified by these IDs in the local storage and expands the downloaded data on a disc by disc basis.

With such a process an update file can be downloaded from the server on a disc by disc basis recorded in the local storage and treated as an update file of content recorded on the optical disc .

That is with such a process a virtual file system that enables for example a user who purchased the optical disc on which content such as a movie is recorded to obtain a file needed to display subtitles in a language that has not been recorded in advance on the optical disc or a file needed to view a bonus track and to store the obtained file in the local storage additionally that enables the navigation program which executes a playback process or the like to handle data recorded on the optical disc and data stored in the local storage without distinguishing between the two and that can conceal the physical storage of data from the user or the navigation program can be constructed.

In addition such downloading of an update file on a disc by disc basis may be performed at a cost or free of charge as in the case in which downloading is performed on a file by file basis.

Also the process in the case where a command for downloading on a file by file basis is given by the user has been described in and the process in the case where a command for downloading on a disc by disc is given by the user has been described in . Alternatively needless to say for example the user may be allowed to give an instruction to start downloading a file without distinguishing between a file by file basis and a disc by disc basis. That is depending on whether the format of data downloaded from the server is on a file by file basis or a disc by disc basis the method of expanding by the local storage directory management unit the downloaded data in the local storage may be allowed to be changed.

Processes executed only by the navigation program such as the process of adding and updating an update data file of content and the binding process described above are basically processes executed on data files associated with the same disc id. In other words these processes are executed as processes relating to the mounted optical disc .

That is as has been described above by executing the navigation program update data corresponding to an optical disc is downloaded and the downloaded update data is stored in a path defined by corresponding org id and disc id in the local storage . Accordingly a file playing process is executed without distinguishing between storage regions defined by corresponding org id and disc id in the optical disc and the local storage . Further basically even when the same optical disc is mounted in a reproducing apparatus that is different from the recording reproducing apparatus which can execute the navigation program this reproducing apparatus is configured to execute similar processing. When a different optical disc is mounted in the recording reproducing apparatus with a different navigation program for playing this optical disc a binding process to a storage region defined by a different disc id in the local storage is executed.

In contrast when the application program is installed in the recording reproducing apparatus the navigation program and the application program can be cooperatively executed and additionally a series of processes can be executed in association with a plurality of optical discs .

Next with reference to the flowchart in a playback process and a file system constructing process will be described.

In step S the controller determines whether or not the optical disc has been mounted. When it is determined in step S that no optical disc has been mounted the processing in step S is repeated until it is determined that the optical disc has been mounted.

When it is determined in step S that the optical disc has been mounted in step S the controller executes the navigation program .

In step S the optical disc directory management unit of the navigation program reads out org id and disc id from the optical disc and supplies the read org id and disc id to the local storage directory management unit the file system merge processing unit and the application program cooperation processing control unit .

In step S the reproducing control unit of the navigation program determines on the basis of a user operation input supplied from the operation input obtaining unit whether or not an operation input to give a command to play content has been received from the user. When it is determined in step S that no operation input to give a command to play content has been received the process proceeds to step S described later.

When it is determined in step S that an operation input to give a command to play content has been received the operation input obtaining unit supplies a signal corresponding to the user operation input to the optical disc directory management unit and the optical disc directory management unit outputs org id and disc id read out from the optical disc to the local storage directory management unit . Accordingly in step S the binding process described using is executed.

In step S the reproducing control unit controls the local storage directory management unit and the optical disc directory management unit to obtain a PlayList and a SubPlayItem designated by the navigation program as a playback section read out a stream file AV file audio file text subtitle file or the like referred to by the obtained PlayList and SubPlayItem and supply the stream file to the transcoder . Here a time stamp indicated by the PlayList and SubPlayItem is converted into an address using Clip information and access is gained to the AV stream or the like.

In step S the reproducing control unit controls the transcoder to play content designated by the PlayItem.

In step S the operation input obtaining unit determines whether or not an operation input to give a command to switch a playback title content to play has been received. When it is determined in step S that no operation input to give a command to change the playback title has been received the process proceeds to step S described later.

When it is determined in step S that an operation input to give a command to change the playback title has been received the operation input obtaining unit supplies a signal corresponding to the user operation input to the optical disc directory management unit and the optical disc directory management unit outputs org id and disc id read out from the optical disc to the local storage directory management unit . Accordingly the process returns to step S and the process thereafter is repeated.

When it is determined in step S that no operation input to give a command to play content has been received or when it is determined in step S that no operation input to give a command to change the playback title has been received in step S the operation input obtaining unit determines whether or not a command to add a file has been given by the user.

When it is determined in step S that a command to add a file has been given in step S the data obtaining unit the local storage directory management unit or the like executes a process of adding a file as has been described using for example and .

When it is determined in step S that no command to add a file has been given or after the end of the processing in step S in step S the operation input obtaining unit determines whether or not a command to update the virtual file system has been given.

When it is determined in step S that a command to update the virtual file system has been given for example the API defined for updating the virtual file system e.g. update is called and in step S the binding process described using is executed.

When it is determined in step S that no command to update the virtual file system has been given or after the end of the processing in step S in step S the operation input obtaining unit determines whether or not a command to terminate the processing performed by the recording reproducing apparatus e.g. termination of the navigation program or switching off the power of the recording reproducing apparatus has been given.

When it is determined in step S that no command to terminate the processing performed by the recording reproducing apparatus has been given the process returns to step S and the process thereafter is repeated. When it is determined in step S that a command to terminate the processing performed by the recording reproducing apparatus has been given the process is terminated.

With such a process data recorded in advance on the optical disc and data downloaded from the server and stored in the local storage are bound at a predetermined timing to construct a virtual file system and content is played on the basis of the virtual file system.

Note that here it has been described that binding is performed after the file adding process has been executed. Needless to say binding is also performed after a file deletion process has been performed.

In addition since org id and disc id are read out from the optical disc and supplied to the application program cooperation processing control unit in step S in step S the controller can execute a cooperative process of the application program and the corresponding navigation program .

In addition here it has been described that the cooperative process described later using is executed prior to the binding process and the content playing process. Needless to say the cooperative process may be executed at any timing during the execution of the navigation program . That is the cooperative process described later using can be executed at a timing desired by the creator or provider of the navigation program on the basis of descriptions of the navigation program .

In addition the controller can control the operation of the recording reproducing apparatus by expanding in the memory the application program stored in the local storage and the navigation program recorded on the optical disc and running the application program and the navigation program in cooperation with each other.

Referring to cooperation between the application program and the navigation program will be described.

As has been described above the controller can execute either of an application that can run on a multi platform due to the mounting of a virtual machine such as JAVA registered trademark and an application that can run only in an execution environment of the controller . However functions that can be provided only by embedded applications in the recording reproducing apparatus are limited.

In addition in the recording reproducing apparatus as has been described above the virtual file system is constructed by the navigation program thereby making it possible to handle respective data storage regions in the optical disc and the local storage as one region.

Therefore when a JAVA registered trademark operation environment is prepared in the controller and when the navigation program is written using JAVA registered trademark and is adapted to be capable of running on the JVM as has been described using in other words when the navigation program and the application program are adapted to run in a common execution environment by preparing besides a storage region of the file system to be bound using the navigation program a region for storing another application program that can run similarly on the JVM in the local storage or the memory it is made possible to run the navigation program and the application program in cooperation with each other using IXC Inter Xlet Communication .

For example when the navigation program and the application program are not applications that can run on the multi platform due to the mounting of the virtual machine since the application program which can provide unique functions of the recording reproducing apparatus is designed on the basis of a software platform of a reproducing apparatus that can play the optical disc and is provided by each manufacturer in order to run the navigation program and the application program in cooperation with each other it has been necessary to prepare the navigation program in association with the application program which runs on each software platform.

In other words when the navigation program and the application program are applications that can run on the multi platform due to the mounting of the virtual machine even when software platforms of reproducing apparatuses that can play the optical disc and are provided by individual manufacturers are not made common an API for activating from the navigation program recorded on the optical disc the application program which can provide unique functions of the recording reproducing apparatus can be easily provided.

That is by configuring the navigation program and the application program as JAVA registered trademark Xlets which are applications that can run on the multi platform due to the mounting of the virtual machine a cooperative process can be executed by executing communication between the navigation program and the application program using IXC. Additionally the application program can access the function group and the embedded applications which include functions embedded in advance in the recording reproducing apparatus and are not essential for a playback process by using an independent API or JNI JAVA registered trademark Native Interface .

JNI is an API for using from a JAVA registered trademark program a program of native code developed using another language e.g. C language or C language that is an API for using from a program developed using the JAVA registered trademark language a program of native code developed using another language program that can be executed as it is on a specific platform .

In addition when the application program which is an independent function of the recording reproducing apparatus that is unlike the navigation program the application program need not essentially be installed in all apparatuses that can play the optical disc is configured as a JAVA registered trademark Xlet a more flexible application environment can be configured.

Note that in the navigation program a file managed by a Manifest file is basically a file in a virtual file system defined by org id and disc id. Therefore in order that the application program and the navigation program cooperatively execute a process it is necessary to set so as to enable the application program to access a file managed by a predetermined manifest file according to need credential in the manifest file.

Specifically for example when the whole series of movies is played a bonus track may be allowed to be downloaded when a predetermined number of optical discs or more that are sold or provided by Company A have been played a game may be allowed to be downloaded free of charge. When the navigation program and the application program which are executed in a virtual file system defined by org ids and disc ids corresponding to a plurality of optical discs cooperatively execute a process credential in corresponding individual manifest files must be set to permit access to this application program .

Next with reference to the flowchart in a cooperative process of the navigation program and the application program which is executed in step S in will be described.

In step S the application program cooperation processing control unit determines whether or not to execute a process in cooperation with the application program corresponding to itself that is the navigation program . When it is determined in step S not to execute a process in cooperation with the corresponding application program the process returns to step S in and proceeds to step S.

When it is determined in step S to execute a process in cooperation with the corresponding application program in step S the application program cooperation processing control unit determines whether or not the recording reproducing apparatus is capable of executing the application program .

Specifically for example when the detected application program is to perform a process of controlling execution of a timer recording unless the recording reproducing apparatus has a picture recording function or is connected to an external picture recording apparatus and is in a state in which the recording reproducing apparatus can control a timer recording process of the picture recording apparatus the recording reproducing apparatus cannot execute the detected application program . Alternatively when the detected application program is for example to perform a process of controlling playback of a bonus track using picture in picture displaying unless the recording reproducing apparatus has a function of performing picture in picture displaying the recording reproducing apparatus cannot execute the detected application program . Alternatively when the detected application program is for example to perform a process of controlling playback of comments of the director and performers using sub voice unless the recording reproducing apparatus has a function of playing sub voice the recording reproducing apparatus cannot execute the detected application program .

When it is determined in step S that the detected application program cannot be executed the process returns to step S in and proceeds to step S.

When it is determined in step S that the detected application program can be executed in step S an application program calling process which will be described later using is executed.

In step S the application program cooperation processing control unit determines whether or not in the application program calling process in step S the calling of the detected application program was successful. When it is determined in step S that the calling of the detected application program was unsuccessful the process returns to step S in and proceeds to step S.

When it is determined in step S that the calling of the detected application program was successful in step S the application program cooperation processing control unit controls execution of itself that is the navigation program and the corresponding application program in cooperation with each other. The process returns to step S in and proceeds to step S.

With such a process the application program corresponding to the navigation program is detected and whether or not a process is executable is determined. When a process is executable and a calling process is correctly executed the navigation program and the corresponding application program are cooperatively executed.

Next with reference to the flowchart in the application program calling process executed in step S in will be described.

When inter Xlet communication is to be executed that is when IXC is to be used an object with the JAVA registered trademark .rmi.Remote interface is adapted to be registered searched for and used by using an IxcRegistry class.

In step S the IXC control unit searches for using ixcRegistry an application to call and notifies the application program cooperation processing control unit of the search result.

In step S the application program cooperation processing control unit determines whether or not the application program to call was found.

When it is determined in step S that the application to call was found in step S the application program cooperation processing control unit calls the corresponding application program . That is in the storage region of the local storage from a second storage region for storing another application program that can run on the JVM the second storage region being either a storage region different from a first storage region storing a file system to be bound by the navigation program or the storage region of the memory the application program corresponding to itself that is the navigation program is detected on the basis of org id and disc id supplied in step S in and the detected application program is expanded in the memory and activated. After the end of the processing in step S the process returns to step S in and proceeds to step S.

When it is determined in step S that the application to call was not found in step S the application program cooperation processing control unit executes an exceptional process that is determines that the calling of the application program was unsuccessful in step S in and the process returns to step S in and proceeds to step S.

With such a process the corresponding application program which can perform a process in cooperation with the navigation program is called.

Now the process of the navigation program and the application program which is executed in step S in is executed when the optical disc having recorded thereon the navigation program is mounted in the recording reproducing apparatus in which the application program is installed in advance or when the optical disc for activating the updated navigation program recorded in the local storage is mounted in the recording reproducing apparatus in which the application program is installed in advance.

For example the URL of a website where a game relating to content recorded on the optical disc can be downloaded or goods relating to the content can be purchased is recorded in the navigation program recorded on the optical disc . When the optical disc is mounted in the recording reproducing apparatus and the navigation program is executed by the controller it is determined whether or not in the recording reproducing apparatus the application program that is used for executing in cooperation with the navigation program a process of accessing the predetermined website or that can perform a process in cooperation with the embedded application which controls the web browsing function so called web browser which is installed as the embedded application in the recording reproducing apparatus . When it is determined that no corresponding application program has been installed the navigation program executes an ordinary playback process or the like. When it is determined that the corresponding application program has been installed the navigation program activates the application program for executing a process of accessing the predetermined website and executes inter application communication using Xlets.

In the recording reproducing apparatus the application program may be stored in advance may be installed via the removable medium mounted to the drive or may be downloaded from a predetermined server via the network using the Internet interface and installed. Also when the recording reproducing apparatus has a function using cable broadcasting or terrestrial or satellite broadcasting services the application program may be obtained together with data of a predetermined program and installed.

When the provider of the optical disc and the provider of the recording reproducing apparatus cooperate in advance to respectively design the navigation program and the application program which run as a pair a cooperative operation of the navigation program and the application program which are designed to run as a pair can be executed only when the optical disc is mounted in the specific recording reproducing apparatus .

For example besides the recording reproducing apparatus reproducing apparatuses or the like that can mount and play the optical disc are provided by a plurality of manufacturers. Content recorded on the optical disc can be played by any reproducing apparatus or the like that can execute the navigation program . In contrast only when the corresponding optical disc is played using the recording reproducing apparatus in which the specific application program is installed access can be gained to a website where limited goods relating to the content can be purchased. Only when the whole series of movies is played using this recording reproducing apparatus a bonus track can be downloaded. Only when a predetermined number of optical discs or more sold or provided by Company A are played using this recording reproducing apparatus a game can be downloaded free of charge.

Also in some cases the versions of the embedded applications are updated. Since it is normally the case that these embedded applications are commonly used in a plurality of information processing apparatuses or the like and that the embedded applications are designed assuming in advance that the versions thereof are to be updated it is often the case that the versions of the embedded applications are updated without changing interfaces with the OS and other applications. Therefore even when the versions of the embedded applications are updated if the interface with the application program is not changed the inter application communication function with the application program is maintained. That is even when the versions of the embedded applications used in the case where the navigation program runs in cooperation with the application program are updated similar processing can be executed without changing the navigation program and the application program .

In this manner the application program is activated by the navigation program which is essential for reproducing content data stored on the optical disc or stored inside in association with the optical disc and the navigation program and the application program are adapted to be cooperatively executed. Accordingly unlike the case where a single application is remotely controlled and merely executed in a predetermined apparatus specifically unlike the case where a predetermined apparatus is configured to be remotely controlled by supplying using various recording media or wired or wireless communication a control program that directly controls the function included in the predetermined apparatus or supplying a command for a control program already installed in the predetermined apparatus unique services of the apparatus can be provided in association not solely with the apparatus but with the optical disc while conforming to the standard or protocols pursuant to the standards defined for enabling various reproducing apparatuses to play content associated with the optical disc .

However when a service provided by the navigation program and the application program which run as a pair is mainly just for fun for the viewer the chances of the optical disc being viewed using reproducing apparatuses other than the recording reproducing apparatus may be reduced. This is not desirable for the content provider. Therefore it is preferable that a service provided by the navigation program and the application program running as a pair be an Easter egg like additional service accompanying a service provided by the optical disc .

Accordingly the provider of the recording reproducing apparatus can distinguish the recording reproducing apparatus from other reproducing apparatuses and the like that can play the optical disc . Also the provider of the optical disc may obtain a rebate or something corresponding to this for the provider of the recording reproducing apparatus who permitted to provide a service different from the manufacturers of other reproducing apparatuses and the like.

In this manner when the provider of the optical disc and the provider of the recording reproducing apparatus individually make a contract to provide the navigation program and the application program running in cooperation with each other individual services are provided to the user. Therefore for example the provider of the optical disc can have a chance to provide a service whose contents are difficult to demand from the manufacturers of all reproducing apparatuses such as guiding to a site where the provider s goods are sold to the user by individually affiliating with any of the manufacturers provider of the recording reproducing apparatus .

Next with reference to through a specific example of the process of the navigation program and the application program which is executed in step S in will be described.

Firstly with reference to the flowchart in a first example of a process executed by cooperation of the navigation program and the application program which controls a content information registration process which are executed in the recording reproducing apparatus will be described.

The application program Xlet which controls the content information registration process is stored in the recording reproducing apparatus and the application program is in an executable state. The application program which controls the content information registration process is activated by the navigation program Xlet and executes a process of registering for example content title name and additional information e.g. the performers and director names the artist name or the date and year when the work was publicized regarding content controlled to be played by the navigation program and image data of the content such as a jacket photograph into a region in the local storage not managed by the navigation program . On this occasion the application program activates database software may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark that controls storage of data into the local storage which is the embedded application in the recording reproducing apparatus performs inter application communication and controls a process thereof.

Also when a certain condition is satisfied such as when all movies included in the same series are collected the number of items of content collected is counted by performing a playback process of movie content using the same recording reproducing apparatus the same applies hereafter when a predetermined number of video clips or more of an artist are collected or when a predetermined number of items of content or more provided by a content author are collected the application program executes a process of controlling access to a predetermined website where bonus content can be downloaded. On this occasion the application program activates a web browser may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark which is the embedded application in the recording reproducing apparatus performs inter application communication and controls a process thereof.

In step S the application program cooperation processing control unit navigation program controls the optical disc directory management unit or the local storage directory management unit to search for the content title name and additional information e.g. information indicating the performers and director names the artist name or the date and year when the work was publicized and the series to which the content belongs which is used in a process described later stored in a path in the local storage corresponding to the optical disc . Note that when the content title name and additional information are not recorded or stored in a predetermined format such as metadata the optical disc directory management unit or the local storage directory management unit extracts corresponding information from the recorded or stored data according to need.

In step S the application program cooperation processing control unit controls the optical disc directory management unit or the local storage directory management unit to search for content jacket data recorded on the optical disc or stored in the path in the local storage corresponding to the optical disc . Note that when the content jacket data is not recorded or stored in a predetermined format such as metadata the optical disc directory management unit or the local storage directory management unit extracts corresponding image data from the recorded or stored data according to need.

In step S the application program cooperation processing control unit supplies the content title name additional information and jacket data which are searched for or extracted by the processing in step S and step S to the IXC control unit . The IXC control unit sends the content title name additional information and jacket data to the application program that is specifically binds to IxcRegistry.

In step S the application program which controls the content information registration process receives the content title name additional information and jacket data from the navigation program that is specifically looks up IxcRegistry.

In step S when the optical disc is started mounted in the recording reproducing apparatus and played if no counter for the number of registrations of the series to which the content belongs exists in a region in the local storage not managed by the navigation program the application program sets a registration number counter and registers the count number if the registration number counter exists the application program increments the registration number counter.

Specifically the additional information supplied from the navigation program includes information indicating the series to which the content belongs in order to determine whether or not a predetermined condition is satisfied such as when all movies included in the same series are collected when a predetermined number of video clips or more of an artist are collected or when a predetermined number of items of content or more provided by a content author are collected. The application program refers to the information and increments the registration number counter.

In step S the application program refers to the registration number counter and determines whether or not a predetermined condition for providing bonus content was satisfied depending on for example whether all items of content included in the specific series are registered or a predetermined number of items of content or more are registered. When it is determined in step S that the predetermined condition was unsatisfied the process proceeds to step S described later.

When it is determined in step S that the predetermined condition was satisfied in step S the application program activates the embedded application which controls the web browsing function so called web browser which is installed as the embedded application in the recording reproducing apparatus and gives a notification of information of the URL for accessing the website for downloading bonus content or the like.

Note that the embedded application may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark . When the embedded application is an Xlet the application program executes inter application communication using IXC. When the embedded application is an application program other than JAVA registered trademark the application program executes inter application program using JNI.

Note that the address URL of the website for downloading bonus content may be managed by the navigation program and the application program may be notified of the address together with information regarding the content. Alternatively the address may be managed by the application program .

In step S the web browser which is the embedded application in the recording reproducing apparatus and is executed by the controller controls the Internet interface to access the website for downloading bonus content via the network .

In step S the web browser which is the embedded application obtains data of the corresponding website from the Internet interface supplies the obtained data to an external display device and displays a display screen of the website on the external display device.

In step S for example when a command to download bonus content is given on the basis of a user operation input supplied from the operation input unit the web browser controls the Internet interface to supply a signal requesting download of the bonus content to a predetermined server via the network . When a command to terminate the displaying of the website is given the web browser terminates the displaying of the website on the external display device. In this manner the web browser performs processing on the basis of a user operation input.

Note that when bonus content is adapted to be played in association with the specific optical disc the bonus content has the above described Manifest file and is adapted to be bound to data recorded on the optical disc and played. When bonus content is adapted to be played in association with a plurality of specific optical discs credential of the Manifest file of the bonus content is set to be accessible from navigation programs that play the plurality of specific optical discs .

When it is determined in step S that the predetermined condition was unsatisfied or after the end of the processing in step S in step S the application program activates database software that controls storage of data into the local storage which is the embedded application in the recording reproducing apparatus and sends the content title name additional information and jacket data to the embedded application .

Note that also in here the embedded application may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark . When the embedded application is an Xlet the application program executes inter application communication using IXC. When the embedded application is an application program other than JAVA registered trademark the application program executes inter application program using JNI.

In step S the database software which controls storage of data into the local storage which is the embedded application in the recording reproducing apparatus receives the content title name additional information and jacket data from the application program .

In step S the embedded application registers the content title name additional information and jacket data in a list of libraries of the database managed by itself.

The database software which controls storage of data into the local storage which is the embedded application is executable by the controller even when the optical disc is not mounted in the recording reproducing apparatus . With a process described later using regardless of whether or not the optical disc is mounted in the recording reproducing apparatus the database software is adapted to be capable of performing when the user desires a process of presenting information of registered content to the user.

With such a process the navigation program associated with the optical disc and the application program installed in the recording reproducing apparatus are cooperatively executed and the database software which controls storage of data into the local storage which is the embedded application in the recording reproducing apparatus is activated to register title name additional information and jacket data of content played using the optical disc .

Further when the application program is executed in cooperation with a plurality of navigation programs activated by a plurality of navigation programs and when a predetermined condition was satisfied by performing management by for example counting the number of items of content optical disc played on the recording reproducing apparatus the application program can activate the web browser which is the embedded application in the recording reproducing apparatus and download the bonus content.

Note that it has been described here that the web browser which is the embedded application in the recording reproducing apparatus can be activated to download the bonus content. Needless to say downloading of the bonus content may be performed alternatively using a content downloading function included in the navigation program . In this case needless to say even when no embedded applications such as the web browser and the database software are installed a process is executed by cooperation of the navigation program and the application program thereby counting the number of items of content optical disc played on the recording reproducing apparatus and executing a process of downloading the bonus content.

Since both the navigation program and the application program are Xlets written using JAVA registered trademark the navigation program and the application program run in a common execution environment and can execute inter application communication. Also when the application program serving as a unique function of the recording reproducing apparatus is configured as a JAVA registered trademark Xlet a more flexible application environment can be configured. Further the application program can use using JNI a program of native code developed using another language e.g. C language or C language . Although services that can be provided using applications embedded in the recording reproducing apparatus are limited by using JNI the application program which can perform inter application communication with the navigation program which is executable using the optical disc can access functions embedded in advance in the recording reproducing apparatus . Therefore the degree of freedom of services that can be provided to the user is increased.

Hitherto operating a function of a receiver that receives a broadcast signal by including a JAVA registered trademark applet in the broadcast signal has been done. Since broadcasting is done assuming that basically the same screen is displayed on any receiver no application that can run only on specific apparatuses has been assumed. In contrast in the above described processes even when the optical disc which can execute the navigation program which is capable of executing a process in cooperation with the application program is mounted in a reproducing apparatus or the like in which no corresponding application program is installed and the optical disc is played needless to say a process in cooperation with the application program cannot be executed. Also even when various embedded applications are installed if there is no intermediary of the application program no process corresponding to the navigation program associated with the optical disc is executed.

That is only when in the recording reproducing apparatus in which the predetermined application program is installed the specific optical disc having recorded thereon the corresponding navigation program is mounted the navigation program associated with the optical disc and the application program included in the recording reproducing apparatus are adapted to be cooperatively executed to perform a predetermined operation. That is the recording reproducing apparatus is configured to be capable of executing processes different from processes executable by a conventional apparatus in which various items of software are simply installed. By realizing such a structure the apparatus can be made distinguishable.

With the process described using the database software which controls storage of data into the local storage which is the embedded application in the recording reproducing apparatus registers the content title name additional information and jacket data in the list of libraries of the database managed by itself.

Therefore when the controller executes this embedded application regardless of whether or not the optical disc is mounted in the recording reproducing apparatus the controller is configured to be capable of performing a process of presenting to the user information of the registered content.

Referring to a process performed by the embedded application database software which controls storage of data into the local storage will be described.

In step S the controller which runs the database software controlling storage of data into the local storage which is the embedded application in the recording reproducing apparatus determines on the basis of a signal supplied from the operation input unit whether or not an operation input to give a command to browse a list of items of registered content information has been received from the user. When it is determined in step S that no operation input to give a command to browse a list of items of registered content information has been received from the user the processing in step S is repeated until it is determined that an operation input to give a command to browse a list of items of registered content information has been received.

When it is determined in step S that an operation input to give a command to browse a list of items of registered content information has been received from the user in step S the controller reads the content title name additional information and jacket data which are registered in the library list registration.

In step S the controller generates display image data for displaying the content title name additional information and jacket data and outputs the display image data to an external display device for display and the process is terminated.

With such a process when the controller executes this embedded application regardless of whether or not the optical disc is mounted in the recording reproducing apparatus the controller is configured to be capable of performing a process of presenting to the user information of the registered content.

Next referring to a picture recording recording reproducing apparatus that further has a function of receiving broadcast waves or obtaining program content of for example a cable television or the like and recording the program content will be described.

Note that portions corresponding to the recording reproducing apparatus described using are given the same reference numerals and descriptions thereof are appropriately omitted.

That is the picture recording recording reproducing apparatus in is basically configured in which in addition to the structure included in the recording reproducing apparatus described using a content obtaining unit a broadcast signal obtaining unit a picture recording processing unit an input terminal and an antenna are newly provided.

The content obtaining unit obtains for example program content of a cable television or the like which has been input from the input terminal and supplies the program content to the picture recording processing unit .

The broadcast signal obtaining unit obtains a broadcast signal received by the antenna and supplies the broadcast signal to the picture recording processing unit .

The picture recording processing unit executes a process of recording into the local storage program content supplied from the content obtaining unit or the broadcast signal obtaining unit or program content or the like supplied from the Internet interface and distributed via the network that is a picture recording process. The picture recording processing unit is also capable of setting a timer recording under control of the controller .

According to need picture recording data recorded in the local storage is decoded by the transcoder output to an external display unit and reproduced and displayed. In addition when the picture recording data recorded in the local storage is supplied in association with the above described Manifest file a path based on the Manifest file may be set to the recorded data the above described binding process may be executed by the navigation program and the recorded data may be reproduced together with content recorded on the specific optical disc .

The obtaining of content data by the content obtaining unit the broadcast signal obtaining unit or the Internet interface may be regarded as a function embedded in advance in the picture recording recording reproducing apparatus and may be adapted to be executed by a process performed by the embedded application . In addition a content data recording process performed by the picture recording processing unit may be regarded as a function embedded in advance in the picture recording recording reproducing apparatus and may be adapted to be executed by a process performed by the embedded application .

Among the functions included in the controller functions provided by the JAVA registered trademark environment are basically similar to those in the case described using or and functions realized by executing the navigation program when the optical disc is mounted are basically similar to those in the case described using .

Also the content obtaining unit or the broadcast signal obtaining unit may be capable of obtaining a JAVA registered trademark Xlet together with program content. The controller can store the obtained JAVA registered trademark Xlet in the local storage so that the JAVA registered trademark Xlet is in an executable state that is can install the JAVA registered trademark Xlet.

In the picture recording recording reproducing apparatus in a software platform that controls the function of receiving broadcast waves or obtaining program content of for example a cable television or the like and recording the program content may be an environment different from a software platform that controls a process of playing the optical disc . Therefore it has hitherto been difficult for applications written in or executed in association with the mounted optical disc to prepare all APIs for executing processes in cooperation with these functions.

In contrast both the navigation program which is an application written on the optical disc mounted in the picture recording recording reproducing apparatus and the application program which is unique to the picture recording recording reproducing apparatus are Xlets using JAVA registered trademark which is a programming language that can run on a virtual machine that is that can run on a multi platform. Therefore the navigation program and the application program can run in a common execution environment and can mutually execute inter application communication and accordingly the navigation program and the application program can run in cooperation with each other. Further the application program may have a function of using using JNI JAVA registered trademark Native Interface a program of native code developed using another language e.g. C language or C language . Therefore the navigation program executable using the optical disc can access via the application program a function embedded in advance in the picture recording recording reproducing apparatus i.e. can communicate with the embedded application using JNI or IXC and control a process thereof. Therefore while the development cost can be suppressed by using the already existing technology functions embedded in advance in the picture recording recording reproducing apparatus as they are the degree of freedom of services that can be provided to the user can be improved.

That is the embedded application may be an Xlet or a module that can perform inter application communication using JNI other than JAVA registered trademark . When the embedded application is an Xlet the application program executes inter application communication using IXC. When the embedded application is an application program other than JAVA registered trademark the application program executes inter application program using JNI.

Next referring to the flowchart in a second example of the process executed by cooperation of the navigation program and the application program which controls a timer recording process which are executed in the picture recording recording reproducing apparatus in or the recording reproducing apparatus in externally connected to a picture recording apparatus will be described.

The application program Xlet which controls a timer recording process is stored in the picture recording recording reproducing apparatus and the application program is in an executable state. Specifically the application program which controls the timer recording process is activated by the navigation program and is adapted to be capable of activating the embedded application may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark which is the embedded application in the picture recording recording reproducing apparatus for receiving broadcast waves or obtaining program content of for example a cable television or the like and recording the program content performing inter application communication and controlling a process thereof.

Note that when a picture recording apparatus that has a function of receiving broadcast waves or obtaining program content of for example a cable television or the like and recording the program content that is a picture recording apparatus that has a structure similar to the content obtaining unit broadcast signal obtaining unit picture recording processing unit input terminal and antenna in the picture recording recording reproducing apparatus in is connected to the recording reproducing apparatus described using the application program which controls a timer recording process sends out a control signal to the outside and controls a picture recording process using the embedded application embedded in the picture recording apparatus.

In step S the application program cooperation processing control unit controls the optical disc directory management unit or the local storage directory management unit to detect information needed to obtain program content such as the broadcast or provided time and date of the program content relating to the optical disc or content played using the optical disc which is recorded on the optical disc or stored in a path in the local storage corresponding to the optical disc and path information in the case where the recorded program content is to be stored in the local storage .

In step S the application program cooperation processing control unit sends to the application program specifically binds to IxcRegistry the information needed to obtain the program content and the path information in the case where the recorded program content is to be stored in the local storage which are detected by the processing in step S.

In step S the application program which controls the timer recording process receives from the navigation program the information needed to obtain the program content and the path information in the case where the recorded program content is to be stored in the local storage specifically looks up IxcRegistry.

In step S the application program generates control information for causing the timer recording process to be executed on the basis of the received information.

In step S the application program outputs the control information for causing the timer recording to be executed to an external picture recording apparatus or the like that executes a picture recording process sends the control information to the embedded application embedded in an external picture recording apparatus or activates the embedded application which executes a picture recording process and sends the control information to this embedded application .

In step S the external picture recording apparatus which executes a picture recording process or the embedded application which executes a picture recording process executes a timer recording process on the basis of the control information supplied from the application program .

In step S the external picture recording apparatus which executes a picture recording process or the embedded application which executes a picture recording process determines whether or not the recording of the predetermined program content has been completed. When it is determined in step S that the recording of the program content has not been completed the processing in step S is repeated until it is determined that the recording of the program content is completed.

When it is determined in step S that the recording of the program content is completed in step S the external picture recording apparatus which executes a picture recording process or the embedded application which executes a picture recording process sets or supplies and stores data of the recorded program content in the predetermined path in the local storage . Also the external picture recording apparatus which executes a picture recording process or the embedded application which executes a picture recording process notifies the application program of the completion of the picture recording process and accordingly the application program notifies the navigation program of the completion of the picture recording process.

In step S the file system merge processing unit of the navigation program executes the binding process described using to reach a state in which the recorded program content and the content recorded on the optical disc including data stored in the local storage corresponding to that content can be combined and played.

In order to execute such a process information needed to record the predetermined program content and path information in the local storage of the recorded program content are recorded on the optical disc or in the path in the local storage corresponding to the optical disc . The path information is information needed to bind the recorded program content to the file system of the content recorded on the optical disc . Only when that optical disc is mounted in the external picture recording apparatus which executes a picture recording process or in the recording reproducing apparatus or the picture recording recording reproducing apparatus in which the application program which can control the embedded application which executes a picture recording process is installed the predetermined program content is automatically recorded bound to the file system of the content recorded on the optical disc and played.

Since the navigation program and the application program are cooperatively executed in this manner without greatly changing the function and structure of the embedded application or the external apparatus a service that cannot be provided to the user only using the embedded application can be provided to the user as a service unique to the recording reproducing apparatus or the picture recording recording reproducing apparatus in which the application program is installed.

Next referring to the flowchart in a third example of the process executed by running the navigation program and the application program which controls a picture recording process in cooperation with each other which are executed in the picture recording recording reproducing apparatus in or the recording reproducing apparatus in externally connected to a picture recording apparatus will be described.

Also in here the application program Xlet which controls a timer recording process is stored in the picture recording recording reproducing apparatus and the application program is in an executable state. The application program which controls a timer recording process is activated by the navigation program and executes a process that controls a timer recording of a predetermined program or the like. Also the picture recording processing unit is configured to be capable of receiving an input of a keyword and performing a picture recording process based on information indicating the contents of program content and metadata such as an EPG Electronic Program Guide . Also in here when a picture recording apparatus that has a function of receiving broadcast waves or obtaining program content of for example a cable television or the like and recording the program content that is a picture recording apparatus that has a structure similar to the content obtaining unit broadcast signal obtaining unit picture recording processing unit input terminal and antenna in the picture recording recording reproducing apparatus in is connected to the recording reproducing apparatus described using the application program which controls a timer recording process is adapted to send out a control signal to the outside and to control a picture recording process performed by the picture recording apparatus.

In step S the application program cooperation processing control unit controls the optical disc directory management unit or the local storage directory management unit to detect a keyword relating to the optical disc or content played using the optical disc which is recorded on the optical disc or stored in a path in the local storage corresponding to the optical disc and path information in the case where the recorded program content is to be recorded in the local storage .

In step S the application program cooperation processing control unit sends to the application program specifically binds to IxcRegistry the keyword and the path information in the case where the recorded program content is to be recorded in the local storage which are detected by the processing in step S.

In step S the application program which controls the timer recording process receives from the navigation program the keyword and the path information in the case where the recorded program content is to be recorded in the local storage specifically looks up IxcRegistry.

In step S the application program generates control information for causing the timer recording process to be executed on the basis of the received information.

In step S through step S the processing basically similar to step S through step S described using is executed and the process is terminated.

That is the application program outputs the control information for causing the timer recording to be executed to an external picture recording apparatus that executes a picture recording process sends the control information to the embedded application embedded in an external picture recording apparatus or activates the embedded application which executes a picture recording process and sends the control information to this embedded application . The external picture recording apparatus which executes a picture recording process or the embedded application which executes a picture recording process executes a timer recording process of program content that matches the keyword by referring to the information relating to the program content such as an EPG on the basis of the control information supplied from the application program and when it is determined that the recording of the program content has been completed sets or supplies and stores data of the recorded program content in the predetermined path in the local storage and notifies the application program of the completion of the picture recording process. The application program notifies the navigation program of the completion of the picture recording process. Then the file system merge processing unit of the navigation program executes the binding process described using to reach a state in which the recorded program content and the content recorded on the optical disc including data stored in the local storage corresponding to that content can be combined and played.

In order to execute such a process on the optical disc or in the path in the local storage corresponding to the optical disc the keyword is recorded as information needed to record the predetermined program content and path information in the local storage of the recorded program content is recorded. Only when that optical disc is mounted in the external picture recording apparatus which executes a picture recording process or in the recording reproducing apparatus or the picture recording recording reproducing apparatus in which the application program which can control the embedded application which executes a picture recording process is installed the predetermined program content is automatically recorded bound to the file system of the content recorded on the optical disc and played.

Also needless to say the program content automatically recorded in this manner may be set playable by itself without being bound to the file system of the content recorded on the optical disc . Accordingly for example even when the user does not enter a keyword by himself herself program content relating to the optical disc which has been played by the recording reproducing apparatus or the picture recording recording reproducing apparatus that is program content in which the user is highly likely to be interested can be automatically recorded. This makes it possible to provide a service of automatically recording program content that matches the user s taste.

Since the navigation program and the application program are cooperatively executed in this manner without greatly changing the function and structure of the embedded application or the external apparatus a service that cannot be provided to the user only using the embedded application can be provided to the user as a service unique to the recording reproducing apparatus or the picture recording recording reproducing apparatus in which the application program is installed.

In addition since the navigation program and the application program are adapted to be executable in cooperation with each other a GUI Graphic User Interface display screen widely used in various apparatuses such as television receivers and picture recording reproducing apparatuses to assist the user in entering an operation input can be used in the recording reproducing apparatus in or the picture recording recording reproducing apparatus in .

Specifically for example as the applicant has publicized in SONY WEGA Experience XMB at the time of Jun. 20 2006 electrical household appliances with various functions such as a function of receiving a broadcast program recording the broadcast program on an internal hard disk and playing the broadcast program and a function of playing music and still images recorded on the hard disk have been on sale in recent years. Among these devices there are devices prepared with as a menu screen for enabling the user to use the various functions a screen displaying icons of individual categories in the horizontal direction of the screen and displaying individual items of a selected category in the vertical direction.

As categories for categorizing items video relating to recording of programs and playback of recorded programs photo relating to playback of still images music relating to playback of music and the like are prepared.

For example when the photo category is selected from among a plurality of categories all images thumbnail images loaded in the device are displayed on the screen in one line in the vertical direction and the user can find a target image simply by entering up down operations. Devices displaying such a screen realize an environment in which the user can easily find a target image by shortening the response time of display in response to an up down operation.

Such a GUI display function is installed as the embedded application in various apparatuses and provided to users.

Next referring to the flowchart in a fourth example of the process executed by running the navigation program and the application program which controls displaying of a GUI display screen in cooperation with each other which are executed in the recording reproducing apparatus in or the picture recording recording reproducing apparatus in will be described.

In step S the application program cooperation processing control unit controls the optical disc directory management unit or the local storage directory management unit to detect a title additional information and the like of the optical disc or content including sub content played using the optical disc which are recorded on the optical disc or stored in a path in the local storage corresponding to the optical disc .

In step S the application program cooperation processing control unit sends to the application program specifically binds to IxcRegistry a list of a title additional information and the like of content including sub content which are detected by the processing in step S.

In step S the application program which controls a process of displaying a GUI display screen receives the list of a title additional information and the like of content including sub content from the navigation program specifically looks up IxcRegistry.

In step S the application program executes a process for converting data such as the received title additional information and the like of content including sub content into data that can be displayed using a predetermined GUI.

In step S the application program outputs the generated data to an external display device or the like that executes a GUI display process and a process of obtaining a user operation entered by a user who refers to a GUI display screen sends the generated data to the embedded application embedded in an external display device or activates the embedded application which executes a GUI display process and a process of obtaining a user operation entered by a user who refers to a GUI display screen and sends control information to this embedded application .

In step S the external display device or the embedded application determines whether or not a command to display a predetermined GUI display screen has been given from the user. When it is determined in step S that no command to display a predetermined GUI display screen has been given from the user the processing in step S is repeated until it is determined that a display command has been given.

When it is determined in step S that a command to display a predetermined GUI display screen has been given from the user in step S the external display device or the embedded application controls displaying of a GUI display screen capable of displaying the list of a title additional information and the like of content including sub content which can be played using the mounted optical disc .

In step S the external display device or the embedded application determines whether or not predetermined content has been selected and determined from the list of a title additional information and the like of content including sub content which can be played using the mounted optical disc which is displayed on the GUI display screen and a command to play the selected content has been given. When it is determined in step S that no playback command has been given the processing in step S is repeated until it is determined that a playback command has been given.

When it is determined in step S that a playback command has been given the external display device or the embedded application notifies the application program of the command given from the user. In step S the application program obtains information indicating the content designated by the user from the external display device or the embedded application .

In step S the application program sends the information indicating the content designated by the user which has been obtained from the external display device or the embedded application to the navigation program .

In step S the navigation program controls a process of reading out and playing the content designated by the user to be played.

With such a process a list of a title additional information and the like of content including sub content that can be displayed using the optical disc can be displayed using a function of displaying a GUI display screen provided as the embedded application e.g. may be that widely used in other apparatuses . Accordingly the user can easily check the contents of playable content and designate content to play by using a GUI display screen that is familiar and is easy to use. Further the manufacturer of the recording reproducing apparatus or the picture recording recording reproducing apparatus need not develop a unique GUI display screen. While reducing the development cost the manufacturer can provide to the user a GUI display screen that is familiar and is easy to use for the user.

As has been described above for example as in JAVA registered trademark or the like the application program which can run on a multi platform due to the mounting of a virtual machine and is installed uniquely in the apparatus and the navigation program which is associated with a recording medium such as an optical disc mounted in the apparatus can be adapted to run in cooperation with each other using inter application communication such as IXC. The manufacturer of an apparatus that has a function of playing a recording medium such as an optical disc can differentiate the apparatus by installing or making it possible to install in the apparatus an application program that can run in cooperation with a navigation program associated with the recording medium such as the optical disc.

Also using these techniques when the provider who provides content content author using a recording medium such as an optical disc individually makes a contract with the provider of an apparatus that plays that recording medium individual services can be provided to the user. Therefore for example the provider who provides content using a recording medium such as an optical disc can provide to the user even a service whose contents are difficult to demand from all manufacturers such as guiding to a site where the provider s goods are sold by individually affiliating with the provider of an apparatus that plays that recording medium.

Now as has been described above the application program may be one that is downloaded from another apparatus. In addition with the application program another application program may be downloaded.

In a client such as the above described recording reproducing apparatus or picture recording recording reproducing apparatus in which an optical disc is mounted the optical disc having recorded thereon in addition to disc id URL information and the like of a downloading destination of the application program a boot loader Boot loader for client application that executes a process of downloading the application program from a predetermined server storing the application program therein and activating the application program is installed. The boot loader is one of application programs which are JAVA registered trademark Xlets.

When this boot loader is activated the boot loader performs IXC based inter program communication with the navigation program of the mounted optical disc obtains URL information and the like of a downloading destination of a new application program to download accesses a predetermined server using a general protocol such as HTTP downloads the designated application program and stores the application program in a predetermined storage region. The boot loader executes according to need downloading and storage processes by performing processes in cooperation with the above described function group the embedded applications and the like which are not essential for a playback process. Here it is assumed that Class which is a JAVA registered trademark Xlet is downloaded from the server and stored in a predetermined storage region.

The boot loader binds Class which has been downloaded and stored in the predetermined storage region to IxcRegistry. Also the boot loader looks up IxcRegistry when activating the downloaded Class . Needles to say functions executed by the boot loader may include a function of downloading a plurality of application programs .

Also when processes executed by the downloaded Class further include a process of downloading a different application program Class which is a JAVA registered trademark Xlet connects to a predetermined server e.g. the server on the basis of logic described in Class downloads Class which is a JAVA registered trademark Xlet different from Class as the application program and stores Class in a predetermined storage region. In it has been described that Class is downloaded from the same server as that of Class . However it is only necessary that URL information and the like for downloading Class be written in Class and needless to say Class may be downloaded from a server that is different from that of Class . In addition needless to say Class may include a function of downloading three or more application programs and Class may also include a function of downloading a plurality of application programs .

Note that in the processes described using through the application program has been described as being activated by the navigation program recorded on the mounted optical disc . In contrast the boot loader which is the application program may be activated by the navigation program recorded on the mounted optical disc or may be activated for example in response to a user operation input. The boot loader is adapted to be capable of downloading the application program corresponding to the navigation program recorded on the mounted optical disc . That is the boot loader which is the application program is adapted to perform a process in cooperation with the navigation program as in the case of the above described processes. Needless to say the navigation program downloaded by the boot loader corresponds to the mounted optical disc .

Also it has been described here that the boot loader is adapted to execute a process of downloading and a process of activating the application program corresponding to the navigation program recorded on the mounted optical disc . Needless to say however downloading and activation may be executed by different application programs . Even in the case where downloading and activation are executed by different application programs since these application programs are JAVA registered trademark Xlets and can perform inter application communication using IXC downloading and activation can be cooperatively performed.

Next referring to the flowchart in a process of downloading another application program using the boot loader which is the application program will be described.

In step S the controller determines whether or not a command to activate the boot loader has been given on the basis of a user operation input supplied from the operation input unit or when the navigation program is being executed a command issued by the processing of the navigation program. When it is determined in step S that no command to activate the boot loader has been given the processing in step S is repeated until it is determined that a command to activate the boot loader has been given.

When it is determined in step S that a command to activate the boot loader has been given in step S the boot loader is activated by the application program cooperation processing control unit and the IXC control unit of the controller and a process of the boot loader is started by the application program execution processing unit . Basically the boot loader which is the application program is activated by a process similar to the application program calling process described using .

In step S the application program execution processing unit which executes the boot loader obtains information needed to download the application program read by the navigation program from the mounted optical disc such as disc id recorded on the mounted optical disc and URL information of the server which is a downloading destination by performing inter program communication between the boot loader and the navigation program under control of the IXC control unit .

In step S the application program execution processing unit which executes the boot loader executes according to need a process in cooperation with the function group or the embedded application which is not essential for a playback process thereby establishing an HTTP connection to the corresponding server and sending necessary information.

In step S the application program execution processing unit which executes the boot loader executes according to need a process in cooperation with the function group or the embedded application which is not essential for a playback process thereby downloading a predetermined application program from the corresponding server and recording the downloaded application program in the local storage .

In step S the application program execution processing unit which executes the boot loader executes a process of binding to ixcRegistry in order to activate the downloaded application program .

In step S the application program execution processing unit which executes the boot loader looks up ixcregistry and activates the downloaded application program .

In step S an application program execution process described using is executed and the process is terminated. That is the application program execution processing unit executes a process of the application program activated by the boot loader .

With such a process the boot loader and the navigation program can run in cooperation with each other by performing inter program communication using IXC. Additionally the boot loader can execute a process in cooperation with the function group or the embedded application which is not essential for a playback process using API or JNI. Then the l boot loader can download from a server or the like an application program that is different from the boot loader and can execute a process in cooperation with the function group or the embedded application which is not essential for a playback process using API or JNI and activate the downloaded application program .

Next with reference to the flowchart in the application program execution process executed in step S in will be described.

In step S the application program execution processing unit which executes the application program downloaded by the boot loader using the process described using determines with execution of this application program whether or not another application program is to be downloaded and executed. Hereinafter it is assumed that the application program downloaded by the boot loader using the process described using is called an application program and a newly downloaded application program is called an application program . When it is determined in step S that no application program is to be downloaded the process proceeds to step S described later.

When it is determined in step S that the application program is to be downloaded and executed in step S the application program execution processing unit which executes the application program performs according to need a process in cooperation with the function group or the embedded application which is not essential for a playback process in accordance with logic described in the application program thereby connecting to the corresponding server .

In step S the application program execution processing unit which executes the application program executes according to need a process in cooperation with the function group or the embedded application which is not essential for a playback process thereby downloading the predetermined application program from the corresponding server supplying the application program to the local storage and recording the application program in the local storage .

In step S the application program execution processing unit which executes the application program executes a process of binding to ixcRegistry in order to activate the downloaded application program .

In step S the application program execution processing unit which executes the application program looks up ixcRegistry and activates the downloaded application program .

In step S the application program execution processing unit which executes the application program determines whether or not downloading and activation of all other application programs designated by the application program have been executed. When it is determined in step S that downloading and activation of all other application programs have not been executed yet the process returns to step S and the process thereafter is repeated.

When it is determined in step S that the application program is not to be downloaded or when it is determined in step S that downloading and activation of all other application programs have been executed a process es of one or a plurality of activated application programs are executed by the application program execution processing unit and the process is terminated.

With such a process using the downloaded application program another application program is further downloaded.

Now as has been descried above the application program prepares the unique API libraries and different from the API library and accordingly the application program can access the function group whish is essential for a playback process and can access the function group which is included in the recording reproducing apparatus and is not essential for a playback process. Further the application program can access the embedded application which is a local function of the recording reproducing apparatus using JNI or IXC according to circumstances . In the recording reproducing apparatus or the picture recording recording reproducing apparatus as the function group which is not essential for a playback process for example a function of reading out data recorded on the mounted recording medium and copying the data to another recording medium and a function of converting the format of data to be copied may further be provided. In addition as the embedded application which is a local function of the recording reproducing apparatus the embedded application which controls processes of copying data to a recording medium and converting the format for copying may further be provided.

AACS Advanced Access Content System exists as a framework relating to copyright protection of video packaged software recorded on a recording medium such as an optical disc. AACS includes protocols regarding the function named Managed Copy which can permit only when a predetermined authentication process is executed copying of content on a packaged medium such as an optical disc to another medium such as an HDD of a home media server or another optical disc that is mounted or stream distribution of such content to another device connected via a network.

In order to use the Managed Copy function a device corresponding to Managed Copy needs to access an authentication server on the Internet and to be authenticated for a copying process. A device corresponding to Managed Copy reads out a file describing information needed for authentication which is called a Title Usage File TUF and recorded on a packaged medium serving as a copy source and obtains content id that identifies content and URL information of an authentication server that performs authentication of the device. The device corresponding to Managed Copy further reads out from the packaged medium Serial Number e.g. disc id uniquely assigned to the packaged medium. Then the device corresponding to Managed Copy is configured to be capable of accessing the authentication server on the basis of the obtained URL information sending information needed for authentication such as content id and disc id to the authentication server and performing an authentication process. Only when an authentication process is correctly executed copying of content is permitted.

Referring to Managed Copy will be described. Note that in a description is given assuming that a conventional recording reproducing apparatus having a content recording reproducing function corresponding to the recording reproducing apparatus is used as the device corresponding to Managed Copy.

On a first optical disc that serves as a content copy source and is mounted in the recording reproducing apparatus besides the navigation program and items of data which are needed to play content such as a PlayList and a Clip which are recorded on the above described optical disc a Managed Copy Manifest File which is a Title Usage File TUF needed for authentication of Managed Copy is recorded. In the Managed Copy Manifest File disc id content id URL information needed to access an authentication server and the like are written.

The recording reproducing apparatus reads out the Managed Copy Manifest File from the first optical disc accesses the authentication server on the basis of the URL information and sends information such as disc id and content id to the authentication server .

On the basis of the sent information the authentication server searches data recorded on the first optical disc mounted in the recording reproducing apparatus for a list of Managed Copy services that can be provided Create Offer List such as content or data of which Managed Copy can be performed and sends the list to the recording reproducing apparatus .

Among services described in the Create Offer List supplied from the authentication server the recording reproducing apparatus selects contents for which authentication is to be requested on the basis of for example a user operation input requests the authentication server to perform authentication and performs a fee charging process relating to the contents for which authentication is requested.

After the authentication process and the fee charging process are executed the authentication server permits the recording reproducing apparatus to perform Managed Copy.

The recording reproducing apparatus which is permitted to perform Managed Copy reads from the mounted first optical disc information relating to AACS and encrypted content to copy performs format conversion of the encrypted content using the information relating to AACS that is performs decoding of the content thereafter executes encoding in a predetermined format such as the Window Media Format and writes the encoded data onto a second optical disc .

In this manner in order to execute Managed Copy in accordance with the framework of AACS the recording reproducing apparatus is necessary to include in advance as an embedded application an application that controls an authentication process executed by exchanging information with the authentication server a fee charging process for the authentication process and a series of processes of permitting execution of Managed Copy only when authentication is received.

Further when for example the provider of the first optical disc is different the recording reproducing apparatus has a possibility of executing an authentication process with a plurality of authentication servers rather than performing an authentication process only with one authentication server . For example when transactions e.g. the method of exchanging information for authentication and the method of a fee charging process in authentication processes are different in individual authentication servers it becomes necessary to prepare a plurality of embedded applications that can handle the respective transactions in the recording reproducing apparatus . In addition when the authentication method or the method of exchanging information between the server and the apparatus which executes Managed Copy is changed it becomes necessary each time to update the version of the application in the recording reproducing apparatus which controls execution of Managed Copy.

Therefore applications that control execution of Managed Copy are prepared as JAVA registered trademark Xlets in the individual authentication servers . The recording reproducing apparatus and the picture recording recording reproducing apparatus include in advance boot loaders for downloading and activating the applications which control execution of Managed Copy. From the authentication server which permits Managed Copy of content stored on the mounted first optical disc the recording reproducing apparatus and the picture recording recording reproducing apparatus download the application which controls execution of Managed Copy.

The downloaded application which controls execution of Managed Copy can perform as the application program inter application communication using IXC with another JAVA registered trademark Xlet. Also by preparing the unique API libraries and different from the API library the downloaded application can access the function group which is essential for a playback process and the function group which is included in the recording reproducing apparatus and the picture recording recording reproducing apparatus and is not essential for a playback process. Further the downloaded application can access the embedded application which is a local function of the recording reproducing apparatus using JNI.

Referring to Managed Copy in the case where a JAVA registered trademark Xlet that controls as the application program execution of Managed Copy is downloaded from the authentication server will be described. Note that in a description is given using the case in which the recording reproducing apparatus serves as a device corresponding to Managed Copy by way of example. Needless to say similar processing is executable even in the case of the picture recording recording reproducing apparatus .

The recording reproducing apparatus receives a command to start Managed Copy from the user and activates a Managed Copy boot loader which is the application program which executes a process of downloading and activating a JAVA registered trademark Xlet that controls execution of Managed Copy. It is determined whether or not the mounted first optical disc is a disc corresponding to Managed Copy. When the first optical disc is a disc corresponding to Managed Copy the Managed Copy boot loader performs inter application communication using IXC with the navigation program of the first optical disc and executes a process in cooperation with the navigation program thereby reading out a Managed Copy Manifest File which is a Title Usage File TUF needed for authentication of Managed Copy and which is recorded on the first optical disc and obtaining disc id content id URL Information needed to access the authentication server and the like.

The recording reproducing apparatus accesses the authentication server on the basis of the URL information read out from the first optical disc sends information such as disc id and content id to the authentication server and requests download of a Managed Copy Application for content id which is a JAVA registered trademark Xlet that controls execution of Managed Copy corresponding to the first optical disc mounted in the recording reproducing apparatus .

On the basis of the sent information the authentication server sends the Managed Copy Application for content id corresponding to the first optical disc mounted in the recording reproducing apparatus to the recording reproducing apparatus .

The recording reproducing apparatus stores the downloaded Managed Copy Application for content id in the local storage and additionally executes binding to and looking up IxcRegistry thereby activating the Managed Copy Application for content id .

The downloaded Managed Copy Application for content id may include all steps that control execution of Managed Copy or some objects thereof may be configured as different JAVA registered trademark Xlets. For example in the Managed Copy Application for content id objects such as a portion offers that executes a process of presenting to the user the list of Managed Copy services that can be provided which has been sent from the authentication server and upon selection of a service desired by the user requesting the authentication server to perform authentication and a fee charging process and a portion Permission that receives a Managed Copy permission from the authentication server and on the basis of this controls a process of copying corresponding data from the first optical disc to the second optical disc can be configured as independent Xlets.

When some objects that control execution of Managed Copy are configured as different JAVA registered trademark Xlets the Managed Copy Application for content id is adapted to further download necessary objects e.g. objects such as Offers and Permission from the authentication server or a different server and activate the necessary objects.

The Managed Copy Application for content id or Offers included in this performs inter application communication using IXC with the navigation program of the first optical disc and executes a process in cooperation with the navigation program thereby reading out a Managed Copy Manifest File which is a Title Usage File TUF needed for authentication of Managed Copy which is recorded on the first optical disc and obtaining disc id content id URL information needed to access the authentication server and the like.

The Managed Copy Application for content id or Offers included in this accesses the authentication server on the basis of the URL information read out from the first optical disc and sends information such as disc id and content id to the authentication server .

On the basis of the sent information the authentication server searches data recorded on the first optical disc mounted in the recording reproducing apparatus for a list of Managed Copy services that can be provided Create Offer List such as content or data of which Managed Copy can be performed and sends the list to the recording reproducing apparatus which executes the Managed Copy Application for content id or Offers included in this .

In the recording reproducing apparatus among services described in the Create Offer List supplied from the authentication server the Managed Copy Application for content id or Offers included in this selects contents for which authentication is to be requested on the basis of for example a user operation input requests the authentication server to perform authentication and performs a fee charging process relating to the contents for which authentication is requested.

After the authentication process and the fee charging process are executed the authentication server permits the recording reproducing apparatus to perform Managed Copy.

In the recording reproducing apparatus which is permitted to perform Managed Copy the Managed Copy Application for content id or Permission included in this reads from the mounted first optical disc information relating to AACS and encrypted content to copy performs format conversion of the encrypted content using the information relating to AACS that is performs decoding of the content thereafter executes encoding in a predetermined format such as the Window Media Format and writes the encoded data onto the second optical disc .

Note that on this occasion when update data such as content to be copied from the mounted first optical disc to the second optical disc is recorded in the local storage and the virtual file system is configured as described above so that the updated content can be played the Managed Copy Application for content id or Permission included in this performs inter application communication using IXC with the navigation program requests an updating process of the virtual file system obtains information needed to play the updated content and write the corresponding content and information relating to this onto the second optical disc so that the updated content can be played.

When executing the above described process the Managed Copy Application for content id or Offers and Permission included in this exchanges information using IXC based program communication with the navigation program reads necessary information recorded on the first optical disc performs according to need an operation in cooperation with the embedded application using JNI and controls the function group which is not essential for a playback process using the API .

Accordingly development of applications for execution of Managed Copy can be facilitated functions included in the navigation program and the embedded application can be used and additionally the updating of versions thereof can be easily handled.

Next referring to the flowcharts in and FIG. a process for executing Managed Copy described using will be described.

In step S the embedded application which monitors a user operation input determines on the basis of a user operation input supplied from the operation input unit whether or not a command to activate the Managed Copy boot loader has been given. When it is determined in step S that no command to activate the Managed Copy boot loader has been given the processing in step S is repeated until it is determined that a command to activate the Managed Copy boot loader has been given.

When it is determined in step S that a command to start the Managed Copy boot loader has been given in step S the embedded application activates the Managed Copy boot loader .

Note that it has been described here that the embedded application monitors a user operation input and activates the Managed Copy boot loader . Alternatively for example the navigation program may have a function of monitoring whether or not an operation input to activate the Managed Copy boot loader is received during execution of the navigation program . When an operation input to activate the Managed Copy boot loader is received the navigation program may be adapted to be capable of executing as an interruption process a process of activating the Managed Copy boot loader .

In step S the Managed Copy boot loader uses IXC to request the navigation program for a Managed Copy Manifest File needed for authentication of Managed Copy.

In step S the navigation program sends a Managed Copy Manifest File needed for authentication of Managed Copy to the Managed Copy boot loader .

In step S the Managed Copy boot loader executes a process for establishing an HTTP connection to a corresponding server e.g. the authentication server in for downloading the application program needed to execute Managed Copy.

Specifically in order to establish an HTTP connection to a corresponding server e.g. the authentication server in the Managed Copy boot loader activates the embedded application which controls the web browsing function may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark to perform inter application communication and controls a process thereof.

In step S the embedded application which controls the web browsing function is HTTP connected to the corresponding server.

In step S the Managed Copy boot loader downloads the Managed Copy Application for content id from the corresponding server and records the Managed Copy Application for content id in the local storage .

Specifically the Managed Copy boot loader uses the function of the embedded application which controls the web browsing function to download the Managed Copy Application for content id from the corresponding server and additionally uses the function of the embedded application which controls recording of data into the local storage to record the downloaded Managed Copy Application for content id into the local storage .

In step S the embedded application which controls the web browsing function executes a process of recording the downloaded data that is the Managed Copy Application for content id into the local storage .

In step S the Managed Copy boot loader executes a binding process to ixcRegistry in order to activate the downloaded Managed Copy Application for content id .

In step S the Managed Copy boot loader looks up ixcRegistry and activates the downloaded Managed Copy Application for content id .

In step S the Managed Copy Application for content id connects to a corresponding server e.g. the authentication server in using predetermined logic described in the Managed Copy Application for content id in order to download the Offers Managed Application .

Specifically in order to establish a connection to a corresponding server e.g. the authentication server in the Managed Copy Application for content id activates the embedded application which controls the web browsing function may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark to perform inter application communication and controls a process thereof.

In step S the embedded application which controls the web browsing function is connected to the corresponding server using the predetermined logic.

In step S the Managed Copy Application for content id downloads the Offers Managed Application from the corresponding server and records the Offers Managed Application in the local storage .

Specifically the Managed Copy Application for content id uses the function of the embedded application which controls the web browsing function so called web browser to download the Offers Managed Application from the corresponding server and additionally uses the function of the embedded application which controls recording of data into the local storage to record the downloaded Offers Managed Application into the local storage .

In step S the embedded application which controls recording of data into the local storage executes a process of recording the downloaded data that is the Offers Managed Application into the local storage .

In step S the Managed Copy Application for content id executes a binding process to ixcRegistry in order to activate the downloaded Offers Managed Application .

In step S the Managed Copy Application for content id looks up ixcregistry and activates the downloaded Offers Managed Application .

Note that the Managed Copy Application for content id executes after the end of the processing in step S the processing in step S described later.

In step S the Offers Managed Application uses IXC to request the navigation program for a Managed Copy Manifest File needed for authentication of Managed Copy.

In step S the navigation program sends a Managed Copy Manifest File needed for authentication of Managed Copy to the Offers Managed Application .

In step S the Offers Managed Application connects to a predetermined server e.g. the authentication server in using predetermined logic in order to perform an authentication process for Managed Copy and downloads a list of functions provided as executable Offers .

Specifically the Offers Managed Application activates in order to connect to a corresponding server e.g. the authentication server in the embedded application which controls the web browsing function may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark or when the embedded application is already in an activated state with the embedded application which controls the web browsing function to perform inter application communication controls a process thereof and downloads a list of functions provided as executable Offers .

In step S the embedded application which controls the web browsing function is connected to the corresponding server using the predetermined logic.

In step S the Offers Managed Application executes control so that the list of functions provided as executable e.g. among data such as content recorded on the corresponding first optical disc a list of data of which Managed Copy can be performed can be displayed as a list.

Specifically the Offers Managed Application activates the embedded application which controls a function relating to a GUI display screen may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark to perform inter application communication and controls a process thereof.

In step S the embedded application which controls the function relating to the GUI display screen displays on an external display device a list corresponding to the list of functions provided as executable e.g. among data such as content recorded on the corresponding first optical disc a list of data of which Managed Copy can be performed .

In step S the Offers Managed Application uses according to need the function of the embedded application which controls the web browsing function to access a predetermined fee charging server or the like and to exchange necessary information with the predetermined fee charging server thereby executing a fee charging process for the selected Offer.

In step S the Managed Copy Application for content id connects to a corresponding server using predetermined logic in order to download the Permission Managed Application .

Specifically the Managed Copy Application for content id activates in order to connect to a corresponding server e.g. the authentication server in the embedded application which controls the web browsing function may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark or when the embedded application is already in an activated state with the embedded application which controls the web browsing function to perform inter application communication and controls a process thereof.

In step S the embedded application which controls the web browsing function is connected to the corresponding server e.g. the authentication server in using the predetermined logic.

In step S the Managed Copy Application for content id downloads the Permission Managed Application from the corresponding server and records the Permission Managed Application in the local storage .

Specifically the Managed Copy Application for content id uses the function of the embedded application which controls the web browsing function to download the Permission Managed Application from the corresponding server and additionally uses the function of the embedded application which controls recording of data into the local storage to record the downloaded Permission Managed Application into the local storage .

In step S the embedded application which controls the web browsing function executes a process of recording the downloaded data that is the Permission Managed Application into the local storage .

In step S the Managed Copy Application for content id executes a binding process to ixcRegistry in order to activate the downloaded Permission Managed Application .

In step S the Managed Copy Application for content id looks up ixcRegistry and activates the downloaded Permission Managed Application .

In step S the Permission Managed Application connects to a predetermined server e.g. the authentication server in using predetermined logic described in the Permission Managed Application and receives a notification that the authentication was correctly performed.

Specifically the Permission Managed Application activates in order to connect to a corresponding server e.g. the authentication server in the embedded application which controls the web browsing function may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark or when the embedded application is already in an activated state with the embedded application which controls the web browsing function to perform inter application communication and controls a process thereof.

In step S the embedded application which controls the web browsing function is connected to the corresponding server using the predetermined logic.

In step S the Permission Managed Application controls reading of content to copy from the first optical disc and format conversion.

Specifically the Permission Managed Application notifies using IXC the navigation program which is recorded on the mounted first optical disc or recorded in the local storage in association with the first optical disc of among items of data such as content recorded on the first optical disc data of which Managed Copy is permitted and which is to be Managed Copied to the second optical disc . Also the Permission Managed Application activates the embedded application which reads out data from the mounted recording medium such as an optical disc and the embedded application which controls a format conversion process performed by the transcoder may be Xlets or software that can perform inter application communication using JNI other than JAVA registered trademark and controls processes thereof.

In step S the navigation program calls the API defined for updating the virtual file system of content to be copied e.g. update and executes the binding process described using thereby constructing the virtual file system of content to be copied and notifying the Permission Managed Application of information of the virtual file system using IXC.

In step S the navigation program uses a Manifest file to notify using IXC the Permission Managed Application of information needed to control reading of data that should be included in the content to be copied.

In step S the embedded application which reads out data from the mounted recording medium such as an optical disc exchanges information needed for reading out data with the Permission Managed Application thereby controlling the optical disc drive to read out predetermined content to be copied from the mounted first optical disc and when needed controlling the drive of the local storage to read out data needed to play the predetermined content to be copied.

In step S the embedded application which controls the format conversion process performed by the transcoder exchanges information with the Permission Managed Application and controls the transcoder to convert the format of the read content into the format for copying to the second optical disc .

In step S the Permission Managed Application controls writing of the format converted content to the second optical disc .

Specifically the Permission Managed Application activates the embedded application which records data to the mounted recording medium such as an optical disc may be an Xlet or software that can perform inter application communication using JNI other than JAVA registered trademark and controls processes thereof.

In step S the embedded application which records data to the mounted recording medium such as an optical disc exchanges information with the Permission Managed Application and controls the optical disc drive thereby executing a process of writing the read content to the second optical disc .

By applying such a structure in the case where Managed Copy is executed in accordance with the framework of AACS the recording reproducing apparatus or picture recording recording reproducing apparatus can execute Managed Copy without including in advance applications that control execution of Managed Copy.

In addition since application programs that control execution of Managed Copy Managed Copy Application for content id Offers Managed Application and Permission Managed Application can execute processes in cooperation with the navigation program and the embedded application at the time of executing Managed Copy development of applications for executing Managed Copy is facilitated functions included in the navigation program and the embedded application can be used and additionally the updating of versions thereof can be easily handled.

With the above described processes for example as in JAVA registered trademark or the like the application program which can run on a multi platform due to the mounting of a virtual machine and is installed uniquely in the apparatus and the navigation program which is associated with a recording medium such as an optical disc mounted in the apparatus can be adapted to run in cooperation with each other using inter application communication such as IXC. The manufacturer of an apparatus that has a function of playing a recording medium such as an optical disc can differentiate the apparatus by installing or making it possible to install in the apparatus an application program that can run in cooperation with a navigation program associated with the recording medium such as the optical disc.

In addition since the application program may be downloaded from a predetermined server and installed for example by making it possible to access a server or the like at a downloading destination on the basis of information e.g. URL information recorded on the mounted optical disc e.g. the first optical disc the application program to be downloaded and installed may be determined in accordance with information recorded on the optical disc e.g. disc id and content id . Accordingly the recording reproducing apparatus or picture recording recording reproducing apparatus is configured to by downloading the application program corresponding to the mounted first optical disc execute a process in cooperation with the navigation program corresponding to the mounted first optical disc and a native function prepared in advance in the recording reproducing apparatus or the embedded application embedded in the recording reproducing apparatus .

Also for example by applying such a structure in the case where Managed Copy is executed in accordance with the framework of AACS the recording reproducing apparatus or picture recording recording reproducing apparatus need not include in advance applications that control execution of Managed Copy any more.

Accordingly even when the updating of the versions of applications that control execution of Managed Copy becomes necessary it is not necessary each time to update the versions to the newest versions in the recording reproducing apparatus . Also for example when transactions e.g. the method of exchanging information for authentication and the method of a fee charging process in authentication processes are different in a plurality of authentication servers it is no more necessary to prepare a plurality of embedded applications that can handle the respective transactions in the recording reproducing apparatus .

That is the provider of the recording reproducing apparatus or picture recording recording reproducing apparatus need not be conscious of protocols and the like regarding Managed Copy for each content author. Similarly the content author need not be conscious of distinctions among individual apparatuses having the Managed Copy function such as the recording reproducing apparatus regarding the technique of Managed Copy of content and the like a fee charging process and the like provided by itself. Therefore the degree of freedom of services provided to the user is increased for the provider of the recording reproducing apparatus or picture recording recording reproducing apparatus and for the content author.

Next referring to and a method of manufacturing an optical disc having recorded thereon data that can be reproduced by the recording reproducing apparatus or the picture recording recording reproducing apparatus that is data with the data structure described using which is data including a command querying a MovieObject as to whether or not the application program executed in cooperation with the navigation program is installed in the recording reproducing apparatus a command activating the application program when the application program executed in cooperation with the navigation program is installed in the recording reproducing apparatus and various commands needed to execute a process in cooperation with the application program will be described. Here the recording medium is shown as an optical disc by way of example. The recording medium in the drawing corresponds to the optical disc or the removable medium in . Note that when the removable medium is other than a disc shaped recording medium with a known recording medium manufacturing method data that can be reproduced by the recording reproducing apparatus or the picture recording recording reproducing apparatus is similarly recorded on the recording medium.

That is as shown in an original disc made of for example glass or the like is prepared and a recording material made of for example photoresist or the like is applied onto the original disc. Accordingly a recording original disc is manufactured.

Then as shown in in a software manufacturing processing unit video data in a format that can be reproduced by the recording reproducing apparatus or the picture recording recording reproducing apparatus which has been encoded by an encoding apparatus video encoder is temporarily stored in a buffer audio data encoded by an audio encoder is temporarily stored in a buffer and further data other than streams e.g. Indexes Playlist and PlayItem which is encoded by a data encoder is temporarily stored in a buffer. The video data the audio data and the data other than streams stored in the respective buffers are multiplexed with a synchronization signal using a multiplexer MPX and an error correcting code is added to the data using an error correcting code circuit ECC . Then predetermined modulation is applied to the data using a modulation circuit MOD and the modulated data is recorded once in accordance with a predetermined format on for example a magnetic tape or the like thereby manufacturing software to be recorded on the optical disc or the removable medium which can be played by the recording reproducing apparatus or the picture recording recording reproducing apparatus .

This software is edited premastered according to need thereby generating a signal in a format to be recorded on an optical disc. Then a laser beam is modulated in accordance with this recording signal and this laser beam is emitted onto the photoresist on the original disc. Accordingly the photoresist on the original disc is exposed to light in accordance with the recording signal.

Thereafter this original disc is developed whereby pits appear on the original disc. Processing such as electroforming is applied to the original disc prepared in this manner thereby manufacturing a metal original disc onto which the pits on the glass original disc are transferred. From this metal original disc a metal stamper is further manufactured which serves as a molding die.

A material such as PMMA acrylic or PC polycarbonate is injected into this molding die using for example injection or the like and is fixed. Alternatively after 2P ultra violet UV curable resin or the like is applied onto the metal stamper the UV curable resin is irradiated with UV rays and cured. Accordingly the pits on the metal stamper can be transferred onto a replica made of resin.

A reflection film is formed on the replica which is generated in this manner using vapor deposition sputtering or the like. Alternatively a reflection film is formed on the generated replica using spin coating.

Thereafter inside and outside diameter processing is applied to this disc and a necessary action such as pasting two discs together is taken. Further a label is affixed and a hub is attached to the disc and the disc is inserted into a cartridge. In this manner the optical disc or the removable medium having recorded thereon data that can be reproduced by the recording reproducing apparatus or the recording medium is completed.

In addition the above described series of processes can also be executed by software. Regarding the software a program configuring the software is installed from a program storage medium into a computer embedded in dedicated hardware a general personal computer for example which can execute various functions using various programs being installed therein or the like.

This program storage medium is configured with for example as shown in or not only the removable medium which has stored thereon the program and is distributed separately from a computer to distribute the program to a user such as a magnetic disk including a flexible disk an optical disc including CD ROM Compact Disk Read Only Memory and DVD Digital Versatile Disk a magneto optical disk including MD Mini Disk registered trademark or a semiconductor memory but also the memory such as a ROM or a RAM the local storage such as a hard disk and the like which are distributed to the user in a state where they are embedded in advance in the main body of the apparatus and which store the program.

Also the steps describing the program recorded on the program storage medium in the present specification may of course include processes performed time sequentially in accordance with the described order but also include processes executed not necessarily time sequentially but in parallel or individually.

Note that the system in the present specification represents the entirety of an apparatus constituted of a plurality of apparatuses.

Note that the embodiments of the present invention are not limited to the above described embodiments and various changes can be made without departing from the gist of the present invention.

