---

title: Resonant tree driven clock distribution grid
abstract: An integrated circuit (IC), IC assembly and circuit for distributing a clock signal in an integrated circuit includes a capacitive clock distribution circuit having at least one conductor therein. At least one inductor is formed in a metal layer of the integrated circuit and is coupled to the clock distribution circuit. The inductor, generally in the form of a number of spiral inductors distributed throughout the integrated circuit, provides an inductance value selected to resonate with the capacitive clock distribution circuit at resonance, power dissipation is reduced while skew and jitter performance can be improved.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07571410&OS=07571410&RS=07571410
owner: International Business Machines Corporation
number: 07571410
owner_city: Armonk
owner_country: US
publication_date: 20070426
---
The present application is a divisional application of allowed U.S. patent application Ser. No. 10 720 564 entitled RESONANT TREE DRIVEN CLOCK DISTRIBUTION GRID to Phillip J. RESTLE filed Nov. 24 2003 issued Jun. 26 2007 as U.S. Pat. No. 7 237 217 which is assigned to the assignee of the present invention and incorporated herein by reference.

The present invention relates generally to clock distribution in integrated circuits and more particularly relates to methods of distributing a high frequency clock with improved power efficiency and skew and jitter performance.

Clocking large digital chips with a single high frequency global clock is becoming an increasingly difficult task. As circuit size and clock frequency continue to increase skew and jitter as well as power consumption are becoming increasingly important design considerations.

While jitter and skew have traditionally been the dominant concerns in clock circuit design power consumption may soon gain primacy. With each new generation of integrated circuit clock capacitance and frequency are increasing resulting in significant increases in dynamic power dissipation. Considering that a 72 W 600 MHz Alpha processor dissipates more than half of its power in the clock circuit this is clearly an area ripe for design optimization.

To date most of the work in clock distribution has been focused on addressing the issues of skew and jitter. There are two general approaches to clock wiring trees and grids. Tunable trees consume less wiring and therefore represent less capacitance lower wiring track usage lower power and lower latency. Trees must however be carefully tuned and this tuning is a very strong function of load. Thus there is substantial interplay between the clock distribution circuit and the underlying circuit being driven by the clock circuit. Grids in contrast can present large capacitance and require significant use of wiring resources but provide relative load independence by connecting nearby points directly to the grid. This latter property has proven irresistible and most recent global clock distributions in high end microprocessors utilize some sort of global clock grid. Early grid distributions were driven by a single effective global clock driver positioned at the center of the chip.

Most modem clock distribution circuits use a balanced H tree to build up and distribute the gain required to drive the grid. The grid drive points are distributed across the entire chip rather than being concentrated at a single point this means that the grid can be less dense than a grid that is driven in a less distributed fashion resulting in less capacitance and less consumption of wiring resources. The shunting properties of the grid help to cancel out skew and jitter from imperfections in the tree distribution as well as balance out uneven clock loads.

To prevent skew and jitter from accumulating with increased distance from the clock source there have been several approaches for using multiple on chip clock sources. One approach is to create a distributed phase locked loop PLL in which there is a single phase frequency detector charge pump and low pass filter but multiple voltage controlled oscillators VCOs . These oscillators are distributed across the chip to drive a single clock grid. The grid acts to help cancel out across chip mismatches between the VCOs and limit skew and cycle to cycle jitter. The main problem with this approach is the need to distribute a global analog voltage across the chip the VCO control voltage which can be very susceptible to noise.

An alternative to this approach is to have multiple PLLs across the chip each driving the clock to only a small section or tile of the integrated circuit. Clock latency from the oscillator is reduced because the clock distribution is local and the clock loads for each PLL is smaller. In such a design each PLL must average the phases of its neighbors to determine lock and nonlinearities must be introduced into the phase detectors to avoid mode locked conditions. Any mismatch between the phase detectors adds uncompensated skew to the distribution.

To control clock power the most common technique employed is that of clock gating in which logic is introduced into the local clock distribution to shut off the clocking of sections of the design when they are not in use. These techniques generally favor relegating more of the clock load to local clocking where it can be gated and have been widely employed in low performance designs in which power is of prominent concern e. g. digital signal processors for mobile battery powered applications . Until recently clock gating has not been favored as a technique for high performance design because of the skew and jitter potentially introduced by the clock gating logic and because of delta I noise concerns i. e. transients introduced in the power supply distribution when large amounts of switching clock capacitance are turned on and off As clock power exceeds 80 W clock gating is beginning to be employed even in these high performance chips.

The natural limit of clock gating is to approach more asynchronous design techniques in which blocks are activated only in the presence of data. Globally asynchronous locally synchronous GALS design preserves the paradigm of synchronous design locally. Asynchronous design techniques however are more difficult to design costlier to implement more challenging to test and more difficult to verify and debug. There is clearly a significant desire to continue to use and improve upon globally synchronous designs.

The virtues of LC type oscillators for achieving lower power and better phase stability than oscillators based on delay elements have been long recognized. The adiabatic logic community has already considered the importance of resonant clock generation since the clocks are used to power the circuits and such resonance is fundamental to the energy recovery. These generators generally produce sinusoidal or near sinusoidal clock waveforms. To combine the clock generation and distribution distributed LC oscillators in the form of transmission line systems have been considered. These also bear resemblance to distributed oscillators. In salphasic clock distribution a standing sinusoidal wave is established in an unterminated transmission line. As a result each receiver along the line receives a sine wave of identical phase but different amplitude . Unfortunately on chip transmission lines tend to be very lossy and exhibit low bandwidths for long wire lengths. This produces significant phase error due to the mismatch in amplitude between forward and reverse propagating waves.

Another approach that has been proposed uses a set of coupled transmission line rings as LC tank circuits pumped by a set of cross coupled inverters to distribute clock signals. The propagation time around the rings determines the oscillation frequency and different points around the ring have different phases. This approach however also has many significant difficulties. Rings must be precisely tuned even with potentially varying lumped load capacitance producing discontinuities in the transmission line. Fundamentally the distribution and the resonance determining the clock frequency are fundamentally linked in which the former may depend on geometry or other constraints inconsistent with the desired resonance frequency.

Another approach to synchronized clock distribution in an integrated circuit is disclosed in U.S. Pat. No. 6 057 724 to Warm. The Warm patent discloses a clock distribution circuit which includes a parallel plate microstrip resonator formed in the integrated circuit which operates as a resonant cavity to generate a clock signal.

Despite the various efforts to provide clock distribution circuits for very large scale integrated circuits there remains a need for a clock distribution circuit which offers lower power consumption without sacrificing and preferably improving skew and jitter performance.

It is a purpose of the invention to provide an integrated circuit clock distribution topology which enables efficient distribution of high speed clock signals in large and very large scale integrated circuits 

It is another purpose of the invention to provide a clock distribution circuit which consumes less power than a conventional clock distribution circuit operating at the same clock speed 

It is yet another purpose of the invention to provide a clock distribution circuit which consumes less power than a conventional clock distribution circuit operating at the same clock speed while maintaining or improving skew and jitter performance 

It is yet another purpose of the invention to provide a clock distribution circuit in which the clock distribution circuit presents a resonant circuit at the operating frequency of the clock.

In accordance with the present invention a integrated circuit IC IC assembly and circuit for distributing a clock signal in an integrated circuit are provided which includes a capacitive clock distribution circuit having at least one conductor therein and at least one inductor formed in a metal layer of the integrated circuit. The inductor s is coupled to the conductor and has an inductance value selected to resonate with the capacitive clock distribution circuit.

Preferably inductor s takes the form of a number of inductors such as spiral inductors distributed throughout the integrated circuit.

The clock distribution circuit can include a clock grid circuit which is coupled to one or more H tree driving circuits. In larger integrated circuits a hierarchical architecture can be employed wherein the integrated circuit is partitioned into a plurality of sectors with each sector being driven by an H tree and the sector based H trees being driven by at least one further H tree distribution circuit.

In another embodiment in accordance with the present invention a clock distribution circuit includes a clock driver circuit which is coupled to a clock distribution circuit. The clock distribution circuit presents a clock circuit capacitance to the clock driver circuit. A number of inductors are coupled to the clock grid circuit. The inductors are spatially distributed about the clock grid circuit and present a total inductance value which is substantially resonant with the clock circuit capacitance at the operating frequency of the clock driver circuit.

The clock distribution circuit can include a clock grid which is coupled to one or more tree distribution circuits. The clock driver circuit can include a master clock which is provided to one or more buffer amplifiers throughout the integrated circuit. Alternatively the clock driver circuit can be formed with a number of synchronized phase lock loop circuits coupled to the clock grid circuit.

To optimize the Q of the resonant clock circuit the capacitance of the clock distribution circuit can be tuned by including one or more capacitors which can be selectively switched into or out of the clock distribution circuit to optimize the circuit resonance.

The present invention provides a circuit topology and design method for distributing a clock signal within an integrated circuit. The present invention provides a clock distribution circuit which is substantially resonant at the clocking frequency such that power efficiency is improved and skew and jitter is minimized.

Referring to the circuit for each sector includes a clock driver circuit which is coupled to a conventional H Tree at central driving point . The H tree is coupled to a clock grid via connection vias in a manner well known in the art. The H tree and clock grid along with the circuitry coupled to the clock grid present a capacitive load to the clock driver circuit which is referred to herein as the clock circuit capacitance C . The clock driver circuit will generally take the form of a buffer amplifier. However in certain embodiments the clock driver circuit may take the form of a local oscillator which is synchronized to a master clock. The present invention employs at least one inductor and more preferably a number of spiral inductors which are coupled to the clock grid and operate to resonate with the clock circuit capacitance thereby forming a resonant circuit with the clock grid . In the embodiment depicted in the spiral inductors have one end coupled directly to the clock grid and the other end to a supply or ground potential via a large decoupling capacitance not shown. The use of AC coupling of inductors in this fashion establishes a mid rail DC voltage about which the clock grid oscillates. This mid rail DC voltage can be used as a reference voltage in a pseudo differential switching circuit. The decoupling capacitors can be formed as thin oxide capacitors which are located in the integrated circuit below each spiral inductor within the active device layer.

The clock tree is typically formed on the top two metal layers e.g. M6 and M5 layers of the integrated circuit and the clock grid is formed on the top three metal layers e.g. M6 M5 M4 layers of the integrated circuit. The clock grid is formed as a regular mesh using 1.5 m wide line segments which are fingered 0.5 m apart. As illustrated in it is preferable for each clock line of the clock tree and clock grid to be split into finger segments and shielded with ground segments on either side and between the clock distribution line segments to control transmission line properties. The clock tree is formed using 10 m wide line segments spaced 0.5 m apart. In another higher frequency embodiment the clock tree is formed with 3 m wide copper tree wires on 0.84 m spaces. For the sake of clarity the grid for power distribution which is generally formed on the M4 MS and M6 layers has been omitted from the diagram in .

The spiral inductors are fabricated on the top two metal layers and are formed with a spiral length spacing and line width to present an inductance value that will substantially resonate with the capacitance presented by the clock tree and clock grid at the desired clock frequency.

The clock grid generally presents a capacitive load in which the stray inductance is low. By way of a mechanical analogy the capacitive clock grid operating at resonance with the spiral inductors can be viewed as a rigid mass which is supported by a number of springs and oscillates as a unit. Thus at resonance the entire clock grid is oscillating in phase.

In contrast to the methods of clock distribution which utilize a standing wave in the distribution circuit by virtue of the spiral inductors and low inductance of the grid circuit the present circuit presents an eigenmode of the grid in which it rigidly oscillates as a contiguous unit at the clock frequency f . By taking steps to insure that the grid presents a low inductance such as by fingering the clock distribution and grid conductors unwanted resonances generally associated with the distribution circuit are pushed to high frequencies so that they do not interfere with the engineered resonance at f.

It will be appreciated that in the present clock distribution circuits the spiral inductors exist in an environment quite different from those that are presented in typical radio frequency RF applications in which these components are generally used. Specifically the inductors embedded in the metal rich environment of a digital integrated circuit. As such eddy current losses due to neighboring wires should be considered and minimized. Such eddy current losses will result in Q degradation of the resulting resonant clock circuit and may result in inductive noise in the power ground distribution or in neighboring signal lines. Because the spiral inductors are generally much larger than the power grid most of the potential deleterious coupling will be to the underlying power grid. To reduce eddy current formation in the underlying grid the vias in the grid can be dropped and small cuts can be made in the wires. This technique is generally known to those skilled in the art of RF circuit design as it is analogous to ground plane laminations used for spiral inductors in RF circuits.

The decoupling capacitor C is chosen to have a value large enough such that the resonance formed with the inductor is much lower in frequency than the desired resonant frequency of the clock grid and clock tree. Therefore C will generally have a value substantially larger than C. For example setting C at a value approximately ten times larger than C is expected to provide adequate results. When this is achieved the driving point admittance of the clock distribution circuit is substantially determined by the clock capacitance and inductance of inductors . This is expressed as 1 

The inductance value of inductor is selected such that the capacitive reactance of Cis resonated out by the inductive reactance of inductor . When the circuit is substantially resonant at the clock frequency rather than having the clock energy dissipated as heat during each clock cycle a significant portion of the energy of the clock is converted from electrical to magnetic energy and back. This substantially non dissipative power conversion process reduces the power consumption of the clock distribution thereby increasing efficiency. The improved efficiency also means that less heat needs to be dissipated by the device which can reduce heat sinking and venting requirements for the resulting integrated circuit.

While in the equivalent circuit of the spiral inductors are represented by a single inductance L it is beneficial to distribute this total inductance using a large number of inductors distributed throughout the grid as illustrated in . It will be appreciated that the spiral inductors are coupled together as a parallel circuit. Thus for a 1 GHz clock distributed on a clock grid for a sector having a capacitance of 100 pf approximately 250 pH of inductance is required to form a resonant circuit. This 250 pH inductance can be obtained by use of four 4 1 nH spiral inductors distributed throughout the grid as illustrated in . An 1 nH spiral inductor can be formed in an area of about 100 m square i.e. 100 m by 100 m using 3 turns of 5 m wide line segments. Distributing the inductance throughout the clock grid serves to reduce the peak current density through each inductor and balances the current distribution throughout the clock grid .

As with other generally known resonant circuits the Q factor of the resonance of the clock circuit of the present invention effects the quality of the results. When the Q is higher the clock driver circuits can be made weaker since there is less loss that must be overcome at the fundamental clock frequency. This is desirable as a weaker driver consumes less power and presents less skew and jitter. However use of a weak driver tends to result in a more sinusoidal clock signal. When the Q is poor the drivers must be larger to overcome the losses of the clock circuit. More power is dissipated in the distribution not only because more energy must be provided at the fundamental to overcome losses but also due to lossy higher frequency components that are also being driven in the clock network by the drivers. Thus efficiency is reduced.

Typically the Q factor which is obtained in the embodiments described herein is on the order of 3 5. Higher Q values may be desirable to further improve power savings and skew and jitter performance. As higher Q values are obtained the desirability of tuning the circuit becomes more significant. The present clock distribution can be tuned by including one or more MOS capacitors which are selectively coupled to the clock grid or distribution circuit such as by MOS switches.

Skew and jitter in conventional clock distribution networks comes about because of spatial and temporal variation respectively in the clock latency. A significant component to skew and jitter is variation in the latency of the buffering or gain stages needed to drive the large capacitive load of the clock network. Across die variability sometimes referred to as across chip line width variation or ACLV is a significant source of skew and power supply noise which when coupled through the buffers is a significant source of jitter. Resonant clock distribution circuits of the present invention can significantly reduce this component of clock latency by reducing the size of clock drivers which can result in improved skew and jitter performance.

In the embodiment shown in a hierarchical H tree distribution scheme is used to distribute a master clock driver signal throughout an integrated circuit to a number of distributed drivers in the individual sectors of an integrated circuit. It will be appreciated that various other clock distribution schemes can be used to drive the resonant clock circuit. For example multiple phase lock loop circuits can be distributed throughout the clock grid with the PLLs driving the grid and being locked thereto. In this case one of the PLL circuits is referenced to an external clock and the remaining PLLs synchronize to this master PLL. In this form of clock distribution mode locking wherein the system is stable with non zero relative phase difference between the PLLs needs to be avoided. Should mode locking occur significant short circuit current would flow.

Furthermore while inductors and capacitors can be on chip to conserve chip wiring resources or chip area it may be desirable to implement the inductors or capacitors off chip in a package or interposer not shown that is closely connected to the chip. Locating the capacitors and or inductors off chip is possible provided there are enough interconnections available with low enough parasitic resistance capacitance and inductance to achieve the desired oscillator characteristics. The sector buffers or clock trees can also be moved onto another chip as long as the chip to chip interconnects are acceptable.

In addition a preferred embodiment clock distribution provides a coarse tuning capability in a resonant clock distribution that may be tuned for optimum performance in a desired frequency range. A resonant quality factor in the range of 1.5 to 4 is acceptable for tuning to realize benefits from reduced power jitter and skew that are achievable even at low quality factors. Since the quality factor is relatively low the clock distribution performs well over a wide range of frequencies. For a quality factor of 2.5 simulated power savings have been shown over range of a factor of 2 range in clock frequency. So it is unnecessary to accurately tune the LC oscillator frequency.

However performance and skew can be still further improved if all parts of the chip resonate with the same frequency which can be done in a number of ways. For example the inductance can be changed by adjusting the number of turns of the spiral inductor or by shrinking the inductor area i.e. the length of each turn. Alternately the decoupling capacitor capacitance can be tuned incrementally increased decreased to change the resonant frequency. Also additional grid wires or gate capacitors can be connected to the clock grid to increase the effective Cresonating with a particular inductor which reduces the resonant frequency.

During normal operating conditions the circuit is intended to operate at the clock frequency at which the circuit is resonant. However it is well known in the art that certain operations of an integrated circuit such as during manufacturing testing or debugging operations occur at clock frequencies well below the normal clock frequency. It will be appreciated that the present clock distribution circuits do not prevent such reduced frequency operations.

While the invention has been described in terms of preferred embodiments those skilled in the art will recognize that the invention can be practiced with modification within the spirit and scope of the appended claims.

