---

title: Method and apparatus for determining power required for data transmission in communication systems
abstract: Methods and apparatus for estimating a transmission power required for data transmission in a communication system are disclosed. A terminal determines a quality metric of a communication link, over which data are to be transmitted, and modifies the determined quality metric by a quality metric margin. The terminal then estimates the maximum rate of data in accordance with the modified quality metric. Alternatively, the terminal estimates transmission power required for data transmission with a data rate in accordance with the modified quality metric. The quality metric margin may be a pre-determined or dynamically adjusted. The terminal dynamically adjusts the quality metric margin in accordance with a result of comparison of a transmit power corresponding to the estimated maximum rate of data with an actual transmit power used to transmit the data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07693213&OS=07693213&RS=07693213
owner: QUALCOMM, Inc.
number: 07693213
owner_city: San Diego
owner_country: US
publication_date: 20070125
---
The present Application for Patent is a Divisional application and claims priority to patent application Ser. No. 10 090 712 entitled Method and Apparatus for Estimating a Maximum Rate of Data and for Estimating Power Required for Transmission of Data at a Rate of Data in a Communication System filed Mar. 4 2002 currently pending and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present invention relates generally to communication systems and more specifically to a method and an apparatus for estimating a reverse link maximum data rate and for estimating power required for transmission of data at a rate of data in a communication system.

Communication systems have been developed to allow transmission of information signals from an origination station to a physically distinct destination station. In transmitting an information signal from the origination station over a communication channel the information signal is first converted into a form suitable for efficient transmission over the communication channel. Conversion or modulation of the information signal involves varying a parameter of a carrier wave in accordance with the information signal in such a way that the spectrum of the resulting modulated carrier wave is confined within the communication channel bandwidth. At the destination station the original information signal is reconstructed from the modulated carrier wave received over the communication channel. In general such a reconstruction is achieved by using an inverse of the modulation process employed by the origination station.

Modulation also facilitates multiple access i.e. simultaneous transmission and or reception of several signals over a common communication channel. Multiple access communication systems often include a plurality of remote subscriber units requiring intermittent service of relatively short duration rather than continuous access to the common communication channel. Several multiple access techniques are known in the art such as Time Division Multiple Access TDMA and a Frequency Division Multiple Access FDMA . Another type of multiple access technique is a Code Division multiple access CDMA spread spectrum system that conforms to the TIA EIA IS 95 Mobile Station Base Station Compatibility Standard for Dual Mode Wide Band Spread Spectrum Cellular System hereinafter referred to as the IS 95 standard. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS and U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM both assigned to the assignee of the present invention.

A multiple access communication system may be a wireless or wire line and may carry voice and or data. An example of a communication system carrying both voice and data is a system in accordance with the IS 95 standard which specifies transmitting voice and data over the communication channel. A method for transmitting data in code channel frames of fixed size is described in detail in U.S. Pat. No. 5 504 773 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention. In accordance with the IS 95 standard the data or voice is partitioned into code channel frames that are 20 milliseconds wide with data rates as high as 14.4 kbps. Additional examples of a communication systems carrying both voice and data comprise communication systems conforming to the 3rd Generation Partnership Project 3GPP embodied in a set of documents including Document Nos. 3G TS 25.211 3G TS 25.212 3G TS 25.213 and 3G TS 25.214 the W CDMA standard or TR 45.5 Physical Layer Standard for cdma2000 Spread Spectrum Systems the IS 2000 standard .

In a multiple access communication system communications between users are conducted through one or more base stations. A first user on one subscriber station communicates to a second user on a second subscriber station by transmitting data on a reverse link to a base station. The base station receives the data and can route the data to another base station. The data is transmitted on a forward link of the same base station or the other base station to the second subscriber station. The forward link refers to transmission from a base station to a subscriber station and the reverse link refers to transmission from a subscriber station to a base station. Likewise the communication can be conducted between a first user on one mobile subscriber station and a second user on a landline station. A base station receives the data from the user on a reverse link and routes the data through a Public Switched Telephone Network PSTN to the second user. In many communication systems e.g. IS 95 W CDMA IS 2000 the forward link and the reverse link are allocated at separate frequencies.

An example of a data only communication system is a High Data Rate HDR communication system that conforms to the TIA EIA IS 856 industry standard hereinafter referred to as the IS 856 standard. This HDR system is based on a communication system disclosed in U.S. Pat. No. 6 574 211 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION issued Jun. 3 2003 to Padovani et al. and assigned to the assignee of the present invention. The HDR communication system defines a set of data rates ranging from 38.4 kbps to 2.4 Mbps at which an Access Point AP may send data to a subscriber station Access Terminal AT . Because the AP is analogous to a base station the terminology with respect to cells and sectors is the same as with respect to voice systems.

In a wireless communication system maximizing a capacity of the communication system in terms of the number of simultaneous telephone calls that can be handled is extremely important. The capacity in a spread spectrum communication system can be maximized if the transmission power of each subscriber station is controlled such that each transmitted signal arrives at a base station receiver at the same signal level. However if a signal transmitted by a subscriber station arrives at the base station receiver at a power level that is too low quality communications cannot be achieved due to interference from the other subscriber stations. On the other hand if the subscriber station transmitted signal is at a power level that is too high when received at the base station communication with this particular subscriber station is acceptable but this high power signal acts as interference to other subscriber stations. This interference may adversely affect communications with other subscriber stations. Therefore each subscriber station needs to transmit the minimum signal level expressed as e.g. a signal to noise ratio that allows transmitted data recovery.

Consequently the transmission power of each subscriber station within the coverage area of a base station is controlled by the base station to produce the same nominal received signal power or a signal to noise ratio at the base station. In an ideal case the total signal power received at the base station is equal to the nominal power received from each subscriber station multiplied by the number of subscriber stations transmitting within the coverage area of the base station plus the power received at the base station from subscriber stations in the coverage area of neighboring base stations.

The path loss in the radio channel can be characterized by two separate phenomena average path loss and fading. The forward link from the base station to the subscriber station operates on a different frequency than the reverse link from the subscriber station to the base station. However because the forward link and reverse link frequencies are within the same general frequency band a significant correlation between the average path losses of the two links exists. On the other hand fading is an independent phenomenon for the forward link and reverse link and varies as a function of time.

In an exemplary CDMA system each subscriber station estimates the path loss of the forward link based on the total power at the input to the subscriber station. The total power is the sum of the power from all base stations operating on the same frequency assignment as perceived by the subscriber station. From the estimate of the average forward link path loss the subscriber station sets the transmit level of the reverse link signal. This type of an open loop control is advantageous when there is a correlation between a forward link and a reverse link. Should the reverse link channel for one subscriber station suddenly improve compared to the forward link channel for the same subscriber station due to independent fading of the two channels the signal as received at the base station from this subscriber station would increase in power. This increase in power causes additional interference to all signals sharing the same frequency assignment. Thus a rapid response of the subscriber station transmit power to the sudden improvement in the channel would improve system performance. Therefore it is necessary to have the base station continually contribute to the power control mechanism of the subscriber station. Such a power control mechanism relies on a feedback also referred to as a closed loop.

Each base station with which the subscriber station is in communication measures the received signal strength from the subscriber station. The measured signal strength is compared to a desired signal strength level for that particular subscriber station. A power adjustment command is generated by each base station and sent to the subscriber station on the forward link. In response to the base station power adjustment command the subscriber station increases or decreases the subscriber station transmit power by a predetermined amount. By this method a rapid response to a change in the channel is effected and the average system performance is improved. Note that in a typical cellular system the base stations are not intimately connected and each base station in the system is unaware of the power level at which the other base stations receive the subscriber station s signal.

When a subscriber station is in communication with more than one base station power adjustment commands are provided from each base station. The subscriber station acts upon these multiple base station power adjustment commands to avoid transmit power levels that may adversely interfere with other subscriber station communications and yet provide sufficient power to support communication from the subscriber station to at least one of the base stations. This power control mechanism is accomplished by having the subscriber station increase its transmit signal level only if every base station with which the subscriber station is in communication requests an increase in power level. The subscriber station decreases its transmit signal level if any base station with which the subscriber station is in communication requests that the power be decreased. A system for base station and subscriber station power control is disclosed in U.S. Pat. No. 5 056 109 entitled METHOD AND APPARATUS FOR CONTROLLING TRANSMISSION POWER IN A CDMA CELLULAR MOBILE TELEPHONE SYSTEM issued Oct. 8 1991 assigned to the Assignee of the present invention.

There is a relationship between a transmission power and a rate of data to be transmitted. Communication systems in general do not allow an instantaneous change of rate of data. If a transmission channel link condition changes resulting in a need to change a transmission power and a data rate during the interval when a rate of data cannot be changed the transmitted data may be erased. Therefore there is a need in the art to estimate a rate of data that can be transmitted without an erasure under all channel conditions or alternatively to estimate power required for transmission of data at a rate of data.

In one aspect of the invention the above stated needs are addressed by determining at a source of data a quality metric of a link over which data is to be transmitted and modifying said quality metric by a quality metric margin. The maximum rate of data is then determined in accordance with said modified quality metric. Alternatively power required for transmission of data at a rate of data is determined in accordance with said modified quality metric and a rate of the data.

In another aspect of the invention the quality metric is modified by a pre determined quality metric margin. Alternatively modifying said quality metric by a quality metric margin is achieved by declaring an outage event when power required for transmission of a second reference signal exceeds power required for transmission of the second reference signal determined from previously modified quality metric detecting occurrence of the outage event during a pre determined interval and modifying said quality metric in accordance with said detecting.

In another aspect of the invention the outage is detected by determining at a source of data a quality metric of a link over which data is to be transmitted modifying said quality metric by a quality metric margin and declaring an outage event when power required for transmission of a reference signal exceeds power required for transmission of the reference signal determined from the modified quality metric. Alternatively the outage is detected by determining at a source of data a quality metric of a link over which data is to be transmitted modifying said quality metric by a quality metric margin determining a maximum rate of data in accordance with said modified quality metric and declaring an outage event when power required for transmission of data at the maximum rate of data exceeds maximum allowable transmission power.

The word exemplary is used exclusively herein to mean serving as an example instance or illustration. Any embodiment described herein as exemplary is not necessarily to be construed as preferred or advantageous over other embodiments.

The term access network is used exclusively herein to mean a collection of access points AP and one or more access point controllers. The access network transports data packets between multiple access terminals AT . The access network may be further connected to additional networks outside the access network such as a corporate intranet or the Internet and may transport data packets between each access terminal and such outside networks.

The term base station referred to herein as an AP in the case of an HDR communication system is used exclusively herein to mean the hardware with which subscriber stations communicate. Cell refers to the hardware or a geographic coverage area depending on the context in which the term is used. A sector is a partition of a cell. Because a sector has the attributes of a cell the teachings described in terms of cells are readily extended to sectors.

The term subscriber station referred to herein as an AT in the case of an HDR communication system is used exclusively herein to mean the hardware with which an access network communicates. An AT may be mobile or stationary. An AT may be any data device that communicates through a wireless channel or through a wired channel for example using fiber optic or coaxial cables. An AT may further be any of a number of types of devices including but not limited to PC card compact flash external or internal modem or wireless or wireline phone. An AT that is in the process of establishing an active traffic channel connection with an AP is said to be in a connection setup state. An AT that has established an active traffic channel connection with an AP is called an active AT and is said to be in a traffic state.

The term communication channel link is used exclusively herein to mean a single route over which a signal is transmitted described in terms of modulation characteristics and coding or a single route within the protocol layers of either the AP or the AT.

The term reverse channel link is used exclusively herein to mean a communication channel link through which the AT sends signals to the AP.

A forward channel link is used exclusively herein to mean a communication channel link through which an AP sends signals to an AT.

The term soft hand off is used exclusively herein to mean a communication between a subscriber station and two or more sectors wherein each sector belongs to a different cell. In the context of IS 95 standard the reverse link communication is received by both sectors and the forward link communication is simultaneously carried on the two or more sectors forward links. In the context of the IS 856 standard data transmission on the forward link is non simultaneously carried out between one of the two or more sectors and the AT.

The term outage is used exclusively herein to mean a time interval during which the likelihood that a subscriber station will receive service is reduced.

In the above mentioned communication system an AP transmits data to an AT over a forward link and receives data from the AT over a reverse link . Similarly an AP transmits data to the AT over a forward link and receives data from the AT over a reverse link . In accordance with one embodiment data transmission on the forward link occurs from one AP to one AT at or near the maximum data rate that can be supported by the forward link and the communication system. Other channels of the forward link e.g. control channel may be transmitted from multiple APs to one AT. Reverse link data communication may occur from one AT to one or more APs. The AP and the AP are connected to a controller over backhauls and . The term backhaul is used to mean a communication link between a controller and an AP. Although only two AT s and one AP are shown in one of ordinary skill in the art recognizes that this is for pedagogical purposes only and the communication system can comprise plurality of AT s and AP s.

Initially the AT and one of the AP s e.g. the AP establish a communication link using a predetermined access procedure. In this connected state the AT is able to receive data and control messages from the AP and is able to transmit data and control messages to the AP . The AT continually searches for other APs that could be added to the AT active set. The active set comprises a list of the APs capable of communication with the AT . When such an AP is found the AT calculates a quality metric of the AP s forward link which in one embodiment comprises a signal to interference and noise ratio SINR . In one embodiment the AT searches for other APs and determines the AP s SINR in accordance with a pilot signal. Simultaneously the AT calculates the forward link quality metric for each AP in the AT active set. If the forward link quality metric from a particular AP is above a predetermined add threshold or below a predetermined drop threshold for a predetermined period of time the AT reports this information to the AP . Subsequent messages from the AP direct the AT to add to or to delete from the AT active set the particular AP.

The AT selects a serving AP from the active set based on a set of parameters. The term serving AP refers to an AP that a particular AT selected for data communication or an AP that is communicating data to the particular AT. The set of parameters can comprise present and previous SINR measurements a bit error rate and or a packet error rate and other parameters known to one skilled in the art. In one embodiment the serving AP is selected in accordance with the largest SINR measurement. The AT then specifies the selected AP in a data request message DRC message transmitted on the data request channel DRC channel . The DRC message can contain the requested data rate or alternatively an indication of the quality of the forward link e.g. the measured SINR the bit error rate or the packet error rate. In one embodiment the AT can direct the transmission of the DRC message to a specific AP by the use of a Walsh code which uniquely identifies the specific AP. The DRC message symbols are tensor multiplied shaped with the unique Walsh code. The tensor multiplication shaping operation is referred to as Walsh covering of a signal. Since each AP in the active set of the AT is identified by a unique Walsh code only the selected AP which correlates the DRC signal with the correct Walsh code can correctly decode the DRC message.

The data to be transmitted to the AT arrives at the controller . In accordance with one embodiment the controller sends the data to all APs in AT active set over the backhaul . In another embodiment the controller first determines which AP was selected by the AT as the serving AP and then sends the data to the serving AP. The data is stored in a queue at the AP s . A paging message is then sent by one or more APs to the AT on respective control channels. The AT demodulates and decodes the signals on one or more control channels to obtain the paging messages.

At each time slot the AP can schedule data transmission to any of the ATs that received the paging message. An exemplary method for scheduling transmission is described in U.S. Pat. No. 6 229 795 entitled SYSTEM FOR ALLOCATING RESOURCES IN A COMMUNICATION SYSTEM assigned to the assignee of the present invention. The AP uses the rate control information received from each AT in the DRC message to efficiently transmit forward link data at the highest possible rate. In one embodiment the AP determines the data rate at which to transmit the data to the AT based on the most recent value of the DRC message received from the AT . Additionally the AP uniquely identifies a transmission to the AT by using a spreading code which is unique to that mobile station. In the exemplary embodiment this spreading code is the long pseudo noise PN code which is defined by the IS 856 standard.

The AT for which the data packet is intended receives the data transmission and decodes the data packet. In one embodiment each data packet is associated with an identifier e.g. a sequence number which is used by the AT to detect either missed or duplicate transmissions. In such an event the AT communicates via the reverse link data channel the sequence numbers of the missing data units. The controller which receives the data messages from the AT via the AP communicating with the AT then indicates to the AP what data units were not received by the AT . The AP then schedules a retransmission of such data units.

One skilled in the art recognizes that an AP can comprise one or more sectors. In the description above the term AP was used generically to allow clear explanation of basic concepts of the HDR communication system. However one skilled in the art can extend the explained concepts to an AP comprising any number of sectors. Consequently the concept of sector will be used throughout the rest of the document.

Unlike the forward link whose channels are always transmitted at full available power the reverse link comprises channels whose transmission is power controlled to achieve the goal of maximized capacity of the communication system as explained above. Consequently aspects of the maximum rate of data estimation will be described in the context of the reverse link. However as those of ordinary skill in the art will readily appreciate these aspects are equally applicable to a forward link in a communication system whose forward link is also power controlled.

The reverse link transmission power of the communication system in accordance with the IS 856 standard is controlled by two power control loops an open loop and a closed loop. Conceptual arrangement of the open loop and closed loop is illustrated in . The first power control loop is an open loop control. The open loop generates an estimate of the reverse link quality metric in block . In one embodiment the quality metric is a path loss. The estimated path loss is then translated into a required transmit power TxOpenLoopPwr in accordance with other factors e.g. a base station loading. In one embodiment illustrated in block of comprises a filter filtering a received signal power RxPwr. The filtered RxPwr is provided to block together with a parameter K providing compensation for base station loading and translation to the TxOpenLoopPwr. In one embodiment the block combines the filtered RxPwr and the parameter K in accordance with an Equation 1 TxOpenLoopPwr RxPwr 1 

In one embodiment the received signal is a signal received on a pilot channel. One of ordinary skill in the art recognizes that other embodiments of an open loop estimation process are well known the art and are equally applicable.

Referring back to the function of the closed loop is to correct the open loop estimate which does not take into account environmentally induced phenomena such as shadowing and other user interferences to achieve a desired signal quality at the base station. In one embodiment the desired signal quality comprises a signal to noise ratio SNR . The objective can be achieved by measuring the quality metric of a reverse link and reporting results of the measurement back to the subscriber station. In one embodiment the base station measures a reference signal transmitted over the reverse link and provides feedback to the subscriber station. The subscriber stations adjust the reverse link transmission power in accordance with the feedback signal. In one embodiment the reference signal comprises a pilot SNR and the feedback comprises the RPC commands which are summed in a summer and scaled to obtain the required closed loop transmit power TxClosedLoopAdj . Like the open loop the closed loop is well known in the art and other known embodiments are equally applicable as recognized by one of ordinary skill in the art.

The TxOpenLoopPwr and the TxClosedLoopAdj are summed in a block to yield TxPilotPwr. The value of the TxPilotPwr is in general different from the value of total transmit power required for transmission of a desired reverse link rate of data rlRate . Consequently the TxPilotPwr needs to be adjusted for the required rlRate. This is accomplished by translating the rlRate to a power in block and combining the result of the translation with the TxPilotPwr in a block to yield the total transmit power TxTotalPwr . Consequently the TxTotalPwr can be expressed by an Equation 2 TxTotalPwr TxOpenLoopPwr TxClosedLoopAdj PilotToTotalRatio rlRate 2 where the PilotToTotalRatio is a function describing a translation between the rate of data of a signal used for determining the TxOpenLoopPwr and the TxClosedLoopAdj and the rlRate.

Because a transmitter implementation has maximum allowable power TxMaxPwr the TxTotalPwr may be optionally limited in block . In one embodiment the transmit power limiting is performed in accordance with a method illustrated in . The method starts in step and continues in step . In step the TxTotalPwr is compared to the TxMaxPwr. If the TxTotalPwr is less or equal to TxMaxPwr the method continues in step where the TxPwrLimited is set equal to TxMaxPwr otherwise the method continues in step where the TxPwrLimited is set equal to TxTotalPwr. The method ends in step .

As follows from the above described power control method if the TxTotalPwr is greater than the TxMaxPwr the transmitted power is limited to the TxMaxPwr. Consequently there is no assurance that the data transmitted will be successfully received and decoded at the BS. Consequently a maximum admissible rate of data estimator is included in the power control loop as described in the embodiments below.

As illustrated in TxOpenLoopPwr is provided to a linear time invariant filter . In one embodiment the filter is a low pass filter. In another embodiment the filter has a transfer function F 1 consequently the TxOpenLoopPwr is unaffected by the filter . The TxOpenLoopPwr filtered by a filter is provided to a filter . In one embodiment the filter is a peak filter. The function of the peak filter is explained in reference to .

Referring to at time t the Input signal is provided to a peak filter. The value of the output of the peak filter Output signal is initialized to the value of Input signal. From time tto time t the Output signal tracks the Input signal. At time t the Input signal reached a peak and started to decay. The Output signal stopped to follow the Input signal and started to decay by a pre determined rate. At time t the Input signal became equal to the Output signal and continued to rise. Consequently the Output signal stops decaying and starts tracking the Input signal.

Referring back to the TxOpenLoopPred is provided to a combiner block . In one embodiment the combiner block comprises a summer summing the TxOpenLoopPred with a prediction of the closed loop adjustment TxClosedLoopPred to yield a prediction of transmit pilot power TxPilotPred . The predicted closed loop adjustment TxClosedLoopPred is estimated by providing feedback signals for the closed loop to a block . In one embodiment the feedback signal comprises the RPC commands consequently the block comprises a summer. The output of the summer represents the estimate of correction to the open loop estimated transmit power TxClosedLoopAdj . The TxClosedLoopAdj is provided to a block . In one embodiment the block comprises a filter as described in reference to i.e. an optional low pass filter and a non optional peak filter . In accordance with one embodiment the pre determined decay rate of the peak filter is 0.5 dB per a frame of signal. The peak filter is initialized as follows. One of the ATs and one of the APs establish a communication link using a predetermined access procedure as part of which the RPC channel is established. Assuming that the RPC channel was established at time t referring to the RPC commands are being provided to the block and consequently to the peak filter . The TxClosedLoopPred the Output signal of is then initialized to the value of TxClosedLoopAdj the Output signal of at the time t.

Referring back to the block the TxPilotPred is provided to a combiner block . Combiner block also accepts a transmission power margin TxPwrMargin . In one embodiment not shown the TxPwrMargin is a constant with default value of 3 dB. In another embodiment the TxPwrMargin is dynamically adjusted by block in accordance with outage events. The method for dynamically adjusting the TxPwrMargin is described in detail below. Referring back to the combiner block in one embodiment the combiner block is a summer consequently the output a bounded transmission pilot signal TxPilotUpperBound is given by an Equation 3 TxPilotUpperBound TxOpenLoopPred TxClosedLoopPred TxPwrMargin 3 The value of the TxPilotPred is in general different from the value of total transmit power required for transmission of a desired reverse link rate of data rlRate . Consequently the TxPilotUpperBound needs to be adjusted for the required rlRate. This is accomplished by translating the rlRate to a power in block and is combining the result of the translation with the TxPilotUpperBound in a block to yield the bounded total transmit power. A given rlRate is considered to be admissible if an Equation 4 is satisfied TxPilotUpperBound PilotToTotalRatio rlRate 

To optimize performance of a communication system it is desired that the highest data rate rlRatePredicted which is admissible according to the Equation 4 is determined. Consequently the TxTotalPwrUpperBound is compared with the maximum power available for transmission TxMaxPwr in block . Thus the block evaluates the Equation 4 . The result of the comparison is provided to a block . If the Equation 4 is satisfied the block selects rlRate higher than the rlRate that has just been tested provides the selected rlRate to the block and the process is repeated until the Equation 4 does not hold. The highest rate for which the Equation 4 is satisfied is outputted as rlRatePredicted. One of ordinary skill in the art understands that the blocks can be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. For the purposes of this document any of the above enumerated options is referred to collectively as a processing block.

Alternatively the apparatus as illustrated in may be utilized for estimating power required for transmission of data at a pre determined rate. In such an embodiment the pre determined rlRate yields a value of TxTotalPowerUpperBound as described above. The TxTotalPwrUpperBound can be then outputted not shown . Alternatively the TxTotalPwrUpperBound may be compared with one or more thresholds and the result may be used for example to control the state of the power amplifier to improve the energy efficiency of the transmitter communication device . Thus the TxTotalPwrUpperBound is compared with the one or more thresholds in block . Thus the block evaluates the Equation 4 . The result of the comparison is provided to a block . The block provides an indication whether the Equation 4 is satisfied to block which provides an appropriate output e.g. the value of the pre determined rlRate the corresponding threshold and indication whether the Equation 4 is satisfied or not. If desired the process is repeated for all available rlRates and thresholds.

As discussed the reverse link channel comprises the Physical Layer Channels transmitted from the AT to the access network. illustrates an exemplary reverse link waveform . For pedagogical reasons the waveform is modeled after a reverse link waveform of the above mentioned system in accordance to IS 856 standard. However one of ordinary skill in the art will understand that the teaching is applicable to different waveforms. The reverse link channel is defined in terms of frames . A frame is a structure comprising 16 time slots each time slot being 2048 chips long corresponding to a 1.66 ms. time slot duration and consequently a 26.66 ms. frame duration.

In accordance with the IS 856 standard the rate of data can change only at a frame boundary. In general the value of rlRatePredicted will be determined several slots before the start of a frame in order to arrive at the rate of data to be transmitted during that frame on the reverse link. Suppose the value of rlRatePredicted is determined at time t k slots k 0 before the start of a frame in accordance with the above described embodiment. At the start of the frame the AT evaluates the transmit power requirement for the determined rlRatePredicted in accordance with the open loop and closed loop power control and begins transmitting the data. During the frame duration the transmit power is adjusted in accordance with an update of the open loop and closed loop power control. Consequently the actual transmit power may differ from the transmit power TxTotalPowerUpperBound corresponding to the determined rlRatePredicted. To evaluate the performance of the maximum admissible data rate estimation the concept of outage can be utilized.

The nslot of the frame is defined to be in outage of Type A if the power required for the rlRatePredicted at the nslot is greater than the power determined for the rlRatePredicted at time t i.e. if Equation 5 is satisfied TxOpenLoop 16 TxClosedLoop 16 PilotToTotalRatio rlRatePredicted 16 TxMaxPwr 5 If the nslot of the frame is not in outage of Type A then from Equations 4 and 5 follows TxPilotPred 16 PilotToTotaRatio1 rlRatePredicted 16 xPwrMargin 6 

The nslot of the frame is defined to be in outage of Type B if the power required for the rlRatePredicted at the nslot is greater than the power determined for the rlRatePredicted at time t i.e. if Equation 7 is satisfied TxPilotUpperBound 16 TxPilotUpperBound 160 1 . . . 15 7 If the nslot of the frame is not in outage of Type B then from Equations 4 and 7 follows TxPilotPred 16 PilotToTotalRatio rlRatePredicted 16 TxMaxPwr 8 

Equations 6 and 8 show that if the value of rlRatePredicted determined at time tis used for transmitting the data over the next frame 1 then the reverse link is not power limited during the nslot of the frame 1 .

It has been discovered that due to various methods for mitigating changing channel conditions e.g. error correction interleaving and other methods known to one of ordinary skill in the art isolated slot outages in a frame do not result in packet decoding errors however too many slot outages in one frame result in packet decoding errors. A design goal of a communication system is to limit the slot outage probability to guarantee minimal performance degradation due to packet errors while maximizing reverse link throughput under all channel conditions. From Equations 3 4 6 and 8 increasing TxPwrMargin may reduce outage probability while reducing TxPwrMargin increases the predicted reverse link data rate. In other words a large value of TxPwrMargin provides a conservative estimate of the predicted reverse link data rate resulting in lower user throughput and possibly diminished reverse link capacity. Therefore in another embodiment the value of TxPwrMargin is dynamically adjusted in accordance with changing channel conditions in order to maintain outage probability at the desired value.

In one embodiment dynamically adjusting the TxPwrMargin involves evaluating an occurrence of an outage for each slot of the frame 1 . If a slot outage occurs the TxPwrMargin is incremented by PwrMarginUpStep otherwise the TxPwrMargin is decremented by PwrMarginDownStep. In one embodiment the PwrMarginUpStep 0.5 dB the PwrMarginDownStep 0.05 dB. The value of TxPwrMargin is further limited between TxPwrMarginMin and TxPwrMarginMax. In one embodiment the TxPwrMarginMin 0 dB and TxPwrMarginMax 6 dB

Additionally when the Type A outage is used for dynamic adjustment of the TxPwrMargin a special update mode a ratchet mode is entered if the determined rlRatePredicted changes from a lower value to a maximum allowable rate of data value rlRateMaxAllowable or if the determined rlRatePredicted changes from a higher value to a minimum rate of data rlRateMinAllowable .

If the determined rlRatePredicted changes from a lower value to the rlRateMaxAllowable the lower bound of the power margin TxPwrMarginLow is set equal to the current value of TxPwrMargin. If a slot outage occurs the TxPwrMargin is incremented by PwrMarginUpStep. If no slot outage occurs an Equation 9 is evaluated TxPwrMargin PwrMarginDownStep TxPwrMarginLow 9 If the Equation 9 is satisfied the TxPwrMargin is decremented by PwrMarginDownStep otherwise the TxPwrMargin is set equal to TxPwrMarginLow. When the determined rlRatePredicted changes from the maximum allowable rate of data value to a lower value the TxPwrMarginLow is set to TxPwrMarginMin. The ratchet mode is exited when the determined rlRatePredicted drops below the rlRateMaxAllowable.

If the determined rlRatePredicted changes from a higher value to the rlRateMinAllowable upper bound of the power margin TxPwrMarginUpper is set equal to the current value of TxPwrMargin. If a slot outage occurs an Equation 10 is evaluated TxPwrMargin PwrMarginUpStep TxPwrMarginUpper 10 If the Equation 10 is satisfied the TxPwrMargin is not changed otherwise the TxPwrMargin is incremented by PwrMarginUpStep. If a no slot outage occurs the TxPwrMargin is decremented by PwrMarginDownStep. The ratchet mode is exited when the determined rlRatePredicted exceeds the rlRateMinAllowable.

In another embodiment of the ratchet mode if rlRatePredicted equals rlRateMaxAllowable and a slot outage does not occur then TxPwrMargin is not changed from the current value. If a slot outage occurs the TxPwrMargin is incremented by a PwrMarginUpStep. If rlRatePredicted equals rlRateMinAllowable and a slot outage occurs TxPwrMargin is not changed the current value. If a slot outage does not occur the TxPwrMargin is decremented by a PwrMarginDownStep.

Those of ordinary skill in the art will recognize that although the various embodiments were described in terms of power control being performed by both an open loop and a closed loop such was done for pedagogical purposes only. Clearly any mechanism that allows an AT to estimate a quality metric of a reverse link over which the AT transmits data is sufficient. Therefore should an AT use only an open loop or only a closed loop the embodiments would be equally applicable. Thus referring to if only an open loop were implemented i.e. blocks and were deleted form the embodiments are valid realizing that TxOpenLoopPwr TxPilotPwr 11 

Furthermore in a specific case when path loss changes slowly the embodiment described in reference to can be further simplified as illustrated in where the function of blocks and is the same as function of blocks and . One of ordinary skill in the art will recognize that moving the block to the closed loop branch does not change determination of TxPilotPredUpperBound because Equation 3 holds.

Those of ordinary skill in the art will recognize that although the various embodiments were described in terms of flowcharts and methods such was done for pedagogical purposes only. The methods can be performed by an apparatus which in one embodiment comprises a processor interfaced with a transmitter and a receiver or other appropriate blocks at the AT and or AP.

Those of skill in the art would understand that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Those of skill would further appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The steps of a method or algorithm described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

