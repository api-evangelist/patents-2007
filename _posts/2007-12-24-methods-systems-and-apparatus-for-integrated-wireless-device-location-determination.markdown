---

title: Methods, systems and apparatus for integrated wireless device location determination
abstract: Methods, devices, and systems are presented for integrated wireless device location determination. A method for determining location on a wireless device includes receiving a request for wireless device location and receiving a plurality of wireless network messages. Each message is transmitted from a wireless network edge device associated with one of a plurality of wireless networks. Further included is obtaining location measurement information from the received wireless network messages and obtaining location determining assistance information for each of the wireless networks associated with the received wireless network messages. The method further includes determining more than one wireless device location based on the location measurement information and the location determining assistance information, determining an integrated wireless device location based on the more than one wireless device location, validating and storing the integrated wireless device location. A method for determining wireless device location at a network device is also provided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07595754&OS=07595754&RS=07595754
owner: QUALCOMM Incorporated
number: 07595754
owner_city: San Diego
owner_country: US
publication_date: 20071224
---
The described aspects relate to wireless communication and more particularly to methods systems and apparatus of integrated wireless device location determination.

Wireless communication devices such as cellular telephones portable computers and the like have rapidly gained in popularity over the past decade. These devices are increasingly becoming multifaceted devices capable of providing a wide range of functions. For example today s cellular telephone may also embody computing capabilities Internet access electronic mail text messaging Global Positioning System GPS mapping digital photographic capability an audio MP3 player video gaming capabilities video broadcast reception capabilities and the like.

Amongst the myriad of functions listed mobile communication devices may be equipped with location determination devices and routines such as GPS sensors routines or the like that allows the devices to determine the devices respective geographic locations positions at any point in time. Location information is used in navigation systems which track geographic position with respect to a mapped destination and may be incorporated in wireless communication devices such as cellular telephones or the like.

However Global Navigation Satellite System GNSS such as GPS or the like may have limitations in terms of their ability to obtain a location commonly referred to as a fix. For instance a location determining device may need to receive satellite signals from the associated satellites. The GPS location determination can be impeded or at times impossible if the wireless device is indoors or surrounded by tall buildings such as a dense urban environment or the like.

Other methods of wireless location determination may have been developed to augment GPS location determination provide location determination in instances in which GPS location determination is unavailable or provide location determination in the wireless devices not equipped with GPS capability. Such methods may rely on determining or estimating the position of other wireless network edge devices in communication with the wireless device such as cellular network base stations Wireless Local Area Network WLAN access points such as wireless fidelity Wi Fi access point Worldwide Interoperability for Microwave Access WiMAX access points and the like. Such methods implement positioning techniques to determine a location for the wireless device based on the finite or estimated location of the wireless network edge devices. With the increasing prevalence of WLAN access points referred to as Wi Fi hot spots or WiMAX hot spots the ability to determine a location based on the estimated location of Wi Fi access points has increased.

Nonetheless the applications that augment GPS location determination with other wireless network solutions are limited to software only solutions. For example software only positioning systems may exist that leverage a nationwide database of known Wi Fi access points to calculate the precise location of any Wi Fi enabled device. Similarly peer to peer software only wireless positioning systems may exist that triangulate signals transmitted from Wi Fi access points and Cellular towers to help the users find their way in most major metropolitan areas worldwide. These software only solutions tend to be inefficient in terms of providing location determination because position determinations occur sequentially significantly increasing the processing times. Additionally such software only solutions do not necessarily provide the most accurate location determination.

Therefore a need exists to develop methods systems and apparatus for integrating satellite based location determination such as GPS with other non satellite wireless network location determination methods such as Wi Fi WiMAX Global System for Mobile Communication GSM and Code Division Multiple Access CDMA methods. The desired methods systems and apparatus should provide greater efficiency than current software only based systems and provide for a greater level of reliability and accuracy.

The following presents a simplified summary of one or more aspects in order to provide a basic understanding of such aspects. The subject summary is not an extensive overview of all contemplated aspects and is intended to neither identify key or critical elements of all aspects nor delineate the scope of any or all aspects. The sole purpose of the subject Summary is to present some concepts of one or more aspects in a simplified form as a prelude to the more detailed description that is presented infra.

In one aspect a method for determining location on a wireless device is defined. The method includes receiving a request for wireless device location and receiving a plurality of wireless network messages each message transmitted from a wireless network edge device that is associated with one of a plurality of wireless networks. The method further includes obtaining location measurement information from the received wireless network messages and obtaining location determining assistance information for each of the wireless networks associated with the received wireless network messages. The method also includes determining more than one wireless device location based on the location measurement information and the location determining assistance information determining an integrated wireless device location based on the more than one wireless device location validating the integrated wireless device location and storing the integrated wireless device location.

In one aspect of the method receiving a plurality of wireless network messages further includes passively listening to receive all messages transmitted from wireless network edge devices that are within a reception range of the wireless device and having a signal strength detectable by the wireless communication device. Passively listening to receive all of the messages may further include tuning a Software Defined Radio SDR to receive all wireless network messages transmitted from wireless network edge devices that are within a reception range of the wireless device.

In some aspects determining more than one wireless device location may include determining a location for each of the networks associated with the received wireless network messages. In other aspects one or more of the wireless device locations may be determined by combining measurements from more than one network.

In some aspects of the method obtaining location measurement information from the received one or more wireless network messages further includes obtaining location measurement information such as but not limited to the access point Media Access Control MAC address a wireless network System Identification SID power measurement information Radio Frequency RF characteristics MultiMedia Card MMC device ID Code Division Multiple Access Subscriber Identification CDMA SID base station ID frequency band and the like. In certain aspects obtaining location determining assistance information may include accessing a database stored in a memory of the wireless device to obtain location determining information or alternatively in other aspects obtaining location determining assistance information includes requesting location determining assistance information a database stored in a memory of a device located across a wireless network from the wireless device and receiving the location determination assistance information in response to the request.

In yet other aspects of the method determining an integrated wireless device location may further include determining an integrated wireless device location based on at least one predetermined determination method such as but not limited to averaging the wireless device locations weighted averaging the wireless device locations defining an overlapping area for the wireless device locations and the like.

In certain aspects of the method validating the integrated wireless device location further comprises comparing the integrated wireless device location to at least one of a group of a natural structure topology database and or a man made structure topology database such as an urban landmark database to reduce altitude uncertainties.

Additional aspects of the method include receiving satellite signals associated with a Global Navigation Satellite System GNSS obtaining GNSS location determining information for the GNSS and determine a GNSS wireless device location based on the received satellite signals and the GNSS location determining information. The GNSS may include but is not limited to Global Positioning System GPS Galileo GLONASS and the like. In such methods determining an integrated wireless device location may further include determining an integrated wireless device location based on the one or more wireless device locations based on the wireless network data and the GNSS wireless device location.

In some aspects receiving a plurality of wireless network messages may further include receiving a plurality of wireless network messages each message transmitted from a surrounding network edge device or a serving network edge device that is associated with a surrounding wireless network or a serving wireless network. As used herein the term surrounding wireless networks refers to non attached wireless networks from which the wireless device is capable of receiving wireless network messages. Conversely the term serving wireless network is used herein to refer to the active or attached wireless networks that are currently being used by the wireless device. For example if the wireless device is currently communicating on the Global System for Mobile GSM communications network GSM would be the serving network and all other wireless networks for example CDMA communication network a Wi Fi communication network or the like would be the surrounding wireless networks. In one or more alternate aspects the wireless device may be actively communicating with more than one serving network. In the instances in which more than one serving network is active one of the networks may be designated as the primary serving network for example the cellular network and the other serving networks may be designated as the secondary serving networks. In such methods determining an integrated wireless device location may further include determining an integrated wireless device location based on one or more surrounding network wireless device locations and or one or more the serving network wireless device locations. In yet another aspect of the method the wireless device may integrate the surrounding network wireless device locations the GNSS based wireless device location and or the serving network wireless device locations.

In further aspects the method may include storing the integrated wireless device location as a tagged wireless device location and or storing an estimated location of one or more wireless network edge devices based on the integrated wireless device location and the location measurement information associated with the wireless network edge devices. Storing of the tagged wireless device location and the estimated location of the wireless network edge devices provides for a self learning database that provides greater efficiency for subsequent integrated location fixes.

A related aspect is defined by at least one processor configured to determine location at a wireless device. The processor includes a first module for receiving a request for wireless device location and a second module for receiving one or more network messages transmitted from one or more network edge devices each associated with a wireless network. The processor additionally includes a third module for obtaining location measurement information from the received one or more wireless network messages and a fourth module for obtaining location determining assistance information for each of the wireless networks associated with the received one or more wireless network messages. The processor also includes a fifth module for determining more than one wireless device location based on the location measurement information and the location determining assistance information a sixth module for determining an integrated wireless device location based on the more than one wireless device location a seventh module for validating the integrated position and an eighth module for storing the integrated wireless device location.

Another related aspect is defined by a computer program product. The computer program product includes a computer readable medium. The medium includes at least one instruction for causing a computer to receive a request for wireless device location and at least one instruction for causing a computer to receive a plurality of wireless network messages each transmitted from a wireless network edge device that is associated with one of a plurality of wireless networks. The medium additionally includes at least one instruction for causing a computer to obtain location measurement information from the received wireless network messages and at least one instruction for causing a computer to obtain location determining assistance information for each of the wireless networks associated with the received wireless network messages. The medium also includes at least one instruction for causing a computer to determine more than one wireless device location based on the location measurement information and the location determining assistance information at least one instruction for causing a computer to determine an integrated wireless device location based on the more than one wireless device location at least one instruction for causing a computer to validate the integrated position and at least one instruction for storing the integrated wireless device location.

Yet another related aspect is provided for by an apparatus. The apparatus includes means for receiving a request for wireless device location means for receiving a plurality of wireless network messages each message transmitted from a network edge device that is associated with one of a plurality of wireless networks and means for obtaining location measurement information from the received wireless network messages. The apparatus additionally includes means for obtaining location determining assistance information for each of the wireless networks associated with the received wireless network messages and means for determining more than one wireless device location based on the location measurement information and the location determining assistance information. The apparatus also includes means for determining an integrated wireless device location based on the more than one wireless device location means for validating the integrated wireless device location and means for storing the integrated wireless device location.

A further aspect is defined by a wireless device. The device includes a computer platform including a processor and a memory. The device also includes a location integrating device executable by the processor and including a wireless network location determiner operable to receive wireless network messages from one or more wireless network edge devices obtain wireless network edge device location measurement information from the transmitted messages obtain wireless network location determining assistance information for each of the wireless networks and determine one or more wireless device locations based on the wireless network location measurement information and the wireless network location determining assistance information. The location integrating device additionally includes a GNSS location determiner operable to receive satellite signals obtain GNSS location measurement information from the satellite signals obtain GNSS location determining assistance information and determine a GNSS based wireless device location based on the GNSS location measurement information and the GNSS location determining assistance information. The location integrating device also includes a location integrator operable for determining an integrated wireless device location based on the one or more wireless device locations for each of the wireless networks and the GNSS based wireless device location.

In one aspect of the wireless device the wireless network location determiner is further operable to passively listen to receive all messages transmitted from one or more surrounding network edge devices that are within a reception range of the wireless device and have signal strength detectable by the wireless device. In this regard the location integrating device may further include a Software Defined Radio SDR operable to be tuned to receive all wireless network messages transmitted from one or more wireless network edge devices that are within a reception range of the wireless device.

In another aspect of the wireless device the wireless network location determiner is further operable to receive wireless network messages from surrounding network edge devices and or serving network edge devices obtain surrounding network edge device and or serving network edge device location measurement information from the transmitted messages obtain surrounding network and or serving network location determining assistance information for the surrounding and or serving network and determine wireless device locations based on the surrounding network and or serving network location measurement information and the surrounding network and or serving network location determining assistance information. In such aspects the location integrator is further operable to determine an integrated location based on the one or more wireless device locations associated with the serving and surrounding networks and the GNSS based wireless device location.

In certain aspects of the wireless device the wireless network location determiner is further operable to access a database stored in a memory of the wireless device to obtain the wireless network location determining information and alternatively in other aspects the wireless network location determiner module is further operable to request the location determining assistance information a database stored in a memory of a device located across a wireless network from the wireless device and receive the location determination assistance information in response to the request.

In one aspect of the wireless device the location integrator is further operable to determine an integrated wireless device location based on at least one predetermined determination method such as but not limited to averaging the wireless device locations weighted averaging the wireless device location and defining an overlapping area for the wireless device locations.

In yet further aspects the wireless device may include a location validator operable to validate the integrated wireless device location. As such in certain aspects the location validator may compare the integrated wireless device location to at least one of a group of a natural structure topology database and a man made structure topology database to reduce altitude uncertainties.

In further aspects of the wireless device the memory may further include a wireless device tagging database operable to receive and store the integrated wireless device location. In other aspects the location determining device may further include a self learning location estimator operable to estimate the location of one or more wireless network edge devices based on the integrated wireless device location and the location measurement information associated with the wireless network edge devices. As such in further aspects the memory may include a self learning database operable to receive and store the estimated location of one or more wireless network edge devices.

An aspect is additionally defined by a method for determining wireless device location at a network device. The method includes receiving a request for wireless device location including location measurement information associated with a plurality of wireless network edge devices and obtaining location determining assistance information for each of the wireless networks associated with the wireless network edge devices. The method additionally includes determining more than one wireless device location based on the location measurement information and the location determining assistance information determining an integrated wireless device location based on the more than one wireless device location and validating the integrated wireless device location.

In some aspects determining more than one wireless device location may include determining a location for each of the networks associated with the received wireless network messages. In other aspects one or more of the wireless device locations may be determined by combining measurements from more than one network.

In one aspect of the method determining the integrated wireless device location further includes determining an integrated wireless device location based on at least one predetermined determination method such as but not limited to averaging the wireless device locations weighted averaging the wireless device locations and defining an overlapping area for the wireless device locations.

In certain aspects of the method validating the integrated wireless device location may further include comparing the integrated wireless device location to at least one of a group of a natural structure topology database and a man made structure topology database to reduce altitude uncertainties.

In further aspects of the method receiving a request for wireless device location further comprises receiving a request for wireless device location including location measurement information associated with GNSS signals. In such aspects the method may further include obtaining location determining assistance information for the GNSS and determining a GNSS wireless device location based on the GNSS satellite signals and the GNSS location determining assistance information. Additionally in such aspects determining an integrated wireless device location may further include determining an integrated wireless device location based on the one or more wireless device locations associated with the wireless network messages and the GNSS wireless device location.

In further aspects of the method receiving a request for wireless device location further comprises receiving a request for wireless device location including location measurement information associated with a surrounding and or serving wireless network edge devices. In such aspects the method may further include obtaining location determining assistance information for the surrounding and or serving network and determining a wireless device location based on the serving network edge device and or surrounding network edge device location measurement information and the surrounding network and or serving network location determining assistance information. Additionally in such aspects determining an integrated wireless device location may further include determining an integrated wireless device location based on the wireless device locations associated with the serving and or surrounding network and the GNSS wireless device location.

Other aspects of the method may include storing the integrated wireless device location as a tagged wireless device location and or storing an estimated location of one or more wireless network edge devices based on the integrated wireless device location and the location measurement information associated with the wireless network edge devices.

A related aspect is provided for by at least one processor configured to determine wireless device location at a network device. The processor includes a first module for receiving a request for wireless device location including location measurement information associated with a plurality of wireless network edge devices and a second module for obtaining location determining assistance information for each of the wireless networks associated with the wireless network edge devices. The processor additionally includes a third module for determining more than one wireless device location based on the location measurement information and the location determining assistance information a fourth module for determining an integrated wireless device location based on the more than one wireless device location a fifth module for validating the integrated wireless device location and a sixth module for storing the integrated wireless device location.

Another related aspect is provided for by a computer program product including a computer readable medium. The medium includes at least one instruction for causing a computer to receive a request for wireless device location including location measurement information associated with a plurality of wireless network edge devices at least one instruction for causing a computer to obtain location determining assistance information for each of the wireless networks associated with the wireless network edge devices and at least one instruction for causing a computer to determine more than one wireless device location based on the location measurement information and the location determining assistance information. The medium additionally includes at least one instruction for causing a computer to determine an integrated wireless device location based on the more than one wireless device location at least one instruction for causing a computer to validate the integrated wireless device location and at least one instruction for causing the computer to store the integrated wireless device location.

Yet another related aspect is defined by an apparatus that includes means for receiving a request for wireless device location including location measurement information associated with a plurality of wireless network edge devices means for obtaining location determining assistance information for each of the wireless networks associated with the wireless network edge devices and means for determining more than one wireless device location based on the location measurement information and the location determining assistance information. The apparatus additionally includes means for determining an integrated wireless device location based on the more than one wireless device location means for validating the integrated wireless device location and means for storing the integrated wireless device location

An aspect also is provided for by a network device. The network device includes a computer platform including a processor and a memory. The network device additionally includes a protocol handler stored in the memory and executable by the processor wherein the protocol handler is operable to receive a request for wireless device location and obtain from the request location measurement information associated with one or more wireless network edge devices and GNSS satellite signals. The network device also includes a location determining assistance information database stored in the memory and operable to store location determining assistance information associated with wireless networks and GNSSs and a location determining module stored in the memory and executable by processor wherein the location determining module is operable to determine more than one wireless device location and a GNSS based wireless device location based on the location measurement information and the location determining assistance information. The network device also includes a location integration module stored in the memory and executable by the processor wherein the location integration module is operable to determine an integrated wireless device location based on at least two of the one or more wireless device locations and the GNSS based wireless device location.

In one aspect of the network device the location integration module is further operable to determine an integrated wireless device location based on at least one predetermined determination method such as but not limited to averaging the wireless device location and the GNSS based wireless device location weighted averaging the wireless device location and the GNSS based wireless device location and defining an overlapping area for the wireless device locations and the GNSS based wireless device location.

In another aspect the wireless device may include a location validation module stored in the memory and executable by the processor wherein the location validation module is operable to validate the integrated wireless device location. As such the location validation module may compare the integrated wireless device location to at least one of a group of a natural structure topology database and a man made structure topology database to reduce altitude uncertainties.

In yet another aspect of the network device the protocol handler is further operable to receive a request for wireless device location and obtain from the request location measurement information associated with one or more surrounding network edge devices and or one or more serving network edge devices. In such aspects the location determining assistance information database may be further operable to store location determining assistance information for the surrounding network and or the serving network and the location determining module is further operable to determine wireless device locations based on a surrounding network edge device and or a serving network edge device location measurement information and the location determining assistance information for the surrounding network and or the serving network. Additionally the location integration module may be further operable to determine an integrated wireless device location based on the wireless device locations associated with the serving and or surrounding networks and the GNSS based wireless device location.

In another aspect the network device may include a self learning module stored in the memory and executable by the processor wherein the self learning module is operable to estimate the location of one or more wireless network edge devices based on the integrated wireless device location and the location measurements associated with the wireless network edge devices and store the estimated location of the wireless network edge devices. In addition the self learning module may be operable to combine the measurement and location information from various wireless devices to provide even greater accuracy to the estimated edge device location.

Thus one or more of the present aspects provide for methods devices and systems for integrated wireless device location determination. In particular one or more aspects provide for integrating wireless network location determination such as Wi Fi WiMAX CDMA GSM and the like and GNSS location determination such as GPS and the like. While integration of the various location determination methods provides for more accurate location determination the systems methods and apparatus herein disclosed further allow location i.e. position to be determined in instances in which one or more of the location determination methods are unavailable. One or more of the specific aspects provide for a hardware based solution that combines the GPS and Wi Fi WiMAX functionality on a wireless device semiconductor device to provide greater efficiency and speed in determining the integrated position. Additionally efficiency is realized by providing for a self learning system that estimates and continuously refines a location for wireless network edge devices such as cellular network base stations Wi Fi WiMAX access points and the like. In one example accuracy of the integrated location determination is provided for by a validation process that serves to eliminate altitude uncertainties from the resulting integrated location.

The present devices apparatus methods computer readable media and processors now will be described in more detailed hereinafter with reference to the accompanying drawings in which aspects of the invention are shown. The devices apparatus methods computer readable media and processors may however be embodied in many different forms and should not be construed as limited to the aspects set forth herein rather these aspects are provided so that the subject disclosure will be thorough and complete and will convey the scope of the invention to those skilled in the art. Like numbers refer to like elements throughout.

The various aspects described herein are in connection with a wireless communication device. A wireless communication device can also be called a subscriber station a subscriber unit mobile station mobile remote station access point remote terminal access terminal user terminal user agent a user device or user equipment. A subscriber station may be a cellular telephone a cordless telephone a Session Initiation Protocol SIP phone a wireless local loop WLL station a personal digital assistant PDA a handheld device having wireless connection capability or other processing device connected to a wireless modem.

Thus present aspects provide systems methods and apparatus for integrated wireless device location determination. In particular aspects are described for integrating cellular network location determination e.g. CDMA GSM networks etc. WLAN location determination e.g. Wi Fi WiMAX location determination and GNSS location determination e.g. GPS and combinations of the various methods or the like. In addition to providing more accurate location determination integration of the various location determination methods further provides for determination of location i.e. position in instances in which one or more of the location determination methods are unavailable. For example GNSS location determination can be unavailable or limited in instances in which the associated wireless device experiences difficulty receiving satellite signals e.g. indoors dense urban areas populated with numerous high rise buildings etc. . Nevertheless according to one aspect the overall location determination integration process may occur at the wireless device at a network entity or via a combination of both the wireless device and a network entity.

In one aspect of the described systems methods and apparatus a hardware based solution at the wireless device level is defined which can provide a more streamlined and efficient location determination process in that individual location determinations may be performed in parallel and thus integrated location determination can be performed faster. In addition the systems methods and apparatus provide for a self learning feature that allows for the location of network edge devices such as wireless access points base stations and the like to be estimated using location measurement information of the network edge device and the determined location of the wireless device. This self learning feature thus provides for continual accuracy refinement of the estimated location of the network edge devices based on continual location fixes relying on the network edge device for positional data. In turn self learning of network edge device location provides greater efficiency to the wireless device location determination process because the process can subsequently rely on the accuracy of the estimated location of the network edge devices in determining a wireless device location.

Moreover in one aspect the integrated location determination methods systems and apparatus provide for the wireless device to implement only a portion of the protocol stack in determining location. The necessary portion of the protocol stack is required to passively listen otherwise referred to as sniff for messages transmitted by network edge devices such as wireless access points and the like and to decode the wireless network messages. Information included in the wireless network messages such as an access point Media Access Control MAC address wireless network System ID SID Multimedia Card MMC device ID Radio Frequency RF characteristics CDMA System Identification SID base station ID frequency band transmitted power measurements and the like are used to determine the position of the wireless device to the network edge device and subsequently the location of the wireless device.

In one aspect the wireless device may implement a Software Defined Radio SDR which can be tuned to any frequency band. The SDR can further receive modulation across a large frequency spectrum by means of programmable hardware controlled by software. Thus in one implementation the SDR enables the various aspects of the present invention to limit the protocol stack to only those layers necessary to receive wireless network messages. Additionally mechanisms such as SDR and the like provide for the wireless device to receive wireless network messages from any and or all surrounding wireless networks within a frequency range or ranges supported by the wireless device. As such one or more of the present aspects can provide location determination for all the wireless networks and or network edge devices from which wireless network messages are received.

Additionally the systems methods and apparatus herein described provide for validation of the integrated location determination. In particular one implementation provides for validation of the altitude or elevation aspect of the determined location by comparing the determined location to a natural structure database such as a topographical database and or a man made structure database such as an urban building database so as to reduce altitude uncertainties. Validation of the location may especially be relevant if the wireless device is located indoors and moreover located on a specific floor of a building.

The wireless device is configured to receive satellite signals from the plurality of satellites associated with a specific GNSS system such as GPS GLONASS Galileo or the like. The wireless device is additionally configured to receive transmitted messages across wireless network from the plurality of base stations associated with wireless networks such as GSM CDMA and the like and from the plurality of wireless access points such as Wi Fi hot spots and the like.

The wireless device includes a computer platform having at least one processor and a memory . Additionally the wireless device includes a location integrating device that is operable to integrate the various location determinations performed on the wireless device and or accessible to the wireless device . The location integrating device includes a wireless network location determiner that is operable to determine one or more wireless device location. In this regard wireless network location determiner is operable to receive transmitted messages from a plurality of wireless network edge devices and . In certain aspect the determiner may implement an RF tuner such as an SDR to tune or receive all of the messages transmitted from wireless network edge devices within the frequency range or ranges supported by the wireless device . The use of an RF tuner such an SDR allows the wireless device to implement only a portion of the protocol stack as the wireless device passively listens i.e. sniffs for transmitted messages.

The wireless network location determiner is additionally operable to obtain wireless network edge device location information from the transmitted messages. The wireless network edge device location information obtained from the transmitted messages may include but is not limited to the access point MAC address the SID the power measurements of the transmitted and received message MMC device ID RF characteristics CDMA SID base station ID frequency band and the like. Additionally the wireless network location determiner is operable to obtain wireless network location assistance information for each of the wireless networks associated with the received messages. The wireless network assistance information may be stored locally in memory or the wireless network location determiner may be required to communicate with a network entity to retrieve the requisite wireless network assistance information . The wireless network location determiner is also operable to determine a wireless device location commonly referred to as a fix based on the wireless network edge device location information and the wireless network location assistance information. Each location determination may be a result of using measurement information from one particular wireless network or a location determination may be a result of using measurement information from more than one wireless network. For example a location determination may be the result of measurement information from two Wi Fi access points or a location determination may be the result of measurement information from a CDMA base station and a Wi Fi access point.

The location integrating device can additionally include a GNSS location determiner that is operable to determine a GNSS based wireless device location. In this regard the GNSS location determiner is operable to receive satellite signals transmitted from GNSS satellites and obtain GNSS location measurement information from the satellite signals. Additionally the GNSS location determiner is operable to obtain GNSS location determining assistance information. Depending on the mode of GNSS location determination the GNSS location determiner may obtain the GNSS based assistance information locally from memory or the GNSS based location determiner may be required to communicate with a network entity to retrieve the requisite GNSS based assistance information . The GNSS location determiner is additionally operable to determine a GNSS based wireless device location based on the GNSS location measurement information and the GNSS based assistance information .

The location integrating device additionally includes a location integrator that is operable to integrate all of the determined wireless device locations such as the wireless device location and the GNSS based wireless device location. The location integrator may implement a predetermined integration method routine to determine the overall integrated wireless device location. Integration routines may include but are not limited to averaging all the determined locations weighted averaging of all the determined locations or defining an overlapping geometric area that encompasses two or more of the determined locations. In one example weighted averaging method may provide higher weights to more accurate or more reliable location determination method to determine the integrated location of the wireless device. Alternatively weighted averaging method may provide lower weights to less accurate or less reliable location determination method to determine the integrated location of the wireless device. 

In certain aspects the system provides for wireless device location determinations and the integration of the location determinations to occur at the network level. Thus the system may include a network location integration system that includes one or more network devices and one or more databases .

The network device of network location integration system includes a computer platform having at least one processor and a memory . The memory includes a location integration module that is operable to determine an integrated wireless device location. The location integration module includes a protocol handler operable to receive a request for wireless device location from the wireless device and obtain from the request location measurement information associated with one or more wireless network edge devices and or GNSS satellite signals.

The location integration module additionally includes a location determiner that includes at least one wireless network location determination routine and at least one GNSS location determination routine . The wireless network location determination routine is operable to determine a wireless device location based on the location measurement information associated with the wireless network edge devices and wireless network location assistance information stored in database . The GNSS location determination routine is operable to determine a GNSS based wireless device location based on the location measurement information associated with the GNSS satellites and GNSS based location assistance information stored in database .

The location integration module also includes location integrator that is operable to integrate all of the determined wireless device locations such as the wireless device locations and the GNSS based wireless device location. The location integrator may implement a predetermined integration method routine to determine the overall integrated wireless device location. Integration routines may include but are not limited to averaging all of the determined locations weighted averaging of all the determined locations or defining an overlapping geometric area that encompasses two or more of the determined locations. In one implementation once the integrated wireless device location is determined the wireless device location may be communicated back to the wireless device .

As described in relation to wireless device location integration may occur at the wireless device or the wireless device location integration may occur at a network location integration system . Thus the wireless device may request an integrated location determination and communicate the location determination information from the received messages transmitted across wireless network .

In the illustrated aspect of the network location integration system includes an integration device operable to integrate the wireless device location determinations. Additionally the network location integration system may include individual network devices for determining the wireless device location related to individual wireless networks. For example the network location integration system may include a CDMA network device operable to determine CDMA network wireless device locations a GSM network device operable to determine GSM network wireless device locations and an emerging future wireless network device operable to determine emerging future network wireless device locations. As such the CDMA network device may be in communication with CDMA network database that is operable to provide CDMA location assistance information the GSM network device may be in communication with GSM network database that is operable to provide GSM location assistance information and the emerging future network device may be in communication with emerging future network database via wireless network and additional emerging future network devices . Additionally the CDMA network device the GSM network device and or the emerging future network device may be configured to determine GNSS based wireless device location. Once the individual wireless network locations are determined the locations are communicated to the integration device for overall integration and the result of the location integration is communicated to the wireless device .

Referring to according to one aspect a more detailed block diagram representation of wireless device is depicted. The wireless device may include any type of computerized communication device such as cellular telephone PDA two way text pager portable computer a separate computer platform having a wireless communications portal which may further have a wired connection to a network or the Internet. The wireless device can further be a remote slave or other device that does not have an end user thereof but simply communicates data across the wireless network such as remote sensors diagnostic tools data relays and the like. Thus the present apparatus and methods for integrated wireless device location determination can accordingly be performed on any form of wireless communication device or wireless computer module including a wireless communication portal including without limitation wireless modems PCMCIA cards access terminals desktop computers or any combination or sub combination thereof.

The wireless device includes computer platform that can transmit data across a wireless network and that can receive and execute routines and applications. Computer platform includes memory which may comprise volatile and nonvolatile memory such as read only and or random access memory RAM and ROM Erasable Programmable Read Only Memory EPROM Electronically Erasable Programmable Read Only Memory EEPROM flash cards or any memory common to computer platforms. Further memory may include one or more flash memory cells or may be any secondary or tertiary storage device such as magnetic media optical media tape or soft or hard disk.

Further computer platform also includes processor which may be an application specific integrated circuit ASIC or other chipset processor logic circuit or other data processing device. Processor or other processor such as ASIC may execute an application programming interface API layer that interfaces with any resident programs stored in the memory of the wireless device . In one or more of the present aspects API may interface with any component of the location integrating device including but not limited to the wireless device location determiner the GNSS location determiner and the location integrator . In one example API is a runtime environment executing on the respective wireless device. One such runtime environment is Binary Runtime Environment for Wireless BREW software developed by Qualcomm Incorporated of San Diego Calif. Other runtime environments may be utilized that for example operate to control the execution of applications on wireless computing devices.

Processor includes various processing subsystems embodied in hardware firmware software and combinations thereof that enable the functionality of wireless device and the operability of the wireless device on a wireless network . For example processing subsystems allow for initiating and maintaining communications and exchanging data with other networked devices. In one or more aspects in which the communication device is defined as a cellular telephone the communications processor may additionally include one or a combination of processing subsystems such as sound non volatile memory file system transmit receive searcher layer 1 layer 2 layer 3 main control remote procedure handset power management digital signal processor messaging call manager Bluetooth system Bluetooth LPOS position engine user interface sleep data services security authentication Universal Subscriber Identity Module USIM Universal Subscriber Identity SIM voice services graphics Universal Serial Bus USB multimedia such as Moving Picture Experts Group MPEG General Packet Radio Service GPRS etc all of which are not individually depicted in for the sake of clarity . For the disclosed aspects processing subsystems of processor may include any subsystem components that can interact with the location integrating device . For example RF tuner may exist as the processing subsystems or as a component of the location integrating device .

The location integrating device of computer platform is operable to integrate the various location determinations performed on the wireless device and or accessible to the wireless device . The location integrating device is operable to receive location determination requests from location requesting applications stored in memory such as mapping applications or any other application that requires device location. Alternatively the location integrating device may receive location determination requests from the network via appropriate network communications.

Referring to a block diagram representation of the location integration device of wireless device is illustrated according to an aspect. The location integrating device includes a wireless network location determiner that is operable to determine one or more wireless device locations. In this regard wireless network location determiner is operable to receive messages transmitted from a plurality of wireless network edge devices. As such the determiner may in certain aspects implement an RF tuner such as an SDR to tune to receive all of the transmitted messages transmitted from wireless network edge devices within the frequency range or ranges supported by the wireless device . The use of the RF tuner such a SDR allows the wireless device to implement only a portion of the protocol stack as the wireless device passively listens i.e. sniffs for transmitted messages .

The wireless network location determiner is additionally operable to obtain wireless network edge device location information from the transmitted messages. The wireless network edge device location information obtained from the messages may include but is not limited to the access point MAC address the wireless network SID the power measurements of the transmitted and received message MMC device ID RF characteristics CDMA SID base station ID frequency band and the like. Additionally the wireless network location determiner is operable to obtain wireless network location assistance information for each of the wireless networks associated with the received messages. The wireless network assistance information may be stored locally in memory shown in or the wireless network location determiner may be required to communicate with a network entity to retrieve the requisite wireless network assistance information .

The wireless network location determiner is also operable to determine a wireless device location or the fix based on the wireless network edge device location information and the wireless network location assistance information. For example the wireless network location determiner may implement Wi Fi network routine operable to determine a Wi Fi or WiMAX network based wireless device location CDMA network routine operable to determine a CDMA network based wireless device location GSM network routine operable to determine a GSM network based wireless device location or an other wireless network routine such as a routine for an emerging or future wireless network operable to determine an other wireless device location . Additionally the wireless network location determiner may implement a routine that combines measurement information from more than one wireless network to determine location.

The network based routines and may implement a network based location determination mode such as Advanced Forward Link Trilateration AFLT which determines location based on timing signals between network base stations. To determine location the wireless device obtains measurements from the messages of nearby network edge devices such as cellular base stations towers access points or the like and determines a distance based on transmit receipt power measurements or transmit receipt timing information. The distances are then used to triangulate an approximate location of the wireless device. In one example at least three surrounding network edge devices are required to get an optimal position fix.

The location integrating device additionally includes a GNSS location determiner that is operable to determine a GNSS based wireless device location. In this regard the GNSS location determiner is operable to receive satellite signals transmitted from GNSS satellites and obtain GNSS location measurement information from the satellite signals. Additionally the GNSS location determiner is operable to obtain GNSS location determining assistance information. Depending on the mode of GNSS location determination the GNSS location determiner may obtain the GNSS based assistance information locally from memory or the GNSS based location determiner may be required to communicate with a network entity to retrieve the requisite GNSS based assistance information . The GNSS location determiner is additionally operable to determine a GNSS based wireless device location based on the GNSS location measurement information and the GNSS based assistance information .

As such the GNSS location determiner may include a Mobile Station MS Based Mode Routine operable to determine a GNSS based wireless device location . MS based mode location determination is characterized in that calculation of the device location occurs at the wireless device. In one example while GNSS location assistance information shown in e.g. ephemeris data almanac data etc. is required to determine the location each location determination attempt may not require communication with the network if the location assistance information is current enough to determine location. If the wireless device requires updating of the GNSS location assistance information the wireless device communicates through the wireless network with the Position Determining Entity PDE to obtain current ephemeris data and or almanac data. Once the wireless device has verified or obtained location assistance information the wireless device uses the location assistance information to set the parameters for receiving the GNSS signals and subsequently receives the timing signals transmitted from the GPS satellites . Once the GPS signals are received the wireless device decodes the signals using the location assistance information to aid in setting the decode parameters. The wireless device then uses the decoded timing information and executes a location determination function to determine device location.

The GNSS location determiner may additionally include other GNSS mode routines operable to determine a GNSS based wireless device location . Examples of other mode routines include but are not limited to MS assisted mode Standalone mode and the like. MS Assisted mode location determination is characterized in that calculation of the device location occurs at the network device i.e. PDE and as such communication with the network device may be required for each location determination attempt that uses MS Assisted mode. Standalone mode is characterized in that calculation of the device location occurs at the wireless device and no location assistance information may be required to determine location.

The location integrating device additionally includes a location integrator that is operable to integrate all of the determined wireless device locations such as the wireless device locations and and the GNSS based wireless device location and . The location integrator may implement a predetermined integration method routine to determine the overall integrated wireless device location . Integration routines may include but are not limited to averaging all the determined locations weighted averaging of all the determined locations or defining an overlapping geometric area that encompasses two or more of the determined locations. In one example weighted averaging method may provide higher weights to more accurate or more reliable location determination method to determine the integrated location of the wireless device. Alternatively weighted averaging method may provide lower weights to less accurate or less reliable location determination method to determine the integrated location of the wireless device. 

The location integrating device may additionally include a location validator operable to validate the determined integrated wireless device location . In certain aspects validation may include comparing the integrated wireless device location to a natural structure database such as a topographical database and or a man made structure database such as an urban landmark building database to insure altitude uncertainties of the integrated location. If the comparison determines that uncertainties exist between the determined integrated location and the databases an appropriate correction adjustment to the integrated location may be accomplished or the uncertainty may be presented to the requesting application or the device user. In some instances the natural structure database and or man made structure databases are network based databases that may require the wireless device to communicate with the wireless network for validation purposes. However it is within the bounds of the described aspects to include these databases or a portion of the databases within the memory of wireless device .

The location integrating device may further include a location tagger operable to tag the determined integrated wireless device location and store the tagged location in an appropriate database. The tag database may be a local database within memory and or the tag database may be a network based database that requires wireless network communication with the network database. Additionally tagged locations may be shared with third party location determining entities in order to build their respective database of location related data.

The location integrating device may further include a self learning location estimator operable to estimate i.e. self learn the location of network edge devices based on the integrated wireless device location and location measurement information associated with the respective network edge device. Estimated wireless network edge device locations are subsequently stored in an appropriate self learning database. The self learning database may be a local database within memory and or the self learning database may be a network based database that requires wireless network communication with the network database. Additionally estimated locations of network edge devices may be shared with third party location determining entities in order to build their respective database of location related data. In this regard the self learning location estimator can refine the estimated location continually so as to increase the accuracy of the estimated network edge device location each time the network edge device is relied upon for a location fix. This aspect provides for efficiency in the overall integration process as the estimated location of the network edge devices may subsequently be relied upon in the location determination process.

Referring again to the computer platform of wireless device additionally includes communications module embodied in hardware firmware software and or combinations thereof that enables communications among the various components of the wireless communication device as well as between the wireless device and wireless network . In one or more of the described aspects the communications module enables receipt of location determination requests transmission of integrated location determination results such as tagged locations requisite validation database communication and transmission of self learned estimate network edge device locations. The communications module may include the requisite hardware firmware software and or combinations thereof for establishing a wireless network communication connection.

Additionally wireless device has input mechanism for generating inputs into communication device and output mechanism for generating information for consumption by the user of the communication device. For example input mechanism may include a mechanism such as a key or keyboard a mouse a touch screen display a microphone etc. In certain aspects the input mechanisms provide for user input to interface with an application such as location requesting application . Further for example output mechanism may include a display an audio speaker a haptic feedback mechanism etc. In one or more of the illustrated aspects the output mechanism may include a display operable to display the integrated wireless device location .

Referring to according to another aspect a more detailed block diagram of a network location integration system operable for integrating wireless device location integration is illustrated. The system includes network device and database and may comprise at least one of any type of hardware server personal computer mini computer mainframe computer or any computing device either special purpose or general computing device. Further the modules and applications described herein as being operated on or executed by the network device may be executed entirely on the network device . Alternatively in another aspect separate servers or computer devices may work in concert to provide data in usable formats to parties and or to provide a separate layer of control in the data flow between the wireless device and the modules and applications executed by network device .

The network device includes computer platform that can transmit and receive data across wireless network and execute routines and applications. Computer platform includes a memory which may comprise volatile and nonvolatile memory such as RAM and or ROM EPROM EEPROM flash cards or any memory common to computer platforms. Further memory may include one or more flash memory cells or may be any secondary or tertiary storage device such as magnetic media optical media tape or soft or hard disk.

Further computer platform also includes a processor which may be an ASIC or other chipset logic circuit or other data processing device. Processor includes various processing subsystems embodied in hardware firmware software or combinations thereof and enables the functionality of network device and the operability of the network device on a wireless network. For example processing subsystems allow for initiating and maintaining communications and exchanging data with other networked devices. For one or more of the disclosed aspects processing subsystems of processor may include any subsystem components that interact with the location integration module .

The computer platform further includes a communications module embodied in hardware firmware software and or combinations thereof that enables communications among the various components of network device as well as between the network device and wireless devices . The communications module may include the requisite hardware firmware software and or combinations thereof for establishing a wireless communication connection. The communication module is operable to receive location determination requests from wireless device and communicate the results of the integrated wireless device location determination to the requesting wireless device .

Referring to a block diagram of the location integration module is illustrated according to an aspect. The location integration module is operable to determine an integrated wireless device location. The location integration module includes a protocol handler operable to receive a location request for wireless device location from the wireless device . The protocol handler is further operable to obtain from the request location measurement information such as wireless network location measurement information associated with one or more wireless network edge devices and or GNSS location measurement information associated with the GNSS satellite signals. The wireless network edge device location measurement information obtained form the messages may include but is not limited to the MAC address the SID the power measurements of the transmitted and received message MMC device ID RF characteristics CDMA SID base station ID frequency band and the like. The GNSS location measurement information may include but is not limited to timing information related to the received satellite signals.

The location integration module additionally includes a location determiner that includes at least one wireless network location routine and at least one GNSS MS assisted mode routine . The wireless network location routine is operable to determine a wireless device location based on the location measurement information associated with the wireless network edge devices and wireless network location assistance information shown in stored in location determining assistance information database shown in of database shown in . For example the wireless network location routine may comprise a Wi Fi network routine CDMA network routine GSM network routine or another wireless network routine such as a routine for an emerging or future wireless network. Additionally the wireless network location determiner may implement a routine that combines measurement information from more than one wireless network to determine location. The wireless network location determination routine is operable to determine a wireless device location . The wireless network location routine may implement a network based location determination mode such as AFLT which determines location based on timing signals between network base stations.

The GNSS location determination routine is operable to determine a GNSS based wireless device location based on the location measurement information associated with the GNSS satellites and GNSS based location assistance information shown in stored in location determining assistance information database shown in of database shown in . In one aspect the GNSS location determination routine may implement MS assisted mode location determination. MS Assisted mode location determination is characterized in that calculation of the device location occurs at the network level such as a PDE which may be network device or any other network entity. As such in one example communication between the wireless device and network entity is required for each location determination attempt that uses MS assisted mode. If the wireless device requires updating of the GNSS location determining assistance information the wireless device communicates through the wireless network with the network device to obtain current ephemeris data and or almanac data stored in the GNSS location determining assistance information database . Once the wireless device has verified or obtained GNSS location determining assistance information the wireless device uses the information to set the parameters for receiving the GPS signals and subsequently receives the timing signals transmitted from the GPS satellites. Once the GPS signals are received the wireless device decodes the signals using the location determining assistance information to aid in setting the decode parameters. The wireless device uses the decoded timing information to make measurements related to the distance from the GPS satellites and the wireless device communicates the measurement information to the network device. The network device uses the measurement information and executes a location determining function to determine the location of the wireless device.

The location integration module also includes location integrator that is operable to integrate all the determined wireless device locations such as the wireless device locations and the GNSS based wireless device location . The location integrator may implement a predetermined integration method routine to determine the overall integrated wireless device location . Integration routines may include but are not limited to averaging all of the determined locations weighted averaging of all the determined locations or defining an overlapping geometric area that encompasses two or more of the determined locations. Once the integrated wireless device location is determined it may be communicated back to the wireless device or tagged and stored in tag database shown in . Additionally tagged locations may be shared with third party location determining entities in order to build their respective database of location related data.

The location integration module may additionally include a location validator operable to implement a validation routine to validate the determined integrated wireless device location . In one or more aspects validation may include comparing the integrated wireless device location to a validation database shown in such as natural structure database shown in such as a topographical database and or a man made structure database shown in such as an urban landmark building database to insure altitude uncertainties of the integrated location. If the comparison determines that uncertainties exist between the determined integrated location and the databases an appropriate correction adjustment to the integrated location may be accomplished or the uncertainty may be presented to the requesting application or the device user.

The location integration module may further include a self learning location estimator operable to execute a self learning location estimating routine to estimate i.e. self learn the location of network edge devices based on the integrated wireless device location and location measurement information associated with the respective network edge device. In addition the self learning location estimator may have access to measurement and edge device location estimates from numerous wireless devices which further provide for greater refinement and accuracy of the overall edge device location estimate. Estimated wireless network edge device locations are subsequently stored in an appropriate self learning database shown in . Additionally estimated locations of network edge devices may be shared with third party location determining entities in order to build their respective database of location related data. In this regard the self learning location estimator is able to refine the estimated location continually so as to increase the accuracy of the estimated network edge device location each time the network edge device is relied upon for a location fix. This aspect provides for efficiency in the overall integration process as the estimated location of the network edge devices may subsequently be relied upon in the location determination process.

Referring to in one aspect wireless devices are cellular telephones. A cellular telephone system may include wireless network connected to a wired network via a carrier network . In one aspect wireless devices have increased computing capabilities and often can communicate packets including voice and data over wireless network . As described earlier smart wireless devices have APIs resident on the devices local computer platform that allow software developers to create software applications that operate on the cellular telephone and control certain functionality on the devices. is a representative diagram that illustrates the components of a cellular wireless network and the interrelation of the elements of one aspect of the present system in more detail. Cellular wireless network is merely exemplary and can include any system whereby remote modules such as wireless devices communicate over the air between and among each other and or between and among components of a wireless network including without limitation wireless network carriers and or servers.

In system network device can be in communication over a wired network e.g. an LAN with a separate data repository for storing location determining assistance information tagged location data self learned estimated locations and the like. Further a data management server may be in communication with network server to provide post processing capabilities data flow control etc. Network server data repository and data management server may be present on the cellular telephone system with any other network components that are needed to provide cellular telecommunication services. Network server and or data management server communicate with carrier network through data links and e.g. Internet a secure LAN WAN etc. . Carrier network controls messages e.g. data packets etc. sent to a mobile switching center MSC . Further carrier network communicates with MSC by a network such as the Internet and or plain old telephone service POTS . In the illustrated network a network or Internet portion transfers data and the POTS portion transfers voice information. MSC may be connected to multiple base stations BTS by another network such as a data network and or Internet portion for data transfer and a POTS portion for voice information. BTS ultimately transmits messages wirelessly to the wireless devices such as wireless devices by short messaging service SMS or other over the air methods.

At Event the wireless device receives a plurality of wireless network messages each message transmitted from a network edge device associated with one of a plurality of wireless networks. In one aspect the wireless device may be configured to passively listen i.e. sniff for the wireless network messages transmitted from network edge devices that are within the frequency range or ranges supported by the wireless device. In this regard the wireless device may implement an RF tuner such as SDR that is capable of passively listening for all messages transmitted from the wireless network edge devices. Implementation of an RF tuner such as SDR provides for the wireless device to implement only the portion of the protocol stack to receive the requisite messages thereby simplifying the overall location determination integration process. The wireless networks that the wireless device may receive messages from can include any known or future known wireless network including but not limited to CDMA network GSM network Wi Fi network and the like.

Additionally the received messages may be delivered from the serving networks i.e. the active networks and or the surrounding networks i.e. the non attached networks . As referred to in the described aspects the term surrounding wireless networks are defined as non attached wireless networks from which the wireless device is capable of receiving wireless network messages and not non attached wireless networks with which the wireless device can communicate. Conversely the term serving wireless network is used herein to describe the active or attached wireless networks that are currently being used by the wireless device. For example if the wireless device is currently communicating on the GSM communications network GSM would be the serving network and all other wireless networks for example CDMA communication network Wi Fi communication network or the like would be the surrounding wireless networks. In an alternate aspect the wireless device may be actively communicating with more than one serving network. In the instances in which more than one serving network is active one of the networks may be designated as the primary serving network for example the cellular network and the other serving networks may be designated as the secondary serving networks.

At Event the wireless device may optionally receive satellite signals from a plurality of GNSS satellites such as GPS GLONASS Galileo satellites or the like. In some instances the wireless device may be located in areas that are unable to receive satellite signals or the minimal satellite signals necessary to calculate a GNSS location. For example the wireless device may be located indoors or in dense urban area. In such a scenario in one aspect the integration method herein described may proceed without the need to determine a GNSS wireless device location.

At Event the wireless device obtains location measurement information from the received wireless network messages. The location measurement information may include but is not limited to access point MAC address wireless network SID power measurements MMC device ID RF characteristics CDMA SID base station ID frequency band and the like. Additionally in the aspects in which a GNSS location is being determined the wireless device may obtain timing information from the received GNSS satellite signals.

At Event the wireless device obtains location determining assistance information for each of the wireless networks associated with the received wireless network messages. The location determining assistance information may include locations of other network edge devices in the network or any other information used to determine a network based wireless device location. The location determining assistance information may be obtained from local wireless device memory or the wireless device may be required to communicate with a network database to retrieve the location determining assistance information. Additionally in one or more aspects in which a GNSS location is determined the wireless device may obtain GNSS location determining assistance information such as ephemeris data and or almanac data. Such data may be stored locally at the wireless device or may be retrieved from a network database.

At Event the wireless device determines more than one wireless device location based on the location measurement information and the location determining assistance information. The wireless device may implement an AFLT routine to determine wireless device location or any other known or future known location determination routine. Additionally the wireless device may implement a routine that combines measurement information from more than one wireless network to determine location. Also in one or more aspects in which a GNSS location is determined the wireless device may determine a GNSS based wireless device based on the GNSS location measurement information and the location determining assistance information. The GNSS location determination may implement any known mode routine of GNSS location determination such as but not limited to MS Based mode location determination MS Assisted mode location determination Standalone mode location determination and the like.

At Event the wireless device determines an integrated wireless device location. Any predetermined integration method may be used including but not limited to averaging all of the determined locations weighted averaging the determined locations and defining an overlapping area as the integration area for the determined locations. As such the integrated wireless device location may take into account any wireless network fixes and any GNSS based fixes.

At Event the wireless device validates the integrated wireless device location. Validation may occur by comparing the integrated wireless device location to elevation databases such as a natural structure database for example a topographical database and or a man made structure database for example an urban landmark building database. Validation may serve to eliminate any uncertainties related to the elevation of the integrated wireless device location. If validation determines an uncertainty the validation process may adjust the integrated location accordingly or report the uncertainty to the requesting application.

At optional Event the wireless device may tag the integrated wireless device location and store the tagged location in a related database. The related database may be a local database on the wireless device or a network database. Additionally the tagged location may be communicated to a third party location determining database as a means of adding to the third party s database of location information.

At optional Event the wireless device self learns the estimated location of the network edge devices based on the integrated wireless device location and the location measurement information related to the network edge device. The estimated location of the network edge device may be stored in a self learning database which may be local or may require wireless communication to a network database. Additionally the self learned estimate location of network edge devices may be communicated to a third party location determining database as a means of adding to the third party s database of location information. The self learning aspect provides for the estimated network edge device location to be continually refined and adjusted to gain greater accuracy as subsequent location fixes rely on the network edge device for location determination.

At Event the network device obtains location determining assistance information for each of the wireless networks associated with the wireless network edge devices. The location determining assistance information may include locations of other network edge devices in the network or any other information used to determine a network based wireless device location. In one aspect the location determining assistance information may be obtained from a network database. Additionally in the aspects in which a GNSS location is determined the wireless device may obtain GNSS location determining assistance information such as ephemeris data and or almanac data which may be stored at a network database.

At Event the network device determines more than one wireless device location based on the location measurement information and the location determining assistance information. The network device may implement an AFLT routine to determine wireless device location or any other known or future known location determination routine. Additionally the wireless network location determiner may implement a routine that combines measurement information from more than one wireless network to determine location. In the one or more aspects in which a GNSS location is determined the network device may determine a GNSS based wireless device based on the GNSS location measurement information and the GNSS location determining assistance information. The GNSS location determination may implement any known mode routine of GNSS location determination such as but not limited to MS Assisted mode location determination and the like.

At Event the network device determines an integrated wireless device location based on the wireless device locations for each wireless network and optionally the GNSS based wireless device location. Any predetermined integration method may be used including but not limited to averaging all of the determined locations weighted averaging the determined locations and defining an overlapping area as the integration area for the determined locations. As such the integrated wireless device location may take into account any wireless network fixes and any GNSS based fixes.

At Event the network validates the integrated wireless device location. Validation may occur by comparing the integrated wireless device location to elevation databases such as a natural structure database e.g. a topographical database etc. and or a man made structure database e.g. an urban landmark building database etc. . Validation may serve to eliminate any uncertainties related to the elevation of the integrated wireless device location. If validation determines an uncertainty the validation process may adjust the integrated location accordingly or report the uncertainty to the requesting application.

At optional Event the network device may tag the integrated wireless device location and store the tagged location in a related database. The related database may be network database or a database stored at the wireless device. Additionally the tagged location may be communicated to a third party location determining database as a means of adding to the third party s database of location information.

At optional Event the network device self learns the estimated location of the network edge devices based on the integrated wireless device location and the location measurement information related to the network edge device. The estimated location of the network edge device may be stored in a self learning database which may be a network database. Additionally the self learned estimate location of network edge devices may be communicated to a third party location determining database as a means of adding to the third party s database of location information.

At optional Event the integrated wireless device location is communicated to the requesting wireless device and or any other device requiring the wireless device s location.

The various illustrative logics logical blocks modules and circuits described in connection with the aspects disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration. Additionally at least one processor may comprise one or more modules operable to perform one or more of the steps and or actions described above.

Further the steps and or actions of a method or algorithm described in connection with the aspects disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers a hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium may be coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. Further in some aspects the processor and the storage medium may reside in an ASIC. Additionally the ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal. Additionally in some aspects the steps and or actions of a method or algorithm may reside as one or any combination or set of codes and or instructions on a machine readable medium and or computer readable medium which may be incorporated into a computer program product.

While the foregoing disclosure discusses illustrative aspects and or implementations it should be noted that various changes and modifications could be made herein without departing from the scope of the described aspects and or aspects as defined by the appended claims. Furthermore although elements of the described aspects and or embodiments may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated. Additionally all or a portion of any aspect and or implementation may be utilized with all or a portion of any other aspect and or implementation unless stated otherwise.

Thus present aspects provide for methods devices and systems for integrating wireless network location determination such as Wi Fi and the like and Global Navigation Satellite System location determination such as GPS and the like. While integration of the various location determination methods provides for more accurate location determination the systems methods and apparatus herein disclosed also provide for location i.e. position to be determined in instances in which one or more of the location determination methods are unavailable. One or more of the aspects provide for a hardware based solution that combines the GPS and Wi Fi functionality on a wireless device semiconductor device to provide greater efficiency and speed in determining the integrated position. Additionally efficiency is realized by providing for a self learning system that estimates and continuously refines a location for wireless network edge devices such as Wi Fi access points and the like. Accuracy of the integrated location determination is provided for by a validation process that serves to eliminate altitude uncertainties from the resulting integrated location.

Many modifications and other aspects will come to mind to one skilled in the art to which the subject invention pertains having the benefit of the teachings presented in the foregoing descriptions and the associated drawings. Therefore it is to be understood that the aspects are not to be limited to the specific aspects disclosed and that modifications and other aspects are intended to be included within the scope of the appended claims. Although specific terms are employed herein the terms are used in a generic and descriptive sense only and not for purposes of limitation. Accordingly the described aspects are intended to embrace all such alterations modifications and variations that fall within the spirit and scope of the appended claims. Furthermore to the extent that the term includes is used in either the detailed description or the claims such term is intended to be inclusive in a manner similar to the term comprising as comprising is interpreted when employed as a transitional word in a claim.

