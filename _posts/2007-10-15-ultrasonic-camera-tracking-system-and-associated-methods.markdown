---

title: Ultrasonic camera tracking system and associated methods
abstract: A camera tracking system includes a controllable camera, an array of microphones, and a controller. The microphones are positioned adjacent the controllable camera and are at least responsive to ultrasound emitted from a source. The microphones may additionally be capable of responding to sound in the audible spectrum. The controller receives ultrasound signals communicated from the microphones in response to ultrasound emitted from the source and processes the ultrasound signals to determine an at least approximate location of the source. Then, the controller sends one or more command signals to the controllable camera to direct at least approximately at the determined location of the source. The camera tracking system tracks the source as it moves and continues to emit ultrasound. The source can be an emitter pack having one or more ultrasonic transducers that produce tones that sweep form about 24-kHz to about 40-kHz.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08249298&OS=08249298&RS=08249298
owner: Polycom, Inc.
number: 08249298
owner_city: Pleasanton
owner_country: US
publication_date: 20071015
---
This application claims the benefit of U.S. Provisional Application Ser. No. 60 862 132 filed 19 Oct. 2006 and entitled Ultrasonic Camera Tracking System and Associated Methods which is incorporated herein by reference and to which priority is claimed.

Presenters typically use hand held remotes to control a camera of a videoconferencing system. However a goal for videoconferencing is to produce a natural experience for participants. Therefore it is not desirable to require the presenter or other participants to spend a great deal of time controlling the camera and handling complex input devices.

Some prior art techniques for camera tracking are disclosed in U.S. Pat. Nos. 5 844 599 6 731 334 and 6 980 485. For example U.S. Pat. No. 6 980 485 assigned to Polycom Inc. discloses an automatic camera tracking technique that uses beamforming. In addition Polycom offers a voice tracking system called Automatic Camera Positioning or ACP for its VSX videoconferencing system. Another prior art system uses color code based tracking and vision analysis to track a target with a camera.

Although effective some of the prior art systems can have limitations in some respects and can be difficult to maintain. In voice tracking for example the camera may point to a wall or a table from time to time due to reflection or other causes. In addition the camera may not be able to track someone while moving if that person is not speaking. Furthermore these prior art technique run into problems in situations where there are multiple voices or different color codes.

The subject matter of the present disclosure is directed to overcoming or at least reducing the effects of one or more of the problems set forth above.

A camera tracking system includes a controllable camera an array of microphones and a controller. The microphones are positioned adjacent the controllable camera and are at least responsive to ultrasound emitted from a source. The microphones may additionally be capable of responding to sound in an audible spectrum. The controller receives ultrasound signals communicated from the microphones in response to ultrasound emitted from the source and processes the ultrasound signals to determine an at least approximate location of the source. Then the controller sends one or more command signals to the controllable camera to direct it at least approximately at the determined location of the source. The camera tracking system tracks the source as it moves and continues to emit ultrasound. The source can be an emitter pack worn by a person. The emitter pack can have one or more ultrasound transducers that produce an ultrasound tone that sweeps form about 24 kHz to about 40 kHz.

The foregoing summary is not intended to summarize each potential embodiment or every aspect of the present disclosure.

While the subject matter of the present disclosure is susceptible to various modifications and alternative forms specific embodiments thereof have been shown by way of example in the drawings and are herein described in detail. The figures and written description are not intended to limit the scope of the inventive concepts in any manner. Rather the figures and written description are provided to illustrate the inventive concepts to a person skilled in the art by reference to particular embodiments as required by 35 U.S.C. 112.

Referring to one embodiment of a camera tracking system according to certain teachings of the present disclosure is schematically illustrated. The camera tracking system includes a camera unit a control unit and an emitter unit . A presenter wears or carries the emitter unit that acts as a beacon so that the camera unit can follow the presenter by detecting the emitted beacon signal.

In various embodiments the camera tracking system can be used with a remote control and can be used with an external device such as a videoconferencing system or other system. The camera unit and the control unit can be separate components as shown or they can be integrated into one unit. In addition although the external device is shown as a separate component either one or both of the camera unit and control unit can be integrated with the external device .

In the present embodiment the control unit controls camera tracking and other features of the system . The control unit includes a processor not shown for performing necessary calculations to perform the camera tracking techniques disclosed herein. The processor can be any device that can make the necessary calculations such as a Central Processing Unit CPU Field Programmable Gated Array FPGA and the like. The control unit can receive standard NTSC PAL s video or other type of video sent from the camera unit via a first connection . The control unit also receives a plurality of channels e.g. four of line level audio from the camera unit via the connection .

Via a second connection the control unit can communicate controls for the camera unit . Via a third connection the control unit can connect to the external device such as a videoconferencing unit. This third connection can allow can be used for sending video audio and other signals to the external device . This third connection can also allow the external device to use and control the camera unit for videoconferencing. For example the control unit can support a PowerCam Application Programming Interface API or a Sony EVI D 100 API so the control unit can pass packets back and forth between the external device and the camera unit . The third connection and a fourth connection can be used to output video that can just contain the video from the camera unit or that can contain the video plus any overlay of a graphical user interface added by the control unit .

The camera unit includes a controllable camera and an array of microphones . The controllable camera can be capable of panning tilting and zooming and can be a mechanical or electronic pan tilt zoom camera. In one example the controllable camera is a Polycom PowerCam Plus capable of panning about 45 degrees and tilting 10 degrees and 30 degrees from a center point. The camera unit provides an s video PAL or NTSC or other form of video signal to the control unit via connection . The camera unit also responds to commands communicated from the control unit via connection to change the pan tilt and or zoom of the controllable camera . In addition the camera unit can include an IR receiver and can send signals received from the IR remote control to the control unit via connection .

In one embodiment the array includes four microphones . At least two microphones can have a horizontal arrangement for determining location of the emitter unit to control the panning of the camera along a horizontal axis. Likewise at least two microphones can have a vertical arrangement for determining location of the emitter unit to control the tilting of the camera along a vertical axis. It will be appreciated that two of the microphones can be arranged substantially horizontal to an acceptable tolerance recognizable by one skilled in the art that enables sufficient horizontal tracking. Moreover it will be appreciated that two of the microphones can be arranged substantially vertical to an acceptable tolerance recognizable by one skilled in the art that enables sufficient vertical tracking.

The microphones of the array respond to ultrasound in an ultrasonic spectrum emitted by the emitter unit . In one embodiment the microphones of the array may be particularly configured for response in an ultrasonic spectrum so that the system may have additional microphones for responding to sound in an audible spectrum which in general can be about 20 Hz to 20 000 Hz. In another embodiment each microphone of the array may be responsive to an audible spectrum and may provide a suitable frequency response for an ultrasonic spectrum as well so the microphones can be used for regular audio of a videoconference and for camera tracking based on ultrasound . In addition the camera unit can use the dual use microphones in conjunction with voice tracking techniques associated with videoconferencing systems such as disclosed in incorporated U.S. Pat. No. 6 980 485 or used in Polycom s iPower VSX and HDX series of products.

The emitter unit has a signal generator circuit a power amplifier a rechargeable battery and one or more transducers or speakers and . As noted briefly above the emitter unit is carried or worn by the person that the camera is intended to track. Accordingly the emitter unit can have a belt a clip lanyard or other means not shown for it to be worn or carried by a person.

When operated the emitter unit generates an ultrasound that is detected by the microphones of the array . Preferably the ultrasound is a repeating tone that sweeps through frequencies from 24 kHz to 40 kHz over a 100 ms interval and that has a short silent interval of about 100 ms between tones. To produce the preferred sweep tone of ultrasound the sampling frequency of the signal generator circuit can be at 96 kHz and the signal generator circuit can include a clock oscillator that oscillates at 24.576 MHz at 50 ppm such as an EPSON SG 710ECK24.5760MB RALTRON C04305 24.5760 SARONIX S 1613B 24.5760T. Preferably the emitter unit has a Low Pass Filter for a Digital to Analog converter of the unit and at least a 60 dB stopband attenuation is preferably used at 56 kHz and above. The transition band is 40 kHz to 56 kHz and the Digital to Analog converter can be an AK4386 from AKM Semiconductor Inc.

The emitter unit can have only one ultrasonic transducer or can have two or more ultrasonic transducers and . Either way the ultrasonic transducer is connected to the emitter unit by wire and can be a piezoelectric transducer piezoelectric crystals can change shape for producing sound when subjected to a voltage or a magnetostrictive transducer magnetostrictive materials convert magnetic energy into mechanical energy and vice versa . In embodiments where the emitter unit includes more than one transducer and for example the presenter can wear one of the transducers on the front of the body and can wear the other transducer on the back of the body. Alternatively one of the transducers and can be worn on each shoulder. In one embodiment each transducer and can be synchronized to emit identical signals of ultrasound . In an alternative embodiment the transducer and can emit distinct signals of ultrasound that may enhance the ability of the camera to track a person for the various ways in which the person s body can be oriented with respect to the array of microphones .

When emitted ultrasound is obtained with the microphones the camera unit sends ultrasound signals for each microphone to the control unit via connection . The control unit processes the received signals to determine an at least approximate location of emitter unit where the sound originated. As discussed in more detail below software of the control unit processes the received signals to locate the emitter unit . After determining the location the control unit sends one or more command signals to the camera unit to control the camera to at least approximately track the emitter unit .

Determining the location of the emitter unit can be approximate within acceptable degrees of pan tilt and or zoom recognizable by one skilled in the art that will enable the camera to be sufficiently directed at the presenter wearing the unit . Moreover directing the camera at the presenter with the emitter unit and tracking that presenter can be approximate within acceptable degrees of pan tilt and or zoom recognizable by one skilled in the art that will enable a sufficient image of the presenter to be captured by the camera . To that end at least four microphones are set at two orthogonal axes that can vary according to acceptable tolerances. The control unit can further set up to operate the system in only a defined tracking area outside of which the camera will not be pointed. In addition the control unit can be set up to operate the camera such that it offers a tight or wide view of the presenter and offers a view in which the presenter i.e. emitter location is either located in the center right or left of the captured image.

During a presentation or videoconference for example the control unit controls the camera to track the person wearing the emitter unit . When the tracked person is moving and then stops the speed of the camera s movement e.g. pan and tilt is preferably controlled by first slowing down and then stopping to point at the person. For example the camera may come to rest and point at the person within a 2 seconds time period to make the camera motion smoother and to prevent jerky movement in the event the person starts moving again. These parameters may be configurable by the user.

There may be situations where the person is moving slightly but still within the frame or view angle of the camera . Preferably the camera does not follow the person in a jerky motion when this is the case and the camera is intended to remain stationary when the person moves slightly within the view angle of the camera . To achieve this the control unit can determine the view angle of the camera and can correlate the view angle with the determined location of the person. Based on the correlation the control unit can determine whether the person has moved outside a frame of the camera before initiating commands to move the camera to track the person. In addition when the person does move outside of the camera s frame the camera may not be move until a delay period of about 500 ms has passed.

Now that details of the camera tracking system have been discussed we now turn to to discuss software for the control unit . As shown one embodiment of a control unit s software framework includes a user interface module a message handler a camera control module an audio subsystem a configuration module a storage module a serial driver an audio hardware manager a TCP IP module and a Field Programmable Gateway Array FPGA .

The UI module sends command message strings to the other modules and subsystems of the framework via the message handler . The user interface UI module handles IR remote button presses from a user and overlays text and graphics on video output for displaying an on screen menu system for the user. For example the UI module can handle user inputs for setting and recalling presets turning auto tracking on and off and selecting menu mode. In addition the UI module can generate various warning screen setup screens calibration screens informational screens and other visuals on screens for display to users.

The audio subsystem receives the ultrasound input from the camera s microphones via interface the FPGA and audio hardware manager driver . Using techniques discussed in more detail below the audio subsystem filters and analyzes the ultrasound signals from the microphones to determine the angular position of the ultrasound emitter not shown of the source in both a horizontal and vertical direction. The audio subsystem also determines an approximate distance of the emitter from the camera or alternatively the microphones positioned adjacent the camera . The audio subsystem periodically sends this position information to the camera control module so that the camera control module can control the camera accordingly.

The camera control module handles all camera related motion for both manual and automatic modes of operation. During the automatic mode of operation where the source is to be automatically tracked the camera control module receives the position information associated with the source from the audio subsystem and converts that position information into camera movement commands. The camera control module then sends the camera movement commands to the camera via the serial driver FPGA and interface . The commands preferably obtain smooth camera motion to follow the targeted source. When an optional interface is used for an external device e.g. videoconferencing unit the camera control module can forward camera serial commands received from the external device to the camera via another interface and can also return the camera s responses back to the external device .

With an understanding of software for a control unit we now turn to to discuss a preferred embodiment of a camera unit illustrated relative to components of a camera tracking system . As described previously the camera unit is communicatively coupled to the control unit . In addition the control unit may or may not be connected to an external device not shown such as a videoconferencing unit a video monitor computer etc.

The camera unit has a housing for various components a boom connected to the housing a plurality of microphone receivers arranged in an array a moveable camera atop the housing and other components not shown.

Three of the microphone receivers i.e. receivers and are arranged horizontally on the housing . In addition one of the microphone receivers i.e. receiver is positioned in the boom and is vertically arranged relative to the center microphone receiver on the housing . The position of the ultrasonic transducer in space relative to the camera unit can be characterized using a Cartesian coordinate system X Y Z . The ultrasonic transducer emits ultrasound that the microphone receivers pick up. Processing performed at least in part by the control unit determines the position of the ultrasonic transducer and moves the camera to track the ultrasonic transducer s position. Using a position determination algorithm discussed below phase differences in the ultrasound received by the horizontally arranged microphone receivers and determines the ultrasonic transducer s horizontal position relative to the camera unit which corresponds to a pan position P for the camera . Phase differences in the ultrasound received by the vertically arranged microphone receivers and determine the ultrasonic transducer s vertical position relative to the camera unit which corresponds to a tilt position T of the camera . In one embodiment accuracy of about 0.125 degrees in both the pan and tilt positions may be achieved using the position determination algorithm discussed below.

Furthermore the wavefront curvature of the ultrasound received by the horizontally arranged microphone receivers and can be used to determine the ultrasonic transducer s distance from the camera unit which corresponds to the zoom position Z of the camera . In addition or in the alternative other techniques can be used to determine the distance that the ultrasonic transducer is from the the camera unit . As discussed later in additional embodiments for example Radio Frequency RF signals and wireless microphone signals can be used. The focus of the camera can be controlled using techniques known in the art.

In the signal chain for the camera tracking system of is diagrammatically illustrated. In the signal chain the ultrasonic transducer emits ultrasound as the targeted source i.e. user wearing or carrying the transducer moves relative to the microphone receivers . The signals of the ultrasound received by each of the microphone receivers are then sent to the control unit so that the control unit receives four channels of input signals. In turn the control unit which can have one or more digital signal processors processes the signals Block . Some details of the processing are discussed later with reference to .

The control unit then uses a position determination algorithm to determine approximately the vertical position the horizontal position and the distance e.g. X Y Z of the ultrasonic transducer relative to the receivers Block . The position determination algorithm is discussed in detail later with reference to . Using the determined position X Y Z the control unit configures camera control commands Block and sends those commands to the camera Block . To configure the camera control commands the control unit may convert the determined position e.g. X Y Z of the ultrasonic transducer into pan tilt and zoom information for actuators servos or the like of the camera . The camera components receive the commands and uses them to direct the camera at the determined position of the ultrasonic transducer Block .

The ultrasonic transducer for the disclosed tracking system is preferably a piezoelectric ultrasonic transducer having a wide bandwidth good sensitivity low distortion and a small thickness. In one embodiment for example the ultrasonic transducer has a reasonably flat frequency response in a frequency range of 24 kHz to 40 kHz but it will be appreciated that the camera tracking system is not limited to the bandwidth of 24 kHz to 40 kHz. To be reasonably flat for example the frequency response may fluctuate within 5 of its given level or within some other suitable tolerance depending on the implementation. Moreover the limits of the bandwith of 24 kHz to 40 kHz can differ by plus or minus several kHz or some other suitable amount depending on the implementation.

The ultrasonic receivers preferably have a substantially flat frequency response at least up to 40 khz. A suitable ultrasonic receiver for the disclosed camera tracking system are the WM61B and WM64 receivers from Panasonic that have a substantially flat frequency response up to 40 kHz. How flat the frequency response is or would need to be for a given implementation falls within the relative skill of one in the art having the benefit of the present disclosure.

The processing in Block by the control unit preferably involves down sampling and other filter operations on the signals form the microphone receivers to improve later processing stages of the signals. shows a block diagram of down sampling and filtering operations for reducing the ultrasound signal to the audible range and improving signal attributes. Initially the ultrasonic transducer emits ultrasound that sweeps within the 24 kHz to 40 kHz range. In a first stage this sweep tone is picked up by each of the microphone receivers . One advantages of using the sweep tone rather than a band limited white noise signal is that the sweep tone signal makes the ultrasonic transducer less audible to people due to non linear distortion. In another advantage the use of the sweep tone yields a higher signal to noise ratio than a white noise signal. In this first stage the 24 kHz to 40 kHz sweep tone signal picked up by each of the microphone receivers is digitally sampled at 96 kHz as shown by graph of .

Because each of the microphone receivers picks up the sweep tone the control unit can perform some processing separately on the signals from each of the microphone receivers and can perform additional processing on the summation of the signals from all of the receivers . In the following stages however it is preferred that the processing be performed separately on the signals from each of the receivers . It is not until initial processing is completed that the signals will be summed together.

In a second stage a two to one resampler and modulation module of the control unit shifts the spectrum of the sampled sweep tone signals from 24 48 kHz to 0 24 kHz and produces an output sampling rate of 48 kHz as shown in graph of . In a third stage a three to two resampler of the control unit produces a signal with a frequency range from 0 kHz to 16 kHz as shown by graph of . The output of the three to two resampler carries the same information as the original received signals at stage however the output at this stage is at much lower sampling rate of 32 kHz that helps reduce computations required during later processing.

In a fourth stage a match filter compresses the energy in each of the sweep tone signals over a time interval so that the energy is concentrated in an impulse like waveform for each of the signals of the receivers . In this way the match filtering can enhance the signal to noise ratio and can increase the potential tracking range of the system . Matching filtering techniques are known in the art and are not detailed herein.

The ideal output signal after the match filter stage is an impulse waveform or a waveform that is very close to an impulse. For the down sampling and filter operations there are six possible shapes of impulses that depend on the phase of the original received signal because the sweep tone is still a band limited signal when the sampling rate is 96 kHz which leads to a poly phase output when down sampled.

In a fifth stage a reflection removal algorithm removes portions of the impulsive like waveform outputs after match filtering in stage that may be caused by reflection. The reflection removal algorithm preferably keeps the impulse of the signals that substantially correspond to a direct path to the ultrasonic transducer and removes any part of the signals that follow the impulse for a specific amount of time. In one example the reflection removal may keep 0.5 ms of the impulse of the signals and may zero out about 39 ms of time following the impulse. Preferably the reflection removal algorithm uses a dynamic threshold to identify the impulse of the signals that correspond to the direct path to the transducer because the dynamic range of the time domain signal can vary. Variance in the dynamic range over time can result when the ultrasonic transducer moves about in a large room and turns with respect to the microphone receivers from time to time. The reflection removal algorithm first tracks maximum values of the signals in short periods of time that have just passed and sets the dynamic thresholds to be about one eighth those maximum values.

In addition to reflection removal it may be preferred that the waveforms of the signals received from the match filter stage be equalized. For example the output signals from match filter stage may be more complex than impulse waveforms due to imperfect frequency responses and other causes. To make the output signals from the match filter stage be more pulse like waveform equalization is preferably performed on the signals to compensate for the imperfect frequency responses of the ultrasonic transducer and the receivers .

Furthermore it is noted that the microphone receivers may also pick up some spurious ultrasonic tones in the background that can be as much as 20 to 30 dB above the noise floor. The background noise may be generated by surrounding electronic equipment such as desktops computers TV sets etc. and can reduce the measurement accuracy to some degree. In a sixth stage for background noise removal the control unit preferably uses a background noise estimator and an adaptive notch filter to remove some of the background noise. During operation the estimator detects automatically whether the ultrasonic transducer is turned on or off and hence emitting ultrasound by analyzing the received signals statistically. At various intervals the estimator captures the signal to estimate the background noise level. This process may only take about one second. Then the adaptive notch filter is preferably used to remove at least some of the background tones.

Once the down sampling and other filter operations have been performed the processed signals from the microphone receivers are input into a position determination algorithm . Briefly the position determination algorithm estimates a maximum likelihood that the ultrasonic transducer is located in a candidate location of a plurality of possible locations. In this approach the location of the ultrasonic transducer is initially hypothesized to be at each of many possible candidate locations in its environment e.g. a room . For each candidate location the signals from the microphone receivers are appropriately delayed relative to one another and are summed together using a delay sum operation. The result yields the maximum possible beam energy for any of the available frequencies.

Then a whitening filter is used across each frequency and each microphone receiver so that each frequency and each receiver is equally important in adding to the total energy. Then various candidate locations are searched for the one candidate location that yields the maximum beam energy of all the hypothesized candidate locations. This candidate location is declared as the estimated location of the transducer . In general the various time delays needed to sum samples from the microphone receivers are fractional values and there may be hundreds or thousands of candidate locations to search. Preferably to reduce computational expense the search for candidate locations uses a computationally efficient process.

One embodiment of a position determination algorithm to estimate a candidate location of an ultrasonic transducer is shown in in flowchart form. The algorithm receives four channels of signals as input Block . In the present embodiment each channel corresponds to the down sampled and filtered portion of the received signals of ultrasound from the four microphone receivers . Next the algorithm determines the phase difference for the horizontal channels i.e. each horizontally arranged microphone receivers that produces the maximum normalized beam energy Block . The steps of Block are discussed in more detail with reference to . Then this determined phase difference is then used to determine the horizontal position of the transducer and hence the pan position for the camera Block .

Then the algorithm determines the phase difference for vertical channels i.e. each vertically arranged microphone receivers that produces the maximum normalized beam energy Block by repeating the steps of for the vertical receivers . This determined phase difference is then used to determine the vertical position of the transducer and hence the tilt position for the camera Block .

Subsequently the algorithm calculates the curvature of the wavefront of the ultrasound detected at the horizontally arranged microphone receivers Block and uses the curvature to calculate the distance of the transducer and hence the zoom position for the camera Block . Finally the control unit instructs the camera to direct at the determined location of the emitter Block .

In steps are illustrated for determining the phase difference of channels that produces the maximum normalized beam energy. First filtering analysis is performed on each channel Block . The summed beam energy is then computed in each sub band of all of the channels Block . The summed energy is compared with a predetermined threshold Block to determine if the number of bands is greater than number required Block . If not then the subroutine is bypassed altogether because there may not be enough signal information to process Block .

If the number of bands is greater than the required number then the sub band signals are normalized across the band and the channel Block . A sweeping search in an angular range of phases is made to get beam energy at a plurality of first phase angles Block . From that search the first phase angle corresponding to the maximum normalized beam energy is found Block . Then a sweeping search is made in a more refined angular range of phase angles about the previously found first phase angle to get beam energy at a plurality of second phase angles Block . From that refined search the second phase angle corresponding to the maximum normalized beam energy is found Block . At the finial Block this second phase angle is then returned either to Block or of depending on whether horizontal or vertical arrangement is being analyzed.

We now turn to a more detailed discussion of the position determination algorithm. To perform the filtering analysis on each channel in Block of M channels of ultrasonic receiver signals are fed to an equal number of Analog to Digital A D converters. The A D converters convert the ultrasonic receiver signals into digital samples. For each ultrasonic receiver channel M a block of N samples is accumulated for processing. In a preferred embodiment the number of samples N is 640. The resulting input data is characterized as X n 1 

where m 0 1 . . . M 1 M being number of channels and where n 0 1 . . . N 1 N being the number of samples for each channel . Next the M number of blocks of the N samples are fed to an overlap add filter bank that generates in one embodiment N complex frequencies for each channel. Consequently the ultrasonic receiver signals in the time domain are converted to filter bank outputs that can be characterized as 2 

The filter bank outputs H k are complex having a real and an imaginary component. Here k is a frequency band that can be translated to a frequency bin number. Every time a block of N samples occurs in a predetermined time domain a new set of filter bank outputs H k is produced. If the input signal for a given ultrasonic receiver X n is a sine wave of a frequency centered in one of the bands call it k of the filter bank output H k then filter bank output H k for that centered band k would be large in magnitude while all the other H k for k k will be smaller in magnitude.

As noted above in Block the summed beam energy in each sub band of all of the channels is computed. First the signals are normalized. Equation 3 computes the normalized signals so that only the phase angle of the complex signals will be used in calculating the beam energy 

Next a delay and sum operation alluded to above is performed on each frequency domain. If a sub band is narrow enough it may be viewed as a sinusoid so that a time delay may be approximated by multiplying the complex signal by a phasor e so that 

where is the appropriate phase angle that would occur if the sine wave were delayed by the desired amount of time. For a particular frequency sub band k the delay and sum operation is calculated by 

Here represents a particular phase angle that would maximize the magnitude of the summed value of G k given a hypothetical location of the transducer at a location x y z . Because sound arrives at the microphone receivers with different time of arrivals equation 5 attempts to compensate for these different times so that the different ultrasonic receiver signals can be added up as if the signals arrived at all the microphone receivers at exactly the same time i.e. the signals did not arrive out of phase .

To calculate the appropriate phase angle for equation 5 that would maximize the magnitude of the summed value of G k given a hypothetical location of the transducer at a location x y z it is assumed that the transducer source is located at a position X Y Zin a Cartesian coordinate system and that the M e.g. four microphone receivers are located at positions X Y Z. Then the distance between the transducer and the m th microphone receivers is calculated by 

By picking one of the microphone receivers as a reference say m the difference in distance D between the reference receiver m and the other receivers is characterized by 7 

In addition the difference in phase angle for a given frequency bin of band k between the reference receiver m and the other receivers is characterized by 2 24 000 8 

where b is the Hertz per bin for the sub band filter i.e. the center frequency of the sub band filter is 24 000 kb Hertz. The number 24 000 is derived from the spectrum shift discussed previously with reference to . The term is the differential distance between receivers in inches and v is a constant that is proportional to the reciprocal of the speed of sound 1 13.54 1000 . To cancel out the phase shift in equation 8 in equation 5 is set to 9 

In general in equation 9 will be different for each frequency bin of the band k and each ultrasonic receiver m.

Each hypothetical position G k of the transducer in equation 5 is found for the band k ranging from the lowest frequency bin to the highest frequency bin i.e. spanning the range from 24 kHz to 40 kHz that translates to 0 to 639 in frequency bin number . The following location weighting function is finally determined 

The candidate position x y z for the transducer that produces the maximum value for the location weighing function W x y z in equation 10 is determined to be the estimated position of the transducer .

To reduce computational cost as well as improve detection accuracy the location weighting function W x y z in equation 10 is computed only occasionally e.g. every P blocks . In a preferred embodiment P is 5 which corresponds to a calculation about every 0.1 seconds. Furthermore the frequency sub band data H k can be trimmed both in time and frequency so that only the most useful data that occurred over the last P blocks is used to calculate the location weighting function W x y z at the end of the time period of P blocks.

Accordingly discussion now turns to some steps for trimming the frequency sub band data and performing only occasional calculations of the location weighting function W x y z . Over a time period of P blocks for each frequency bin of the band k the data from the Multrasonic receivers may be characterized by 

Equation 12 is then used in equation 10 to find the maximum value of the location weighting function W x y z . For some frequency bins of the bands k where the signal energy is close to the noise energy then the position G k will be zero. If the number of the non zero frequency bins is too small the entire computation is bypassed because the data of the last P blocks is probably only attributable to noise.

In equation 12 the phasor term eis a transcendental function and has an imaginary part and a real part which are different for each frequency bin k and each hypothesized source position x y z. Accordingly it would be inefficient to compute it at run time with the control unit . Preferably values are pre computed and stored in one or more lookup tables in memory so the control unit can access the tables to perform calculations during run time.

In one embodiment for pre computing lockup tables the time block size can be N 640 the number of frequency bins can also be the frequently span from low to high can be all 640 frequencies the number of ultrasonic receivers M can be 4 and the number of hypothesized source positions can be 8640 i.e. 180 degrees in degree increments at 48 distances . The number of entries in a resulting table would be No. of Entries 2 640 16 8640 176 947 200 13 

To offer 16 bit precision the memory required to store this table would be about 350 megabytes which may be prohibitive in terms of memory size for a typical implementation.

To reduce the table size the real part for the phasor term ein equation 12 can be characterized by cos cos 2 and cos cos 14 

where c is a constant for all k and m. Because the cosine function repeats every 2 of the argument it is then possible to efficiently calculate cos by first calculating the product k c taking this product modulo 2 and then looking up the result in a table of the cosine function.

Instead of independently computing equation 14 two pre computed lookup tables can be stored in memory of the control unit and can be used to reduce computations. A first pre computed lookup table D r m is produced for the camera tracking system where r is an index uniquely specifying a hypothetical position x y z of the transducer in 3 Dimensional space and where m is the ultrasonic receiver index. The entries for this pre computed lookup table D r m can be characterized by 0.001 13.54 512 15 

for all r and for m 0 1 . . . M 1. In equation 15 b center frequency of bin k and is the signal path difference between a microphone m and a reference microphone in inches for a source location as indexed by r.

A second pre computed modulo cosine table cos table i is also produced and is defined as cos table cos 256 where 0 . . . 512 16 

Using these tables D r m and cos table i a value of cos for a candidate location r of the transducer and frequency bin k can be found using cos cos table 01 int 17 

Thus the control unit preferably uses these two tables D r m and cos table i to compute a solution for cos of equation 14 . In the present example the D r m table has 8640 4 or 34 560 locations and the cos table i table has 512 locations. To calculate sin a similar procedure to equation 17 is used to produce another table called sin table i that has 512 locations. Thus the tables have 35 584 entries in total which may be a practical size for a given implementation of the camera tracking system.

The resulting values for cos and sin determined by the lookup tables are then used to estimate the phasor term ein equation 12 to calculate a candidate position G k for a given frequency bin k. Then the value of the candidate position G k is used in the location weighting function W x y z equation 10 to calculating the location weight for a candidate position. Eventually the position x y z that yields the maximum value of the location weighting function W x y z for equation 10 is declared as an estimated position of the transducer . Ultimately this estimated position of the transducer can be used for tracking the source with the camera of the camera unit .

As noted previously at Block of to reduce computation a first search is made to determine beam energy at a first plurality of candidate locations using the equations and techniques discussed above. Preferably this first search is coarse to reduce computational costs so that a coarse estimate of an at least approximate location of the transducer can be determined at Block . The first coarse search is then followed by a more refined second search focused about the coarse estimate in Block to find a refined location with the greatest normalized beam energy using the equations and techniques discussed above. The searches are performed for both the horizontal arrangement of microphone receivers and the vertical arrangement of receivers to determine the location of the transducer relative to the pan and tilt angles of the camera unit respectively. The camera of the camera unit can then be operated to direct i.e. pan tilt and zoom at the determined location.

Turning to some additional and alternative embodiments of camera tracking systems of the present disclosure will be discussed. In general the embodiments of the camera tracking system discussed previously have described the camera unit such as unit of as having four microphone receivers . The tracking range from the receivers may be determined by how close together they are on the camera unit . Therefore one embodiment of the camera unit can have an increased size so that the microphone receivers can be space farther apart. In other embodiments more than four microphone receivers for example 8 or more can be used so that the receivers may be able cover greater areas such as areas of about 75 75 ft. In addition to using the ultrasound to track with the camera embodiments of the ultrasound camera tracking system can also use voice tracking techniques such as disclosed in U.S. Pat. No. 6 980 485 which is incorporated herein by reference.

Furthermore other embodiments of the disclosed camera tracking system can use an ultrasonic receiver system having a plurality of remote receivers positioned at locations farther from one another in a larger venue. For example shows one embodiment of a camera tracking system A having an ultrasonic receiver system in conjunction with the camera unit control unit and emitter unit . The ultrasonic receiver system has a three or more receiver units positioned around a room as opposed to having a small array of microphones on the control unit . The receiver units can be at fixed calculated distances from one another and can use wireless or wired communications with the control unit .

In one embodiment Radio Frequency RF signals from one or more RF device connected to the emitter unit can be synced with the ultrasound from the transducers so the receiver units can determine the distance of the emitter from them. Synchronized use of RF signals and ultrasound with multiple receiver units positioned around a room may lead to a more accurate position calculation of the emitter . For example the RF signal synced with the ultrasound signal can improve accuracy of range detection of the transducers thereby improving the camera unit s automatic zoom.

In one embodiment an RF wireless microphone can be intergrated into the emitter unit and can transmit RF signals used not only for voice in a videoconference or presentation but also for tracking and range detection. shows an emitter unit A having one or more transducers an RF transmitter and an integrated microphone which can be a lapel microphone. The RF signals can be used to transmit a presenter s voice and also can be used for range detection of the emitter unit A. Having the integrate lapel microphone also allows for a number of other alternatives. For example the system A of can direct the camera of the camera unit based on voice mic gating techniques in combination with ultrasound from the transducers that are enabled when the integrated lapel microphone detects the presenter s voice.

As shown in the presenter can have transducers on the front and back so the camera tracking system A can track the presenter in situations where the presenter turns. In an alternative also shown in the presenter can have the transducers on each shoulder so the camera tracking system A can track the presenter in situations where the presenter turns.

In previously discussed embodiments the disclosed camera tracking systems have been described with reference to tracking one person wearing an ultrasonic emitter unit. In other embodiments of the disclosed system multiple participants may be wearing emitter units and the determination of which one of the participants is tracked can be controlled using various techniques. For example illustrate a camera tracking system B for use with multiple emitter units A B. As before the system B has the camera unit the ultrasound receivers and the control unit . The multiple emitter units A B each include at least one ultrasound transducer . The emitter unit A B is activated either automatically or manually to emit ultrasound so that the camera unit will track the presenter with the activated transducers .

In one embodiment the emitter unit A B can be activated when a presenter speaks. For example the emitter unit A of may be activated when the integrated microphone picks up the presenter speaking. In another embodiment an emitter unit B shown in may have a button on a tag or the like that the presenter can press to activate the unit B and have the transducers emit ultrasound.

Returning to more than one of the emitter units A B may be actively emitting at the same time. For example the emitter units A B may be activated to emit ultrasound when the participant is speaking as detected by a lapel microphone. When two or more participants are speaking at the same time the control unit in one embodiment can control the camera unit to frame both of the presenters having active emitter units A B.

In an alternative embodiment the emitter units A B may be able to communicate with each other or with the control unit using RF or IR signals so that only one emitter unit A or B is emitting ultrasound at one time. In one example the actuated emitter unit A may send an RF signal to the other emitter unit B which may then stop emitting ultrasound.

In another example the system B may include an RF unit coupled to the control unit . When the presenter actuates his emitter unit A an RF signal may be transmitted from an RF transmitter not shown on the emitter unit A to the RF unit so that the control unit knows that this particular presenter will now be tracked. The control unit can then relay an RF signal from the RF unit to the other emitter unit B to stop it from emitting ultrasound. In this way only one emitter unit A will produce ultrasound at one time and the control unit need not try to differentiate to ultrasound from two or more emitter units . Instead of RF signals IR signals or others could also be used to communicate.

In yet another embodiment the control unit may be able to differentiate multiple sources of ultrasound from the emitter units A B depending on the characteristics of the ultrasound emitted. For example each emitter unit may emit ultrasound in only a distinct frequency range from the others so that the units can be isolated from one another. Alternatively each emitter unit may emit ultrasound at distinct time intervals from the others so that the units can be isolated from one another. When multiple emitters A B operate simultaneously the control unit may need to receive an RF signal identifying which emitter unit is activated to be tracked even though both of the emitter units A B may continue emitting ultrasound.

In yet another embodiment multiple independent tracking systems B may be used in the same environment with one intended to track one presenter and another intended to track another presenters. Each of the independent systems B can have different seeds using Phase Shift Keying PSK Frequency Shift Keying FSK to distinguish the ultrasound associated with them.

The foregoing description of preferred and other embodiments is not intended to limit or restrict the scope or applicability of the inventive concepts conceived of by the Applicants. Reference to terms such as vertical horizontal right left etc. are provided for the purposes of indicating relative direction in one orientation and can refer to relative directions in other orientations as well. It will be appreciated that modification can be made to the embodiments disclosed herein and that additional embodiments can be implemented based on the teachings of the present disclosure. In addition to tracking a presenter with a camera in a videoconference for example the camera tracking system and associated methods of the present disclosure can be used in other implementations such controlling spotlights for stage performances controlling cameras for other environments etc. In exchange for disclosing the inventive concepts contained herein the Applicants desire all patent rights afforded by the appended claims. Therefore it is intended that the appended claims include all modifications and alterations to the full extent that they come within the scope of the following claims or the equivalents thereof.

