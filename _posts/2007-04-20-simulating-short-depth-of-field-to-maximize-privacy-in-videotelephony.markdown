---

title: Simulating short depth of field to maximize privacy in videotelephony
abstract: An arrangement for simulating a short depth of field in a captured videophone image is provided in which the background portion of the image is digitally segregated and blurred to render it indistinct. Thus, the displayed video of a user in the foreground is kept in focus while the background appears to be out of focus. Image tracking or fixed templates are used to segregate an area of interest that is kept in focus from the remaining captured video image. Image processing techniques are applied to groups of pixels in the remaining portion to blur that portion of the captured video image. Such techniques include the application of a filter that are alternatively selected from convolution filters in the spatial domain (e.g., mean, median, or Gaussian filters), or frequency filters in the frequency domain (e.g., low-pass or Gaussian filters). User-selectable control is optionally implemented for controlling the type of foreground/background segregation technique utilized (i.e., dynamic face-tracking or fixed template shape), degree of blurring applied to the background, and on/off control of the background blurring.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07911513&OS=07911513&RS=07911513
owner: General Instrument Corporation
number: 07911513
owner_city: Horsham
owner_country: US
publication_date: 20070420
---
Current videophones use cameras having a long depth of field which results in the subject matter in a scene captured by the camera from foreground to background being in focus. This compares to video images captured by cameras having a shorter depth of field where subject matter in the foreground appears in focus while subject matter in the background of the scene appears out of focus.

Long depth of field in videophones generally results from a small digital imaging sensor size relative to the lens aperture in combination with a fixed focal length and shutter speed. These particular design parameters are selected in order to provide good videophone image quality while maintaining low component costs which is important for videophones sold into the highly competitive consumer electronics market.

Consumer market videophones provide excellent performance overall and the long depth of field provided is normally acceptable in many settings. Not only does it provide a perception that the videophone image is sharp and clear overall but a videophone can be used in a variety of settings without the user worrying that some portions of a captured scene be out of focus. For example a group of people on one end of a videophone call can have some participants positioned close to the camera while others are farther away. Another user may wish to use the videophone to show something that needs to be kept at some distance from the camera.

However the videophone s long depth of field can present issues in some situations. Some users may find the details in the background of the received video image to be distracting. Others might be uncomfortable that their videophone captures too a clear view of themselves their home or surroundings and represents some degree of intrusion on their privacy. And even for those users who fully embrace the videophone s capabilities it is possible that details of a user s life may be unintendedly revealed during a videophone call. For example a person might not realize that a videophone call is taking place and walk through the background in a state of attire that is inappropriate for viewing by people outside the home.

One current solution to address privacy concerns includes placing controls on the videophone that let a user turn the videophone camera off while keeping the audio portion of the call intact. While effective in many situations it represents an all or none solution that not all users accept since the loss of the video function removes a primary feature provided by the videophone. In addition such user controls do not prevent the accidental capture of undesirable or inappropriate content by the videophone.

An arrangement for simulating a short depth of field in a captured videophone image is provided in which the background portion of the image is digitally segregated and blurred to render it indistinct. As a result the displayed video image of a videophone user in the foreground is kept in focus while the background appears to be out of focus.

In various illustrative examples image detection and tracking techniques are used to dynamically segregate a portion of interest such as a person s face or face and shoulder area that is kept in focus from the remaining video image. Image processing techniques are applied to groups of pixels in the remaining portion to blur that portion and render it indistinct. Such techniques include the application of one or more filters selected from convolution filters in the spatial domain e.g. mean median or Gaussian filters or frequency filters in the frequency domain e.g. low pass or Gaussian filters . Fixed templates are also alternatively utilizable to segregate the portions of the captured video which are respectively focused and blurred. The templates have various shapes including those that are substantially rectangular oval or arch shaped. For example application of the oval shaped template keeps the portion of the captured video image falling inside a fixed oval in focus and the remaining portion of the image falling outside the oval is then digitally blurred.

User selectable control is optionally provided to enable control of the type of foreground background segregation technique utilized i.e. dynamic object detection tracking or fixed template shape degree of blurring applied to the background and on off control of the background blurring.

The simulated short depth of field provided by present arrangement advantageously enables a high degree of privacy to be implemented while preserving the intrinsic value of videophone telephony by keeping the video component of the videophone call intact. The privacy feature is provided using economically implemented digital image processing techniques that do not require modifications or additions to the camera hardware which would add undesirable costs. In addition the blurred background portion of the video image appears natural to the viewer because short depth of field images are in common use in television movies and other media presentations. Thus privacy is enabled in a non intrusive manner that does not interfere with the videophone call or bring attention to the fact that privacy is being utilized.

Various compositional techniques are employed in traditional photography to emphasize the primary subject matter in a scene. One such technique is known as Bokeh which is Japanese term that translates into fuzzy or dizziness. Bokeh refers to the use of out of focus highlights or areas in a rendered image. Bokeh techniques may be used for a variety of functional artistic or aesthetic reasons in which an attribute known as depth of field is manipulated to provide the desire effect where the primary subject is kept in focus while the remaining portion of the rendered image is out of focus.

Depth of field in both still and video photography is determined by lens aperture film negative image sensor size in traditional digital imaging respectively and focal length. Traditional 35 mm film has a short depth of field because the negative size is large compared with the lens aperture. By comparison to minimize costs most videophones targeted at the consumer market use a very small digital image sensor along with an optics package that includes a fixed focal length and shutter speed. Thus traditional techniques used to shorten depth of field by adjusting the aperture number i.e. f stop down below the lens s maximum aperture and reducing shutter speed to compensate for exposure are not generally applicable to videophone cameras.

Depth of field is the range of distance around the focal plane which is acceptably sharp. The depth of field varies depending on camera type aperture and focusing distance although the rendered image size and viewing distance can influence the perception of it. The depth of field does not abruptly change from sharp to unsharp but instead occurs as a gradual transition. In fact everything immediately in front of or in back of the focusing distance begins to lose sharpness even if this is not perceived by the viewer or by the resolution of the camera.

Because there is no critical point of transition a term called the circle of confusion is used to define how much a particular point needs to be blurred in order to be perceived as being unsharp. The circle of confusion is an optical spot caused by a cone of light from a lens not coming to a perfect focus when imaging a point source. Objects with a small circle of confusion show a clear and clean dot and are in focus. Objects with a large circle of confusion show a dot with blurry edges and are out of focus.

Accordingly the present arrangement provides a person s face or other area of interest in the foreground of the rendered videophone image with a small circle of confusion. The remaining portion of the image is rendered with a large circle of confusion. Further discussion of Bokeh techniques circle of confusion and sample images are available in H. Merklinger A Technical View of Bokeh May June 1997 .

Turning to there is shown an illustrative arrangement in which two videophone users are engaged in a video telephony session. User is using videophone in home . Videophone is coupled over a network to videophone used by user in home . Videophones generally provide better image quality with both higher frame rates and resolution when calls are carried over broadband networks although some videophones are configured to work over regular public switched telephone networks PSTNs . Broadband networks services are commonly provided from cable DSL Digital Subscriber Line and satellite service providers. Videophones are normally used in pairs where each party on the call uses a videophone.

Camera is commonly implemented using a CCD charge coupled device image sensor that captures images formed from a multiplicity of pixels i.e. discrete picture elements of the videophone user and surrounding area. The images from camera are subjected to digital signal processing in videophone to generate a digital video image output stream that is transmitted to the videophone on the other end of the videophone call. In this illustrative example the digital video image output stream is a compressed video stream compliant with MPEG 4 video standard defined by the Moving Picture Experts Group with the International Organization for Standardization ISO . In alternative embodiments other formats and or video compression schemes are usable including one selected from MPEG 1 MPEG 2 MPEG 7 MPEG 21 VC 1 also known as Society of Motion Picture and Television Engineers SMPTE 421M DV Digital Video DivX created by DivX Inc. formerly known as DivXNetworks Inc. International Telecommunications Union ITU H.261 ITU H.263 ITU H.264 WMV Windows Media Video RealMedia RealVideo Apple QuickTime ASF Advanced Streaming Format also known as Advanced System Format AVI Audio Video Interface 3GPP 3Generation Partnership Project 3GPP2 3Generation Partnership Project 2 JPEG Joint Photographic Experts Group or Motion JPEG.

Display component includes a screen that comprises a receiving picture area and a sending picture area . The receiving picture area of screen is arranged to display the video image of the user captured by a camera in videophone shown in . The sending picture area displays a relatively smaller image of the user captured by the camera . Sending picture area thus enables user to see the picture of himself that is being sent and seen by the other user . Such feedback is important to enable user to place himself in field of view of camera with the desired positioning and framing within the captured video image.

Mounting arm is arranged to position the display component and camera at a distance above the base to provide comfortable viewing of the displayed video image and position the camera with a good field of view of the videophone user. Disposed in mounting arm are videophone operating controls which are provided for the user to place videophone calls set user preferences adjust videophone settings and the like.

Referring again to videophone user is positioned in the foreground of a scene captured by the camera disposed in videophone . The foreground is indicated by reference numeral . Similarly as shown a houseplant is in the middle ground of the scene and a family member is in the background .

In comparison to the conventional long depth of field video image shown in shows an illustrative screen shot of a video image of having a simulated short depth of field as provided by the present arrangement. The video image shown in screen shot is of the same captured scene as rendered onto screen by the videophone . Here only the image of the user in the foreground is kept in focus while the houseplant and family member are blurred and rendered indistinct as indicated by the dot patterns in .

Object detection and in particular face detection is an important element of various computer vision areas such as image retrieval shot detection video surveillance etc. The goal is to find an object of a pre defined class in a video image. A variety of conventional object detection in video images techniques are usable depending on the requirements of a specific application. Such techniques include feature based approaches which locate face geometry features by extracting for example certain image features such as edges color regions textures contours video motion cues etc. and then using some heuristics to find configurations and or combinations of those features specific to the object of interest.

Other object detection techniques use image based approaches in which the location of objects such as faces is essentially treated as a pattern recognition problem. The basic approach in recognizing face patterns is via a training procedure which classifies examples into face and non face prototype classes. Comparison between these classes and a 2D intensity array hence the name image based extracted from an input image allows the decision of face existence to be made. Image based approaches include linear subspace methods neural networks and statistical approaches.

An overview of these techniques and a discussion of others may be found in E. Hjelmas and B. K. Low Face Detection A Survey 83 236 274 2001 . In addition a variety of open source code sources are available to implement appropriate face detection algorithms including the OpenCV computer vision facility from Intel Corporation provides both low level and high level APIs application programming interfaces for face detection using a statistical model. This statistical model or classifier takes multiple instances of the object class of interest or positive samples and multiple negative samples i.e. images that do not contain objects of interest. Positive and negative samples together make a training set. During training different features are extracted from the training samples and distinctive features that can be used to classify the object are selected. This information is compressed into the statistical model parameters. If the trained classifier does not detect an object misses the object or mistakenly detects the absent object i.e. gives a false alarm it is easy to make an adjustment by adding the corresponding positive or negative samples to the training set. More information on Intel OpenCV face detection may be found in G. Bradski A. Kaehler and V. Pisarevsky Learning Based Computer Vision with Intel s Open Source Computer Vision Library Vol. 9 Issue 2 2005 .

As shown template in has a substantially rectangular target portion that is disposed in an area that fills approximately the central two thirds of the screen. Target portion is positioned to allow the remaining portion to fill the top and sides of the screen. This template makes use of the observation that most videophone users position themselves to fill the central portion of the videophone camera s field of view. Accordingly the areas of potential privacy concern will tend to be at the tops and sides of the captured image. As noted above in optional arrangements the relative size between the target portion and remaining portion may be configured to be user adjustable as indicated by the dashed rectangle in .

Once a captured video image is segregated into a portion of interest and a remaining portion digital image processing is performed to increase the circle of confusion for groups of pixels in the remaining portion to thereby blur it and render it indistinct. In this illustrative example the digital image processing comprises filtering in either the spatial domain or frequency domain.

The spatial domain is normal image space in which an image is represented by intensities at given points in space. The spatial domain is a common representation for image data. A convolution operator is applied to blur the pixels in the remaining portion. Convolution is a simple mathematical operation which is fundamental to many common image processing operations. Convolution provides a way of multiplying together two arrays of numbers generally of different sizes but of the same dimensionality to produce a third array of numbers of the same dimensionality. This can be used in image processing to implement operators whose output pixel values are simple linear combinations of certain input pixel values.

In an image processing context one of the input arrays is typically a set of intensity values i.e. gray level for one of the color components in the video image for example using the RGB red green blue color model. The second array is usually much smaller and is also two dimensional although it may be just a single pixel thick and is known as the kernel. shows an example image and kernel used to illustrate convolution.

The convolution is performed by sliding the kernel over the image generally starting at the top left corner so as to move the kernel through all the positions where the kernel fits entirely within the boundaries of the image. Note that implementations differ in what they do at the edges of images as explained below. Each kernel position corresponds to a single output pixel the value of which is calculated by multiplying together the kernel value and the underlying image pixel value for each of the cells in the kernel and then adding all these numbers together to produce the output O. Thus in the example shown in the value of the bottom right pixel in the output image will be given by 

If the image I has M rows and N columns and the kernel has m rows and n columns then the size of the output image will have M m 1 rows and N n 1 columns. Mathematically the convolution is written as 

In one illustrative example the convolution filter applied is called a mean filter where each pixel in the image is replaced by an average value of its neighbors including itself. Mean filters are also commonly referred to as box smoothing or averaging filters. The kernel used for the mean filter represents the size and shape of the neighborhood to be sampled when calculating the mean. Often a 3 3 square kernel as indicated by reference numeral in although larger 5 5 7 7 etc. kernels may also be used to create more blurring. The kernel may also be applied more than once.

A median filter is alternatively utilized in which the average value used in the mean filter is replaced by the median value of neighboring pixels.

In another illustrative example a Gaussian filter is applied to blur the remaining portions other than the portion of interest in the image to be rendered in focus. This filter uses a kernel having a shape that represents a Gaussian i.e. bell shaped curve as represented by 

The effect of Gaussian smoothing is to blur an image in a similar fashion to the mean filter described above. The degree of smoothing is determined by the standard deviation of the Gaussian. Larger standard deviation Gaussians require larger convolution kernels in order to be accurately represented.

The Gaussian outputs a weighted average of each pixel s neighborhood with the average weighted more towards the value of the central pixels. This is in contrast to the mean filter s uniformly weighted average. Because of this a Gaussian filter generally provides gentler smoothing and preserves edges better than a similarly sized mean filter.

The frequency domain is the domain in which a video image is represented by a sum of periodic signals with varying frequency. The applied filter function is shaped so as to attenuate some frequencies and enhance others. Generally since the multiplication in the Fourier space is identical to convolution in the spatial domain all frequency filters can also be implemented in the spatial domain. In addition if there exists a simple kernel for the desired filter effect it is computationally less expensive to perform the filtering in the spatial domain. Frequency filtering is more appropriate if no straightforward kernel can be found in the spatial domain and may also be more efficient.

To apply a filter in the frequency domain groups of pixels in the remaining portion other than the area of interest in the image are Fourier transformed from the spatial domain to the frequency domain where F k l is the input image in the Fourier domain H k l the filter function and G k l is the filtered image. To obtain the resulting image in the spatial domain G k l has to be re transformed using the inverse Fourier Transform.

The form of the filter function determines the effects of the operator. In the present arrangement a low pass filter is used to attenuate high frequencies and retain low frequencies unchanged. The result in the spatial domain is equivalent to that obtained by application of the mean filter in the spatial domain as the blocked high frequencies correspond to sharp intensity changes i.e. to the fine scale details in the spatial domain image.

The most simple lowpass filter is the ideal lowpass. It suppresses all frequencies higher than the cutoff frequency Dand leaves the smaller frequencies unchanged.

In applications of the present arrangement the application of a Gaussian filter in the frequency domain will produce more desirable results than the ideal lowpass filter. A commonly used discrete approximation to the Gaussian is known as the Butterworth filter. Applying this filter in the frequency domain shows a similar result to the Gaussian smoothing in the spatial domain.

Segregation logic is arranged to segregate the video image from the camera into a target portion for which focus is maintained and remaining portion for which blurring is imposed to thereby render that portion indistinct . The segregation is performed using object detection described in the text accompanying or alternatively using one of the templates described in the text accompanying .

Blurring logic is arranged to blur the remaining portion of the captured video image to increase the circle of confusion of pixels therein to thereby render the subject matter indistinct. Such blurring is accomplished using one or more of the digital filtering techniques described in the text accompanying . Blurring logic is optionally configured to adjust the degree of blurring responsively to input from a user. Blurring logic is alternatively arranged to replace the remaining portion of the captured video image with a predefined image e.g. wallpaper as described above.

Blending logic is arranged to generate a composite video image in which the target portion that is unblurred is combined with the blurred remaining portion. In some applications blending logic and blurring logic are configured to enable multiple blurring levels as shown in and described in the accompanying text.

The user interface is arranged to provide a user of the videophone with user selectable control over the present privacy features. For example the user may selectively enable and or disable the privacy feature so that the background portion of the captured image is rendered indistinct or kept in focus. The degree to which blurring is implemented whether object detection tracking or fixed templates are utilized and template shape may also be user selectable in some applications of the present arrangement.

The frame buffer is utilized in the videophone architecture to temporarily store video images during processing. The output interface reads video images from the frame buffer for real time transmission as a video output stream over the network . In most applications the output stream is formatted in accordance with MPEG 4. Alternatively MPEG 2 

At block the captured video image is spatially segregated into a target portion for which focus is maintained and a remaining portion for which blurring is applied using one of the techniques described in the text accompanying . Typically the video image is buffered e.g. in frame buffer in during the image processing steps of segregating blurring and compositing.

At block the remaining portion of the captured video image is blurred to increase the circle of confusion of pixels therein to thereby render the subject matter indistinct using one or more of the digital filtering techniques described in the text accompanying . The blurred remaining portion is combined with the unblurred target portion to create a composite video image as indicated in block which is then refreshed in the frame buffer at block .

Block shows an optional step as indicated by the dashed rectangle in in which the composite video image is displayed locally on the videophone s display screen. This optional step is shown in the screen shot of and is performed to enable the videophone user i.e. videophone user using videophone in to receive positive feedback that the privacy feature is enabled. That is the user can see him or herself in the small image at the bottom of display screen . Image includes the rendered composite image. In applications where privacy is arranged to be user selectively enabled and disabled image would include a normal video image i.e. not processed to implement privacy that would include the typical long depth of field when the privacy feature is disabled.

Returning again to block shows that the composite video image is transmitted to the videophone at the far end of the call. Typically the composite video image is sent as part of a video stream that is compliant with MPEG 4. Illustrative method ends at block .

Although a discrete and dedicated videophone arrangement has been provided in the description above it is noted that the feature and functions described are alternatively implementable using general purpose personal computers PCs . In this scenario webcam and microphone hardware are used to supplement the processing capabilities and network access provided by the PC. In addition the videophone architecture shown in is typically implemented in software to provide a soft videophone that runs as an application on the PC.

In another alternative illustrative embodiment an arbitrary or predetermined image effect or pattern may be used to replace the remaining portion of a captured video image i.e. the portion of the captured video image other than the target portion that is kept in focus . Instead of blurring pixels in the remaining portion by increasing their circle of confusion to thereby render the remaining portion indistinct as described above all or part of the remaining portion may be replaced for example with a featureless image. The featureless image may be arranged with an arbitrary or user selectable color for example that would make the videophone user appear to be sitting in front of a plain wall. In other examples an arbitrary or user selectable image is selected such as a photograph or illustration. For example a garden photograph may be selected to provide background scenery for the videophone user.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

