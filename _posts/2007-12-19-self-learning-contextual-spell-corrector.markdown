---

title: Self learning contextual spell corrector
abstract: A group of keywords are received, wherein each keyword includes one or more words. A word list is formed from the group of keywords, where the word list includes a list of each word in the group of keywords. A misspelled keyword is corrected using analysis of the words in the word list. The corrected keyword is output.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08176419&OS=08176419&RS=08176419
owner: Microsoft Corporation
number: 08176419
owner_city: Redmond
owner_country: US
publication_date: 20071219
---
Spell correction is a technique that changes the misspelling of a word or a phrase to the correct one. It can be applied to many scenarios such as document editing search query suggestion bidding keyword correction etc. In one scenario this technique serves as an assistant that helps a user to avoid typos. User interaction is usually needed to select an appropriate word from a list of candidates generated by a spell correction algorithm. In this scenario spell correction precision is not strict. However in other scenarios the spell correction is performed automatically on a batch of words no human interaction is involved. Hence high precision is needed in order to ensure trustable results. In one example automatic spell correction is used to correct the bidding keywords submitted by advertisers.

Unfortunately existing spell correction technology fails to provide high precision for automated spell correction. Moreover current spell correction solutions usually require training data and a dictionary for each language. When the spell corrector is used with a new language the model trained from past data and an old dictionary may not be applicable. New training data and dictionaries for each language has to be applied which adds substantial development time and cost of current spell correctors.

The following presents a simplified summary of the disclosure in order to provide a basic understanding to the reader. This summary is not an extensive overview of the disclosure and it does not identify key critical elements of the invention or delineate the scope of the invention. Its sole purpose is to present some concepts disclosed herein in a simplified form as a prelude to the more detailed description that is presented later.

Embodiments of the invention are directed to a self learning contextual spell corrector. The spell corrector receives a group of keywords and forms a word list containing the words from the keywords. The spell corrector may find various misspelling types by analyzing the words themselves in the word list external resources such as training data or dictionaries are not utilized. Example misspelling types discoverable and correctable by the spell corrector include word connection a missing space between words word misspelling e.g. letters reversed extra letter inserted letter missing etc. and word separation space erroneously inserted in a word .

Many of the attendant features will be more readily appreciated as the same become better understood by reference to the following detailed description considered in connection with the accompanying drawings.

The detailed description provided below in connection with the appended drawings is intended as a description of the present examples and is not intended to represent the only forms in which the present examples may be constructed or utilized. The description sets forth the functions of the examples and the sequence of steps for constructing and operating the examples. However the same or equivalent functions and sequences may be accomplished by different examples.

Online advertisement ad systems such as Microsoft adCenter deliver relevant ads to users when they are conducting Internet searches using a search engine such as Microsoft Live. An online advertisement system may include a relevance verification system that checks the relevance between bidding keywords and advertisements and matches ads that are relevant to submitted keywords. A single keyword may include one or more words. When a searcher enters a search string into the search engine the search results may include results i.e. ads that have been paid for by keyword bidders e.g. advertisers .

Misspelling is one of the common practices of keyword expansion used by advertisers to develop a comprehensive Search Engine Marketing SEM campaign. Bidding keywords are first corrected before doing relevance verification to avoid false rejection. Since there are millions of keywords submitted it is not feasible to review the bid keywords manually and a backend batch algorithm is desired to perform the spell correction. The common spelling checker used in search query correction has a relatively high miss and error rate which is insufficient for an automated keyword bidding scenario. Such spell checkers also usually rely on training data for each language which brings more cost for data preparation and algorithm tuning.

In a typical keyword bidding scenario advertisers group keywords together in an order . For example an order may include 5 bidding keywords air force loans ai force loans ai rforce loads ai4 force loans and ai5 force loans . It will be appreciated that the phrase air force loans may be referred to as a single keyword having three separate words air force and loans .

Embodiments herein utilize the context and correlations within the order to perform spell correction. Moreover since knowledge within the group of keywords is utilized no training data and dictionary specific for each language is required. Embodiments of the spell corrector herein may be referred to as a self learning spelling corrector. Self learning means the knowledge is gained from the group of words i.e. the order itself and afterwards such knowledge is applied back to correct the same group of words.

Embodiments herein take the order as a whole identify and analyze the relationship between these keywords and give the appropriate correction. In the example order above embodiments herein give the appropriate spell correction air force loans for all misspelled keywords in the order. By utilizing the knowledge within the keyword group embodiments herein have improved performance over current solutions. Embodiments herein take focused and reliable context information inside the order to make the correction which is more accurate than taking general word correlation with external sources.

Embodiments of the spell corrector described herein may be used in a variety of applications. Besides online ad systems embodiments herein may be applied to search engines to correct misspelled search queries. A search engine query log includes data that may be fed into the spell corrector described herein to find misspelled words.

A keyword bidder such as an advertiser submits order to the online ad system . Keyword bidder may use automated tools to generate common misspellings for a particular keyword and submit the keyword and its misspellings together in order . One or more orders may be submitted in an automated fashion.

At system order is received by relevance verification system which includes a relevance verifier RV and a spell corrector . The group of keywords in the order is provided to spell corrector . Spell corrector analyzes the keywords in order and provides corrected keywords to relevance verifier . In one embodiment corrected keywords include a mapping of the submitted keywords to their corrections if a correction is applicable .

Corrected keywords are used to calculate the relevance between keywords and ads. The submitted order contains not only the keywords but also the ads keyword bidder would like to bid on. Usually the order is a cross join of keywords and ads to form the bidding relationship for RV to check. RV takes one keyword and one ad and decides whether the keyword is relevant to the ad.

Relevance verification system runs in the backend and acts as a door keeper. Once the submitted associations keyword and ad are approved by system a delivery engine matches a user query with the submitted keywords on the fly.

Relevance verifier checks the relevance of a corrected keyword with an advertisement in the same order. If RV determines they are relevant to each other the approved associations of keywords and ads are made available to delivery engine .

When a search engine user submits a query to a search engine query is forwarded to delivery engine . User query is first matched to the bidding keywords that are relevant to query . After that the ads that are bid on the keywords are retrieved and ranked by delivery engine before being displayed to user . Relevant ads are sent to search engine to be displayed to search engine user along with the search engine results. In some instances ads may also be referred to as paid search results.

It will be noted that the original keywords that are submitted by keyword bidders are matched with the user query instead of matched to the corrected keywords. Keyword bidders bid on a misspelled keyword so that the ads are shown when user types the misspelled query. However relevance verification system relies on spell corrector to first correct the keywords so that the association between keywords and ads can be made.

Turning to an embodiment of spell corrector is shown. Spell corrector receives an order and corrects the misspelled keywords in order . The corrected keywords are then output. Spell corrector may utilize information in order such as word frequency misspelling variations keyword relationships and word context to build keyword corrections. Various misspelling types are used together based on information inside order . In one embodiment spell corrector and or its components discussed below may be implemented by computer readable instructions executable on a computing device.

A word may contain several types of misspellings such as word misspelling word connection and word separation.

In word misspelling a keyword includes one or more words each of which may be misspelled. Below are example word misspellings using the word investment 

In word connection misspellings a space is missing between two words. For example airforce instead of the correct air force . As used herein a word possibly having a connection error may be referred to as a connection word .

In work separation misspellings one or more spaces have been incorrectly inserted into a word. For example pay day instead of the correct payday .

Embodiments of spell corrector utilize several observations of keywords within an order. It will be appreciated that these observations pertain to knowledge that may be gained by analyzing the order itself without the necessity of information external to the order. For example advertisers often bid correct keywords and misspelled keywords together in a single order. In most cases the frequency of the correct keyword or word in a keyword is much larger than any misspelled keyword word. In the previous example air may appear 100 times while ai5 may appear one time in the order. The misspelled variations of a correctly spelled keyword word have low frequency within the order.

Also the correct part of a keyword can be matched in other keywords which are usually very close in the submitted order. Two keywords are considered close in the order when they are near in position or they are close in sequence in the order. Keyword bidders usually group the related keywords together within an order. For example take four keywords 1 Micsoft 2 Microsoft 3 Office and 4 Offce. Related keywords are usually placed together such as keywords 1 with 2 and 3 with 4 instead of randomly placing them in the order. Hence embodiments herein can take the distance between two keywords in the order into consideration.

In another observation there is usually a small edit distance between a misspelled keyword or word and the correct keyword word. Edit distance may include classic edit distance or spatial edit distance. Classic edit distance is the number of operations required to transform one string of characters into another string of characters. Unlike the classic edit distance spatial edit distance also takes spatial distance of the two letters on the keyboard into consideration. For example ai4 is more likely to be corrected to air instead of aim since the character 4 is physically nearer to r on the keyboard than m . People are more likely to type a wrong letter which is nearer to the correct one on a keyboard. In the air example above the classic edit distance algorithm results in a 1 for both ai4 and aim but spatial edit distance can make a differentiation. In embodiments of computations discussed below classic edit distance may be used. However alternative embodiments may use spatial edit distance in place of classic edit distance in such cases a threshold associated with the computation may change as well.

Turning to a flowchart shows operations of spell corrector in accordance with an embodiment of the invention. However one skilled in the art having the benefit of this description will appreciate that operations of flowchart are not limited for use with spell corrector as shown in . In one embodiment at least a portion of flowchart may be implemented by computer readable instructions executable by one or more computing devices.

Starting with operation an order having keywords is received at spell corrector . For example in order includes keywords air force loans ai force loans ai rforce loans ai4 force loans ai5 force loans etc. In one embodiment the keyword bidder has intentionally included misspellings of air force loans so that misspelled search engine queries may be paired with ads relevant to air force loans. 

Next in operation any keywords that include phrases i.e. multiple words are broken into individual words. In a word breaker breaks keywords into individual words. For example keyword air force loans is broken into three words air force and loans . It will be appreciated that some orders may include keywords that are themselves single words and thus do not require breaking.

Next in operation the frequency of each word in the order is counted. In the broken keywords are sent to word frequency counter for counting. Usually the word frequency of the misspelled form is much smaller than that of the correct form. For example air will likely appear many more times in order than ai4 .

After operation the logic proceeds to operation where the individual words are formed into a word list. In one embodiment the word list is sorted by frequency decreasingly. In word list is formed by frequency counter and stored in word information store . In one embodiment word list is stored as a table where a table row includes a word and its frequency in order . The words are sorted decreasingly by frequency to aid in applying the correctors described below.

As shown in in one embodiment the words are first grouped by their classic edit distance. In another embodiment the words may be grouped by spatial edit distance. Within each group the words are sorted according to their frequency. Embodiments below consider whether the low frequency words may possibly be corrected to the high frequency words.

Proceeding to operation a word from word list is selected. As will be described below the logic iterates through each word in word list and applies the various correctors. In the discussions below the word under analysis is referred to as the given word. 

In one embodiment the first word selected is from the top of word list and thus is a word with a high frequency in order . The logic iterates down word list for each next word and thus the logic works from high frequency words to low frequency words.

In the embodiment of a corrector flow controller receives a word from word list . Corrector flow controller then applies word connection corrector word misspelling corrector and word separation corrector to the word as applicable. In applying the correctors corrector flow controller may utilize information from word information store . It will be appreciated that other types of correctors may be added to spell corrector and embodiments of spell corrector do not necessarily include all correctors and . It will also be appreciated that embodiments of the invention are not limited to the order that the correctors and are applied in the discussion below.

Also information from a dictionary may be used by correctors or . Dictionary stores words from the word list that have been already corrected or deemed correct by one of the correctors. For example spell corrector may determine air is a correct spelling and store air in dictionary . When air is encountered again in airforce during word separation analysis then word separation corrector can use the knowledge that air is a correct spelling from dictionary . In one embodiment a new dictionary is used for each order a dictionary is not used across orders.

In one embodiment dictionary may serve as learned knowledge from past orders. However since the context varies between orders the knowledge should be only taken as one factor of determining whether the word is correct or not. Sometimes even if the word itself is correct it is still possible that the word is a typo when it is used in a phrase.

Next in operation the logic determines if the given word is a connection of several words i.e. a word connection misspelling . If the given word is a word connection misspelling yes branch then the logic proceeds to operation to make the correction to the given word. In one embodiment corrector flow controller uses word connection corrector to find any connection errors and to make appropriate corrections to the word. This correction knowledge is retained by corrector flow controller to be applied to order in operation discussed below . In one embodiment the corrected word is added to dictionary .

In one embodiment of operation the logic determines whether the given word can be broken into several words that are in the word list. Moreover if a portion of the given word cannot be exactly matched to another word in the word list the word may still be considered a match if the edit distance e.g. classic or spatial is small. This handles the case in which word misspelling and word connection is mixed.

A connection confidence score may be calculated to measure the possibility of a connection correction. If the connection confidence score is above a threshold then the logic applies a connection correction and breaks the connection word into its individual words. For example airforceloans may be corrected to air force loans. An embodiment of calculating the connection confidence score is discussed below.

In operation if the logic determines that there is not a word connection error no branch then the logic proceeds to operation to determine if misspelling correction should be applied. In one embodiment the logic determines if the word meets one or more misspelling criteria examples below . If the misspelling criteria are met then the logic determines if the given word can be corrected to another word in the word list and makes the correction operation . In one embodiment the corrected word is added to dictionary .

Word misspelling may be corrected by selecting the word in the word list that has the highest misspelling confidence score in the word list that exceeds a threshold. An embodiment of calculating a misspelling confidence score is discussed below. In one embodiment corrector flow controller uses word misspelling corrector to find word misspellings and make corrections.

If misspelling correction is not applied no branch then the logic proceeds to operation to determine if the given word has a word separation error. Word separation may be found by merging the given word with another word in the word list to create a candidate merged word. The logic then attempts to match the candidate merged word with another word in the word list. Word misspelling may also be considered when correcting for word separation errors. An embodiment of calculating a separation confidence score for word separation is discussed below. In one embodiment corrector flow controller uses word separation corrector for finding word separation errors and make corrections.

If a word separation error is found then the logic proceeds to operation to make the correction yes branch . In one embodiment the corrected word is added to dictionary . If no separation error is found no branch then the logic proceeds to operation . It will be appreciated that if the logic does not find a word connection a word misspelling or a word separation error then the given word is deemed spelled correctly. In one embodiment such a word deemed spelled correctly is not added to dictionary since the word never achieved a high confidence score by one of the correctors.

In operation the logic determines if there are more words in the word list to be analyzed. When more words remain yes branch then the logic returns to block to select the next word in the word list.

If there are no more words for analysis no branch then the logic proceeds to block to output the corrected keywords. Corrector flow controller takes keywords from word breaker and matches keywords to any spelling corrections. In one embodiment the corrected keywords are output as corrected keywords as shown in . Corrected keywords shows the received keyword from order and the corresponding corrected keyword. For example ai force loans corrects to air force loans because spell corrector determined that ai corrects to air and force and loans are correct in the received keyword. Corrected keywords may be provided to relevance verifier .

Turning to a flowchart shows operations of word connection corrector in accordance with an embodiment of the invention. In one embodiment word connection corrector determines whether the word can be separated into two or more words in the word list. Corrector finds all the possible matching word breakings in the word list using word information store . In the ideal case all the words inside the connection word should be found in the word list itself. However in some cases word misspelling and word connection is mixed. There may be some misspellings inside the connection word so a small edit distance e.g. classic or spatial is considered between parts of the connection word and words in the word list.

In one embodiment a connection confidence score is calculated to measure the possibility of a connection correction. A higher connection confidence score for a word indicates the higher possibility that the word actually includes two or more words from the word list. If the confidence score is above a threshold then the word is considered a connection word and is corrected to its individual words from the word list.

Starting in operation the word list is searched for similar sub words of the given word. A sub word is a portion of a word. For example air is a sub word of airforce .

In one embodiment a word from the word list is considered a sub word of the given word when a the classic edit distance between the sub word and the corresponding part of the connection word is not greater than a threshold e.g. 2 and b the ratio classic edit distance sub word length is less than or equal to a threshold e.g. 0.25 . Alternative embodiments may use spatial edit distance in place of classic edit distance and different thresholds for sub word determination.

After the logic finds sub words of the given word the logic computes a connection confidence score for each possible sub word operation . The logic then picks the sub word with the highest connection confidence score above a threshold operation . In one embodiment the connection confidence score threshold is 0.5. The given word may then be corrected by separating the given word into its sub words as found in the word list. If no sub word exceeds the threshold then the logic determines that the given word does not have a word connection misspelling type.

Turning to a flowchart shows operations of word misspelling corrector in accordance with an embodiment of the invention. In one embodiment word misspelling corrector determines whether the word is misspelled and should be corrected to another word in the word list. Given two words from the word list W i.e. correct spelling candidate word from word list and W i.e. possibly misspelled given word if Wis likely to be corrected to W Wshould meet the below misspelling criteria 

In the criteria above embodiments of the invention may use spatial edit distance in place of classic edit distance the thresholds when using spatial edit distance may change as well. When the above criteria are met for correcting the given word to a correct spelling candidate i.e. for correcting Wto W operation a misspelling confidence score of Wto Wis computed operation . Otherwise the misspelling correction is skipped operation . The higher the misspelling confidence score the more likely Wis actually misspelled and corrects to W. In one embodiment when the misspelling confidence score exceeds a threshold of 0.5 then Wis considered misspelled and corrects to W operation .

If Wis likely to be corrected to several words W W . . . W in the word list based on the criteria list above then the word Win the word list having the highest misspelling confidence score and is above the threshold is selected as the correct spelling for the given word W. If no misspelling confidence score exceeds the threshold then the logic determines that the given word does not have a word misspelling.

where Lenis the length of Wand ReliableWordLen is the minimum length of a word treated as reliable. In one embodiment ReliableWordLen is set to 8. ReliableWordLen means that if a word s length is larger than the edit distance by a certain amount than the word is more likely a misspelling. EDScore is differentiated from EDRate when EDRate is small and EDScore is smooth when EDRate is large. For example for EDRate 1 to 9 where ReliableWordLen is set to 8 EDScore is computed as 2 8 . . . 6 8 6 7 8 9. ReliableWordLen is a threshold that the EDRate is larger than EDScore by enough to make the increase in EDScore small and gradually approaches 1 as EDRate increases.

In one embodiment the calculation of spatial edit distance SpatialEditDistance differs from classic edit distance in at least the following aspects 

Turning to a flowchart shows operations of word separation corrector in accordance with an embodiment of the invention. In one embodiment word separation corrector determines whether the given word can be combined with another word in the word list to make a word in the word list. For example the given word pay may be combined with day from the word list to make payday which is also in the word list.

In one embodiment the given word is combined with the other words in the word list to create combination candidate words operation . Next a separation confidence score is computed for each combination candidate word operation . The higher the separation confidence score the more likely the word should be corrected to a combination of words in the word list. In one embodiment word misspelling may also be taken into account.

When the separation confidence score exceeds a threshold then the given word is considered a separation word and may be corrected to the combination candidate word i.e. merge the given word with the other word from the word list operation . If more than one combination candidate word is above the threshold then the combination candidate word with the highest separation confidence score is chosen. In one embodiment the separation confidence score threshold is 0.5. If no separation confidence score exceeds the threshold then the logic determines that the given word does not have a word separation error.

Embodiments of the invention provide a self learning contextual spell corrector. The spell corrector makes corrections based on analysis of a group of words e.g. an order . The analysis gains knowledge of the words based on the words themselves. Embodiments of the spell corrector do not rely on training data and are language independent.

Although not required embodiments of the invention are described in the general context of computer readable instructions being executed by one or more computing devices. Computer readable instructions may be distributed via computer readable media discussed below . Computer readable instructions may be implemented as program modules such as functions objects Application Programming Interfaces APIs data structures and the like that perform particular tasks or implement particular abstract data types. Typically the functionality of the computer readable instructions may be combined or distributed as desired in various environments.

In other embodiments device may include additional features and or functionality. For example device may also include additional storage e.g. removable and or non removable including but not limited to magnetic storage optical storage and the like. Such additional storage is illustrated in by storage . In one embodiment computer readable instructions to implement embodiments of the invention may be in storage such as instructions to implement spell corrector . Storage may also store other computer readable instructions to implement an operating system an application program and the like.

The term computer readable media as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory and storage are examples of computer storage media. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM Digital Versatile Disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .

Device may also include communication connection s that allow device to communicate with other devices. Communication connection s may include but is not limited to a modem a Network Interface Card NIC an integrated network interface a radio frequency transmitter receiver an infrared port a USB connection or other interfaces for connecting computing device to other computing devices. Communication connection s may include a wired connection or a wireless connection. Communication connection s may transmit and or receive communication media.

The term computer readable media may include communication media. Communication media typically embodies computer readable instructions or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic radio frequency infrared Near Field Communication NFC and other wireless media.

Device may include input device s such as keyboard mouse pen voice input device touch input device infrared cameras video input devices and or any other input device. Output device s such as one or more displays speakers printers and or any other output device may also be included in device . Input device s and output device s may be connected to device via a wired connection wireless connection or any combination thereof. In one embodiment an input device or an output device from another computing device may be used as input device s or output device s for computing device .

Components of computing device may be connected by various interconnects such as a bus. Such interconnects may include a Peripheral Component Interconnect PCI such as PCI Express a Universal Serial Bus USB firewire IEEE 1394 an optical bus structure and the like. In another embodiment components of computing device may be interconnected by a network. For example memory may be comprised of multiple physical memory units located in different physical locations interconnected by a network.

In the description and claims the term coupled and its derivatives may be used. Coupled may mean that two or more elements are in contact physically electrically magnetically optically etc. . Coupled may also mean two or more elements are not in contact with each other but still cooperate or interact with each other for example communicatively coupled .

Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example a computing device accessible via network may store computer readable instructions to implement one or more embodiments of the invention. Computing device may access computing device and download a part or all of the computer readable instructions for execution. Alternatively computing device may download pieces of the computer readable instructions as needed or some instructions may be executed at computing device and some at computing device . Those skilled in the art will also realize that all or a portion of the computer readable instructions may be carried out by a dedicated circuit such as a Digital Signal Processor DSP programmable logic array and the like.

Various operations of embodiments of the present invention are described herein. In one embodiment one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media which if executed by a computing device will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further it will be understood that not all operations are necessarily present in each embodiment of the invention.

The above description of embodiments of the invention including what is described in the Abstract is not intended to be exhaustive or to limit the embodiments to the precise forms disclosed. While specific embodiments and examples of the invention are described herein for illustrative purposes various equivalent modifications are possible as those skilled in the relevant art will recognize in light of the above detailed description. The terms used in the following claims should not be construed to limit the invention to the specific embodiments disclosed in the specification. Rather the following claims are to be construed in accordance with established doctrines of claim interpretation.

