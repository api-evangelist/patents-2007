---

title: Backlight dimming  and LCD amplitude boost
abstract: Embodiments of the present invention generally provide m Methods and apparatus for reducing power consumption of backlit displays are described. Power consumption is reduced by dimming backlighting by a first scale factor and boosting pixel values by a second scale factor to compensate for the dimming. The scale factors may be constant values. Alternately, one or both of the scale factors may be determined based on pixel values for one or more frames to be displayed and/or one or more frames that have been displayed. For example, scale factors may be calculated based on an average linear amplitude of one or more frames of pixel values or from a maximum pixel value of one or more frames of pixel values. A graphical processing system is described including an integrated circuit capable of transforming a pixel value from a gamma-compensated space to a linear space.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08059086&OS=08059086&RS=08059086
owner: NVIDIA Corporation
number: 08059086
owner_city: Santa Clara
owner_country: US
publication_date: 20071214
---
This application is a divisional of U.S. patent application Ser. No. 11 619 160 filed Jan. 2 2007 which is a divisional of U.S. patent application Ser. No. 10 316 521 filed Dec. 11 2002 issued as U.S. Pat. No. 7 176 878 on Feb. 13 2007.

One or more aspects of the present invention generally relate to backlit displays and more particularly to reducing power consumption of backlit displays by reducing an amount of backlighting.

Liquid crystal display LCD screens used in notebook computers are commonly backlit to make them easier to read. illustrates an exemplary backlit liquid crystal display LCD that includes a core of LCD material between sheets of glass and . A backlighting element produces light to illuminate LCD material . As illustrated by the arrows light produced by backlighting element is generally diffuse with components traveling in different directions. The light from backlighting element is typically passed through a polarizer that blocks light that is not aligned with an axis of polarization of polarizer . The light that is aligned with the axis of polarization is allowed to pass through the polarizer for passing through LCD material .

The LCD material has electro optic properties that cause the polarization of light which passes through the LCD material to twist. This twisting may be controlled by applying a voltage waveform to the LCD material for each pixel in an array of pixels. Typically an electronic circuit that controls the array of pixels operates by accepting a digital control value for each pixel in the array of pixels. The control circuit will apply a voltage waveform to the LCD material for a pixel based on the digital control value for the pixel. Generally the control circuit is configured so that smaller digital control values result in application of a voltage waveform which causes the LCD material to twist the light in such a way that more of the light it is blocked by the second polarizer causing the pixel to appear darker. Conversely larger digital control values result in application of a voltage waveform which causes the LCD material to twist the light in such a way that less of the light it is blocked by the second polarizer causing the pixel to appear brighter.

From a power consumption standpoint LCD backlighting may be far from efficient. For example while the backlighting element may be set to a bright level to illuminate the LCD material depending on the digital values of pixels to be displayed the LCD material may be in a twisting configuration which causes a substantial portion of the light passing through the LCD material to be blocked by the second polarizer . In particular cinematic lighting used in movies may result in a relatively dim screen overall resulting in an inefficient use of backlighting. Thus LCD backlighting may be particularly inefficient when viewing movies such as DVD movies on an LCD screen of a notebook computer. In fact power consumption of a backlit LCD may account for a large portion of overall power consumption of a notebook computer. The inefficiencies due to LCD backlighting may lead to reduced battery life which may be particularly problematic for example when viewing DVD movies on long airline flights.

Conventional approaches to reducing power consumption of a backlit LCD are typically limited to reducing an amount of backlighting i.e. dimming . For example a notebook computer may be configured to dim the backlighting in response to detecting a power supply has been unplugged from an AC power supply and that the notebook is being powered from a battery. However by dimming the backlighting without adjusting pixel values to compensate for dimming the backlighting the overall brightness of the LCD as perceived by a user may be undesirably reduced.

Accordingly a need exists for an improved method and apparatus for reducing power of backlit displays while maintaining an overall perceptible level of brightness of the display.

Aspects of the present invention generally provide methods and apparatus for reducing power of a backlit display by dimming the backlighting and boosting the amplitude of pixel data to be displayed on the display.

According to some aspects of the present invention the backlighting may be dimmed by a first scale factor and values of pixels to be displayed on the display may be boosted by a second scale factor inversely proportional to the first scale factor. The first and second scale factors may be constant values. Alternatively either one or both of the first and second scale factors may be determined based on the pixel values for one or more frames to be displayed on the display or that have already been displayed on the display. For example the first and second scale factors may be determined based maximum pixel values or an average linear amplitude of pixel values for one or more frames of pixels.

One or more other aspects of the present invention may include an integrated circuit for processing graphics. The integrated circuit may include a buffer for receiving a frame of pixels that have been gamma pre compensated and a circuit coupled with the buffer for transforming values of the pixels from gamma space to linear space. The integrated circuit may be configured to transform the values of pixels from gamma space to linear space by raising the values of the pixels to a power of GAMMA. The integrated circuit may also be configured to receive a value of GAMMA via an application programming interface API .

Aspects of the present invention generally provide methods and apparatus for reducing power consumption of backlit displays by reducing an amount i.e. dimming of backlighting of the display and adjusting values of pixels to pass more light to compensate for the dimming. The methods and apparatus may be used to reduce the power consumption of any type of backlit displays including backlit LCD displays used in a variety of products such as notebook computers portable DVD players personal digital assistants PDAs video cameras and digital cameras.

In general the pixel value scale factor SCALE may be inversely proportional to the backlighting scale factor SCALE 1 SCALE. For example if the backlighting scale factor is between 0 and 1 e.g. so an amount of backlighting is reduced the pixel value scale factor may be greater than one e.g. so a pixel value is boosted . However according to some aspects of the present invention pixel values may be decreased to pass more light. Accordingly a pixel value scale factor may also be less than one.

At step the backlighting is dimmed according to the backlighting scale factor. The backlighting may be dimmed relative to an original e.g. full scale amount according to the following equation BL BL SCALE where BLis a full scale value of backlighting The actual mechanism for dimming the backlighting may vary according to different backlighting implementations. For example a backlighting element may vary an amount of backlighting based on an analog signal. Therefore backlighting may be dimmed by reducing the analog signal e.g. from a full scale value . The amount of backlighting may be directly proportional to the analog signal or may have some non linearities. Non linearities may be accommodated for example via a lookup table prior to dimming the backlighting.

At step the values of pixels to be displayed on the display are boosted according to the pixel scale factor to compensate for the dimming. For example a single pixel value may be boosted according to the following equation PV PV SCALE where PVis the boosted pixel value and PVis the original unboosted pixel value. The effect of boosting pixel values is illustrated in which show a 2 dimensional view of pixel values vertical axis versus pixel position horizontal axis . For example the pixel positions may represent screen locations starting from an upper left of the screen and ending on a bottom right of the screen e.g. moving left to right top to bottom .

As illustrated the original pixel values of may be less than a maximum pixel value represented by a dashed line. represents the original pixel values of boosted by a pixel value scale factor greater than one. As illustrated the boosted pixel values may have a maximum value at or near the maximum pixel value. Because a pixel value is typically limited in size i.e. to a determined number of bits if the maximum pixel value is exceeded the pixel value may be truncated i.e. wrapped resulting in a darker pixel. For example for an 8 bit pixel value 0 255 a value of 256 may be result in a truncated value of 0. Accordingly as illustrated in a range of boosted pixel values may be clamped to a maximum value to avoid truncating the pixel value.

As used herein the term pixel value generally refers to a value that is indicative of a brightness of the pixel. Because pixel data may be represented in a variety of color formats such as RGB Red Green Blue and YCrCb luminance chrominance components pixel value formats may vary accordingly. Some color formats may include a separate component corresponding to luminance e.g. the Y component of YCrCb . For other formats a luminance value may be a weighted combination of components e.g. Red Green and Blue . Accordingly boosting pixel values may require boosting a single component e.g. Y for YCrCb format or may require boosting multiple components e.g. red green and blue for RGB format . Commonly a graphical processing system will process video signals in more than one format.

For example as illustrated in a graphical processing system may process an MPEG encoded digital video stream e.g. from a DVD in YUV format and a PC video signal in RGB format. Some or all of the elements of system may be separate components or may be combined into a single integrated circuit IC . For example elements may be combined in a single integrated circuit .

A decoder may receive an MPEG encoded video stream and decode the video stream into individual frames sent to a frame buffer . The DVD video stream may be displayed in an overlay window on top of a primary e.g. a standard PC desktop window. Accordingly individual frames of the video stream may be sent to an overlay buffer where they may be later combined with a primary frame from a primary buffer via a combiner .

Because the MPEG algorithm operates on images represented in YUV color space the system may also include a color space converter to convert a decoded image from YUV color space to RGB color space. Further video signals are commonly gamma pre compensated to account for non linearities exhibited in cathode ray tube CRT screens. Due to the non linearities the screen intensity is not linear with respect to a pixel value input and may be approximated by the following equation INTENSITY PV where k is a constant PV is a linear pixel value and gamma is typically between 1.7 and 3.0 depending on the monitor. To compensate for this non linearity pixel values are often pre compensated according to the following equation PV PV Accordingly the pixel values for the frames in the frame buffer may be gamma compensated.

However because digitally controlled LCDs do not typically exhibit the same non linear behavior associated with CRT monitors it may be desirable to de gamma compensate the pixel values before sending them to the display. Accordingly the graphics processing system may also include a de gamma module to transform gamma compensated pixel values back to linear space. The de gamma module may apply the following equation to pixel values of a frame from the overlay buffer PV PV . Subsequently a linear scale factor may be applied to boost the pixel value resulting in a desired linear increase in brightness.

Alternatively pixel values may be boosted prior to performing the de gamma function on the pixel values. In other words rather than apply a linear scale factor the scale factor would be gamma compensated SCALE SCALE Accordingly whereas the linear scale factor for the pixel values may be inversely proportional to backlighting scale factor the gamma compensated scale factor may be inversely proportional to the inverse gamma SCALE 1 SCALE . An additional step to convert from a linear scale factor to a gamma compensated scale factor may be used with some performance penalty.

The value of gamma used by the de gamma module may be adjustable. Further the de gamma function may be performed in hardware or software. To perform the de gamma function in hardware a value for gamma may be passed to the graphics processing system for example via an application program interface API . Alternatively a constant value of gamma may be used for the de gamma function. For example because a default value of 2.2 is often assumed for gamma pre compensation the de gamma module may use a gamma of 2.2. Further to simplify equations gamma may be approximated with a constant value of 2 e.g. hardware and software may have an easier time performing squares and square roots .

Other elements of system may also be implemented as hardware or software. For example a pixel boost module used to boost pixel values may be part of the combiner . The pixel boost module may boost pixel values during a scanout routine in which pixel values are sent to the display. Alternatively pixel values may be boosted in software. For example a software algorithm may boost pixel values of frames in the frame buffer .

System may include any suitable means to adjust an amount of backlighting. For example the system may include a pulse width modulated PWM output . The amount of backlighting may be adjusted by varying a duty cycle of the PWM output . The duty cycle of the PWM output may be varied for example via an API call. As illustrated a simple resistor and capacitor may be coupled with the PWM output to generate an analog signal suitable for a backlighting element. Alternatively system may generate an analog signal directly.

Dimming boosting operations begin at step . At step the backlight is dimmed by a constant scale factor. Steps represent an outer loop of operations that may be performed for each frame while steps represent an inner loop of operations that may be performed for each pixel in a frame. Depending on the implementation used to perform the operations the operations of steps may be performed on multiple pixels in parallel.

At step if the pixel values in the frame have been gamma compensated the pixel value is de gamma compensated at step . At step the pixel value is boosted by a constant scale factor and clamped e.g. to avoid screen wrap . As previously described the operations of de gamma compensation and boosting the pixel values may be performed in hardware or software and may be performed at various points in processing. For example pixel values may be boosted during a scanout routine.

At step if there are more pixels the operations of steps are repeated. At step if there are more frames the operations of steps are repeated. Otherwise operations end at step .

While operations work to maintain brightness by boosting the pixels an overall brightness of the display may be reduced due to clamping of pixel values at step . The reduction in brightness due to clamping pixel values may or may not be perceptible depending on the number of pixel values clamped. However to compensate for pixel value clamping the scale factor used for boosting the pixels may be increased responsive to a measured amount of clamping.

For example illustrates dimming boosting operations that work to maintain an overall brightness of the display as before dimming backlighting by calculating an average linear amplitude for pixel values of a frame. Operations begin at step . At step the backlighting is dimmed by a constant scale factor as in .

However at step a pixel value scale factor is calculated based on an average linear amplitude of the pixel values in the frame. At steps each pixel value is boosted using the calculated pixel value scale factor.

Blocks A and B illustrate exemplary operations for calculating a pixel value scale factor based on an average linear amplitude of the pixel values of a frame using different techniques for calculating the average linear amplitude. As illustrated in block A an average linear amplitude for the frame of pixels may be calculated in the looped operations of steps . At step a linear amplitude is calculated for each pixel and at step the calculated linear amplitudes for each pixel are accumulated. The accumulated linear amplitudes for each pixel may be normalized to a value between 0 and 1. At step the pixel value scale factor is then calculated based on the accumulated linear amplitudes for each pixel.

For some aspects rather than calculate a linear amplitude for each pixel value linear amplitudes may be calculated for pixel values of a set of sampled pixels. The number and location of the set of sampled pixels may be chosen in an effort to provide an accurate estimate of the average linear amplitude of the frame.

Further as illustrated in block B rather than calculate a linear average for each pixel DC terms corresponding to an average linear amplitude for blocks of pixels in a frame may be obtained at step and accumulated at step . For example DC terms for a block of 8 8 pixels may be provided as part of an MPEG encoded video stream. At step the pixel value scale factor is then calculated based on the accumulated DC terms. Because each block may represent several pixels e.g. 8 8 the operations of block B may require less processing time i.e. fewer times through the loop time than the operations of block A.

The pixel value scale factor may be calculated in an effort to maintain the calculated average linear amplitude for the frame of pixels after dimming the backlighting the same as before dimming. The average linear amplitude after scale may be calculated by the following equation LA SCALE LA where LA represents the average linear amplitude for the pixel values before scale and LArepresents the average linear amplitude of the pixel values after boosting the pixel values with the pixel value scale factor. Due to clamping the linear amplitude after boosting may be reduced LA SCALE LA LOSS.

Combining the two equations above absent any loss due to clamping the average linear amplitude may be calculated by the following equation LA SCALE SCALE LA. Accordingly absent any loss due to clamping the average linear amplitude may be maintained by setting SCALEto 1 SCALEBL. However if pixel values are clamped the equation becomes 

According to other aspects of the present invention the average linear amplitude for a previous frame may be used to calculate the pixel value scale factor. An advantage to this approach is that the linear amplitudes of pixel values of a current frame may be calculated and accumulated prior to boosting the pixel values e.g. during scanout which may avoid an extra loop through the pixels. In other words the current frame of pixel values may be used to predict the average linear amplitude of the next frame. This approach may produce acceptable results particularly if there is little variation from frame to frame. As another alternative an average linear amplitude may be pre calculated for pixel values of a frame in a frame buffer prior to displaying the frame.

According to other aspects of the present invention the pixel value scale factor may be constant and the backlighting scale factor may be calculated in an effort to maintain an average linear amplitude of a frame of pixels. In other words the backlighting scale factor may be increased i.e. so the backlighting is brighter to compensate for a loss in average linear amplitude due to clamping.

For still other aspects as illustrated in the backlighting scale factor and pixel value scale factor may both be calculated based on an average linear amplitude. illustrates exemplary dimming boosting operations similar operations of . However after calculating an average linear amplitude for pixel values at step a backlighting scale factor and a pixel value scale factor may be calculated at step based on the calculated average linear amplitude. Accordingly because the backlighting scale factor may vary from frame to frame the operation of dimming the backlighting step may be moved within a loop of operations performed for each frame. At step the average linear amplitude may be calculated using any suitable technique such as the techniques illustrated in blocks A and B of .

The backlighting scale factor may calculated at step using the calculated average linear amplitude. For example assuming the average linear amplitude is normalized to a value between 0 and 1 the backlighting scale factor may be set to the normalized average linear amplitude SCALE LA The pixel value scale factor may be calculated for example as SCALE SCALE where a factor k may be calculated to account for clamping loss as previously described and may allow for other adjustments. For example the pixel value scale factor may be reduced by to allow an amount of headroom in an effort to prevent clipping from one frame to the next. A value of may be determined for example based on a previous frame of pixel values.

For some aspects scale factors for dimming backlight and boosting pixel values may be based on a maximum value of one or more pixels in a frame rather than an average linear amplitude. For example illustrates dimming boosting operations which include operations for calculating backlighting and pixel value scale factors based on a maximum pixel values.

Operations begin at step . Steps represent looped operations performed for each frame. At step pixel values are sampled to determine a maximum pixel value. At step a backlighting scale factor and pixel value scale factor are calculated based on the determined maximum pixel value. At step the backlighting is dimmed using the backlighting scale factor and the pixel values are boosted at steps .

As illustrated by steps each pixel value in a frame may be sampled to determine the maximum pixel value. The backlighting scale factor may then be simply set to the maximum pixel value normalized between 0 and 1 at step . The pixel value scale factor may be set to the inverse of the maximum pixel value at step . An advantage to setting the pixel value scale factor to the inverse of the maximum pixel value is that it may guarantee no clamping of pixel values during the scale operations of steps .

However because a single pixel value may determine the backlighting scale factor as illustrated in less than optimal power savings may result. For example a single pixel value out of a million e.g. for a 1280 1024 pixel screen at the maximum value may determine the scale factor applied to the remaining pixel values. This maximum value may be significantly larger than an average linear amplitude of the entire frame. Clamping the single pixel value or a small percentage of pixel values may have little noticeable effect on the overall perceived brightness of the screen.

Therefore variations of the operations illustrated in may allow for an amount of clamping by setting the backlighting scale factor to a value less than the maximum pixel value. For example the variations may include sampling pixel values to determine N maximum pixel values. According to different aspects all pixel values may be sampled or a representative group of pixel values may be sampled. Scale factors may then be determined based on the N maximum values. For example the backlighting scale factor may be set to the Nth maximum value MAX SCALE MAX Alternatively the backlighting scale factor may be set to an average of the N maximum pixel values SCALE MAX The value of N may be varied in either case for example to provide a tradeoff between image quality due to clamping and power savings. The pixel value scale factor may be set to an inverse of the backlighting scale factor.

As illustrated in dimming boosting operations may include operations for calculating backlighting and pixel value scale factors for a current frame based on maximum pixel value from a previous frame. Operations begin at step . Because scale factors are determined base on a previous maximum value for purposes of later calculations the previous maximum value is set to an initial value at step for example for a first frame. For example the previous maximum value may be set to a maximum pixel value in an effort to start out with a full amount of backlighting and no pixel boosting.

Steps through represent looped operations performed for each frame. At step the backlighting and pixel value scale factors are determined using the maximum pixel value of the previous frame. As previously described assuming a normalized maximum pixel value between 0 and 1 the backlighting and pixel value scale factors may simply be set to the maximum pixel value and the inverse of the maximum pixel value respectively.

At step the backlighting is dimmed using the backlighting scale factor. Steps represent looped operations performed for each pixel in the current frame. At step the current pixel value is compared against the current maximum pixel value for the frame which is initialized to 0 at step . If the current pixel value is greater than the current maximum value the current maximum value is set to the current pixel value at step . At step the current pixel value is boosted using the pixel value scale factor. At step the boosted pixel value is sent to the display.

Operations may use the maximum pixel value from the previous frame to predict the maximum value of the current frame. An advantage to technique may be that the maximum pixel value may be determined during a scanout routine steps . Thus a separate scan through the pixel values to determine the maximum pixel value may be avoided potentially improving performance.

However if the current frame includes pixel values above the maximum value of the previous frame these pixel values may be clamped. For some aspects the backlighting scale factor may be increased i.e. less dimming and the pixel value scale factor decreased to allow an amount of headroom for pixel values above the maximum value of the previous frame in an effort to reduce clipping. As previously described backlighting and pixel value scale factors may also be determined based on N sampled maximum pixel values for the previous frame.

Further according to some aspects maximum pixel values from more than one previous frame may be factored into determining scale factors for backlighting and pixel values. For example as illustrated in a low pass filter may determine scale factors based on maximum values 1002 . . . from N previous frames. As illustrated by the block the N maximum values may be filtered to generate a filtered maximum value MAX for use in generating backlighting and pixel value scale factors. While illustrates filtering maximum values other data dependent parameters from multiple frames may also be filtered such as linear averages. The filtered linear averages may be used to generate backlighting and pixel value scale factors.

A response time of a backlighting element may be relatively slow when compared to pixel value changes. As a consequence the backlighting element may not be able to change backlighting fast enough to keep up changes in scaled pixel values. Accordingly a length of the low pass filter may be chosen according to a response time of a backlighting element. For example a backlighting element may take up to 150 ms to respond to change over the entire backlighting range. Assuming a frame rate of 24 fps the backlighting element may require approximately 4 frames to change the backlighting full scale. Accordingly a filter length may be set to at least 4 such that the data dependent parameters e.g. max values average linear amplitudes etc. of at least four frames are filtered.

Further according to some aspects operations may include monitoring the amount of change in a backlighting scale factor from a previous value to a current value based on pixel data e.g. maximum values or average linear amplitude of a current frame to determine whether to use the filtered output or not. For example if the change to the backlighting scale factor based on pixel data from the current frame is small enough that the backlighting may respond fast enough to make the change in one frame the backlighting scale factor based on pixel data from the current frame value may be used. Alternatively a backlighting scale factor based on the filtered output may be generated.

As previously described a predetermined amount of loss in screen brightness due to pixel value clamping clamping loss may be an acceptable penalty for a reduction in power savings. According to some aspects of the present invention backlighting and pixel value scale factors may be adjusted in an attempt to maintain clamping loss within a predetermined range. For example illustrates exemplary operations that work to maintain clamping loss between predetermined high and low threshold values. Operations begin at step . At step the backlighting and pixel value scale factors are initialized. For example both scale factors may be set to one initially i.e. no dimming no boost .

At step the backlighting is dimmed using the backlighting scale factor. At step for each frame pixel values are boosted using the pixel value scale factor and clamped at step . At step the loss of screen brightness due to clamping pixel values is measured. As previously described loss of screen brightness may be determined by summing an amount of linear amplitude loss due to each clamped pixel value. At step if there are no more frames the operations end at step .

Otherwise at step the clamping loss is compared to a high threshold value. If the clamping loss exceeds the high threshold value the pixel value scale factor is decreased and the backlighting scale factor is increased at step . Decreasing the pixel value scale factor may reduce the amount of clamping and the associated loss in screen brightness at the expense of power savings . The pixel value scale factor and backlighting scale factors may be decreased and increased respectively using any suitable increments. For example the increments may represent a fixed percentage of an overall range of the scale factors.

If the clamping loss does not exceed the high threshold value at step the clamping loss is compared to the low threshold value. If the clamping loss falls below the low threshold value the pixel value scale factor is increased and the backlighting scale factor is decreased at step . Decreasing the backlighting scale factor may result in increased power savings.

The high and low thresholds may be adjustable based on a desired result. For example for aggressive power savings the high threshold may be set relatively high. Alternatively for higher quality images with less clamping the high threshold may be set relatively low. The low threshold may also be set relatively low to maintain a low pixel value scale factor and minimize clamping. In either case the difference between the high and low threshold values may be chosen to provide an amount of hysteresis and avoid rapid changes in backlighting which may be noticeable and distracting to a viewer.

Further according to some aspects changes in the scale factors may only be made at scene changes in an effort avoid noticeable changes in brightness. In other words scene changes typically are typically accompanied by a corresponding change in frame brightness so any change in brightness due to changing the backlighting dimming and or boosting the pixel values may be less noticeable. In fact scene changes may be detected based on a change in average linear amplitude e.g. above a given threshold from one frame to another.

While the foregoing is directed to aspects of the present invention other and further aspects of the invention may be devised without departing from the basic scope thereof and the scope thereof is determined by the claims that follow. In the claims the order in which steps and or operations are listed do not imply any particular order for performing the steps unless specifically stated in the claim.

