---

title: Providing transparent CDMA short message service using non-CDMA mobile devices, smart cards and networks
abstract: Methods and systems for sending, receiving, storing, and reading CDMA type SMS messages on wireless non-CDMA or multimode mobile devices include embedding a CDMA SMS message in a non-CDMA SMS host message. Such a host message may be created, transmitted, received, or otherwise processed by a mobile device, such as one operating in a GSM or UMTS mode. Similarly a CDMA SMS message may be stored in a SIM/USIM module using similar techniques. An embodiment provides a software application programming interface (API) which transparently processes SMS messages regardless of whether they are CDMA or non-CDMA and regardless of the operating mode of the mobile device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08249629&OS=08249629&RS=08249629
owner: QUALCOMM Incorporated
number: 08249629
owner_city: San Diego
owner_country: US
publication_date: 20071224
---
The present invention relates generally to wireless digital messaging communication and more specifically to methods and systems for sending receiving storing reading and processing CDMA type SMS messages on wireless networks mobile devices or multimode mobile devices which may utilize non CDMA protocols and standards.

Short Message Service SMS as the name implies is a messaging service provided by wireless cellular networks for the exchange of short digital messages between mobile devices. Sometimes referred to as text messaging these short digital messages may be user specific messages intended for a specific recipient mobile device or broadcast messages intended for receipt by multiple mobile devices. Often when the SMS message is received by a mobile device the SMS message is stored for future viewing in either an internal memory or in a removable memory module such as a smart card device.

SMS may be supported by a variety of wireless communication systems including code division multiple access CDMA systems and time division multiple access TDMA systems. Examples of a CDMA system include but are not limited to cdma2000 W CDMA and IS 95. Examples of a TDMA system include but are not limited to GSM Global System for Mobile Communications and its derivatives such as UMTS Universal Mobile Telecommunications Systems . Such TDMA communication systems are referred to herein as non CDMA communication systems.

The particular form of SMS protocol being implemented on a wireless communication system will depend on which communication system technology is being employed. The different SMS implementations have different capabilities and utilize different message types and formats for sending short messages. Nevertheless while CDMA and GSM type networks may differ and support different SMS implementations mobile devices supported by a CDMA network may send messages to a mobile device supported by a GSM network and vice versa through one or more intervening digital communication networks. Typical mobile devices are single mode meaning that they support communication with only one type of cellular network system and thus support only one form of SMS. A multi mode mobile device can support communication with more than one type of cellular network system such as communication with a CDMA network and a GSM network and thus support more than one form of SMS.

Since GSM SMS and CDMA SMS implement different SMS message types formats and protocols it may not be possible to fully translate a CDMA SMS message into a GSM SMS message without loss of some information. This is because some of the message parameters or message types available in one SMS format are not defined in the other SMS format. In particular non CDMA wireless mobile devices such as GSM UMTS cellular mobile devices may not support the full range of message parameters which are included in a CDMA SMS message. For example a CDMA SMS message may include parameters specifying privacy urgency or delay of a message which are parameters that do not appear in a GSM SMS message. Thus when a CDMA mobile device sends a SMS message to a GSM mobile device the additional message parameters supported by the CDMA mobile device are lost i.e. they are not forwarded on when received by the GSM mobile device. If the GSM mobile device which received the SMS message from the CDMA mobile device were to forward the SMS message to another CDMA mobile device the additional CDMA SMS parameters would continue to be absent in the SMS message sent to the second CDMA mobile device despite the second CDMA mobile device s ability to support the lost parameters. Accordingly a system and method are desired which preserve the additional CDMA SMS parameters when sent to a non CDMA mobile device.

An embodiment enables a CDMA SMS message to be sent received or otherwise processed as a non CDMA SMS message without any loss of data. Further an embodiment may enable the storing of a CDMA SMS message to the SIM USIM module used in a non CDMA mobile device and similarly enable the reading of a CDMA SMS message from the SIM USIM module. A non CDMA single mode mobile device or multimode mobile device that is operating in non CDMA mode can send receive and store CDMA SMS messages while preserving all of the CDMA SMS messages parameters. An embodiment can do so by embedding all of the original CDMA SMS message parameters including unsupported parameters within the user data field or payload of a non CDMA SMS message. Such a non CDMA SMS host message can be explicitly marked with a unique indicator or distinguishing feature in the header format. A non CDMA SMS host message marked with the indicator may then be handled specially as needed by the mobile device whether it be a CDMA multi mode or non CDMA mobile device. The special handling may include the generating and embedding of the CDMA SMS message wholly within a non CDMA SMS host message the transmitting of such a non CDMA SMS host message the storing or reading of such a non CDMA SMS host message in a SIM USIM module the extraction of the embedded CDMA SMS message or the receiving and subsequent interpretation of such a non CDMA SMS host message.

Various embodiments of the present invention will be described in detail with reference to the accompanying figures. Wherever possible the same reference numbers will be used throughout the drawings to refer to the same or like parts.

Descriptions of the various embodiments refer to non CDMA communication systems. For sake of simplicity reference will be made to GSM or UMTS GSM UMTS as being non CDMA communication systems but such reference is not intended to limit the scope of the invention or claims. Similarly reference will be made to cdma2000 and other CDMA derivatives as being CDMA communication systems. For simplicity this description will call SMS messages sent by non CDMA mobile device or transmitted by non CDMA cellular network a non CDMA SMS host message. 

As used herein the terms mobile device mobile handset and handheld device refer to any one or all of cellular telephones personal digital assistants PDAs with wireless modems wireless electronic mail receivers e.g. the Blackberry and Treo devices multimedia Internet enabled cellular telephones e.g. the iPhone laptop wireless modems and similar personal electronic devices which provide for SMS service. In a preferred embodiment the mobile device is a cellular telephone. However cellular telephone communication capability is not necessary in all embodiments.

The Short Message Service SMS often called text messaging provides a means for sending short messages to and from mobile devices. SMS was originally defined as part of the GSM series of standards in 1985 as a means for sending messages of up to 160 characters to and from GSM mobile devices. Since then support for the SMS service has expanded to include alternative mobile standards such as ANSI CDMA networks and AMPS satellite and landline networks. Most SMS messages are mobile to mobile text messages though the standard supports other types of broadcast messaging as well.

SMS makes use of a SMS message server which acts as a store and forward center for short messages. The SMS message server may communicate with a digital communication network such as the Internet the Public Land Mobile Network PLMN or a public switched telephone network PSTN via Interworking and Gateway Mobile Switching Centers MSCs .

Mobile originated SMS messages are communicated from the mobile device to a SMS message server via a cellular telephone network and may be destined for other mobile device users subscribers on a fixed network or Value Added Service Providers VASPs . A mobile device originated MO SMS message is a message transmitted from a mobile device. SMS messages to VASPs are known as application terminated messages. Mobile terminated SMS messages destined for a particular mobile device are communicated from the SMS message server to the destination mobile device and may originate from other mobile devices from fixed network subscribers or from other sources such as VASPs. A mobile terminated MT SMS message is a message received at a mobile device. SMS messages originated from VASPs are known as application originated SMS messages. Due to the various uses of the SMS message beyond the mere communication of text messages the additional parameters included in a SMS message transmission may be critical. Thus it is useful to preserve the additional parameters included in the SMS message transmission.

Referring to an embodiment may operate within a system of communication networks which may include a CDMA service provider network CDMA network a GSM UMTS service provider network GSM UMTS network and one or more digital communication networks linking the two service provider networks. The one or more digital communication networks may be the Internet for example and or a digital telephone network containing a gateway between the CDMA and GSM networks. Alternatively the CDMA network and the GSM UMTS network may be directly connected.

The CDMA network may communicate with one or more CDMA mobile devices through a CDMA switching center and a CDMA base station . Associated with the CDMA switching center may be a CDMA SMS message server . The CDMA SMS message server may directly connect to the CDMA network . The GSM UMTS network may communicate with one or more GSM UMTS mobile devices through a GSM UMTS switching center and a GSM UMTS base station . Associated with the GSM UMTS switching center may be a GSM UMTS SMS message server . The GSM UMTS SMS message server may directly connect to the GSM UMTS network .

A dual mode or multimode mobile device can communicate that is transmit and receive with either or both the CDMA base station and the GSM UMTS base station although not necessarily simultaneously. Typically a multimode mobile device will operate in only one mode at a time.

The CDMA SMS message server may exchange SMS messages with the GSM UMTS message server through their respective service provider networks and through one or more digital communication networks which connect the service provider networks .

Referring to a multimode mobile device may include at least the following components an antenna a radio frequency air interface and a microprocessor a smart card removable memory module and internal memory . Examples of smart card devices include but are not limited to SIM Subscriber Identify Module and UICC Universal Integrated Circuit Card used in GSM and UMTS mobile devices respectively R UIM Removable User Identity Module used in CDMA type mobile devices and SD secure data or flash memory cards used in a variety of mobile devices.

The antenna and the air interface support two way radio frequency communication with a base station or utilizing a CDMA GSM UMTS or other wireless communication protocol. The microprocessor may control the overall operation of the mobile device and is coupled to both the smart card memory module as well as the internal memory . The smart card memory module may be removable and may contain stored SMS messages phone numbers contact information and provisioning data configuring the mobile device . The internal memory may contain programmed applications for the microprocessor data used in conjunction with the programmed applications and SMS messages.

A single mode GSM UMTS or CDMA mobile device may include components similar to those of the multi mode mobile device .

The various embodiments retain all of the SMS parameters enabled in CDMA SMS message when transmitted or stored in GSM UMTS format by embedding the CDMA SMS message within a GSM UMTS message as illustrated in .

The embedded CDMA SMS message constitutes the contents of the User Data field TP UD of the GSM UMTS SMS host message which may be created specifically to host an embedded CDMA SMS message . Some of the parameter fields of the GSM UMTS SMS host message may need to be set based on the embedded CDMA SMS message . For example the User Data Length field TP UDL is set to specify the length of the TP UD field contents namely the size of the embedded CDMA SMS message . The Data Coding Scheme parameter field TP DCS may be set to indicate encoding of the contents of the TP UD field such as octets 8 bit encoding . Furthermore it may be desirable to explicitly indicate that the GSM UMTS SMS host message embeds a complete raw CDMA SMS message .

An alternative embodiment embeds only a portion of the CDMA SMS message in the GSM UMTS SMS host message . In particular an SMS parameter in the CDMA SMS message which has a counterpart parameter in GSM UMTS SMS message format may be omitted if the CDMA SMS parameter is used to set the counterpart parameter in the GSM UMTS SMS host message . CDMA parameters appearing in the CDMA SMS message which have no GSM UMTS counterpart as well as the User Data are included in the portion of the CDMA SMS message embedded in the GSM UMTS SMS host message.

It may be advantageous to simply and unambiguously indicate that a GSM UMTS SMS message is a GSM UMTS SMS host message such as by including a parameter or flag in such messages. For example it may facilitate the programming of applications if a parameter or flag can be accessed to determine that a GSM UMTS SMS message such as a message stored on a smart card is actually a GSM UMTS SMS host message that contains an embedded CDMA SMS message in the User Data field. That way the appropriate routine may be used to unpack and read the GSM UMTS SMS message. Because the GSM UMTS SMS User Data field may be an arbitrary sequence of bits it may be difficult to implicitly determine from the sequence of bits alone whether the sequence constitutes an embedded CDMA SMS message .

One method for explicitly indicating that a GSM UMTS SMS message is a GSM UMTS SMS host message includes a new specific bit pattern in the GSM UMTS SMS TP DCS parameter field. The bits in the TP DCS parameter field normally indicate the encoding scheme of certain fields in a GSM UMTS SMS message. For example the octet bit pattern 1000xxxx is currently reserved for future use where the bits xxxx are used for other purposes and may be 0 or 1. Therefore the octet bit pattern 1000xxxx may be an indicator that the User Data field TP UD contains an embedded CDMA SMS message in the payload.

An alternative method of explicitly indicating that a GMS UMTS SMS message is a GSM UMTS SMS host message employs a new bit pattern in the Protocol Identifier field TP PID of the GSM UMTS SMS host message . For example the binary value 10000000 in the TP PID can be the new TP PID value. Another method of indicating a GSM UMTS SMS host message may use both a new TP DCS bit pattern and a new TP PID bit pattern. Any other way of indicating a GSM UMTS SMS host message may be used as long as it does not affect backward compatibility with regular GSM UMTS SMS messages.

In a CDMA SMS message is embedded within a GSM UMTS SMS host message where the CDMA SMS message is either a CDMA SMS Deliver Message or a CDMA SMS Submit Message . A CDMA SMS Deliver Message is a point to point SMS message received at a mobile device. A CDMA SMS Submit Message is a point to point SMS message originating from a mobile device. The Msg Type Teleservice Id and Bearer Reply Option are example parameter fields which may appear in a CDMA SMS message . The Transport Layer MSG TYPE field indicates Point to Point Ack or Broadcast type messages. The Teleservice Id is analogous to the notion of a port number in the TCP IP protocol where different teleservice Id s are used for different purposes such as WAP push notifications or voicemail notifications. The Bearer Reply Option indicates whether the base station should send an SMS acknowledge message including the cause of an error if any. For illustration shows some example fields that may appear in a CDMA SMS Deliver Message or a CDMA SMS Submit Message . Some of these example fields are not germane to the present description but are known to those of ordinary skill in the art of CDMA SMS message formats.

When embedding a CDMA SMS message in a GSM UMTS SMS host message the parameters of the GSM UMTS SMS host message may be set to values based on some of the parameters of the embedded CDMA SMS message. The GSM UMTS Message Type Identifier parameter TP MTI of the GSM UMTS SMS host message may be set to reflect the message type of the embedded CDMA SMS message . There is at least one way to map CDMA SMS message types to GSM UMTS SMS message types which a mobile device may send or receive.

In particular a mobile originated MO CDMA SMS Point to Point message type may be mapped to the GSM UMTS Submit message type. In this case the Destination Address parameter TP DA of the GSM UMTS SMS host message may be set to the Destination Address in the CDMA SMS message . The Service Center Address parameter TP SCA may be set the same way as in other regular GSM UMTS SMS messages. The Status Report Requested parameter TP SRR in the GSM UMTS SMS message may be set to False.

Further a mobile terminated MT CDMA SMS Point to Point message type may be mapped to the GSM UMTS Deliver message type. In this case The RP Origination Address in the GSM UMTS SMS host message is set to the Origination Address of the CDMA SMS message . If the CDMA SMS message requests User Acknowledgement the Reply Path field in the GSM UMTS SMS message can be set to TRUE. Similarly the various CDMA SMS acknowledgement messages for a CDMA SMS message may be sent out to the network from the mobile device using the Submit message as defined above.

With the CDMA SMS message embedded in a GSM UMTS SMS host message stored in the smart card memory module or other memory a user may manipulate the message as the user would manipulate any GSM UMTS SMS message. For example the GSM UMTS SMS host message may be read and then forwarded sent to a GSM UMTS network message server steps and . To accomplish the forwarding the GSM UMTS SMS host message passes from the smart card memory module to the GSM UMTS network server through the following elements the microprocessor the air interface the antenna the GSM UMTS base station and the GSM UMTS switching center . Thereafter the message may be forwarded to a GSM UMTS mobile device through the GSM UMTS network or to some other destination through digital communication network .

Alternatively the GSM UMTS SMS host message may be sent in CDMA mode to a CDMA mobile device or other multi mode device A operating in the CDMA mode. The mobile device may extract the embedded CDMA SMS message from the GSM UMTS SMS host message in preparation to forward the CDMA SMS message to a CDMA mobile device or other multi mode device A operating in the CDMA mode step . The mobile device in CDMA mode may then transmit the extracted CDMA SMS message to the CDMA mobile device or other multi mode device A operating in the CDMA mode via the CDMA network SMS message server step .

Once the GSM UMTS mobile device or multi mode device operating in GSM UMTS mode has received the GSM UMTS SMS host message the GSM UMTS SMS host message may be stored in a smart card memory module or other local memory . Alternatively the GSM UMTS mobile device may detect that the SMS message is actually a GSM UMTS SMS host message . If so the GSM UMTS mobile device may extract the original CDMA SMS message out of the GSM UMTS SMS host message as shown in step . Then the GSM UMTS mobile device may interpret process or otherwise act on the contents of the original CDMA SMS message . For example the GSM UMTS mobile device may contain software to interpret respond to or utilize the data and or parameters contained in the embedded CDMA SMS message step .

The GSM UMTS mobile device or multi mode device operating in GSM UMTS mode then may embed the CDMA SMS message within a GSM UMTS SMS host message step . The type of GSM UMTS SMS host message may be an SMS Submit message an SMS Status or an SMS Reply message. The GSM UMTS SMS host message may be sent to a GSM UMTS SMS message server through a GSM UMTS base station and a GSM UMTS switching center step . The GSM UMTS SMS message server may then determine the destination of the GSM UMTS SMS host message which may require that the GSM UMTS SMS host message be forwarded through one or more networks step . The one or more networks may include the GSM UMTS service provider network associated with the GSM UMTS SMS message server and one or more interconnecting digital communications networks . The final destination network may be a CDMA network having a CDMA SMS switching center and a CDMA SMS message server . As the GSM UMTS SMS host message is received by the CDMA SMS switching center or at some point previously the CDMA SMS message may be extracted from the GSM UMTS SMS host message step . In embodiments in which the entire original CDMA SMS message is embedded in the GSM UMTS SMS host message the extraction process may simply discard all of the GSM UMTS SMS host message except for the GSM UMTS SMS user data TP UD which constitutes the preserved original CDMA SMS message . In embodiments where the GSM CDMA common parameters in the GSM UMTS SMS host message are set equal to the values in the CDMA SMS message but not included in the user data TP UD those common parameters will be extracted from the GSM UMTS SMS header and appended to the embedded CDMA SMS message to reproduce the original CDMA SMS message. The CDMA SMS message server may then send the original CDMA SMS message to a destination CDMA mobile device through a CDMA switching center and a CDMA base station step . The CDMA mobile device may be a single mode mobile device or may be a multimode mobile device operating in CDMA mode.

The steps through may be performed in a different order than shown in and some of the steps may be performed in parallel with each other. Further steps may be performed within the subroutine such as providing default values for other GSM UMTS SMS parameters.

The subroutine illustrated in exits i.e. returns to the software process that called the subroutine by returning the newly created SMS message to the calling procedure returning a pointer to the memory buffer containing the newly created SMS message or returning a flag indicating that the newly created SMS message has been successfully created in a standard memory buffer step . For example the calling procedure may be the procedure illustrated in the flowchart of . Subsequent processing by a calling software procedure may insert further parameters into the SMS message and set the values of the parameters as needed.

Thereafter the procedure maps each of several CDMA SMS parameters to a corresponding GSM UMTS SMS parameter. If the CDMA message is assumed to be a CDMA Point to Point message the procedure tests whether the CDMA SMS message is mobile terminated or mobile originated step . If the CDMA SMS message is mobile originated the procedure inserts the GSM UMTS Message Type Indicator parameter TP MTI into the GSM UMTS SMS host message with a value indicating that the message is a GSM UMTS Submit Message step . Then the GSM UMTS Destination Address parameter TP DA is set with a value equal to the Destination Address in the CDMA SMS message step . If required the GSM UMTS Service Center Address parameter TP SCA is set to indicate the Service Center associated with where this GSM UMTS message is originating such as in a mobile device step . The GSM UMTS Status Response Request parameter TP SRR can be set to a value of False and rely on the CDMA SMS s multiple acknowledgement protocol to provide the feedback that the message was received correctly step . Alternative embodiments of the procedure may insert additional parameters. The value of GSM UMTS Reply parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure next exits and returns the newly constructed GSM UMTS SMS host message to the application which called the procedure step .

If the Point to Point CDMA SMS message was mobile terminated execution continues with insertion of the GSM UMTS Message Type Indicator parameter TP MTI into the GSM UMTS SMS host message step . The TP MTI s value indicates that the message is a GSM UMTS Deliver Message. The GSM UMTS Origination Address parameter TP OA is inserted into the GSM UMTS SMS host message where the TP OA s value is the Origination Address copied from the CDMA SMS message step . The value of the GSM UMTS Reply parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure then exits and returns the newly constructed GSM UMTS SMS host message to the application that called the procedure step .

The CDMA SMS message processed by the procedure may require various CDMA acknowledgement messages to be generated and or sent in response to reception of the CDMA SMS message . The various CDMA SMS acknowledgement messages may include Transport Layer Acknowledgement Delivery Acknowledgement User Acknowledgement and Read Acknowledgement. The generation and transmission of such acknowledgement messages may be performed outside of the procedure possibly at a low layer in the communication stack. In certain circumstances such CDMA acknowledgement messages may themselves have to be embedded within a GSM UMTS SMS host message using the same procedure or a similar procedure as illustrated in .

To accomplish this the type of the CDMA SMS message may be tested to determine if a CDMA SMS acknowledgement message needs to be embedded within a GSM UMTS SMS host message tests . First the procedure may test whether the CDMA SMS message is of a type that requires a transport layer acknowledgement test . If the CDMA message is a CDMA SMS Transport Layer Acknowledgement Message i.e. test YES further execution determines whether the CDMA SMS Transport Layer Acknowledgement Message is mobile terminated or mobile originated test . If the CDMA SMS Transport Layer Acknowledgement Message is mobile originated the Message Type TP MTI field of the GSM UMTS SMS host message is set to the Deliver Report message type step . Thereafter the procedure sets the GSM UMTS SMS Destination Address field TP DA to the Destination Address of the embedded CDMA SMS message step . Then the GSM UMTS Service Center Address field TP SCA is set to indicate the Service Center associated with where this GSM UMTS message is originating step . The GSM UMTS Status Response Request parameter TP SRR can be set to a value of False and rely on the CDMA SMS s multiple acknowledgement protocol to provide the feedback that the message was received correctly step . The value of the GSM UMTS Reply Parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure then exits and returns the newly constructed GSM UMTS SMS host message to the application that called the procedure step .

If the CDMA SMS Transport Layer Acknowledgement Message is mobile terminated the Message Type TP MTI field of the GSM UMTS SMS host message is set to the Submit Report message type step . Then the GSM UMTS SMS Origination Address field TP OA is set to the Origination Address of the embedded CDMA SMS message step . The value of the GSM UMTS Reply parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure then exits and returns the newly constructed GSM UMTS SMS host message to the application that called the procedure step .

If the CDMA SMS message s type was not a Transport Layer Acknowledgement message type i.e. test NO the procedure determines whether the CDMA SMS message s type is a Delivery Acknowledgement type message step . If so the TP MTI field of the GSM UMTS SMS host message is set to the GSM UTMS Status Report message type step . Thereafter execution continues by determining the direction of the message step . If the message is mobile originated the GSM UMTS Destination Address parameter TP DA is set with a value equal to the Destination Address in the CDMA SMS message step . Next the GSM UMTS Service Center Address parameter TP SCA is set to indicate the Service Center associated with where this GSM UMTS message is originating step . The GSM UMTS Status Response Request parameter TP SRR can be set to a value of False and rely on the CDMA SMS s multiple acknowledgement protocol to provide the feedback that the message was received correctly step . The value of the GSM UMTS Reply parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure next exits and returns the newly constructed GSM UMTS SMS host message to the application calling the procedure step .

If the Transport Layer Acknowledgement SMS message was mobile terminated the GSM UMTS SMS Origination Address field TP OA is set equal to the Origination Address of the embedded CDMA SMS message step . The value of the GSM UMTS Reply parameter TP RP is set to True or False depending respectively on whether or not User Acknowledgement is requested in the CDMA SMS message steps . The procedure next exits and returns the newly constructed GSM UMTS SMS host message to the application that called the procedure step .

If the procedure determined that the CDMA SMS message s type is not a Transport Layer Acknowledgement message type and is not the Delivery Acknowledgement message type i.e. tests and both NO the procedure may simply assume that the message type is either the Point to Point Deliver or Submit message types by continuing with step as described above. However an embodiment may continue to check for further CDMA SMS message types such as a broadcast message or other CDMA SMS acknowledgement message types. If the embodiment does check for another CDMA SMS message type the embodiment may execute steps similar to the steps executed for other message types. In particular the procedure may set the TP MTI field of the GSM UMTS SMS host message to the most appropriate GSM UTMS message type which describes the other type of embedded CDMA SMS message. The other various GSM UMTS SMS fields such as TP DA TP SCA TP SRR TP OA and or TP RP may be set the same as for the Transport Layer Acknowledgement Delivery Acknowledgement message types.

The procedure begins by reading the SMS message in smart card memory module referenced by an argument of the procedure step . Because the SMS message is in a smart card memory module the procedure may assume that it is a GSM UMTS message of some kind. Next the procedure checks whether the SMS message is a GSM UMTS SMS host message or an ordinary GSM UMTS SMS message step . For example the check may examine the explicit indication bit pattern in the TP DCS field or TP PID field which indicates whether the SMS message is a GSM UMTS SMS host message. If the SMS message referenced by the argument is not a GSM UMTS SMS host message the GSM UMTS message is returned as is step and the procedure exits back to that application that called the procedure step . If the argument does refer to a GSM UTMS SMS host message the procedure extracts the embedded CDMA SMS message from the GSM UMTS SMS host message step . Because the embedded CDMA SMS message is the User Data field TP UD of the GSM UMTS SMS host message the procedure may make a straightforward memory copy of the embedded CDMA SMS message located within the GSM UMTS SMS host message . The length of the embedded CDMA SMS message is found in the TP UDL field which may be used to determine the fields which need to be copied to extract the CDMA SMS message. The SMS message copy is returned to the application that called the procedure step and execution returns to the application that called the procedure step . The procedure may also return an indication of whether the returned SMS message copy is a CDMA formatted message or a GSM UMTS formatted message.

An alternative embodiment of the procedure may simply return the address of the SMS message in the smart card memory module instead of explicitly creating and returning a copy of the message. The returned address may simply be the address of the GSM UMTS SMS message or may be the beginning address of the User Data field which is the address of the embedded CDMA SMS message within its GSM UMTS SMS host message. An embodiment may also return the length of the returned addressed message so the application can extract the CDMA SMS message from memory using the starting address and the length.

Either the SMS message center or the mobile device or both can perform any required embedding or extraction of a CDMA SMS message in a GSM UMTS SMS host message . That is a procedure similar to the flowcharts of may be embodied in a message server or in a mobile device or in both. Further direct interpretation or manipulation of a CDMA SMS message may be performed by either a CDMA SMS message server or a GSM UMTS SMS message server while the CDMA SMS message is embedded in a GSM UMTS SMS host message . Likewise the mobile device may directly perform interpretation or local manipulation of a CDMA SMS message while it is stored within a GSM UMTS SMS host message .

The handling of both CDMA SMS messages and GSM SMS messages may be designed to be transparent to the user regardless of the operating mode of the mobile device. When a single mode GSM UMTS mobile device or multimode mobile device is operating in GSM UMTS mode it can still perform all of the CDMA SMS functions including 

use Service Category Programming Teleservice SCPT to configure the Broadcast SMS service table over the air or

An embodiment may use the procedures of B A and B to perform such functions by automatically embedding extracting and processing or directly examining all of a CDMA SMS message within the user data section of a GSM UMTS SMS host message as may be needed. Any other normal or special CDMA SMS processing may still also be possible even while the mobile device is in GSM UMTS mode by setting or interpreting the parameters and contents of a CDMA SMS message embedded in a GSM UMTS SMS host message .

For example is a process flowchart of a procedure to set an SMS parameter P to a value V in any SMS message. The arguments to procedure are the SMS parameter P its value V and the SMS message M in which the parameter P is to be set. The SMS parameter P may be any CDMA or GSM UMTS SMS parameter. The SMS message M may be any kind of SMS message such as a CDMA SMS message a GSM SMS message a UMTS SMS message or any other kind of SMS message. First the procedure tests whether the SMS parameter P is a CDMA SMS parameter which has no counterpart in GSM UMTS that is a CDMA specific parameter step . If the SMS parameter P is not CDMA specific then it is a parameter which can be set in a non CDMA SMS message so execution continues by simply setting that parameter P in the SMS message step . Execution then returns to the application that called the process step .

If the SMS parameter P is CDMA specific further execution determines whether the SMS message M is a CDMA SMS message step . If the SMS message M is a CDMA SMS message further execution sets SMS parameter P to value V in the SMS message M step . That is the CDMA specific SMS parameter P may be set in the SMS message M because M is a CDMA SMS message. Then execution returns to the application which called the procedure step .

If P is a CDMA specific SMS parameter but the SMS message M is not a CDMA SMS message i.e. step NO then the procedure determines whether the SMS message M is a non CDMA SMS host message step . If so that is the SMS message M already has a CDMA SMS message embedded in it then parameter P may be set to the value V in the CDMA message embedded in SMS message M step before execution returns to the application which called the procedure step .

If parameter P is CDMA specific and if the SMS message M was determined not to be a CDMA SMS message but not a non CDMA SMS host message i.e. step NO the procedure translates the non CDMA SMS message M to an equivalent CDMA SMS message M step . This translation is possible because Point to Point CDMA SMS messages can be translated to non CDMA SMS messages GSM UMTS SMS messages without loss of parameter or user data. Because M is a CDMA SMS message the SMS parameter P may be set to the value V in M step . Next CDMA SMS message M may be embedded in a non CDMA SMS host message M such as a GSM UMTS SMS host message step . Then the SMS message M is replaced with the SMS message M step . The SMS message M is now a non CDMA SMS host message such as a GMS UMTS SMS host message . The embedded CDMA SMS message M contains the SMS parameter P with the value V. Finally execution returns to the application that called the procedure step . The application calling the procedure may ignore whether the SMS message is a CDMA SMS message or a GSM UMTS SMS message. In any case the final SMS message produced does contain the SMS parameter P with the value V. The procedure may be called repeatedly to set the values V of multiple SMS parameters P of a message M.

An embodiment may offer a software Application Programming Interface API which operates on all SMS messages regardless of the kind of message and regardless of the operational mode of the mobile device. The operational modes may include CDMA GSM or UMTS. The message types handled by the API may include 

In particular GSM UMTS mobile devices or multimode mobile devices operating in GSM UMTS mode may be provided with an API that can be called by application software which transparently operates with all kinds of SMS messages. The API can perform and hide from the application the details of automatically extracting a CDMA SMS message from a GSM UMTS SMS host message as needed or automatically embedding a CDMA SMS message within a GSM UMTS SMS host message as needed. The API may call procedures like the procedures of in order to automate encapsulate and hide the differences between CDMA and GSM UMTS message features. That is the API may provide all normal operations for handling CDMA SMS messages and provide all the same operations for GSM UMTS SMS host messages perhaps invisibly to the application software using the API. The normal operations may include receiving forwarding composing storing reading and sending SMS messages which may include parameters which are specific to the CDMA SMS message format.

An embodiment may reverse the embedding roles of the CDMA and GSM UMTS messages. That is a normal GSM UMTS SMS message can also be embedded in a CDMA SMS host message. Embedding a GSM UMTS SMS message in a CDMA SMS host message may be useful in certain situations. For example a CDMA mobile device may store the CDMA SMS host message on a CDMA RUIM or CSIM memory module and later retrieve and extract the embedded GSM message as is without any need for translation.

The hardware used to implement the forgoing embodiments may be processing elements and memory elements configured to execute a set of instructions wherein the set of instructions are for performing method steps corresponding to the above methods. Alternatively some steps or methods may be performed by circuitry that is specific to a given function.

Those of skill in the art will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

The steps of a method or algorithm described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. The software module may reside in a processor readable storage medium and or processor readable memory both of which may be any of RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other tangible form of data storage medium known in the art. Moreover the processor readable memory may comprise more than one memory chip memory internal to the processor chip in separate memory chips and combinations of different types of memory such as flash memory and RAM memory. References herein to the memory of a handset are intended to encompass any one or all memory modules within the handset without limitation to a particular configuration type or packaging. An exemplary storage medium is coupled to a processor in either the mobile handset or the theme server such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC.

The foregoing description of the various embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the present invention is not intended to be limited to the embodiments shown herein and instead the claims should be accorded the widest scope consistent with the principles and novel features disclosed herein.

