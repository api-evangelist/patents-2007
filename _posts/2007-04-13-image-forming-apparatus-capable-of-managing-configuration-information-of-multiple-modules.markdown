---

title: Image forming apparatus capable of managing configuration information of multiple modules
abstract: An image forming apparatus is disclosed that includes multiple application modules configured to perform image processing including scanning, printing, and copying of an image; multiple service modules configured to perform an image forming operation and to control the image forming apparatus; a nonvolatile configuration information storage part configured to contain first configuration information of the application modules and the service modules; a configuration information comparison part configured to read second configuration information of the application modules and the service modules and compare the first configuration information and the second configuration information before starting the application modules and the service modules; and a notification part configured to notify the manager of the image forming apparatus of the difference between the first configuration information and the second configuration information in response to detection of the difference.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08427662&OS=08427662&RS=08427662
owner: Ricoh Company, Ltd.
number: 08427662
owner_city: Tokyo
owner_country: JP
publication_date: 20070413
---
The present invention relates generally to image forming apparatuses and more particularly to an image forming apparatus with increased security against a change in module configuration.

Image forming apparatuses with multiple functions such as copying printing scanning and facsimile tend to have more and more functions in order to meet users requirements. Further the functions of image forming apparatuses are modularized. Such modularization enables modular basis apparatus development. Each module operates on corresponding individual firmware and its operation is controlled by the firmware of a system controller that performs overall control.

In these years it has been possible to add functions to image forming apparatuses using various media in order to increase the extensibility of firmware or applications of image forming apparatuses brought on the market. For example it is possible to expand the functions of an image forming apparatus by adding thereto a third party application not manufactured by the manufacturer of the image forming apparatus. It is also possible to strengthen the security function of the image forming apparatus. Further it is possible to update the firmware of the image forming apparatus through various media or networks. In the case of occurrence of some kind of trouble updating a function or strengthening a security function in such an image forming apparatus the configuration of the image forming apparatus may be changed by its manager. A description is given below of some examples of the conventional technology related to this.

Japanese Laid Open Patent Application No. 2004 165734 discloses an image forming apparatus capable of reducing loss of productivity when it is urgently required to update firmware as in the case of occurrence of a problem. The firmware is updated to a new one upon detection of occurrence of a problem originating in the firmware. Of control modules such as the control modules of an image reading part and the control modules of an image forming part a control module to be controlled by the new firmware is determined. The operation of a part to be controlled by the new firmware is stopped while the other parts are allowed to continue their operations.

Japanese Laid Open Patent Application No. 2004 318838 discloses a software updating apparatus that reduces the workload of updating while ensuring high security. The firmware of an apparatus to be updated image forming apparatus that can communicate with the software updating apparatus intermediary apparatus is updated by the software updating apparatus. The intermediary apparatus generates a one time password and transmits the generated one time password to the image forming apparatus through a communications path using SSL so as to have the password stored in the image forming apparatus. Then the intermediary apparatus transmits the one time password to the image forming apparatus through a communications path using FTP whose processing workload is less than that of SSL so as to have the image forming apparatus perform authentication. If the authenticity is established the intermediary apparatus transmits firmware for updating to the image forming apparatus through an FTP communications path so as to have the firmware updated. If a successful update is confirmed the one time password is nullified.

Japanese Laid Open Patent Application No. 2004 318871 discloses a communications device. In the case of updating an OS by downloading an OS for updating from an external apparatus such as a managing apparatus even if the update fails because of power supply interruption the communications device can determine the failure with ease and certainty at the time of a subsequent restart by turning on power. The CPU of the communications device downloads firmware for updating rewriting from the managing apparatus in response to a request to update firmware including an OS from the managing apparatus. If the downloading succeeds a firmware updating flag in a flash ROM is set to 1. At the time of a subsequent startup of the communications device a startup of a boot loader the status of the firmware updating flag is checked and if the flag is 0 the OS and applications in a card memory are successively loaded into a DRAM and started. If the firmware updating flag is 1 the OS and a recovery program in the flash ROM are successively loaded into the DRAM and started.

However the conventional image forming apparatus has the following problem regarding security. If the configuration of an application module or a service module of an image forming apparatus that has been connected to a network and operating in a secure state is illegally changed there is a risk that a user may not be able to detect the change and continue to use a vulnerable system. Usually modules can be changed only by a manager but it is not impossible to illegally change modules with malicious intent. If the illegal modular change is overlooked confidential image data may escape through a network.

According to one embodiment of the present invention there is provided an image forming apparatus in which the above described problem may be solved or reduced.

According to one embodiment of the present invention there is provided an image forming apparatus in which a change in configuration is prevented from making security vulnerable.

According to one embodiment of the present invention there is provided an image forming apparatus that has its security increased by preventing serious security vulnerability from being caused and preventing leakage of information due to vulnerability by detecting an illegal change in the module configuration of the image forming apparatus and notifying a manager of the configuration change and preventing a person or a user other than the manager from using the apparatus.

According to one embodiment of the present invention there is provided an image forming apparatus including a plurality of application modules configured to perform image processing including scanning printing and copying of an image a plurality of service modules configured to perform an image forming operation and to control the image forming apparatus a nonvolatile configuration information storage part configured to contain first configuration information of the application modules and the service modules a configuration information comparison part configured to read second configuration information of the application modules and the service modules and compare the first configuration information and the second configuration information before starting the application modules and the service modules and a notification part configured to notify a manager of the image forming apparatus of a difference between the first configuration information and the second configuration information in response to detection of the difference.

According to one embodiment of the present invention there is provided an image formation control method including storing first configuration information of a plurality of application modules configured to perform image processing including scanning printing and copying of an image and a plurality of service modules configured to perform an image forming operation and to control an image forming apparatus in a nonvolatile configuration information storage part reading second configuration information of the application modules and the service modules and comparing the first configuration information and the second configuration information before starting the application modules and the service modules and notifying a manager of the image forming apparatus of a difference between the first configuration information and the second configuration information in response to detection of the difference.

According to one embodiment of the present invention there is provided a computer readable recording medium having a program recorded thereon the program causing a computer to execute the image formation control method as set forth above.

Thus according to one aspect of the present invention it is possible to detect an illegal change in module configuration and thus to prevent serious security vulnerability from being caused in an image forming apparatus. Further it is possible to notify the manager of the image forming apparatus of a change in module configuration so that it is possible to prevent information leakage due to vulnerability and thus to increase security.

A description is given below with reference to the accompanying drawings of an embodiment of the present invention.

According to an image forming apparatus of this embodiment the configuration information of application modules and service modules and the configuration information of all the modules contained in a nonvolatile storage medium are compared at the time of a system startup and if there is a difference therebetween a manager is notified of the difference.

The SMTP server transmits e mail to and receives e mail from the client terminal through the network according to SMTP. The FTP server receives a file transfer request from for example the client terminal and transfers a file stored therein in response to the request in accordance with FTP based on which a transfer command is executed on the network . The client terminal for which an ordinary personal computer is used exchanges facsimile data with the delivery server exchanges e mail with the SMTP server and exchanges files with the FTP server . In particular the client server transmits a file to the image forming apparatus directly or through the FTP server and causes the image forming apparatus to print the file.

The image forming apparatus is for example an MFP MultiFunction Peripheral or a multifunction machine. The image forming apparatus includes a paper feed part an image forming part a scanner part an ADF Automatic Document Feeder configured to convey original material such as a document to an image reading position in the scanner part a facsimile communications function part and a network communications function part and implements functions such as a copy function a facsimile function a printing function and a scanning function. is a block diagram showing a software configuration of the image forming apparatus . Referring to the image forming apparatus includes an application layer a service layer and a kernel layer . The application layer includes a print application a copy application a facsimile FAX application and a scan application . The print application is a program for printing. The copy application is a program for copying. The facsimile application is a program for facsimile transmission and reception. The scan application is a program for image reading scanning . Each program of the application layer performs processing using one or more modules of the service layer through an API Application Programming Interface .

The service layer includes an SCS System Control Service an MCS Memory Control Service an ECS Engine Control Service an FCS Fax Control Service an NCS Network Control Service an OCS Operation Control Service a CCS Certificate Control Service an SRM System Resource Management and an IMH Image Memory Handler . The SCS is a module that performs system control. The MCS is a module that performs memory control. The ECS is a module that performs engine control. The FCS is a module that performs facsimile control. The NCS is a module that performs network control. The OCS is a module that controls an operations panel . The CCS is a module that causes a user to perform manager authentication. The SRM is a module that manages each system resource. The IMH is a module that handles image memory. The service layer executes the services under the control of the kernel layer .

The kernel layer includes an OS Operating System which is a core system management program. The OS includes an initializer program INIT which performs system initialization. The kernel layer controls hardware through a hardware interface I F . The hardware includes a plotter a scanner an HDD hard disk drive an FCU Facsimile Control Unit and an NVRAM Nonvolatile RAM . The plotter is a printer. The scanner is an image reader. The HDD is a hard disk unit. The FCU is a device that communicates with a facsimile machine. The NVRAM is a nonvolatile memory for storing for instance module configuration information as described below.

The CPU is an IC for various information processing operations. The CPU controls the image forming apparatus . The CPU causes the SCS the MCS the ECS the FCS the NCS the OCS the CCS the SRM and the IMH to be activated as processes on the OS and executed. Further the CPU causes the printer application the copy application the FAX application and the scan application forming the application layer to be activated and executed.

The ASIC is an IC for various image processing operations. The NB which is a Northbridge of the controller connects the CPU the MEM P the SB and the ASIC . The SB which is a Southbridge of the controller connects the NB to a PCI bus and peripheral devices.

The MEM P is a system memory of the image forming apparatus . The MEM C is a local memory of the image forming apparatus . The HDD is a storage device of the image forming apparatus . The NVRAM is a nonvolatile memory as described above. The memory card slot is for loading a memory card . The NIC is a controller for network communications based on MAC addresses. The USB device provides a USB compliant connection terminal. The IEEE 1394 device provides an IEEE 1394 compliant connection terminal. The Centronics device provides a Centronics connection terminal. The SB the NIC the USB device the IEEE 1394 device and the Centronics device are connected to the NB through a PCI bus.

The operations panel is hardware an operations part for an operator making input to the image forming apparatus and is also hardware a display part for the operator obtaining output from the image forming apparatus .

A description is given of functions and operations of the image forming apparatus configured as described above according to the embodiment of the present invention. First an overview is given with reference to and of functions of the image forming apparatus . The image forming apparatus includes multiple application modules that perform processing such as scanning printing and copying images and multiple service modules that perform processing such as image forming operations for example data processing including storing and transferring images and controlling the image forming apparatus . The image forming apparatus stores the configuration information module configuration information of all the application and service modules in a configuration information storage part formed of a nonvolatile storage unit such as an NVRAM. Before starting the application modules and service modules the configuration information of all the modules and the configuration information of all the modules contained in the configuration information storage part are compared in a configuration information comparison part .

In response to detection of a difference between the two configuration information items only a module that is necessary for authenticating a manager is started while a module having the difference in configuration information is prevented from being started then the manager is notified of the difference and requested to be authenticated thereby preventing a person or a user other than the manager from using the image forming apparatus . In response to authorization of the change difference in configuration by the manager the module configuration information stored in the configuration information comparison part is updated and the system is normally booted started . An authentication request from a person or a user other than the manager is rejected and it is requested that authentication be performed again. A computer program may cause a computer to execute this image formation control method.

Next a description is given with reference to of an operational procedure of the image forming apparatus . This operational procedure is under the control of the CPU . Referring to when power is turned ON in step S the INIT of the OS refers to the NVRAM configuration information storage part and reads the value of a configuration change detection setting. In step S the INIT determines whether the configuration change detection setting is valid. If the configuration change detection setting is not valid NO in step S in step S the INIT starts a normal mode where all the service modules including the SCS are started. Then this operational procedure ends to wait for a user to use an application.

If the configuration change detection setting is valid YES in step S in step S the INIT reads obtains the module configuration information of a previous startup previous module configuration information from the NVRAM . In step S the INIT reads obtains module configuration information at the time of a current startup current module configuration information . For example the INIT obtains reads the current module configuration information of the SCS from the SCS . The current module configuration information is available as shown in b of without starting the service modules. Then in step S the INIT determines whether there is a difference between the previous module configuration information and the current module configuration information. If there is no difference NO in step S in step S the INIT starts all the service modules in the normal mode. If there is a difference change YES in step S in step S the INIT starts a configuration change detection mode where the SCS the OCS and the CCS are started.

Then in step S of the SCS causes the OCS to display one or more modules whose module configuration information has been changed on the operations panel operations part . Then in step S the SCS causes the CCS to perform logon authentication of a user for manager authentication. If the user is not authenticated NO in step S in step S the user is notified of the logon authentication failure. If the user is successfully authenticated in step S the CCS performs manager authentication to determine whether the user who has logged on is the manager of the image forming apparatus . If the user who has logged on is not the manager of the image forming apparatus NO in step S in step S the user is notified that the user is not authorized. If the user who has logged on is the manager of the image forming apparatus that is the logon information entered by the user is correct and the user manager operates to authorize the change YES in step S information on this operation is input to the SCS and the SCS detects authorization of the changed configuration. Thus in step S the SCS updates the module configuration information in the NVRAM and causes the OCS to notify the user manager of the update. Upon confirmation of the update by the user the SCS notifies the INIT of authorization of the changed configuration and in step S the INIT starts the other service modules. Here steps through and through may be referred to as a configuration change detecting operation.

Next a description is given with reference to of a method of updating the configuration information table. In a shows a configuration information table created in step S in a previous startup operation and b shows a configuration information table of configuration information obtained in step S in the current startup operation. Further c of shows a configuration information table created in step S in the current startup operation. In step S the configuration information table shown in a of and the configuration information table shown in b of are compared. In this case the system version numbers are different. If the authenticity of the manager of the image forming apparatus is established verified the configuration information table is updated and stored in the configuration information storage part . The configuration information tables may also be compared with respect to items other than the system version number. It is virtually impossible to change even part of a file without being detected because message authentication is performed using the authentication code of the system so as to be able to detect changes in files including the version number. Accordingly it is impossible for a person or a user other than the manager to change the module configuration.

Thus at the time of a startup the image forming apparatus extracts the module configuration information of the previous startup stored in a nonvolatile memory and compares the extracted module configuration information with current module configuration information. In response to detection of a difference between the extracted previous module configuration information and the current module configuration information the image forming apparatus notifies the user of the change difference in configuration by displaying it on an operations part and requests authentication of its manager. Accordingly a person or a user other than the apparatus manager cannot start the image forming apparatus in response to any modular change. Further unless the apparatus manager authorizes the modular change a person or a user other than the apparatus manager can use the image forming apparatus .

Next a description is given with reference to of a method of logging on by the apparatus manager when a difference in module configuration information is detected. If a difference in module configuration information is detected a screen as shown in is displayed for example on the operations panel of the image forming apparatus . The apparatus manager can determine on this screen whether there has been any illegal modular change. If the change is legal so that the apparatus manager determines to authorize a startup the apparatus manager presses a LOG ON AND AUTHORIZE button in accordance with instructions shown on the screen. Then a manager authentication screen shown in is displayed. On this screen the apparatus manager enters logon information. That is the apparatus manager enters a logon name and a password in corresponding boxes and and presses a LOG ON button . If the apparatus manager is authenticated a screen shown in is displayed to notify the apparatus manager that the module configuration information has been properly updated. If there is no problem with this the apparatus manager presses a CONTINUE button to continue the startup operation of the image forming apparatus .

If a person user other than the apparatus manager enters logon information on the screen shown in a screen shown in is displayed on the operations panel of the image forming apparatus so as to notify the user that the logon information is invalid and to prompt the user to be authenticated as the apparatus manager. Thus in response to detection of a difference in module configuration information a person or a user other than the apparatus manager is prevented from using the image forming apparatus . The authentication method may be but is not limited to the one that performs authentication on the operations panel as in this case. For example authentication methods using an external authentication device such as IC card authentication and fingerprint authentication may also be employed.

As described above according to this embodiment the image forming apparatus is configured to compare the current configuration information of all the application and service modules with the previous configuration information of all the application and service modules stored in a nonvolatile storage medium at the time of a system startup and if there is any difference between the two module configuration information items to notify the apparatus manager of the difference. Accordingly it is possible to detect an illegal modular change so that it is possible to prevent information leakage due to reduced security.

Thus an image forming apparatus according to one embodiment of the present invention is optimum as an image forming apparatus that is connected to a network and requires high security.

According to one embodiment of the present invention there is provided an image forming apparatus including multiple application modules configured to perform image processing including scanning printing and copying of an image multiple service modules configured to perform an image forming operation and to control the image forming apparatus a nonvolatile configuration information storage part configured to contain first configuration information of the application modules and the service modules a configuration information comparison part configured to read second configuration information of the application modules and the service modules and compare the first configuration information and the second configuration information before starting the application modules and the service modules and a notification part configured to notify the manager of the image forming apparatus of the difference between the first configuration information and the second configuration information in response to detection of the difference.

According to one embodiment of the present invention there is provided an image formation control method including storing first configuration information of multiple application modules configured to perform image processing including scanning printing and copying of an image and multiple service modules configured to perform an image forming operation and to control an image forming apparatus in a nonvolatile configuration information storage part reading second configuration information of the application modules and the service modules and comparing the first configuration information and the second configuration information before starting the application modules and the service modules and notifying the manager of the image forming apparatus of the difference between the first configuration information and the second configuration information in response to detection of the difference.

According to one embodiment of the present invention there is provided a program causing a computer to execute the image formation control method as set forth above.

According to one embodiment of the present invention there is provided a computer readable recording medium having a program recorded thereon the program causing a computer to execute the image formation control method as set forth above.

For example referring to the program may be stored in the MEM P or MEM C . The program may also be stored in the memory card .

Thus according to one aspect of the present invention it is possible to detect an illegal change in module configuration and thus to prevent a serious security vulnerability from being caused in an image forming apparatus. Further it is possible to notify the manager of the image forming apparatus of a change in module configuration so that it is possible to prevent information leakage due to vulnerability and thus to increase security.

The present invention is not limited to the specifically disclosed embodiment and variations and modifications may be made without departing from the scope of the present invention.

The present application is based on Japanese Priority Patent Applications No. 2006 122125 filed on Apr. 26 2006 and No. 2007 075193 filed on Mar. 22 2007 the entire contents of which are hereby incorporated by reference.

