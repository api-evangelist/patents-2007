---

title: Methods, systems, and computer program products for offloading call control services from a first network of a first type to a second network of a second type
abstract: Methods, systems, and computer program products for offloading call control services from a first network of a first type to a second network of a second type are disclosed. According to one aspect, a method includes detecting a call originating from a calling party in a first network of a first type. A database may be queried using information identifying the calling party. In response to the query, routing information may be for a node in a second network of a second type. Call control services may be offloaded for the call to the second network using the node.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07606202&OS=07606202&RS=07606202
owner: Tekelec
number: 07606202
owner_city: Morrisville
owner_country: US
publication_date: 20070727
---
This application claims the benefit of U.S. Provisional Patent Application Ser. No. 60 834 103 filed Jul. 28 2006 the disclosure of which is incorporated herein by reference in its entirety.

The subject matter disclosed herein relates generally to call control services. More particularly the subject matter disclosed herein relates to offloading call control services.

Commonly deployed wireless communications networks support both voice and data services. Typically mobile handsets or mobile subscribers are connected to a base transceiver station using a radio access network that uses a modulation scheme such as code division multiple access CDMA or global system for mobile communications GSM . The base transceiver stations are connected via fixed links to one or more base station controllers and the base station controllers are aggregated into switches called mobile switching centers. Mobile switching centers are connected to the public land mobile network public switched telephone network PLMN PSTN typically through a gateway switch called the gateway mobile switching center GMSC .

Internet protocol IP multimedia subsystem IMS is defined by the Third Generation Partnership Project 3GPP as a mobile network infrastructure that enables the convergence of data speech and mobile network technology over an IP based infrastructure. IMS bridges the gap between the existing traditional telecommunications technology such as PSTN and Internet technology allowing network operators to offer a standardized reusable platform with new innovative services by enhancing real time multimedia mobile services such as voice services video telephony messaging conferencing and push services. IMS can be used to provide services for both mobile networks and fixed networks at the same time providing unique mixtures of services with transparency to the end user. IMS is one example of a session initiation protocol SIP based network. Another example of a SIP based network is a next generation network NGN network.

IMS supports the establishment of any type of media session e.g. voice video text etc. and provides the service creator the ability to combine services in the same session and dynamically modify sessions on the fly e.g. adding a video component to an existing voice session . As a result new and innovative user to user and multi user services become available such as enhanced voice services video telephony chat push to talk and multimedia conferencing all of which are based on the concept of a multimedia session. The underlying IMS infrastructure enables mobile IP communication services via its ability to find a user in the network and then to establish a session with the user. The key IMS components enabling mobility management are the call session control function CSCF and home subscriber server HSS . The CSCF is essentially a proxy which aids in the setup and management of sessions and forwards messages between IMS networks. The HSS holds all of the key subscriber information and enables users or servers to find and communicate with other end users.

A wireline or wireless subscriber may benefit from the call control services provided by both networks. Sometimes the services operated in the different networks provided to a subscriber may overlap. For example an IMS network may provide the same call control service as a PSTN or 2G wireless network. In some instances it may be advantageous to offload call control service from one network to another network of a different type. Exemplary network types include 2G wireless networks e.g. Global System for Mobile Communications GSM Interim Standard 41 IS 41 Public Switched Telephone Network PSTN Next Generation Network NGN and IMS networks. For example the services provided by an IMS network may be cheaper than the PSTN. In this case it would be advantageous to offload call control services from the PSTN to the IMS network.

Accordingly there exists a need for methods systems and computer program products for offloading call control services from one network to another network of a different type.

According to one aspect the subject matter described herein includes a method for using an originating party query to offload call control services from a first network of a first type to a second network of a second type. The method includes detecting a call originating from a calling party in a first network of a first type. A database may be queried using information identifying the calling party. In response to the query routing information may be for a node in a second network of a second type. Call control services may be offloaded for the call to the second network using the node.

To facilitate an understanding of exemplary embodiments many aspects are described in terms of sequences of actions that can be performed by elements of a computer system. For example it will be recognized that in each of the embodiments the various actions can be performed by specialized circuits or circuitry e.g. discrete logic gates interconnected to perform a specialized function by program instructions being executed by one or more processors or by a combination of both.

Moreover the sequences of actions can be embodied in any computer readable medium for use by or in connection with an instruction execution system apparatus or device such as a computer based system processor containing system or other system that can fetch the instructions from a computer readable medium and execute the instructions.

As used herein a computer readable medium can be any means that can contain store communicate or transport the program for use by or in connection with the instruction execution system apparatus or device. Specific examples a non exhaustive list of the computer readable medium can include the following a portable computer diskette a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory and a portable compact disc read only memory CDROM .

Thus the subject matter described herein can be embodied in many different forms and all such forms are contemplated to be within the scope of what is claimed. Any such form of embodiment can be referred to herein as logic configured to perform a described action or alternatively as logic that performs a described action.

Methods systems and computer program products for using an originating party query to offload call control services from a first network of a first type to a second network of a second type according to embodiments of the subject matter described herein may be implemented in one or more of any suitable network components or network devices. For example the methods systems and computer program products may be implemented in a routing node a signal transfer point STP a router a switch a gateway a media gateway controller a softswitch an IMS node with PSTN gateway functionality an NGN node a service control point an application server or other suitable network device. is a network diagram illustrating an exemplary system for using an originating party query to offload call control services from a first network of a first type to a second network of a second type according to an embodiment of the subject matter described herein. In this example networks and are a GSM network and an IMS network respectively. Further in this example the call is originated by a mobile subscriber device . Although illustrates the offloading of call control services from a GSM network to an IMS network those skilled in the art realize that the present subject matter is not limited to the depicted embodiment and is applicable to any system including networks of different types. Referring to mobile subscriber device may be registered with a 2G HLR which maintains authentication and registration information associated with mobile subscriber device and other mobile subscribers. Further for example HLR may store service profile location information and activity status of mobile subscriber device . During operation mobile subscriber device may be assigned to a serving MSC which may provide telephony switching services and mobility functions.

Mobile subscriber device may be any suitable wireless communications device for performing calling functions such as a mobile phone and a smartphone. In this example mobile subscriber device is a 2G phone capable of operating in GSM network . When operating within GSM network call control services for mobile subscriber device may be offloaded from GSM network to an IMS serving call session control function S CSCF in accordance with the subject matter described herein.

MSC may download initial detection point IDP trigger information from HLR for detecting call origination attempts from GSM network . In particular MSC may download and store an IDP trigger for detecting when a call originates from mobile subscriber device the calling party for the call while in GSM network . An example of triggering information may include an identifier for mobile subscriber device that is contained in a received call attempt message. MSC may trigger on detection of the triggering information in a received call attempt message . After triggering based on the call attempt by mobile subscriber device MSC may communicate a query message to an STP . The query message may be a TCAP Info Analyzed message that contains the identifier for the calling mobile subscriber device . In one embodiment the query message may be similar to a number portability query message where the query message includes calling party identifier information instead of or in addition to called party identifier information. The query message may be sent for requesting a routing number for a node in IMS network that may be used to provide call control services for the call.

STP may include a call control offload CCO function for offloading call control services from GSM network to IMS network . In particular STP may receive from MSC the query message containing an identifier for calling mobile subscriber device . In response to receiving the query message CCO function may query a CCO database for routing information using the calling party identifier information. In response to the query function may obtain routing information for a node in IMS network that is operable to provide call control services for the call. Exemplary routing information includes a local routing number LRN a network entity address an MSC address a Gateway MSC address a Gateway routing node address a Signaling System 7 SS7 point code address an Internet protocol IP address and a uniform resource identifier URI address. Next a response message may be communicated to MSC containing routing information e.g. LRN for offloading call control services for the call to IMS network . MGC may then route the call to the IMS network by sending an ISUP IAM message to MSC where the IAM message includes the LRN of the IMS node. In one embodiment the LRN may be included in a called party number CdPN parameter in the IAM message. MGC may terminate the IAM message determine the IMS node corresponding to the LRN in this case I CSCF and may generate and send a SIP INVITE message to I CSCF . MGC may for example obtain additional routing information for I CSCF by performing a DNS or ENUM lookup based on the LRN stored in the CdPN field of the IAM message. In one embodiment MGC may access a database that associates LRN values to IMS node addresses and in this manner an LRN may be translated into a routable IMS address.

In response to the INVITE message I CSCF may query HSS to determine the serving CSCF with which mobile subscriber device is registered and may generate and transmit a SIP INVITE message to S CSCF with which device is registered. S CSCF may then provide call control services for the call. For example S CSCF may route the call through a media gateway not shown in IMS network to reduce toll charges. Thus in one example offloading call control services from a first network of a first type to a second network of a second type may include offloading the call itself to the second network. In other examples the call control services may include advanced call control services that can be provided more efficiently by the second network. For example S CSCF may provide advanced call control services such as call forwarding call waiting presence service prepaid service voice mail service etc. using application server . Any one or more of these or other call control services may be offloaded to the second network of the second type using the methods systems and computer program products described herein.

At MSC an IDP trigger may trigger upon detection of the call attempt by calling mobile subscriber device block . In particular the IDP trigger of MSC may trigger upon receipt of call attempt message containing the calling party identifier of subscriber device . In response to triggering MSC may generate a TCAP InfoAnalyzed query message indicating triggering and detection of a call attempt by calling mobile subscriber device . Query message may be transmitted to STP block .

At STP CCO function detects the call originating from mobile subscriber device based upon query message block . In response to receiving query message that indicates a call originating in GSM network CCO function determines an LRN associated with the calling party identifier of mobile subscriber device . In particular function queries CCO database using information identifying the calling party block . For example function uses the calling party IMSI in query message to perform a lookup in database for a call control offload LRN associated with the calling party IMSI.

Table 1 below shows exemplary entries in a database for associating a subscriber ID with a call control offload LRN.

Returning to the example of STP receiving message calling party IMSI 310150123456789 is contained in message . Function receives the IMSI and queries database using the IMSI. In block function obtains in response to the query routing information for a node in IMS network . In particular function performs a lookup in database using the calling party IMSI to obtain an LRN for I CSCF node . If an entry including the calling party IMSI is found function generates a TCAP AnalyzeRoute response message containing the LRN in the entry. STP may forward message to MSC for offloading call control services for the call to I CSCF node of IMS network block .

In this example of offloading the call control services to I CSCF node MSC generates an ISUP IAM containing LRN x as the called party number the original called party number as the GAP parameter an FCI PNTI parameter set to TRANSLATED and the MSISDN of mobile subscriber device as the calling party number. ISUP IAM is generated in response to receiving response message and serves to offload call control services for the call to IMS network . ISUP IAM is transmitted to a media gateway controller MGC . In response to receiving ISUP IAM MGC generates and transmits a SIP INVITE message to an interrogating call session control function I CSCF node . Message contains the original called party number as to the To parameter and the MSISDN of calling mobile subscriber device as the From parameter. Further MGC uses LRN x to determine the RequestURI parameter address of SIP INVITE message . In one embodiment the RequestURI address may include some or all of the LRN x value. In other embodiments the RequestURI address may be determined by using the LRN x value to access an LRN to IMS node address mapping table or database. In this manner the LRN x value may be translated into a routable IMS network address. I CSCF node manages registration routing and forwarding of SIP messages and charging. I CSCF node queries HSS to determine the location of the S CSCF serving the calling party. In this case S CSCF is assumed to be serving the calling party. Accordingly I CSCF node sends a SIP INVITE message which includes the same or similar content as message to S CSCF . In response to receiving message S CSCF node assumes management of call control services for the call.

An application server AS may host and execute services and interface with the S CSCF function using SIP. In particular for example AS may host and execute services for the call originating from mobile subscriber device . AS may be used as a platform for deploying various services in IMS network and can provide SIP functionality 3GPP AS call control presence information ENUM service prepaid service voice mail service and other services through the use of application programming interfaces APIs . Further AS can operate in SIP proxy mode SIP UA user agent mode or SIP B2BUA back to back user agent mode.

In the LRN used to offload call control services to the IMS network was the LRN of an I CSCF. In an alternate implementation of the subject matter described herein the LRN may correspond to the S CSCF with which mobile subscriber device is registered. is a network diagram illustrating such an embodiment. Referring to a call attempt may be initiated when a user of mobile subscriber device dials a phone number. In response to initiation of the call call attempt message may be transmitted to MSC where an IDP trigger is triggered upon detection of the call attempt. In response to the triggering MSC generates and communicates TCAP InfoAnalyzed query message to STP .

At STP CCO function receives query message . In response to receiving query message CCO function determines whether an LRN associated with the calling party identifier of mobile subscriber device exists in database . In particular function uses the calling party IMSI in query message to perform a lookup in database for a call control offload LRN associated with the calling party IMSI. The LRN may identify a node in IMS network for the offload of call control services for the call.

In one implementation database may include a range based data structure and an exception based data structure. Tables 2 and 3 shown below illustrate examples of a range based data structure and an exception based data structure that may be used to implement database according to an embodiment of the subject matter described herein.

As described above Table 3 includes exceptions to the ranges of numbers provided in the entries of Table 2. In one example an exception may be a number that is within the range but that has a different LRN or routing rule. For example the first entry in Table 3 corresponds to subscriber identifier 310150123456789. This number is within the range of 310150123456000 310150123456999 that corresponds to the first entry in Table 2. However the entries have different LRNs. Thus an exception based table such as that illustrated in Table 3 may be used to flexibly allocate different routing instruction for numbers that are assigned to the associated subscribers. If a received calling party number matches the calling party number in an entry of Table 3 the LRN in the entry of Table 3 is used for insertion into the TCAP response message. For example if the received calling party number is 310150123456789 the exception based lookup results in a match the range based lookup is bypassed and LRN x is used for insertion into the response message. In another example if the received calling party number is 310150123457254 the exception based lookup results in a match the range based lookup is bypassed and LRN y is used for insertion into the response message.

An LRN obtained from Table 2 or Table 3 of database may be inserted in TCAP AnalyzeRoute response message . STP may forward message to MSC for offloading call control services for the call to IMS network . In this example of offloading call control services for the call MSC generates an ISUP IAM directed to S CSCF of IMS network which is associated with LRN x. ISUP IAM is generated in response to receiving response message . ISUP IAM contains routing number LRN x the called phone number and the calling party number. ISUP IAM is transmitted to a media gateway controller MGC . In response to receiving ISUP IAM MGC generates and transmits to S CSCF node a SIP INVITE message containing the called party number and the calling party number. SIP INVITE message is transmitted to S CSCF node . In response to receiving message S CSCF node assumes management of call control services for the call.

As a result of an exception based implementation flexible assignment of 2G subscribers to S CSCF elements or other IMS network elements can be accomplished. Another advantage of an exception based implementation is that signaling messages may be routed directly to the appropriate S CSCF node or another IMS network element in the IMS network without requiring involvement of an I CSCF node.

Any suitable routing node e.g. an STP and signaling gateway call processing node e.g. media gateway controller softswitch gateway tandem office gateway MSC TDM to Packet gateway or stand alone processing platform e.g. service control point application server may include a CCO function in accordance with the subject matter described herein. For example a CCO function may be included in an SS7 IP capable STP routing node or a signaling gateway SG routing node. In one example a suitable system for using an originating party query to offload call control services from a first network of a first type to a second network of a second type according to the subject matter described herein may include an EAGLE STP or an IPSECURE GATEWAY both commercially available from Tekelec of Morrisville N.C. .

Each module and may include an application processor and a communication processor. The communication processor may control communication with other modules via IMT bus . The application processor on each module may execute the applications or functions that reside on each module. For example the application processor on DSM may execute software that implements CCO function . Similarly the application processor on LIM may execute software that implements a screening function for determining whether messages should be forwarded to DSM for application to a CCO function.

LIM may include an SS7 MTP level 1 function an SS7 MTP level 2 function an I O buffer a gateway screening GWS function an SS7 MTP level 3 message handling and discrimination HMDC function including an application screening function a message routing function and a message handling and distribution HMDT function . MTP level 1 function sends and receives digital data over a particular physical interface. MTP level 2 function provides error detection error correction and sequenced delivery of SS7 message packets. I O buffer provides temporary buffering of incoming and outgoing signaling messages.

GWS function examines received message packets and determines whether the message packets should be allowed in routing node for processing and or routing. HMDC function performs discrimination operations which may include determining whether the received message packet requires processing by an internal processing subsystem or is simply to be through switched i.e. routed on to another node in the network . Messages that are permitted to enter routing node may be routed to other communications modules in the system or distributed to an application engine or processing module via IMT bus . Routing function may route received messages that are identified by HMDC function as requiring routing to the appropriate LIM associated with the message destination. Exemplary routing criteria that may be used by routing function to route messages include destination point code DPC origination point code OPC circuit identifier code CIC service indicator SI inbound linkset or any combination thereof. HMDT function distributes messages identified by HMDC function as requiring further processing to the appropriate processing module within routing node for providing the processing.

Application screening function may examine received message packets and determine whether the message packets should be forwarded to DSM for application to CCO function . For example application screening function may determine whether a received message packet is a TCAP InfoAnalyzed query message. In another example application screening function may be omitted and HMDC function may forward all messages addressed to the point code of routing node to DSM for further processing. If it is determined that the received message should be forwarded to DSM the message is forwarded to DSM for processing by CCO function . If it is determined that the received message should not be forwarded to DSM the message will be routed by routing node without being processed by CCO function . For example HMDC function may forward messages that are not addressed to the point code of routing node to routing function and routing function may route such messages to the LIM of DCM associated with the outbound signaling link.

DCM includes functionality for sending and receiving SS7 messages over IP signaling links. In the illustrated example DCM includes a physical layer function a network layer function a transport layer function an adaptation layer function and functions and described above with regard to LIM . Physical layer function performs open systems interconnect OSI physical layer operations such as transmitting messages over an underlying electrical or optical interface. In one example physical layer function may be implemented using Ethernet. Network layer function performs operations such as routing messages to other network nodes. In one implementation network layer function may implement Internet protocol. Transport layer function implements OSI transport layer operations such as providing connection oriented transport between network nodes providing connectionless transport between network nodes or providing stream oriented transport between network nodes. Transport layer function may be implemented using any suitable transport layer protocol such as stream control transmission protocol SCTP transmission control protocol TCP or user datagram protocol UDP . Adaptation layer function performs operations for sending and receiving SS7 messages over IP transport. Adaptation layer function may be implemented using any suitable IETF or other adaptation layer protocol. Examples of suitable protocols include MTP level 2 user peer to peer adaptation layer M2PA MTP level 3 user adaptation layer M3UA and or signaling connection control part SCCO user adaptation layer SUA . Functions and perform the same operations as the corresponding components described above with regard to LIM .

DSM receives messages identified as requiring to CCO function . In one embodiment function determines a call control offload LRN associated with the calling party number in a received TCAP InfoAnalyzed query message. In particular function may use the calling party number in the received message to perform a lookup in database for a call control LRN associated with the calling party number. The call control LRN associated with the calling party number in the received message is inserted into a TCAP response message associated with the received message. After insertion of the call control offload LRN the message can be forwarded to a routing function for routing to LIM via IMT bus . If no call control offload LRN is found that is associated with the calling party number then no LRN is inserted in the response message. LIM may then forward the response message to the MSC that originated the query message.

Offloading call control to another network may include routing at least a portion of the call over an alternate and possibly less expensive media path. is a network diagram illustrating the same components illustrated in for offloading call control and also illustrating media path components for routing at least a portion of the media path over an alternate network. Referring to a call attempt may be initiated when a user of mobile subscriber device dials a phone number of PSTN phone . In response to initiation of the call a call attempt message may be transmitted to a serving MSC where an IDP trigger is triggered upon detection of the call attempt. MSC may generate and communicate a TCAP InfoAnalyzed query message to STP which includes CCO function COO database and may also include an ENUM database for translating E.164 formatted numbers to URIs. The query message includes the calling party number of mobile subscriber device .

At STP CCO function detects the call originating from mobile subscriber device based upon the received query message. In response to receiving the query message CCO function determines a call control offload routing number associated with the identifier of mobile subscriber device . In particular function may use a calling party IMSI in the query message to perform a lookup in CCO database for a routing number associated with the calling party IMSI. The routing number obtained from database based on the lookup may be inserted in a TCAP AnalyzeRoute response message. STP may forward the response message to MSC for offloading call control services for the call to IMS network .

In this example of offloading call control services for the call MSC generates an ISUP IAM containing the routing number corresponding to a node in the IMS network. The ISUP IAM is generated in response to receiving the TCAP AnalyzeRoute response message. In one example the ISUP IAM contains the routing number the called phone number and the calling party number. Further the ISUP IAM is transmitted to MGC . In response to receiving the ISUP IAM MGC generates and transmits to I CSCF node a SIP INVITE message containing the original called party number and the calling party number. In response to receiving the SIP INVITE message I CSCF node and its associated service location function SLF queries HSS to determine the S CSCF serving the subscriber. In this example S CSCF is identified. S CSCF directs MGC to establish a media trunk between MGW and terminating end office switch and another media trunk between serving MSC and media gateway by sending a SIP INVITE message to MGC . In response to the INVITE message MGC instructs MGW to create the appropriate media connections. Thus in the example illustrated in call control services are offloaded to the IMS network and the IMS network routes a call with a 2G wireless origination and a PSTN termination over IP media trunks.

As an alternate method for illustrating call control offload functionality according to an embodiment of the subject matter described herein is a message flow diagram of an exemplary exchange of messages among mobile subscriber device serving MSC CCO function MGC and the IMS network components and . In this example a calling party inputs information into mobile subscriber device for calling a called party. Initially in step 1 call origination is detected by MSC which causes an IDP trigger to be activated. In response to triggering in step 2 MSC transmits to CCO function a TCAP AnalyzeRoute query message including an identifier for calling mobile subscriber device and an identifier for the called party.

CCO function determines a routing number associated with the calling party identifier. In step 3 function transmits to MSC a TCAP AnalyzeRoute response message including the routing number. In step 4 MSC transmits to MGC an ISUP IAM message contains the routing number the called phone number and the calling party number. In step 5 MGC transmits to one of IMS network components and a SIP INVITE message containing the called party number and the calling party number for offloading call control services to the IMS network.

In an alternate implementation of the subject matter described herein MGC may maintain a database for mapping the LRN to an I CSCF node. is a network diagram illustrating such an embodiment. Referring to a call attempt may be initiated when a user of calling mobile subscriber device dials a phone number. In response to initiation of the call call attempt message may be transmitted to MSC where an IDP trigger is triggered upon detection of the call attempt. In response to the triggering MSC generates and communicates TCAP InfoAnalyzed query message to STP .

At STP CCO function receives query message . In response to receiving query message CCO function determines whether an LRN associated with the identifier of calling mobile subscriber device exists in database . In particular function uses the calling party IMSI in query message to perform a lookup in database for a call control offload LRN associated with the calling party IMSI. The LRN may identify a node in IMS network for the offload of call control services for the call.

An LRN obtained from database may be inserted in TCAP AnalyzeRoute response message . STP may forward message to MSC for offloading call control services for the call to IMS network . In this example of offloading call control services for the call MSC generates an ISUP IAM directed to I CSCF which is associated with LRN x. ISUP IAM is generated in response to receiving response message . ISUP IAM contains routing number LRN x the called phone number and the calling party number. ISUP IAM is transmitted to MGC . In response to receiving ISUP IAM MGC generates and transmits to I CSCF node a SIP INVITE message containing the called party number and the calling party number. Further SIP INVITE message includes a RequestURI set to address ICSCF vzw.com which corresponds to I CSCF . MGC maintains a table that maps the LRN to an I CSCF URI. In this example LRN x contained in ISUP IAM is mapped to the I CSCF URI ICSCF vzw.com. SIP INVITE message is transmitted to I CSCF which in turn routes SIP INVITE to S CSCF node . In response to receiving message S CSCF node assumes management of call control services for the call.

In another implementation of the subject matter described herein MGC may append domain name information to an LRN to generate a routable URI address for routing a SIP INVITE message to an I CSCF node. is a network diagram illustrating such an embodiment. Referring to ISUP IAM containing LRN x is received at MGC . In this example the domain name information vzw.com is appended to LRNx to obtain a RequestURI for specifying I CSCF . MGC generates SIP INVITE containing the RequestURI and send SIP INVITE to I CSCF using the RequestURI.

In another example of appending domain name information to an LRN to generate a routable URI address the LRN may be a telephone number to which the domain name information is appended. For example the LRN may be 9195551000. The domain name information may be attached. In one example LRN 9195551000 can become 9195551000 verizonwirelessCSCF.com when the domain name is appended thereto. This URI may be inserted in the Request URI parameter of the SIP INVITE message generated by the MGC. Next the SIP INVITE message can be routed to the I CSCF associated with the Request URI.

In yet another implementation of the subject matter described herein CCO database is adapted to maintain data which maps a calling party identifier to a routing address e.g. LRN entity address MSC address etc. associated with an S CSCF. is a network diagram illustrating such an embodiment. In this example a call attempt is initiated when a user of calling mobile subscriber device dials a phone number. In response to initiation of the call call attempt message may be transmitted to MSC where an IDP trigger is triggered upon detection of the call attempt. In response to the triggering MSC generates and communicates TCAP InfoAnalyzed query message to STP .

At STP CCO function receives query message . In response to receiving query message CCO function determines whether an LRN associated with the identifier of calling mobile subscriber device exists in database . In particular function uses the calling party IMSI in query message to perform a lookup in database for a call control offload LRN associated with the calling party IMSI. In this case the returned LRN x identifies the S CSCF node in IMS network to which the calling mobile subscriber is assigned.

The LRN x obtained from database is inserted in TCAP AnalyzeRoute response message . STP forwards message to MSC for offloading call control services for the call to IMS network . MSC generates an ISUP IAM directed to MGC . ISUP IAM is generated in response to receiving response message . ISUP IAM contains routing number LRN x the called phone number and the calling party number. ISUP IAM is transmitted to MGC . In response to receiving ISUP IAM MGC generates and transmits to S CSCF node a SIP INVITE message containing the called party number and the calling party number. Further MGC maintains a table that maps the LRN x to an S CSCF URI. In this example LRN x contained in ISUP IAM is mapped to the S CSCF URI SCSCF vzw.com. SIP INVITE message includes a RequestURI set to address SCSCF vzw.com which corresponds to S CSCF . SIP INVITE message is transmitted to S CSCF using the address specified in the RequestURI. In response to receiving message S CSCF node assumes management of call control services for the call.

In one embodiment HSS may be operable to provision database of STP with data that associates calling party numbers with their corresponding S CSCF nodes. Such data may alternatively be provisioned by any other suitable IMS network administration center. In this manner the LRN returned by a lookup in database directly identifies the corresponding S CSCF thereby allowing the SIP INVITE message to be routed directly to the S CSCF. Further in this manner the I CSCF may be effectively shielded from traffic thereby minimizing I CSCF resource use.

In yet another implementation of the subject matter described herein MGC may append domain name information to an LRN to generate a routable URI address for routing a SIP INVITE message to the S CSCF with which mobile subscriber is registered. is a network diagram illustrating such an embodiment. Referring to ISUP IAM containing LRN x is received at MGC . In this example the domain name information vzw.com is appended to LRNx to obtain a RequestURI for specifying S CSCF which corresponds to mobile device . MGC generates SIP INVITE containing the RequestURI and send SIP INVITE to S CSCF using the RequestURI.

In yet another embodiment of the present invention a CCO database may be co located with or integrated with a number portability database e.g. mobile number portability database local number portability database service provider portability database and geographic number portability database . The associated CCO function is adapted to access both the number portability data and call control offload data. In one embodiment the CCO function may receive a query such as a TCAP query that contains both called party identifier and calling party identifier information. The CCO function is adapted to use the called party identifier information to perform a number portability lookup in the number portability database and to use the calling party identifier information to perform a call control offload lookup in the call control offload database. The number portability database lookup using the called party identifier information may yield a number portability LRN value while the call control offload database lookup using the calling party identifier information may yield a call control offload LRN value. The CCO function may respond to the TCAP query originator with a single response message which includes both the number portability and call control offload LRN values. Alternatively the CCO function may respond to the query originator with multiple response messages that convey the LRN information.

In an alternate embodiment the CCO function may receive separate queries for number portability service and call control offload service. In this case the number portability query includes called party identifier information while the call control offload query includes calling party identifier information. The CCO function is adapted to use the called party identifier information to perform a number portability lookup in the number portability database and to use the calling party identifier information to perform a call control offload lookup in the call control offload database. The number portability database lookup using the called party identifier information may yield a number portability LRN value while the call control offload database lookup using the calling party identifier information may yield a call control offload LRN value. The CCO function may respond to the TCAP query originator with either a single response message which includes both the number portability and call control offload LRN values or with a separate number portability response message which includes the number portability LRN value and a separate call control offload response message which includes the call control offload LRN value .

It will be understood that various details of the presently disclosed subject matter may be changed without departing from the scope of the presently disclosed subject matter. Furthermore the foregoing description is for the purpose of illustration only and not for the purpose of limitation.

