---

title: Electronic navigation system and method
abstract: The invention provides a system for providing geographic information. The system includes a base unit that receives a request from a mobile unit and provides a response to the mobile unit. The request includes a point of interest category and a traveling distance or traveling time parameter. The base unit identifies a point of interest that matches the point of interest category and satisfies the traveling distance or traveling time parameter. The response from the base unit to the mobile unit provides the identified point of interest.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08325064&OS=08325064&RS=08325064
owner: Navteq B.V.
number: 08325064
owner_city: Veldhoven
owner_country: NL
publication_date: 20071030
---
This application is a continuation in part of U.S. patent application Ser. No. 08 265 094 filed on Jun. 24 1994 by David A. Behr and Randall B. Jones entitled Computerized Navigation System. The entire contents of the Ser. No. 08 265 094 application is incorporated herein by reference.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

The present application is a continuation of Ser. No. 11 260 042 filed Oct. 27 2005 now U.S. Pat. No. 7 432 830 which was a continuation of Ser. No. 10 325 797 filed Dec. 20 2002 now U.S. Pat. No. 7 049 981 which was a divisional of Ser. No. 09 572 877 filed May 18 2000 now U.S. Pat. No. 6 614 363 which was a continuation of Ser. No. 09 151 255 filed Sep. 10 1998 now U.S. Pat. No. 6 107 944 which was a continuation of Ser. No. 08 494 198 filed Jun. 23 1995 now U.S. Pat. No. 5 808 566 which was a continuation in part of Ser. No. 08 265 094 filed Jun. 24 1994 now U.S. Pat. No. 5 543 789.

Included with this specification is a CD ROM appendix that includes source code that was previously provided in a microfiche appendix in the parent application s . The CD ROM contains a file entitled APPENDIX.txt having a size of 352 kilobytes created on Oct. 27 2005.

The invention relates generally to a system and method for providing route guidance and tracking information and other information from a base unit to a mobile unit over wireless wireline or optical devices. The invention more particularly relates to an apparatus and method for providing to a mobile unit route guidance and tracking information and other information which has been calculated and or stored at a base unit in response to a query from the mobile unit.

Systems have already been developed which provide geographical or position dependent information to a mobile user. Such systems are generally installed in an automobile or other vehicle. These systems generally include an on board geographic database which may be accessed to determine geographic information such as locations of points of interest directions to points of interest and directions between a specified origin and a destination. An on board computer calculates route guidance information using data from the database in response to user inputs.

Such systems are known as autonomous route guidance systems since they are independent and self contained. The systems generally include a geographic database positioning sensors and a computer including a keyboard and display. The geographic database is a representation of a region or metropolitan area and may include for example street names navigation attributes such as turn restrictions and one way streets street addresses and points of interest such as airports restaurants and museums. The positioning sensors may determine geographic position from RF Radio Frequency triangulation or in response to signals from for example GPS Global Positioning System LORAN C or other similar positioning systems and from motion and direction detectors. The computer calculates route guidance information in response to inputs from the other system components as well as from operator input. The route guidance information is provided to the user in the form of navigational text or map graphics.

Autonomous route guidance systems have many drawbacks however which have prevented their widespread use. Because the system is autonomous and has an on board database the system must include large storage capabilities for storing all of the data which form the database. Technologies such as CD ROM have allowed storage of an entire database but require still a tradeoff between cost and fast efficient data access.

Another problem with autonomous route guidance systems is maintenance and currency of the database. As new streets are built or as old streets are reconfigured as businesses and other points of interest open and close the database on CD ROM or other media becomes out of date. In addition when a database is compiled it may include errors which are then replicated in the many copies provided to users. These errors may require correction in the user copies by replacing those database copies. Moreover incorrect or outdated information in the database can lead to errors when calculating routes. When an out of date database does not include the information that a particular roadway is closed the system may be unable to calculate an alternate route.

Autonomous route guidance system providers may improve the accuracy of the system by providing occasional database updates to users. However distribution of the database in a medium such as CD ROM or floppy disk to remotely located mobile users may be difficult. In addition the media themselves are expensive since they may generally be used only a single time.

Other aspects of such prior art autonomous route guidance systems add to their cost and inconvenience. Because the systems are autonomous they must include all components including the computer the database and the position sensor. Using present technology such a system is too heavy and too large to be readily transported by an individual. In addition the complete system has power requirements which make battery operation impractical. As a result autonomous route guidance systems have been limited to installation in automobiles or other vehicles which can accommodate the size and power requirements of such a system. The current best price for a complete autonomous route guidance system is substantial. This includes only the cost for a single dedicated autonomous route guidance system.

Another type of route guidance system has been tested in Europe using beacons to provide a guidance signal to on board equipment. The system directs the user to travel from beacon to beacon creating a step wise path between an origin and a destination because of the fixed locations of the beacons. The navigational information thus provided forms a generally inefficient routing path from origin to destination. In addition such a system does not provide the capability to query a database for information about nearby points of interest and other geographical information.

Therefore there is a need for a routing and information system that continually provides access to up to date correct geographic information by a remote user. There is a further need for a routing and information system which can be implemented on lightweight portable devices for easy convenient transportation and use. There is a further need for a routing and information system which is independent of any particular hardware configuration and which may be implemented on any suitably equipped data processing apparatus such as a desktop personal computer a laptop computer a personal digital assistant or even a pager. There is a further need for a routing and information system which provides communication between mobile units and a base unit over any available channel including wireless wireline and optical channels. There is a still further need for a data communication protocol for providing accurate reliable communication in such a system independent of hardware configuration and in a compact form.

An object of the invention is to provide a method and system for transmitting route guidance and other information from a base unit to a remote unit in a compact form.

Another object of the invention is to provide a method and system for transmitting route guidance and other information from a base unit to a remote unit in a language independent form such that the remote unit can provide the information to a user in any language or form desired by the user at the remote unit.

Another object of the invention is to provide a method and system for transmitting route guidance and other information from a base unit to a remote unit in which the amount of information available at a remote unit can be expanded by providing the remote unit with information from the base unit which is not adequately covered by any databases on board the remote unit.

The invention provides a method and system for providing route guidance and other information from a base unit to a remote unit in response to a request from the remote unit. A query is formatted at the remote unit the query including the request and is transmitted from the remote unit to the base unit. Requested route guidance information is calculated at the base unit in response to the query using a large up to date database located at the base unit. A response to the query is formatted at the base unit the response including route guidance information. The response is then transmitted from the base unit to the remote unit for display.

The transmission is made in a compact form through the use of maneuver arms and combined maneuver arms and through the use of tokenized forms. These tokenized forms represent a large amount of textual information by one or several alphanumeric characters.

A maneuver arm represents a road at an intersection for depiction on a display by one or two endpoint coordinates. If two intersections are sufficiently close together a first set of maneuver arms for one intersection and a second set of maneuver arms for the other intersection are combined to produce a combined set of endpoints for transmission in a compact form to depict the first set of maneuver arms and the second set of maneuver arms on a common display.

The tokenized forms are expanded at the remote unit into textual driving instructions for each of one or more languages. In addition the amount of information available at a remote unit can be increased by providing the remote unit with information from the base unit which is not adequately covered by any databases on board the remote unit.

Other objects features and advantages of the invention will be apparent from the detailed description set forth below.

The invention provides a method of providing route guidance information and other information from a base unit to a mobile unit in response to a request from the mobile unit. The method comprises the steps of formatting a query at the mobile unit the query including the request communicating the query from the mobile unit to the base unit and calculating route guidance information at the base unit in response to the query. The method further comprises the steps of formatting a response to the query at the base unit the response including route guidance information and communicating the response from the base unit to the mobile unit. The guidance information may include navigation instructions from an origin to a destination information about one or more points of interest within a particular region or other geographically referenced information.

The invention further provides a system for communicating routing information between a base unit and a mobile unit. The system comprises an input means at the mobile unit for providing an origin and a destination. The system further comprises a calculating means at the base unit for calculating a route between the origin and the destination. The system still further comprises communication means for communicating the origin and the destination from the mobile unit to the base unit and for communicating the route from the base unit to the mobile unit. The routing information may include navigation instructions from an origin to a destination information about one or more points of interest within a particular region or other geographically referenced information.

The invention still further provides a method of providing routing information to a mobile unit. The method comprises the steps of providing an origin and a destination from the mobile unit to a base unit the base unit located remotely from the mobile unit. The method further comprises the steps of calculating at the base unit a route between the origin and the destination and providing the route to the mobile unit.

The invention still further provides a system for providing route guidance information to a remote location from a central location. The system comprises a mobile unit including an input means for providing at least a route destination and an output means for providing an indication of the route guidance information. The system further comprises a first transmission means at the mobile unit for transmitting destination data and origin data from the mobile unit the destination data being indicative of a route destination and the origin data being indicative of a route origin. The system still further comprises a base unit at the central location. The base unit includes a first receiving means for receiving the destination data and the origin data from the first transmission means a calculating means coupled with the receiving means for calculating a route to the route destination from a route origin responsive to the destination data and the origin data and a second transmission means for transmitting routing data the routing data being indicative of the route. The system still further comprises a second receiving means at the mobile unit for receiving the routing data from the second transmission means the second receiving means being coupled with the output means for providing the route guidance information to the input means responsive to the routing data.

The invention also provides a system and method for providing geographically referenced information from a base unit or server to a mobile unit. The mobile unit may be a transportable device such as a laptop computer or personal digital assistant PDA or may be a desktop personal computer or any other device permitting data entry and display printing or sounding of the provided information.

The mobile unit communicates with the base unit using any available communication system such as land line telephone link cellular telephone or radio frequency transmission. Queries are communicated from the mobile unit to the base unit. The query requests route guidance information information about a point of interest or other geographical information. The query is formatted in a specified protocol. The base unit communicates responses to queries the responses also being formatted in a specified protocol. The responses may include for example textual navigational directions and or maneuver arms showing graphical representations of street intersections and the calculated route through the intersection. Transmitting only a representation of the intersection rather than all geographical features around the intersection allows the response including the maneuver arms to be transmitted over a low bandwidth channel. The invention operates independently of the communication system and is adaptable to any system. The invention allows support for many different mobile unit platforms taking advantage of each platform s capabilities while retaining as much system level look and feel consistency as possible.

The base unit includes a geographical database such as the Navigation Technologies Corp. navigable map database. The geographical database stores a variety of geographical and position oriented attributes such as street addresses turn restrictions and points of interest. The points of interest are preferably organized according to different parameters including point of interest type such as restaurant or museum point of interest name city driving distance and or driving time. The base unit further includes a server for receiving queries from one or more mobile units resolving ambiguities in the queries determining a response to a query and accessing the geographical database as needed. The server formats a response to the query and communicates the response to the mobile unit.

In a first mode of operation an origin and a destination are entered at the mobile unit. The origin and or the destination may be in the form of a street address an intersection of two streets or a point of interest previously identified in the geographical database. The origin and destination are communicated from the mobile unit to the base unit. The base unit calculates a route between the specified origin and destination. The routing information is communicated from the base unit to the mobile unit where it is displayed by the mobile unit. The display can be a graphical display showing map portions and providing travel directions along with a display of highway signs and other information. The display can include textual information providing travel directions. The mobile unit may supply a digitally synthesized voice which audibly presents the travel directions to the user. In some applications the display is stylized to display additional information to the user or to display information in a more realistic or more informative form. For example the display can indicate in graphical form whether an on or off ramp is a tight or gentle turn by displaying stylized ramps. Shapepoints that is points which more accurately depict the physical shape of a road can be generated either by the base unit or by a remote unit.

In a second mode of operation the mobile unit formulates a query requesting information about points of interest within a specified distance of an origin. The origin may be specified by street address intersecting streets by geographic position or by reference to a point of interest. The query is communicated from the mobile unit to the base unit. The base unit uses the geographical database to formulate a response. The response is communicated from the base unit to the mobile unit for display to the user.

In a third mode of operation a mobile unit provides information specifying its location to the base unit. A control unit requests tracking information about the mobile unit from the base unit. The control unit may be for example another personal computer coupled to the base unit through an external interface either directly or through a communications network. The base unit provides to the control unit tracking information including the current location of the mobile unit with respect to the street network and the route covered by the mobile unit.

The invention further provides a protocol for communicating a query from the mobile unit to the base unit and for communicating a response from the base unit to the mobile unit. The protocol allows transmission of variable length messages as required by the individual mobile unit or communication link. The protocol includes error checking time stamping and subscriber information. The protocol further includes information specifying origin and destination for a query and message type and message contents such as route information for a response.

The invention thus provides geographically referenced information from a base unit to a mobile unit the mobile unit needing only data entry and display devices and a communications link. An advantage of the invention is that the invention provides this capability in a mobile unit which does not require on board database storage or position finding equipment at the mobile unit. A further advantage of the invention is that the invention provides a mobile unit with access to a larger more comprehensive database. For example prior art CD ROM based databases are limited to 600 MB of storage which may be sufficient to store map information for only a single metropolitan region. In contrast the invention allows the mobile unit to access map information for many metropolitan regions or an entire nation as well as other information such as on line yellow page information or news weather and or traffic advisory information which may be provided by third party information providers. Such information can be provided on a geographic specific basis. A still further advantage of the invention is that the invention permits automatic real time database updates by maintaining the database only at the base unit avoiding the need to distribute database updates to the mobile units.

A further advantage of the invention is that the invention provides a method for communicating requests for routing information and responses including routing information in which the method is independent of specific hardware. A further advantage of the invention is providing a system which can be implemented using any commonly available hardware devices including laptop computers personal digital assistants and other transportable units communicating via wireless wireline and or optical systems.

A still further advantage of the invention is efficiently conveying complex information including graphical information over communication channels having a limited bandwidth using data compression and a novel protocol to be described in detail below. This allows a system in accordance with the invention to dynamically transmit selected map portions for display on a capable mobile unit. The geographical information may be saved at the mobile unit for later retrieval and display without having to again access the base unit.

The plurality of remote units may include any number of mobile units. The base unit is preferably located at a single central location. One remote unit may be permanently located at a single site such as desktop personal computer . Another remote unit may be mobile or transportable such as laptop personal computer or pager . As used herein the term mobile unit includes both remote units which may be permanently located at a single site and remote units which are mobile or transportable.

Communications between the base unit and the remote units are packetized. A packet contains one or more messages.

The desktop personal computer is an example of one type of mobile unit which may be included in the system . The desktop personal computer preferably includes a modem a memory a keyboard a display and a microprocessor . The modem is adapted to be coupled to a telephone line . The telephone line is in turn coupled to the commercial telephone system . The modem may be for example a serial dial up line modem such as a modem compatible with an AT command set which is built into the desktop personal computer a stand alone modem or a PCMCIA modem. Alternatively the modem may be for use with a specialty wireless transmission network such as ARDIS CDPD cellular digital packet data or RAM. Still further the modem may be of a type custom designed for the desktop personal computer . The modem forms a transmission means at the mobile unit for transmitting the origin and the destination and a receiving means at the mobile unit for receiving the responses including the route from the base unit .

The microprocessor responds to program instructions and data stored in the memory . To activate the system a user manipulates the keyboard to formulate a request. The request may for example seek the route between an origin and a destination. The keyboard thus provides an input means at the mobile unit for providing an origin and a destination. The desktop PC under control of a program of instructions stored in the memory conveys the request over the telephone line to the base unit . The base unit formulates a response to the request and conveys the response over the telephone line to the desktop PC . The response to the request is displayed on the display . The display thus forms an output means at the mobile unit for providing an indication of the route provided in the response. In addition the response may be stored in the memory for later retrieval and display. The memory thus provides a storage means at the mobile unit for storing the route communicated from the base unit.

The laptop personal computer is another example of a mobile unit which can be used in the system . The laptop PC includes a modem a memory a position locator a keyboard a display and a microprocessor . The modem is coupled to an antenna for sending and receiving cellular telephone calls in conjunction with the cellular telephone system which is a portion of the commercial telephone system . The modem may be for example any of the modem types described in conjunction with the modem of the desktop personal computer .

The microprocessor operates in response to program instructions and data stored in the memory . The position locator provides the geographical position of the laptop PC . For example the position indicator may perform radio frequency RF triangulation or may be responsive to GPS Global Positioning System LORAN C signals or other satellite positioning systems for providing latitude and longitude positioning information. The position locator thus provides a position determining means for determining the geographical position of the mobile unit. The laptop PC in response to the program instructions stored in the memory provides a request over the commercial telephone system to the base unit . The request may be for example for the route between an origin and a destination. The origin may be specified either by manipulating the keyboard or by providing the latitude and longitude information produced by the position locator . The base unit provides a response to the request to the laptop PC . The response is displayed on the display .

The pager provides another example of a remote unit which can be used in the system . The pager includes an RF interface coupled to an antenna for receiving RF signals from an antenna coupled to the base unit . The pager further includes a microprocessor responsive to program instructions and data stored in a memory . In response to information transmitted from the base unit and received at the antenna the microprocessor displays information such as geographical directions on a display .

In another mode of operation one mobile unit such as the desktop personal computer may track another mobile unit such as the laptop personal computer using the system . A user of the desktop personal computer may manipulate the keyboard to request route guidance information such as tracking information. The request is transmitted over the telephone line to the base unit . The base unit formulates a response based on the geographic position information provided by the position locator of the laptop PC . The response is transmitted over the telephone line to the desktop personal computer for display on the display .

Thus the system provides geo referenced information over for example wireless and wireline devices to mobile and remote users. It is understood that the communications technologies and the mobile units illustrated in may be combined in ways other than those illustrated in . For example the desktop personal computer may include an RF interface such as the RF interface of the pager . Similarly the modem of the laptop PC may be adapted for coupling directly to a telephone line such as telephone line . In addition other types of mobile units such as personal digital assistants PDAs may be included in the system . Moreover mobile units may access the base unit indirectly by communicating directly with a third party information provider such as Prodigy which in turn conveys queries to and responses from the base unit . In accordance with the invention the invention operates independently of particular hardware configurations of the plurality of remote units and of the communications system.

The base unit includes an I O interface a query resolver a route calculator a distance and time travel estimator a surroundings explorer a map database an on line traffic and map updater U and a third party data integrator . The I O interface includes a telephone interface for coupling the base unit to the commercial telephone system including the telephone line . The I O interface further includes an RF interface for coupling the base unit with RF communication devices such as an antenna . The I O interface and the modem thus provide a communication means for communicating an origin and a destination from the desktop personal computer to the base unit and for communicating a route from the base unit to the desktop personal computer . The I O interface the modem and the antenna provide a communication means for communicating the origin and the destination from the laptop personal computer to the base unit and for communicating the route from the base unit to the laptop personal computer .

The I O interface may further include a network interface for coupling the base unit to one or more wireless or wireline communication networks such as CDPD cellular digital packet data TCP IP transmission control protocol Internet protocol ARDIS or RAM. The I O interface may further include an external interface for coupling the base unit to a control unit . The control unit provides an external link to the base unit and may be for example a personal computer coupled over a wireless or wireline network or a directly connected terminal. The control unit may include for example a keyboard and a display . The control unit may request tracking information about the location of one or more mobile units. For example a mobile unit may be located in an armored vehicle transporting valuables along a specified route. The control unit may receive tracking information from the base unit and if the mobile unit in the armored vehicle varies from the specified route by a predetermined amount sound an alarm or trigger some other action.

The I O interface including the telephone interface and the RF interface provide a means for coupling the base unit with communications media such as the commercial telephone system and other wireline and wireless devices. The I O interface thus receives queries from the plurality of remote units and transmits the responses from the base unit to the plurality of remote units. The I O interface therefore provides a receiving means at the base unit for receiving the origin and destination and a transmitting means at the base unit for transmitting the route to a mobile unit.

The query resolver receives the request from the I O interface . When a request is entered at one of the plurality of remote units a mistake may be made. For example in manipulating the keyboard of the laptop personal computer the user may have entered O HAIR intending to enter O HARE indicating O Hare Airport. Other ambiguities may be in the format of the address provided in the latitude and longitude of the position provided or in the definition of cross streets. The function of the query resolver is to resolve such ambiguities in the query at the base unit and convey the query for further processing.

After the query resolver the query is routed to the route calculator . In a manner well known in the art the route calculator determines a route between a specified origin and destination using the map database . The map database may be for example the navigable map database maintained by Navigation Technologies Corp. The map database preferably includes an accurate complete and up to date representation of geographic information such as addresses street names navigation attributes including turn restrictions one way streets physical dividers relative heights freeway sign text and so forth as well as point of interest categories such as parks schools hospitals restaurants and golf courses associated with the geographic information. The on line traffic and map updater U receives updating information from map database vendor s and traffic information providers and maintains map database current.

In determining the route the route calculator preferably takes into account routing restrictions such as toll road avoidance turn restrictions at a specified time of day and other restrictions. Such routing restrictions may be specified by an operator at the base unit in response to a temporary condition or may be added to the map database when the restrictions become nationally available. The route calculator thus forms a calculating means at the base unit for calculating a route between the origin and the destination. The map database may be divided into geographic areas such as metropolitan areas. Providing the route calculation function in the base unit reduces the data storage and data processing requirements for the remote units. In certain applications however it may be desirable to provide the remote units with a limited route calculation function.

After a route has been calculated the route is conveyed from the route calculator to the I O interface . The I O interface formats a response to the query. The response includes the route guidance information determined by the route calculator . The I O interface then communicates the response from the base unit to the mobile unit which originally requested the information.

If the query requests a distance or a time of travel the query is forwarded to the distance and time travel estimator . The distance and time travel estimator in response to the query and using the map database formulates a response to the query. The response is conveyed from the distance and time travel estimator to the I O interface . The response is formatted at the I O interface and communicated from the base unit to the mobile unit which originally requested the information.

If the query requests information about points of interest in the area surrounding an origin the query is conveyed to the surroundings explorer . The surroundings explorer provides an optimized method for searching for points of interest satisfying specified criteria or parameters such as time or distance. For example the surroundings explorer may locate all McDonald s restaurants within a specified driving distance or driving time of a specified origin or it may locate the McDonald s restaurant nearest the specified origin. The origin and search parameters are specified in the query received from the mobile unit. In response to the query the surroundings explorer accesses the map database and searches outward from the specified origin. The surroundings explorer analyzes paths in the map database over which a mobile unit in a car for example could legitimately travel. The surroundings explorer examines the associated point of interest information for entries satisfying the specified search parameters. The surroundings explorer thus determines which points of interest satisfy the query. The information is then conveyed from the surroundings explorer to the I O interface and a response is formatted. The response is then communicated from the base unit to the remote unit which requested the information.

The third party data integrator provides additional data such as on line yellow pages information or news weather and or traffic advisory information for responding to queries from a mobile unit. The additional data are preferably received from other information providers illustrated in as functional block . The additional data may also be added directly to and located within the map database . The additional data may be supplied external to the base unit via any known data communications network.

The functions performed by the base unit as described above and illustrated in the functional block diagram of are performed in a data processing system. The data processing system may be in one or more units and include a processor for executing program instructions a memory for storage of the program instructions and data such as the map database . The data processing system further includes other equipment such as digital logic for implementing the I O interface for receiving queries and sending responses. The data processing system may include a display and a keyboard as an operator interface.

The method continues at step in which a query is formatted at the remote unit. The query is formatted in accordance with the protocol of the invention to be described in further detail below in conjunction with . The query comprises a serial stream of data and control bits. The control bits for example identify the remote user originating the query. The data bits specify the precise request being made of the base unit. For example the data bits may specify an origin point and a destination point from which the route calculator of the base unit is to calculate the route. Certain communications transport protocols specific to the particular hardware implementation of the system may prepend or append characters or other control bits to the control and data bits which form the query. For example the modem of the desktop PC may include handshaking bits or signals to be used by the telephone interface of the base unit for processing the query. At step the query is transmitted from the mobile unit to the base unit .

The method continues at step where ambiguities in the query are resolved by the query resolver . Ambiguities may be in the form of spelling errors in the identification of an origin or a destination an inconsistent latitude or longitude specification and the like. At step if the query resolver cannot resolve the ambiguity an error message may be communicated from the base unit to the remote unit at step and the query must be repeated.

The method continues at step where the query type is identified. The query may be one of several different types including a route query a point of interest query a language query or a metro area query. A route query asks the base unit to identify a route between a specified origin point and a specified destination point. A route query includes the origin and the destination. A point of interest query requests a list of points of interest which satisfy specified criteria. For example a point of interest query might request a list of all restaurants of a specific type such as McDonald s within a specified distance or a specified driving time of a specified origin. A language query requests a list of available languages for display of information at the mobile unit or specifies the language such as English or Dutch in which the routing information is to be displayed at the remote unit. Such language queries are not needed if the language independent mode to be described below is being used. A metro area query requests a list of available metropolitan areas or specifies the metropolitan area within the map database to be used for responding to the query. For example a query which has as its origin 77 W. Chestnut Street in Chicago must specify the Chicago metropolitan area rather than for example the Cincinnati metropolitan area in order to prevent confusion. If a query cannot be identified an error message is generated at step and the query must be repeated. After the query type has been determined at step the query is routed to for example the route calculator the distance and travel estimator and or the surroundings explorer for processing.

The method continues at step where the query is fulfilled. For example if the query requested routing information between an origin and a destination the route calculator operating in conjunction with the map database calculates a route between the origin and the destination. Similarly if the query was a point of interest query the surroundings explorer will determine points of interest which satisfy the query.

The method continues at step where the response to the query is formatted. The response is formatted in accordance with a data communications protocol to be described in detail in conjunction with . The formatted response includes control and data bits. The control bits specify information such as the mobile unit which initiated the request. The data bits specify the information such as route guidance information which fulfills the query. At step the method concludes when the response is electromagnetically transmitted from the base unit to the mobile unit.

Referring now to it is a diagram illustrating a data communication protocol for communicating data from a mobile unit to a base unit in accordance with the invention and which can be used in conjunction with the system of and the method of . The protocol illustrated in is defined by a communications syntax including variable message lengths allowing as little or as much data transfer as necessary for the specific application requirement. In this implementation example the protocol can be used across all communications systems as long as the printable seven bit ASCII character set plus the newline character 0x0A can be transmitted by the communications system.

The transmitted character set consists of the principal ASCII character set plus the newline character. To transmit bytes of data which do not fit in this character set or for communication protocols which do not allow transmission of the newline character an escape mechanism is provided to allow transmission of these characters. For communication in binary format numeric fields or numeric values are transmitted using two s complement notation in network byte order most significant byte first followed by bytes of decreasing significance . Floating point numbers are transmitted using the IEEE 64 bit double precision format with the most significant byte transmitted first.

Only a single query message is needed to transmit a query from a mobile unit to the base unit . This query message provides for both current location tracking information as well as route calculation requests. The query message includes a plurality of fields . Each field of the plurality of fields is separated by a delimiter preferably the vertical bar ASCII code 0x7C . The start of the query message begins with a delimiter character. The end of each message is marked by a delimiter character immediately followed by a newline character ASCII code 0x0A represented in as n . Any characters between the ending newline character and the starting delimiter are preferably ignored by the base unit and the mobile unit.

As noted the query message includes a plurality of fields . Some communications transport protocols may prepend or append characters for controlling communication of the message in accordance with the specific hardware implementation of the system .

The query message includes a message length field . This field specifies the length of the query message . The message length field may also include a compression marker indicating the compression status of the message. For example the compression marker may take on a first value if the query message is compressed using a current phrase compression table. The compression marker may take on a second value if the query message is compressed using the current dictionary bit compression table. The compression marker may take on a third value if the query message is compressed using the L Z Lev Zempel compression algorithm. And the compression marker may take on a fourth value or simply not be present if the query message is not compressed in any way.

The query message further includes a cyclical redundancy check CRC field . This field is preferably the computed CRC 16 of the query message starting with the delimiter following the CRC field up to and including the ending newline as actually transmitted i.e. as compressed . The query message further includes a time stamp field which gives the number of seconds since the epoch 00 00 00 GMT Jan. 1 1970 when this message was sent. Preferably messages older than 20 minutes will be ignored when received by the base unit .

The query message further includes a subscriber identifier field . The information provided in this field may be used for billing and audit information. The query message further includes a message identifier field . The characters in this field are used to tag response messages transmitted from the base unit to the requesting mobile unit. The base unit will place the characters in the message ID field in any return message so that the mobile unit may determine what original message the base unit is responding to. The query message further includes an identifier field which provides identification information uniquely identifying the mobile unit which transmitted the query message . The identification field is used for tracking and communications addressing.

The query message further includes a latitude field and a longitude field . These fields specify the current position of the mobile unit by latitude and longitude respectively. By default the current latitude and longitude provide the origin for all routing requests and also provide the position used for default tracking address translation.

The query message further includes an origin field . The origin field specifies the origin address for a routing information request. If this field is empty the current position specified by the latitude field and the longitude field is used as the origin address. The query message further includes an origin type field which may be either an address or a point of interest category such as restaurant museum or airport which is recognizable by the base unit .

The query message further includes a destination field which specifies the destination address if routing information is requested by the mobile unit from the base unit . If the destination field is empty then no route is calculated by the base unit . Instead the message is considered to be a tracking message only merely providing the location of the mobile unit.

The query message further includes a destination type field which specifies the type of destination. For example the destination may be an address or a point of interest category recognizable by the base unit . For example the point of interest categories may include restaurant airport or museum. As one example the destination type field may be restaurant and the destination field may be McDonald s .

The query message further includes a destination limit field . This field specifies a limit for point of interest searches. Such a search will be limited to the range specified by the value in the destination limit field about the origin. For example if the destination limit field is empty or has a value 0 the base unit preferably interprets this to indicate that the nearest point of interest satisfying the requirements specified by the destination field and the destination type field should be located. If the destination limit field is non zero then the limit specified sets the maximum range searched for a matching point of interest. If no matching point of interest is in the range specified a no match route error is returned.

The value of the destination limit specified in the destination limit field depends on the limit type field . The limit type field determines what unit of measurement is in the destination limit field. For example the limit type field may take on a first value for example M when the destination limit specifies a straight line distance. The limit type field may take on a second value when the destination limit is driving distance. Or the limit type field may take on a third value when the destination limit is driving time in minutes.

The query message concludes with an ending field . The ending field preferably includes the newline character represented in as n .

Before the ending field the query message may also include additional optional fields which specify additional information or service requests from the mobile unit to the base unit . For example the query message may additionally specify a text message to an operator of the base unit or specify whether the base unit should provide maneuver arms information or combined maneuver arms information along with route guidance text. The query message can also specify for example whether the base unit should send route stripmap information for a specified strip width with the returned route text whether the base unit should send responses in a language independent manner and or whether map information should be sent by the base unit in bitmap or vector form.

Maneuver arms information is used to represent intersections along the route determined by the base unit . Combined maneuver arms information can be provided when two intersections are sufficiently close together. Further the query message can additionally specify routing options such as route calculations which avoid tolls avoid left turns or avoid limited access roads or specify a time of day for the start of the route. Still further the message could optionally request additional information from the base unit such as a list of point of interest types a list of points of interest matching search criteria or a list of files which may be communicated from the base unit to the mobile unit to provide descriptive information.

Referring now to illustrates a data communications protocol for communicating data from a base unit to a mobile unit in accordance with the invention and which can be used in conjunction with the system of and the method of . In a response message is illustrated as including a plurality of fields .

In accordance with the invention the response message may be transmitted in a continuous stream of data called the burst mode or in a plurality of discrete responses to queries for data called the normal mode. The mode of data transmission can be specified by the mobile unit for example in an additional field included in the query message . In the burst mode the base unit transmits data as fast as possible without waiting for requests from the mobile unit. In the normal mode the base unit sends a packet then waits for the mobile unit to request the next packet before sending the next packet.

As mentioned above the response transmitted from the base unit to a mobile unit may include maneuver arms information. Maneuver arms are graphical vectors used by the mobile unit for displaying a graphical representation of an intersection to be traversed. At least three types of visual information can be transmitted by the base unit. These include a geometric representation of the intersection including arms representing the streets approaching an intersection and the angles at which the streets approach the intersection. The transmitted information can further include which of the streets is included in the route to be traveled so that for example that street may be highlighted in the graphical display. The transmitted information can further include information about street signs located at the intersection.

In one embodiment the maneuver arms information includes only sufficient data to create a display showing only what the driver of a vehicle containing the mobile unit will see as the driver traverses the displayed intersection. Other extraneous information such as a map of the region around the intersection or of the entire metropolitan region is not transmitted.

Transmitting only a representation of intersections to be traversed rather than extraneous information greatly reduces data transmission and storage requirements. Thus a relatively low bandwidth channel may be used for transmitting queries and responses between the base unit and the mobile unit. For example a channel having a bandwidth as low as 1 200 bits per second may be used. In contrast transmitting extraneous information may require a bandwidth as high as 1 megabit per second. Since with the invention the amount of data transmitted is relatively small the entire response including maneuver arms information may be transmitted in a reasonable time even at a low bandwidth. In addition since only pertinent information about intersections is transmitted only a small amount of memory such as memory of the desktop personal computer is required at the mobile unit.

After an intersection has been traversed the display is in general updated to show the next intersection to be traversed using maneuver arms information received from the base unit and stored in memory. The display can be updated in response to operator control for example by operating a switch or by voice control or automatically in response to a position sensor such as the position locator of the laptop personal computer .

The response message preferably includes a message length field which specifies the length of the response message . In addition the message length field may include a compression marker character . The compression marker character may take on one of a number of values. For example the compression marker character may take on a first value if the response message is compressed using the current phrase compression table. The compression marker character may take on a second value if the response message is compressed using the current dictionary bit compression table. The compression marker character may take on a third value if the response message is compressed according to the L Z Lev Zempel compression algorithm. The compression marker character may take on a fourth value or simply not be present if the response message is not compressed in any way.

The response message further includes a CRC field which is preferably the computed CRC 16 of the message starting with the delimiter following the CRC field up to and including the ending character of the message . The response message further includes a time stamp field which specifies the number of seconds since the epoch 00 00 00 GMT Jan. 1 1970 when this message was sent. Preferably messages older than 20 minutes will be ignored by the mobile unit which receives the message.

The response message further includes a subscriber identifier field . This field preferably specifies information used for auditing billing and authorization.

The response message further includes a message identification field . In accordance with the invention the contents of the message identification field of the response message match the contents of the message ID field of the query message . The response message further includes an identifier field . Preferably the contents of the identifier field of the response message match the contents of the identifier field of the query message .

The response message also includes a type field and a message field . The type field specifies the type of the message contained in the message field . For example the type field may have a first value for example type R specifying that the message field contains route tracking address translation information. Such a message would result from the base unit having received a route tracking query. The message in the message field is then the address corresponding to the current position latitude longitude . The type field may have a second value specifying that the message field includes route guidance information. This message would result from the base unit having received a route calculation request. The message is the set of driving instructions. The instructions will contain several lines of text each separated by carriage return newline characters. There may be several messages of this type communicated for a single route. Each message will correspond to a single maneuver if arms are requested or be the complete text if arms are not requested.

The message type field may take on a third value to indicate that the message field contains a download of information. This message would result from a query requesting particular information from the base unit . The type field may take on a fourth value to indicate that the message field contains an error message. For example the latitude and longitude specified by the latitude field and the longitude field in the query message may be outside the specified metropolitan region or the specified address may be invalid or not found for a route calculation. The message field contains the error text defining the error.

The type field may take on a fifth value to specify that the message field contains a query response. Such a message would be the result of a query made of the database for example requesting a list of point of interest types. The message field includes the query data.

The response message concludes with an ending field . Preferably the ending field includes the newline character illustrated in as n .

The use of maneuver arms will now be described in greater detail. Maneuver arms are used to depict roads at intersections. If maneuver arms information is requested by a remote unit the base unit generates the maneuver arms information in a maneuver arm generation module and provides this arms information for a current maneuver to the remote unit. The remote unit for example computer processes this information and displays the information on a display for example display . The base unit provides the information to the remote unit in the following form 

 FromName is the road being driven on at the beginning of the maneuver. ToName is the road being driven on at the end of the maneuver except for the first maneuver . The x y values specify the endpoints of the arms from an origin which is set at the intersection. Each arm starts at the origin and radiates outward to an endpoint x y. In one preferred embodiment x and y are integer values between 100 and 100. The base unit scales and rotates the arms so that the from road is vertical on the display and approaches the intersection from the bottom. If there are any arms in general there will be at least two a first arm to represent the from road using xand y and a second arm to represent the to road using xand y. Other arms specified by xand yare used to represent any additional roads at the intersection. The signs of the x and y coordinates are shown in .

In one embodiment the endpoint coordinates of the first or from arm are 1 99 so that the first arm appears to be going straight up from the bottom of the display to the origin. The other arms are mapped relative to the position of this first arm. In this embodiment endpoint coordinates of 99 1 correspond to an approximately 90 right turn from the first arm. Endpoint coordinates of 99 0 correspond to an approximately 90 left turn from the first arm. Endpoint coordinates of 1 100 correspond to proceeding straight ahead through the intersection.

For the first maneuver the ToName can represent a cross street near the beginning of a route to orient the driver even though this cross street is not to be turned onto.

As shown by the ARMS Y designation in an optional routing alternatives field the request in includes a request for maneuver arms information. In the second message in the base unit begins to send maneuver arms information in the format described above via the ARM ROCKWOOD GLENDALE 1 99 91 41 90 42 instruction. The optional MORE Y instruction in the fifth message of indicates that there are more packets of messages to follow. The MANEUVER NEXT and ARMS Y instructions of direct the base unit to send the additional information including maneuver arms information. This additional information is sent via the packet shown in .

The invention generates combined maneuver arms in situations where turns are required at two different intersections which are close together. illustrates an example of a combined maneuver arm. In the example of a slight right turn is required at the corner of Broad Street and Elm Street and a left turn is required at the intersection of Elm Street and Main Street. Instead of generating maneuver arms for the Broad to Elm turn and another set of maneuver arms for the Elm to Main turn the invention generates a single combined maneuver arms display as shown in by the following process.

For each set of maneuver arms generated at an intersection the base unit determines whether there is a sufficiently close intersection at which the driver must turn. If sufficiently close intersections requiring turns occur then the maneuver arms information for both of these intersections are merged for a single combined maneuver arms display such as that shown in . For the combined maneuver arms the roads are designated by sets of endpoints similar to that described above in connection with . One acceptable form for combined maneuver arms is as follows 

The oxand oycoordinates specify the coordinates of the first or a intersection or origin and the oxand oycoordinates specify the coordinates of the second or b intersection or origin. The arms are specified with respect to these origins. For example xand yare the endpoint coordinates of the 1road at the first or a intersection. To conserve space coordinates for origins other than the first can be omitted because they can be reconstructed from the from to arm data.

Combined textual information is also displayed along with combined maneuver arms. Thus along with the graphic display shown in the following textual instructions are also displayed Turn slight right on ELM ST. followed shortly by a left turn onto MAIN ST. Drive 5.6 miles. Three or more intersections can be combined.

An additional feature of the invention is the transmission of message information that is the information in message field in in a further compressed form. The use of such a form has at least two advantages. First use of such a form allows message information to be transmitted electromagnetically in a more efficient way. Second use of such a form allows transmission of information from the base unit to a remote unit in a language independent manner. Upon receipt of the information in this form the remote unit then converts the information for display into expanded textual instructions in any desired language such as English Spanish Japanese and or German. This form will generally be referred to herein as the language independent form or language independent mode.

In the language independent mode the textual description of maneuvers are generated by a token generation module in base unit and are transmitted to the remote unit in a tokenized form. For example instructions to 

The W. MAIN ST. field is the information to be inserted in the blank position corresponding to a street sign and the 4.3 field is the information to be inserted in the blank position. If German language instructions are desired then the remote unit displays the following text for a type 3 instruction 

Thus using the 5th message of as another example instead of transmitting Turn LEFT onto EMERALD DR. r Drive 0.1 miles. the following tokenized information is transmitted to convey the same information in a much more compact form 

Upon receiving the tokenized route information the remote unit applies a set of translating instructions contained in a lookup table implemented example in computer one table per language or sounding desired. For example the English token translation instructions for a type 3 token indicate that Turn left on is displayed then the signage or street name then and drive then the distance and then miles. The remote unit can be equipped with a set of buttons for the user to specify the desired language s .

Translation instruction can be more or less complicated and can include conditions for added flexibility. For example the English token translation instructions for a type 5 instruction indicate that Follow the sign is displayed first then if the number of signs in the message is greater than one an s should be added to sign then the sign s should be displayed then on the ramp. should be displayed. Thus in one instance a type 5 token might produce expanded English maneuver text of 

Thus in the language independent mode information is transmitted from the base unit without regard to any particular language. Accordingly the transmission bandwidth does not depend on the language of the instructions to be displayed on the display in the remote unit. Because the remote unit produces the actual text portion routes can be presented in more than one language or way either concurrently or serially as desired by the remote user without the need for additional information from the base unit.

Use of tokens allows remote system users to create their own language formats if desired to best fit particular needs and capabilities. Alternatively a remote unit can download language formats that is expanded text corresponding to various tokens that have already been created from the base unit.

The base unit can also provide the remote units with other information in addition to the textual directions and maneuver arms information discussed above. In some applications a remote user desires more information than just the textual directions and maneuver arms information and more information than is stored and maintained in the remote unit. For various practical reasons such as cost remote units generally have at best only a limited database on board. Such a limited database may for example include information and or maps for a limited metropolitan area.

Even though a remote user may have no or a limited on board database the invention allows the remote user to obtain a large amount of information from the base unit. Thus the invention allows a remote unit to access a large amount of information without burdening the remote unit with storage and maintenance of a large database. Such information can include for example maps for a complete route not just information about intersections which require turns or maps for an area which is simply not covered by any on board database.

In step S the remote unit requests a route between an origin and a destination from the base unit using the protocol shown in . The base unit calculates the route in route calculator and this route is received in the remote unit in step S. In step S the remote unit compares the route received from the base unit with map information stored on board the remote unit. In a preferred embodiment the comparison is made on a node basis. If any part of the route is not adequately covered by on board maps in terms of geographic scope bound or level of detail content as determined at step S then the processing proceeds on to step S. Otherwise the processing proceeds on to step S and is completed.

In step S the remote unit requests from the base unit stripmaps for those portions of the route which are not adequately covered by maps available on board the remote unit. Maps are not requested for areas which are adequately covered by on board maps. A stripmap can be relatively simple or it can be fairly detailed and include side roads intersections points of interest and features for map matching in the remote unit. In step S the remote unit receives the requested stripmap information from the base unit.

A similar procedure is used when a route is within the area covered by the on board database but the base unit has more up to date information. The remote unit can also download updated maps new programs and the like. Remote units without any on board database must obtain all information from the base unit. A remote unit specifies what information it needs using the above described protocol based on what information the remote unit desires and can handle.

Included herewith as Appendix A is a copy of computer code for implementing the packet message interpretation and parsing functions described above.

As can be seen from the foregoing the invention provides a system and method for providing graphically referenced information from a base unit or server to a mobile unit in a compact form. The invention allows the mobile unit to operate with limited or no database storage or position sensor requirements. Software for controlling the mobile unit runs on generic hand held devices or desktop computers with wireless or wireline communications capability. A query communicated from the mobile unit to the base unit and the response communicated from the base unit to the mobile unit are packaged into a standard data communications protocol that manages a broad spectrum of queries and responses available. This approach to providing route guidance information allows automatic real time database updates and corrections at the base unit avoiding database distribution problems. In addition the cost and technical requirements for the on board or mobile unit equipment are substantially lower than for prior art route guidance information systems.

It is to be understood that while the detailed drawings and specific examples given describe preferred embodiments of the invention they are for the purpose of illustration only. The invention is not limited to the precise details disclosed and various changes may be made therein. For example the format or protocol of the query message and the response message illustrated in respectively may be modified to request different types of information from the map database or to specify different formats or subsets of information to be conveyed to the mobile unit. Such changes may be made without departing from the spirit of the invention which is defined by the following claims.

