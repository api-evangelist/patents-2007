---

title: Systems and methods for providing centralized subscriber session state information
abstract: Systems and methods for providing centralized subscriber session state information are provided. The system includes multiple local session state store servers associated with one or more access control servers and a global location store. When access to a network is attempted, the local session state store server receives an access request message and creates a local session state store record, including a user identifier and information associated with the requested session. The local session state store server also transmits a location message to the global location store. Upon receipt of the location message, the global location store creates a record including the user identifier and a network address for the local session state store server having the session state information for the user. An application requiring user session information can access the global location store and the multiple local session state store servers via a common application programming interface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08494520&OS=08494520&RS=08494520
owner: Bridgewater Systems Corp.
number: 08494520
owner_city: Ottawa
owner_country: CA
publication_date: 20070720
---
This application relates generally to data communications and specifically to the provision and use of user session information.

When a user access a network e.g. logs onto an Internet service provider turns on a wireless data device etc. the user is typically authenticated by the network. As part of the authentication process a decision is made as to whether the user is allowed to access the network. Authentication and access control decisions are typically made by a dynamic host configuration protocol DHCP server or an authentication authorization and accounting AAA server such as a remote access dial in user service RADIUS or DIAMETER server referred to generally herein as access control servers . If the user is permitted to access the network a session is established for the user. The DHCP and AAA servers retain information regarding the user s current session.

Many applications require this session information in order to provide a service to a user. In current environments the application must query the server which authenticated the user to obtain the needed session information. However a single service provider particularly a large geographically diverse service provider may have numerous access control servers. Additionally a service provider offering a variety of network types e.g. wireline and wireless networks may have multiple types of access control servers. In these complex service provider infrastructures a user can come onto the network anywhere using any supported technology. An application may then need to query numerous servers using various message formats to find the server storing the session information for a particular user. The task of obtaining user session information is further complicated if the information is located in the network of another service provider. This situation typically occurs when a user roams into the service territory of another service provider. In roaming situations an application in the user s home network may have no knowledge of a user s present location and therefore has no means to access session state information for that user.

One technique to obtain user session information is to write customized access modules for each type of access control server supported by a service provider. For example an application may have a module for accessing a DHCP server a module for accessing a RADIUS server and a module for accessing a DIAMETER server. However not all servers provide an interface for accessing session data. Thus integrating these modules into an application may not be possible.

Another possible technique to obtain session information is to sniff packets from the network in real time and trigger events based on the captured message. However real time sniffing of packets is complex and cannot provide non message triggered events such as DHCP expiry events or missed RADIUS packets.

Therefore what is needed is a system and method for providing centralized user session state information.

What is further needed is a common application programming interface API that can be used to access state information regardless of where and how a user accessed a network.

The present invention will now be described with reference to the accompanying drawings. In the drawings like reference numbers can indicate identical or functionally similar elements. Additionally the left most digit s of a reference number may identify the drawing in which the reference number first appears.

Exemplary service provider infrastructure includes one or more networks . Network may be any type of public or private communication network including but not limited to a wireline network a wireless telecommunication and or data network e.g. TDMA CDMA GSM Wi Fi or WiMax networks . Each network includes one or more network access servers one or more access control servers one or more local state stores and optionally one or more application servers . In addition or alternatively multiple networks may share a network access server an access control server a local state store and or an application server .

Devices and device in the first service provider infrastructure access network via a wireless communication protocol. Devices in the first service provider infrastructure access network via a wired communication protocol. When a device attempts access to a network the device is connected to a network access server which facilitates authentication of the user and or user device. After the device is successfully authenticated the device may access an application via network .

Devices may be any type of wired or wireless communication devices including but not limited to a wireless phone a personal digital assistant PDA a mobile computer a laptop a computer a wireline telephone a television or any similar device with communication capability. Devices are configured to access one or more networks in their home service provider infrastructure e.g. service provider infrastructure . In addition devices may be configured to access one or more networks in a third party service provider infrastructure commonly referred to as roaming . Devices may also include software and or hardware for accessing applications deployed in their home service provider infrastructure and or a third party service provider infrastructure.

A network access server is configured to receive requests from users for access to a network and to interact with users via user devices to obtain additional information that may be necessary to authenticate the user and or user device to the network e.g. password . For example user devices and request access to network A from network access server . Network access server is further configured to generate an access request message and to transmit the access request message to the access control server supporting the network. The format of the access request message is dependent upon the protocol being used for authentication and authorization of a user. Examples of authentication and authorization protocols include dynamic host configuration protocol DHCP remote authentication dial in user service RADIUS DIAMETER and terminal access controller access control system TACACS . As would be appreciated by persons of skill in the art any type of authentication and or authorization protocol or technique could be used with the present invention. For access control and authentication services network access server acts as a client of access control server .

Access control server is configured to receive access request messages from a network access server and to forward the access request messages or copies of the access request messages referred to herein as the access request proxy messages to the appropriate local state store . Access control server also includes logic for performing authentication and or access control processing. Access control server may support any type of user access control and or authentication. For example access control server may be a DHCP server or an authentication authorization and accounting AAA server supporting for example RADIUS or DIAMETER. A single access control server may support multiple network access servers .

Local state store is configured to store session state information for users and or user devices accessing a network via one or more associated network access servers . Typically established data sessions are not long in duration. Therefore data in the local state store changes rapidly. Because large networks may have millions of subscribers and or users local state stores are distributed throughout a service provider s infrastructure. For example local state store stores session state information for users and or user devices accessing network A via the two illustrated network access servers and local state store stores session state information for user accessing network B

Local state store is further configured to update a global state location store when new user session information is obtained. In an embodiment local state store accesses the global state location store via communications network . Communications network may be a portion of one or more networks or a separate network.

Local state store may also include logic for deleting user session state records. For example because user sessions are typically short lived local state store may delete user session records after a predetermined period of time has elapsed since creation of the record. Alternatively local state store may receive a message indicating that a specific user session has ended A local state store may be provided on a separate state server or may be integrated with a DHCP or AAA server.

Global state location store is configured to store data related to the location of session state information for users. Global state location store supports multiple local state stores . Global state location store may be provided by and integrated into a service provider s infrastructure e.g. service provider . Alternatively global state location store may be provided by a third party. A global state location store may also support multiple service providers as illustrated in .

Global state location store may also include logic for deleting global state location records. For example because user sessions are typically short lived global state location store may delete user session records after a predetermined time period has elapsed since creation of the record. Alternatively global state location store may receive a message e.g. from local state store indicating that a specific user session has ended.

Returning to a network may have one or more application servers . An application server includes one or more applications and optionally a session state API . A session state API is provided on an application server having an application which requires access to user session information. Session state API provides a common interface for an application to access user session state information regardless of where the user is located or how the user connected to a network. Thus an application does not require customized modules for accessing the different types of access control servers. Any application requiring access to user session state information can read to the same session state API .

Session state API is also configured to generate a query to a global state location store for the location of user session state information. Upon receipt of a response from the global state location store the session state API is configured to generate a query to the identified local state store for the required session state information.

A centralized global state location store updated by multiple service providers is critical for applications which can be accessed from multiple service providers or networks. A subscriber of service provider may roam into the territory of service provider and attempt access to network . Session information for the subscriber is then stored in the location state store of network . If the subscriber then accesses an application hosted by his home network the application via session state API queries the global state location store to determine where the session information for the subscriber is located. The session state API can then query the location state store in service provider infrastructure to obtain the required information.

For ease of description call flow is separated into two separate calls flows. The first call flow call flow is related to a method for updating subscriber session state information in the centralized location. The second call flow call flow is related to a method for accessing centralized subscriber state information. Call flow includes steps through . Call flow includes steps through .

Call flow begins at step . In step a user device e.g. user device requests access to a network e.g. network A .

In step network access server receives the request from the user device and generates the appropriate access request message or messages required by the authorization and or authentication protocol supported by the network. The network access server may also interact with the user via the user device to obtain additional information required for authentication of the user. For example in step network access server may generate a RADIUS access request message including the user s name and optionally the user s password.

In step access control server forwards the access request message or a copy of the access request message to local state store . This forwarded message is referred to herein as an access request proxy message. Note that access control server performs access control and or authentication processing upon receipt of the access request message sent in step . Thus one or more of steps through may be performed concurrently with the access control and or authentication processing occurring at access control server .

In an alternative embodiment of steps and local state store receives the access request message from the access server. Local state store then forwards the access request message or a copy of the access request message access request proxy message to the access control server.

Upon receipt of the access request proxy message local state store creates or updates a session state record for the user. In step local state store transmits a global location update message to global state location store . The message includes an identifier for the user or user device and an indication of the location of the user s session state information e.g. a network address of the local state store . Global location state store may also transmit an acknowledgment message to local state store indicating whether the global location update message was successfully received.

In step local state store transmits an acknowledgment message to access control server indicating whether the session state update was successful. Step is optional.

In step access control server transmits a response to the access request. The response indicates whether access is accepted or rejected. For example access control server may transmit a RADIUS access accept message or a RADIUS access reject message. Note that step is not dependent upon steps and therefore may occur prior to any of those steps.

Call flow begins at step . Prior to step a user and or user device initiates an application which requires session state information about the user user device. In step the application makes a call to the session state API .

In step the session state API transmits a location query to the global state location store . The query includes one or more identifiers e.g. IP address of the user device for the user.

Upon receipt of the location query global state location store accesses the location record associated with one of the user identifiers included in the location query. In step the global state location store returns the location of the session state information for the user or an indication that the location information could not be found. Note that an individual user may have multiple active sessions on one or more networks at any given time. In this case the global state location store returns the location for each listed session.

In step session state API transmits a user session data request message to the local state store or stores identified in the response message returned in step . The user session data request message includes one or more identifiers for the user. Note that alternatively the global state location store may forward the location query step directly to the identified location state store or stores . In this embodiment steps and are not performed.

Upon receipt of a user session data request message the local state store accesses a record associated with one of the user identifiers included in the message. In step each local state store returns the requested user session state information to the session state API or returns an indication that the requested session state information could not be found.

Exemplary service provider infrastructure includes one or more networks . Each network includes one or more network access servers one or more access control servers and optionally one or more application servers . Unlike the embodiment depicted in networks in operating environment do not include a local state store. In addition or alternatively multiple networks may share a network access server an access control server and or an application server .

Access control servers are configured to receive access request messages from a network access server and to forward the access request messages or copies of the access request messages referred to herein as the access request proxy messages to the global state store . Access control server also includes logic for performing authentication and or access control processing. Access control server may support any type of user access control and or authentication. A single access control server may support multiple network access servers . In an embodiment access control server accesses the global state store via communications network . Communications network may be a portion of one or more networks or a separate network.

Global state store is configured to store session state information for users and or user devices accessing a network via one or more associated network access servers . For example global state store stores session state information for users and or user devices accessing network A via the two illustrated network access servers . Global state store may also include logic for deleting user session state records. For example because user sessions typically last only a finite period of time global state store may delete user session records after a predetermined time period has elapsed since creation of the record. Alternatively global state store may receive a message e.g. from access control server indicating that a specific user session has ended.

Application server includes one or more applications and a session state API . A session state API is provided on an application server having an application which requires access to user session information. Session state API is also configured to generate a query to a global state store for the required session state information.

For ease of description call flow is separated into two separate calls flows. The first call flow call flow is related to a method for updating subscriber session state information in the centralized location. The second call flow call flow is related to a method for accessing centralized subscriber state information. Call flow includes steps through . Call flow includes steps through .

Call flow begins at step . In step a user device e.g. user device requests access to a network e.g. network A .

In step network access server receives the request from the user device and generates the appropriate access request message or messages required by the authorization and or authentication protocol supported by the network. The network access server may also interact with the user via the user device to obtain additional information required for authentication of the user. For example network access server may generate a RADIUS access request message including the user s name and optionally the user s password.

In step access control server forwards the access request message or a copy of the access request message to global state store . This forwarded message is referred to herein as an access request proxy message. Note that access control server performs access control and or authentication processing upon receipt of the access request message sent in step . Thus one or more of steps and may be performed concurrently with the access control and or authentication processing occurring at access control server .

In an alternative embodiment of steps and global state store receives the access request message from the access server. Global state store then forwards the access request message access request proxy message to the access control server.

Upon receipt of the access request proxy message global state store creates or updates an existing session state record for the user. In step global state store transmits an acknowledgment message to access control server indicating whether the session state update was successful. Step is optional.

In step access control server transmits a response to the access request. The response indicates whether access is accepted or rejected. For example access control server may transmit a RADIUS access accept message or a RADIUS access reject message. Note that step is not dependent upon steps and and therefore may occur prior to any of those steps.

Call flow begins at step . Prior to step a user and or user device initiates an application which requires session state information about the user user device. In step the application e.g. application N makes a call to the session state API e.g. session state API .

In step the session state API transmits a user session data request message to the global state store . The user session data request message includes one or more identifiers for the user.

Upon receipt of a user session data request message the global state store accesses a record associated with one of the user identifiers included in the message. In step the global state store returns the requested user session state information to the session state API or returns an indication that the requested session state information could not be found. Note that an individual user may have multiple active sessions on one or more networks at any given time. In this case the global state store returns the session information for the active sessions.

In an embodiment of the present invention the methods and systems of the present invention described herein are implemented using well known computers such as a computer shown in . The computer can be any commercially available and well known computer or server capable of performing the functions described herein such as computers available from Gateway Apple Sun HP Dell Cray etc.

Computer includes one or more processors also called central processing units or CPUs such as processor . Processor is connected to communication bus . Computer also includes a main or primary memory preferably random access memory RAM . Primary memory has stored therein control logic computer software and data.

Computer may also include one or more secondary storage devices . Secondary storage devices include for example hard disk drive and or removable storage device or drive . Removable storage drive represents a floppy disk drive a magnetic tape drive a compact disk drive an optical storage device tape backup etc.

Removable storage drive interacts with removable storage unit . As will be appreciated removable storage unit includes a computer usable or readable storage medium having stored therein computer software control logic and or data. Removable storage drive reads from and or writes to the removable storage unit in a well known manner.

Removable storage unit also called a program storage device or a computer program product represents a floppy disk magnetic tape compact disk optical storage disk or any other computer data storage device. Program storage devices or computer program products also include any device in which computer programs can be stored such as hard drives ROM or memory cards etc.

In an embodiment the present invention is directed to computer program products or program storage devices having software that enables computer or multiple computer s to perform any combination of the functions described herein

Computer programs also called computer control logic are stored in main memory and or the secondary storage devices . Such computer programs when executed direct computer to perform the functions of the present invention as discussed herein. In particular the computer programs when executed enable processor to perform the functions of the present invention. Accordingly such computer programs represent controllers of the computer .

Computer further includes a communication or network interface . Network interface enables computer to communicate with remote devices. For example network interface allows computer to communicate over communication networks such as LANs WANs the Internet etc. Network interface may interface with remote sites or networks via wired or wireless connections. Computer receives data and or computer programs via network interface . The electrical magnetic signals having contained therein data and or computer programs received or transmitted by the computer via interface also represent computer program product s .

The invention can work with software hardware and operating system implementations other than those described herein. Any software hardware and operating system implementations suitable for performing the functions described herein can be used.

While various embodiments of the present invention have been described above it should be understood that they have been presented by way of example only and not limitation. It will be apparent to persons skilled in the relevant art that various changes in form and detail can be made therein without departing from the spirit and scope of the invention. Thus the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

