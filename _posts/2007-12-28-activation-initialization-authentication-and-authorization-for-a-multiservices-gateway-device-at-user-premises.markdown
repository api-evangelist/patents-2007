---

title: Activation, initialization, authentication, and authorization for a multi-services gateway device at user premises
abstract: A method of putting a first gateway device into service, the first gateway device having an application service module and a network module enabling communications between the first gateway device and the activation manager, the application service module residing on a user premises side of a network service provider demarcation. The method comprises identifying, at the first gateway device disposed at a user premises, an activation manager in communication with the first gateway device, transmitting, from the first gateway device, an activation certificate to the activation manager for verification and authentication, generating a service authentication key associated with the first gateway device, storing the service authentication key and an indication that the associated gateway device status is activated in a database, determining the services available to the first gateway device, and transmitting the service authentication key and an identification of the available services to the first gateway device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08205240&OS=08205240&RS=08205240
owner: Prodea Systems, Inc
number: 08205240
owner_city: Plano
owner_country: US
publication_date: 20071228
---
This application claims the benefit of U.S. Provisional Application No. 60 882 865 Filed Dec. 29 2006 entitled A Multi Services Application Gateway And System Employing The Same and of U.S. Provisional Application No. 60 882 862 Filed Dec. 29 2006 entitled System And Method For Providing Network Support Services And Premise Gateway Support Infrastructure the disclosures of which are incorporated herein by reference.

This application is related to co pending applications U.S. patent application Ser. No. 11 966 936 filed Dec. 28 2007 entitled Billing Alarm Statistics and Log Information Handling In Multi Services Gateway Device at User Premises and to U.S. patent application Ser. No. 11 966 945 filed Dec. 28 2007 entitled System and Method to Acquire Aggregate Manage and Distribute Media and to PCT International Application No. PCT US2007 019546 filed Sep. 7 2007 entitled Multi Services Application Gateway and to PCT International Application No. PCT US2007 019544 filed Sep. 7 2007 entitled System and Method for Providing Network Support Services and Premises Gateway Support Infrastructure and to PCT International Application No. PCT US2007 019545 filed Sep. 7 2007 entitled Subscription Management of Applications and Services Provided Through User Premises Gateway Devices and to PCT International Application No. PCT US2007 019543 filed Sep. 7 2007 entitled Demarcation Between Service Provider and User in Multi Services Gateway Device at User Premises and to PCT International Application No. PCT US07 019 5333 filed Sep. 7 2007 entitled Display Inserts Overlays and Graphical User Interfaces for Multimedia Systems and to PCT International Application No. PCMS07 19534 filed Sep. 7 2007 entitled Presence Status Notification From Digital Endpoint Devices Through a Multi Services Gateway Device at the User Premises and to PCT International Application PCT US2007 019483 filed Sep. 7 2007 entitled Managed File Backup and Restore at Remote Storage Locations Through Multi Services Gateway Device at User Premises and to PCT International Application No. PCT US2007 019531 filed Sep. 7 2007 entitled File Sharing Through Multi Services Gateway Device at User Premises the disclosures of which are incorporated herein by reference.

The present subject matter relates to the activation initialization authentication and authorization of a gateway device disposed at a user premises and deployed as the peripheral element of a system managed by a service management center under the control of a service provider wherein the gateway device is associated with endpoint devices and or other gateway devices within the system to deliver application services and to facilitate management of application services where a demarcation is defined between resources of the gateway accessible to and managed by the service provider and service access by a user via an endpoint device.

The digital home is now becoming more complex with the myriad of new and emerging digital devices intended to address many user and consumer needs such as communication entertainment privacy and security. However given the complexity of the emerging digital home and digital environments generally users who are technologically challenged may find it a daunting and intimidating task to manage their home networks and interconnected digital devices. Moreover new paradigms are emerging oriented to delivering media content to and the consuming of media content at the home. Many of these paradigms rely on communication of application specific data to and or from the Internet as opposed to conventional telephone or broadcast video type applications. The protection of received Internet sourced media content in addition to user generated media content is additionally an important aspect that may be inadequately addressed by the technologically challenged user. Furthermore with respect to Internet based data most of the content delivery solutions are provided to the digital home networks through availability of the two foot interface i.e. the PC . It is relatively cumbersome to bring this content to the ten foot interface e.g. the television .

There exists a need for a system to simplify the delivery of services and applications and the overall management of services and applications available to the digital home or even the small enterprise. Such a system would reduce the complexity of the maintenance upgrading and operation of even the more basic needs addressed by emerging digital endpoint devices and networks. Approaches that suggest greater functionality in home based appliances fail to reduce or address the complexity of managing and provisioning those appliances. For example while the home gateway server appliance described in U.S. Pat. No. 6 930 598 enables networked electronic devices to communicate with each other without the direct interaction with external networks and provides a mechanism whereby a member of the household may be informed of certain network related events without having to use their home computer or other client devices it does not provide a convenient or simplified way of managing the services and applications executed by or associated with that device. Thus an unmet need exists for a device associated within a user s premises that has robust functionality but does not require sophisticated or inordinate attention from the service provider or the user to manage provision and utilize.

A method of putting a first gateway device into service the first gateway device having an application service module and a network module enabling communications between the first gateway device and the activation manager the application service module residing on a user premises side of a network service provider demarcation. The method comprises identifying at the first gateway device disposed at a user premises an activation manager in communication with the first gateway device transmitting from the first gateway device an activation certificate to the activation manager for verification and authentication generating a service authentication key associated with the first gateway device storing the service authentication key and an indication that the associated gateway device status is activated in a database determining the services available to the first gateway device and transmitting the service authentication key and an identification of the available services to the first gateway device.

A gateway device for operation at a user premises has at least one endpoint device associated with the gateway device where the gateway device is in communication with a remote service manager. The gateway device comprises a user module providing bi directional communications with the at least one endpoint device an application services module residing on a user premises side of a network service provider demarcation a network module having the connection that enables bi directional communications with the remote service manager and a service manager operable to transmit an activation certificate to a remote activation manager for verification and authentication and receive a service authentication key and an identification of available services to the gateway device from the activation manager.

A system comprises at least one remote service manager coupled to a network at least one activation manager coupled to the network the at least one activation manager being independent of the at least one remote service manager at least one gateway device disposed at a user premises and in communication with the at least one remote service manager and the at least one activation manager via the network. The at least one gateway device comprises an application services module residing on a user premises side of a network service provider demarcation a network module having the connection that enables bi directional communications with the remote service manager and a service manager operable to transmit an activation certificate to a remote activation manager for verification and authentication and receive a service authentication key and an identification of available services to the gateway device from the activation manager.

A system comprises at least one remote service manager coupled to a network at least one application service provider coupled to the network at least one activation manager coupled to the network at least one gateway device disposed at a user premises and in communication with the at least one remote service manager and the at least one activation manager via the network the at least one gateway device being agnostic to the at least one remote service manager and the at least one application service provider. The at least one gateway device comprises an application services module residing on a user premises side of a network service provider demarcation a network module having the connection that enables bi directional communications with the remote service manager and a service manager operable to transmit an activation certificate to a remote activation manager for verification and authentication and receive a service authentication key and an identification of available services to the gateway device from the activation manager.

A method of peer to peer gateway device authentication comprises activating a first gateway device transmitting from the first gateway device a request for a gateway authentication certificate to an activation manager and issuing a gateway authentication certificate and transmitting the gateway authentication certificate to the first gateway device. The method further comprises transmitting the gateway authentication certificate from the first gateway device to a second gateway device to establish accessibility of resources associated with the second gateway device from the first gateway device.

In the following detailed description numerous specific details are set forth by way of examples in order to provide a thorough understanding of the relevant teachings. However it should be apparent to those skilled in the art that the present teachings may be practiced without such details. In other instances well known methods procedures components and circuitry have been described at a relatively high level without detail in order to avoid unnecessarily obscuring aspects of the present teachings.

In practice a customer typically subscribes to basic transport services from a network service provider e.g. ISP Internet Service Provider cable provider fixed wireless providers ILEC Incumbent Local Exchange Carrier or CLEC Competitive Local Exchange Carrier . For example a customer may have broadband Internet access via cable modem digital subscriber line service or the like. Digital video service may be provided separately. The network service provider manages these basic services at the logical network layer typically at layers 1 2 and 3 of the Open Systems Interconnection OSI model. While network services and associated devices may operate minimally at those levels they operate at those levels to support operations at OSI layers 1 2 and 3. Many applications however involve higher level service logic for applications that view the network transport as simply a transport pipe. The current Internet applications delivery and management architecture and many devices or management systems based on it require a server with robust processing and storage capability to be located at the network operations center not in the home. For Voice Over Internet Protocol VoIP type telephone service for example the VoIP service provider operates a session initiation protocol SIP server or the like and each user has only client functionality. The network transport layers are transparent to the Internet Protocol IP packets containing the voice and related signaling data. The SIP server however controls the call set up tear down billing and the like for the voice call services. With such a legacy architecture the major capabilities and functionalities connected with providing application services from the server throughout the network reside on the server and supporting elements all of which are located in the network operations center of the network service provider.

Exemplary endpoint devices with which the gateway device may communicate via the USB interface include for example a home automation networking device e.g. X10 Z Wave or ZigBee for wired or wireless home network automation. The device which in turn controls devices such as a switch controller sensor devices automatically controlled window blinds and a controlled lighting or lamp unit for example. Furthermore the gateway device may communicate via the Ethernet LAN interface across a local IP network or via the WiFi LAN access point to reach personal computing PC and laptop mobile devices . . . that serve as file sources control points and hosts for various other endpoint devices . In addition the gateway device may communicate via Ethernet LAN interface across a local IP network or via WiFi LAN access point to access one or more television display devices including the associated set top boxes STB or digital media adapters DMA . As further examples one or more SIP phones or VoIP phone devices or other devices that convert IP interfaces to Public Switched Telephone Network PSTN Foreign eXchange Office FXO and Foreign eXchange Subscriber FXS interfaces may be accessed by gateway device via Ethernet LAN interface across a local IP network or via WiFi LAN access point . The endpoint devices shown in and the respective interfaces used by gateway device to reach the endpoint devices are not intended to be comprehensive and one skilled in the art can appreciate other endpoint devices as well as other methods to allow gateway device to communicate with potential endpoint devices within this exemplary system.

As noted earlier the gateway device may access the DMA for a television display device which enables bidirectional wireline or wireless communication. The DMA supports several functions for multiple services including but not limited to media e.g. video and music by enabling the transfer of media e.g. video and music to the TV voice services by providing for Calling Line Identification CLID and for voice mail control and provide Home Automation Services including status and control of networked home automation devices. The DMA converts audio and video optionally to a format suitable for a TV. In addition the DMA may be capable of receiving context sensitive commands from a remote control device not shown and forwarding those commands to the gateway device . This enables the use of menus on the television display device for controlling application services and various features functions thereof as offered by the gateway device . Therefore the combination of the gateway device DMA and the television display device one is able to provide the following features including but not limited to display of media media control functions when enabled FF REW STOP PAUSE etc display of CLID control of voicemail picture viewing control of home automation and user functions for the gateway device .

A set top box is in communication with the gateway device via the wireless access point . The set top box also may handle media format conversion for example NTSC to ATSC television RF signals digital decryption and other DRM digital rights management functions Video On Demand Purchases etc. The combination of the Set Top Box with the television display device may enable by way of example Media format conversion for example NTSC to ATSC decryption other DRM functions such as expiry of leases prohibition of copying to digital outputs function restriction etc. Video On Demand Purchases and media control functions e.g. FF REW STOP PAUSE etc. .

Whether provided by the DMA and the television display device or by the set top box and the television display device the communications to and from the television display device provide a user interface for interaction with the gateway device . The software firmware of the gateway device supports among other things a graphical user interface GUI via the television display device sometimes referred to as the ten foot interface.

The PCs . . . shown in interface with the gateway device and serve as among other things file sources control points and hosts for various software clients. The gateway device may access PC device via Ethernet LAN interface across a local IP network or via WiFi LAN access point . The gateway device accessing the PC may provide for the bidirectional moving of files and status and control for the endpoint devices including for example status and control of networked home automation devices. In addition using the PCs . . . users may access the gateway device for any number of reasons such as for example share files on the gateway device with other endpoint devices back up or transfer files to the gateway device or other endpoint devices having storage capabilities access personal page for notifications receive RDF site summary RSS or Atom feeds share photos and receive voicemail messages. In addition to the Instant Messaging and SIP capabilities of the gateway device as will be described in more detail below PCs . . . may also serve as a host for IM and SIP soft phone clients and other endpoint devices . The client server interaction of the PCs . . . with the gateway device offers an alternative GUI for at least some of the services. The PC based GUI is sometimes referred to as the two foot interface.

Although not shown in other digital endpoint devices for which connectivity may be established with the gateway device include but are not limited to media player devices audio video audio video with or without metadata hi fi audio equipment with media streaming capability game stations Internet radio devices WiFi phones WiFi or other wirelessly enabled digital cameras facsimile machines electronic picture frames health monitors sensor and monitoring devices and devices now known or to be developed. In addition to endpoint devices coupled via the LAN and WAN the endpoint devices may be directly coupled to the gateway device off the Internet or private IP networks.

Although based on a client server architecture the exemplary system disclosed in moves substantial functions performed by the typical network server into the user premises by incorporating those functions into a gateway device but in a way that allows for the server functionality to be externally managed by a service management center which may in turn be operated by a third party application service provider . Moreover the architecture of the exemplary system does not require identity of the provider manufacturer of the gateway device the service management center or the third party application service provider. Thus a gateway device may be manufactured under the control of one entity for distribution to one or more service management entities each of which operates its own service management center . The gateway device may then be activated with a particular service management center under the control of a particular system management entity. A system management entity may be the entity that determines the mix of application services to which the user subscribes or this retail function for application services may be performed by one or more application service providers one or more of whom the user may subscribe to depending on the mix of application services offered by each application service provider. The term application service provider is used herein to refer to various entities up and down the supply chain and include but are not limited to manufacturers of the gateway device and endpoint devices suppliers of the gateway device and endpoint devices entities that provide operate or manage application services network service providers described above and entities that provide the activation manager function described in detail below. These entities in the supply chain may or may not operate or function independently of one another. Hereinafter the term remote service manager is also used to refer to the service management center and or application service provider .

The server functionality residing in the gateway device is not only located in the user premises but it now resides on the user premises side of the traditional network service provider demarcation . The exemplary system shown in does not just move server functionality from the servers in a traditional network operations center where they were previously located to the home but it also moves the logical position of the execution of application services logic of the server to the user premises side of the network service provider demarcation and provides logical hooks to enable the external service manager to perform its function s on that side of the demarcation. For example application service logic transmitted by application service provider related to the use of one or more gateway devices and or endpoint devices can now be provisioned serviced and managed on the user premises side of the network service provider demarcation albeit by an external service management center operated by or on behalf of a third party application service provider . The application software architecture coupled with the specific managed hardware implementation at the user premises enables a single service provider to provide the network services such as IP network whereas one or more application services providers possibly including the network service provider can provide the applications services to the customer independently of providing the network service.

By distributing the application services to the user premises but retaining a central management feature through the service management center and the application service provider s the disclosed exemplary system in addresses network computing and traffic capacity and latency challenges of providing application services at the network level. The exemplary architecture thus results in significantly reduced latency and improved reliability.

Another aspect of the exemplary system in is that it enables the application service provider through the use of the service management center to control hardware elements endpoint devices of various types located on the user premises side of the network service provider demarcation by communicating through the gateway device . The robustness of the gateway device coupled with the central management capabilities of the service management center and application service provider allow the system to register configure provision and enable inter communication among a wide variety of endpoint devices such as TV cell phone radios PC and digital picture frames. Furthermore the exemplary system can gather operational information such as billing records alarms statistical data and log information associated with gateway device and the endpoint devices connected to gateway device . Such a centralized management greatly reduces the burden on end users in managing their equipment or network and provides an application service provider through the service management center the ability to optimize service delivery.

As previously mentioned demonstrates the exemplary network configuration. Broadly speaking the major components of the exemplary system are gateway device which is connected to services management center and thereby application service provider via a wide area network such as by way of example IP network . Furthermore the exemplary system has gateway device located on the user premises associated with various endpoint devices .

As discussed in more detail below the novel system architecture of the exemplary network configuration as shown in allows for the management of services for the gateway device and endpoint devices and facilitates the easy addition of new services or modification of existing services on the gateway and endpoint devices via application service provider through service management center . Such services may include for example facility management home automation media content downloading and Digital Rights Management DRM device updates data backups file sharing media downloading and transmission. All these services may be provided from the user s perspective without the intermediary of a plurality of external service providers who may typically provide these individual services for every endpoint device in the user premises rather the user may receive through the system architecture application services for all these devices which application services may be managed through the system architecture by a network service provider.

The software firmware for these services resides in the gateway device . The gateway device is integrated with hardware and software modules and respective interfaces that handle all aspects of home automation and digital endpoint service and management for the home in a manner without having to rely on external service providers and in a manner that is essentially seamless to the user. This is advantageously provided by the service management center which is able to access regions of the gateway device that are not accessible to the user for controlling the transport and storage of digital content and enabling service applications and upgrades that provide largely invisible support for many tasks performed by users through their endpoint devices .

As seen in the gateway device connects the various endpoint devices together for enabling the user to experience a connected digital home where information from one endpoint device for example voicemail from SIP Phone can be viewed and acted on at another endpoint device for example the TV . The gateway device thus hosts the various in home endpoint devices and facilitates the moving of information from one endpoint device to another endpoint device . Some of the in home endpoint devices processing duties performed by the gateway device include but are not limited to 

1 detecting new devices and provide IP addresses dynamically or statically 2 functioning as a Network Address Translator NAT router and firewall 3 providing a centralized disk storage in the home 4 obtaining configuration files from the service management center and configuring all in home devices 5 acting as a registrar for SIP based devices 6 receiving calls from and delivering calls to voice devices providing voicemail services 7 decrypting and securely streaming media having digital rights management encoding 8 distributing media to an appropriate endpoint device 9 compressing and encrypting files for network back up 10 backing up files to the service management center to other elements within the system or other off site storage centers provided by third parties directly from the gateway device 11 handling home automation schedules and changes in status 12 providing in home personal web based portals for each user 13 providing parental control services e.g. URL filtering etc. 14 creating and transmitting billing records of endpoint devices including recording and uploading multi service billing event records 15 distributing a PC client to PCs . . . in the home used in support of the various services such as monitoring events or diagnostic agents 16 storing and presenting games that users and buddies can play 17 delivering context sensitive advertising to the various endpoint devices 18 delivering notifications to the endpoint devices and 19 enabling remote access through the web and Instant Messaging IM as an example. Other duties the gateway device may perform include service maintenance features such as setting and reporting of alarms and statistics for aggregation perform accessibility testing notify a registration server and location server of the ports it is listening on utilize IM or like peer and presence communications protocol information for call processing and file sharing services receive provisioning information via the registration server utilize a SIP directory server to make receive calls via the SBC network element to from the PSTN and other gateway device devices and download DRM and non DRM based content and facilitating the DRM key exchanges with media endpoints.

As will be described in greater detail herein below the service management center generally provides a communications and processing infrastructure for supporting the variety of application services and related communications residing at the gateway devices . . . . In an exemplary embodiment this infrastructure may be configured to provide a secure environment and may be IP based. Preferably this support architecture is designed for high availability redundancy and cost effective scaling.

The application service provider in conjunction with the service management center depicted in manages application services for a number of gateway devices . . . located at various users premises . Connectivity for the various gateway devices . . . to the service management center and thereby the application service provider is provided in one embodiment via a WAN termination interface such as Ethernet WAN over a broadband connection via the IP network or for example via a wireless EvDO Evolution Data Optimized Internet data interface embodied as a PCMCIA personal computer memory wireless card or a WiMax interface.

The gateway device includes both a hardware and software infrastructure that enables a bridging of the WAN and LAN networks e.g. a proxy function such that control of any endpoint device at any user premises via the gateway device using optionally a secure peer and presence type messaging infrastructure or other communications protocols e.g. HTTPS. For example as seen in via any IM capable device or client respectively connected with an IM or XMPP Extensible Messaging and Presence Protocol network messaging infrastructure e.g. IM networks such as provided by YAHOO MICROSOFT MSN SKYPE AMERICA ONLINE ICQ and the like a user may access any type of functionality at a subordinate digital endpoint device at and user premises via the gateway devices . . . and service management center by simple use of peer and presence messaging protocols. In one exemplary embodiment a peer and presence communications protocol may be used such as Jabber and or XMPP. Particularly Jabber is a set of streaming XML Extensible Markup Language protocols and technologies that enable any two entities on the Internet to exchange messages presence and other structured information in close to real time. The Internet Engineering Task Force IETF has formalized the core XML streaming protocols as an approved instant messaging and presence technology under the name of XMPP Extensible Messaging and Presence Protocol the XMPP specifications of which are incorporated by reference herein as IETF RFC 3920 and RFC 3921. Thus the gateway device is provided with functionality for enabling a user to remotely tap into and initiate functionality of a digital endpoint devices or the respective applications of the endpoint devices at the premises via the IM networks and

In addition the gateway device and network connectivity to the novel service management center provides in a preferred embodiment a secure peer and presence messaging framework enabling real time communications among peers via other gateway devices . . . . For instance the device provides the ability to construct communication paths between peers with formal communications exchanges available between for example one gateway device at user premises and a second gateway device located at user premises . Thus such an infrastructure provides for content addressing enabling peers through remote gateway devices . . . to supply and request content such as files media content or other resources of interest to a community of interest.

To further demonstrate the novel architecture between the gateway device and service management center reference to is now made. is a high level block diagram of an embodiment of the architecture of the exemplary system showing the demarcation between a gateway device and the service management center in reference to a network service provider demarcation . The logical network service provider demarcation is formed at the edge of the wide area network at the user premises between the wide area network and the equipment in the user premises. In a typical scenario a network service provider takes responsibility for managing resources on the network side of the network service provider demarcation leaving the user to manage everything on the user premises side. However the gateway device is implemented in such a manner as to offer its user many of the applications services that were previously offered from network side servers from the user premises.

The application services layer shown in represents the functional layers that provides access to applications services by application clients. These application services exist on a managed application service delivery platform ASD . The ASD may include three functional modules namely the application service enforcement ASE module the application service logic ASL module and the application service management ASM module .

On the user premises network with respect to the ASD the application services layer includes the ASL module which executes the application services that the gateway device or endpoint devices request. Such services may include parental control backup advertising server presence and peered networking media distribution call processing and file sharing . Also on the user premises network with respect to the ASD is the ASE module . The ASE module is responsible for enforcing the relevant application privileges to the application services. The ASE module and the ASL module must interact with each other so that the ASL module can provide access to the client applications that have passed the policy enforcement procedures set forth in the ASE module . Additionally a firewall to protect the application client from application level attacks from the open Internet is located on the user premises network within the application service layer .

Other elements shown in that may reside in the gateway device and logically positioned on the user premises network include a network function layer comprised of but not limited to a switch router and or a bridge . The switch router and bridge may optionally reside outside of the gateway device and the functions thereof be performed elsewhere. Additionally a LAN termination interfaces located within the network interconnect layer on the user premises network may optionally include but not be limited to the following interfaces WiFi Ethernet Multimedia Over Coax Alliance MOCA Home Phoneline Networking Alliance HPNA HomePlug and Asynchronous Transfer Mode ATM . Other interfaces currently known or to be developed may be included. The various LAN termination interfaces allows bi directional network layer communications on the user s side of the premises with one or more of the associated endpoint devices .

With further reference to the core of the logical capacities of the service management center resides on the Service provider network and is depicted as the Application Service Management ASM portion of the application service delivery platform in the application services layer . The ASM module is implemented in the service management center which is external to the user premises and on the service provider network side of the network service provider demarcation . The ASM module may include functions such as provisioning subscription and monitoring for example.

Examples of various ASM module functionalities performed at the service management center from the service provider network regime include but are not limited to initializing service in the gateway devices providing security for the gateway devices and the network support infrastructure enabling real time secure access and control to and from the gateway devices distributing updates and new service options to the gateway devices providing service access to and from the gateway devices and remote access to the gateway devices for example. In support of these services the service management center provides the following exemplary additional services and features authentication multi service registration subscription control service authorization alarm management remote diagnostic support billing collection and management web services access remote access to gateway devices e.g. via SIP or Internet web based communications reachability to access challenged gateway devices software updates service data distribution location service for all services SIP VoIP service media services backup services sharing services provisioning gateway interfaces to other service providers northbound and peering load balancing privacy security and network protection.

The logical network architecture for the service management center network delivering these capabilities is illustrated and described in greater detail in the above identified related applications.

The ASM module is operable to provide the necessary data to the ASE and ASL modules for them to carry out their respective functions. Specifically the ASE module receives the policies and permissions of each application client from the ASM module such as provisioning data and subscription data and enforces those policies against the requested actions by the client application. Furthermore the ASL module may interact with the ASM module for monitoring purposes and status information such as call data recording and billing. The ASM module also manages the overall security and integrity of the ASD .

Furthermore the ASL module and ASE module maintain logical connectivity or interaction with the ASM module in the service management center typically via communication through WAN . This logical connectivity is established through an always on or on an as needed periodic basis secure control channel between the application services layer ASL and ASE of the user premises network and the application services layer ASM of the service provider network . The control channel is established through the network function layer and the network interconnect layer . Through the control channel the service management center communicates with one or more of the gateway devices thereby providing an infrastructure to support and or manage the application services offered to endpoint devices and their users by logic implemented in the gateway device s . This logic is called the gateway operational management software and will be further described below. Effectively the ASD considered in its entirety extends all the way from the service provider network to the user premises network by traversing the network service provider demarcation .

The platform manager layer seen in is also responsible for implementing that part of the managed application services to be performed by the gateway device . In that regard the platform manager layer secures and manages the overall hardware platform given that in this scenario the network function layer and the application services layer reside on one hardware platform. This secure hardware platform provides a robust and secure operating environment for the application services layer . Thus to establish a secure and robust hardware operating environment the platform manager layer must interface represented by arrows and with all the layers above it and allow for bi directional operational information flow among all of the functions including application services.

Application services represent functionalities implemented in the upper layer s of the protocol or logical stack above the network layer s that may extend up to the application layer layer 7 of the OSI model . An application service for example provides application server communication with a client functionality of one or more endpoint devices for the respective service communicated on top of network layer communications through the interfaces. In the exemplary system the services are provided on a subscription service basis to users at the premises. The ASE module provides enforcement regarding authorization authentication configuration and or use of the respective application service via the endpoint devices . The application service includes service and feature functions implemented and controlled by the ASL module . Management of the application service is based on communications with the ASM housed within service management center via the WAN .

Examples of application services include but are not limited to one or more of media delivery content management access control and use tracking file sharing and protection and back up services of both Internet Web generated digital media content and user generated digital media content. The disclosed gateway device thus is configured and programmed to simplify various aspects of managing the emerging home business digital networks including the myriad of interconnected digital endpoint devices associated with the gateway device . The endpoint devices need not reside within or be located at the premises to maintain their association with the gateway device . Application service functionality of the gateway device as provided by the exemplary system is enabled disabled and configured by an application service provider via communications between the gateway device and the service management center .

As shown by the discussion of application service software firmware is logically positioned on the user premises network that is to say on the user premises side of the network service provider demarcation . The gateway device software firmware however also defines a logical service provider user demarcation between the user premises and the application service provider as will be described in more detail with regard to .

Thus referring to the gateway device and service management center move substantial functions performed by the typical network server into the user premises by incorporating those functions in a way that allows for the server functionality to be externally managed by the service management center which may be operated by a third party service provider such as an application service provider . In this exemplary system both the server functionality and the application services offered via the gateway device may be managed by the service management center . Moreover the server function residing in the gateway device is not only located on the user premises but it now resides logically on the user premises side of the network service provider demarcation and on the service provider side of the applications service provider demarcation see further discussion below in reference to .

In order for network service providers to deliver managed services they typically require a management element controlled by the CPU on the NSP TA . To depict these logical elements residing on the hardware components includes a representation of the application services layer above the physical network layer . This layer corresponds to the application services layer of but without reference to any logical elements residing at the network services provider. The management element represented by the network service provider managed application allows the network service provider to determine the status of the network hardware device and interfaces as well as maintain a certain degree of security enforcement at the customer premises.

As noted the network service functionality is at the network interconnect layer and network function layer displayed in and generally does not extend to the application services layer beyond basic authentication authorization and state management as depicted by network services user authentication application module . As with the hardware components the logical elements also have a network service provider demarcation . On the WAN side depicted as the network service provider managed applications side of the network service provider demarcation resides within the network service provider management application module the applications that are managed by the network service provider logic . The network service provider logic allows the network service provider the exclusive control over the applications within the portion of the network service provider management application module that are logically on the network service provider managed applications side.

The user interface to managed applications is present on the LAN side of the network service provider demarcation within the application services layer . Within this interface resides software firmware and logic available to users other than the network service provider referred to as the network user controlled logic . The network user controlled logic provides a user interface to the network service provider logic and to the extent permitted by the network service provider logic interaction with or communication between the user and network service provider through the network user controlled logic and the network service provider logic and to the NSP TA hardware components. The network user controlled logic allows the user of the NSP TA to make certain minimal software firmware changes relevant to their preferences e.g. user name and password changes local IP addresses changes local interface selection . All user devices typically can only communicate with the NSP TA through one or more of the user premises network interfaces . The user can modify the network user controlled logic through the user premises network Interface . The network service provider demarcation is typically within the NSP TA logically dividing the network service provider interface and the user premises network interface modules . The network service provider does not have any in depth visibility or significant responsibility beyond the network service provider demarcation .

Additionally shown on the right hand side of is the User Network and Application Delivery Apparatus UNA DA which is depicted as a separate managed gateway device but as described below may optionally be combined with elements of the NSF TA that a managed service provider which may be different than the network service provider would control in delivering a set of application services to the user premises . illustrates the logical architecture of the software and hardware of the gateway device together with a NSP TA for broadband connection to WAN . The gateway device is an application delivery apparatus for delivering application services to endpoint devices using network layer communications through the network interface . also illustrates two relevant demarcations and a termination which delineate control management access with respect to the functionalities of the gateway device . To be described further below shows the arrangement of the ASL module and the ASE module of as being logically positioned between these two demarcations which results in significant management control by the application service provider and relieve the user of significant burdens in arranging and configuring the systems services at the user premises .

With respect to the two demarcations and shown in one of the demarcations as outlined above is the network service provider demarcation . To identify the separation of and distinguish between the software firmware and hardware components subject to control by the application service provider and those subject to control by the user at the user premises identifies a dividing line across the logical elements of the UNA DA and a corresponding dividing line across hardware components referred to as the applications service provider demarcation . The arrows at the top of thus show the delineations in management responsibility created by the two logical demarcations and . The covered area to the left of the network service provider demarcation as depicted by arrow is the network service provider s responsibility. By contrast the area covered by arrow which represents anything to the right of the application service provider demarcation is the end user s responsibility. However the logic and hardware between these two demarcations as depicted by arrow is the application service provider s responsibility. This arrangement of two demarcations and the attendant logical demarcations in management access to the hardware resources at the premises result in significant management control by the application service provider and relieve the user of significant burdens in arranging and configuring the systems services at the premises.

It should be noted that the logical connection between the network service provider management application and the platform management may be provided to the NSP TA to enable the application service provider to assume any user s responsibility in managing the network user control logic of the NSP TA . Therefore the end user would no longer be responsible for managing any element with respect to the NSP TA .

Referring to the managed gateway device is composed of several elements at both the physical network layer and the application services layer . At the physical network layer the device includes its own dedicated CPU memory packet cell switching fabric data traffic module and power as well as its own dedicated set of interfaces. The UNA DA includes one or more network interfaces providing connectivity to the NSP TA as well as to user premises endpoint devices . One skilled in the art will readily recognize however that the physical connection that connects the UNA DA to the NSP TA also provides connectivity for the UNA DA to the WAN and is the means by which the UNA DA accesses the WAN .

Programming elements of the UNA DA in the gateway device are depicted at the application services layer of the UNA DA . The software firmware corresponding to the ASL module and the ASE module of reside on the application service provider managed applications and platform . The application service provider managed applications and platform is managed by the managed application service provider in conjunction with the service management center housing the ASM module . The application service provider accesses the application service provider managed applications and platform by means of control channel through the WAN .

Other logical elements that form the application service provider managed applications and platform include but are not limited to device drivers operating system system service and platform module . These logical elements are described with respect to below. Another logical element that forms the application service provider managed applications and platform includes the application service interface . The application service interface enables communications from user endpoint devices with the application service provider managed applications and platform .

The application service provider managed applications and platform includes a platform management module that with other software firmware in the platform and the ASM allows the managed application service provider to control the hardware elements of the UNA DA in addition to other relevant application services logic or hardware that may reside on the user premises. For example this software firmware enables a managed application service provider to control and manage the hardware elements on the UNA DA to ensure proper use and allocation of the UNA DA s processing memory storage and bandwidth to monitor local hardware security and generate needed alarms or protection sequences and to prioritize applications based on a set of established policies. The user would have control over specific parameters of application services obtained through the UNA DA through the user interface and platform to managed applications shown in . These parameters allow the user to control the local behavior of the interfaces and to configure the specific applications to implement the user preferences for those applications.

The application service provider can interact with the network service provider s managed applications through the network service provider management application . This is an optional function but it helps show how the gateway device can interface with a network device such as the NSP TA from a network service provider and provide a unified application interface. The logical connection represent this management relationship between platform management logic module in the gateway device and the network service provider management application in the NSP TA . In effect the application service provider manages the NSP TA for the user even though it is not the application service provider s hardware. In the case where the application service provider is a network service provider as well then it would work in practically the same way. If the NSP TA is the application service provider s own hardware the degree of integration and control can be elevated even more.

In another embodiment the two hardware regimes described above NSP TA and the UNA DA may be combined into one managed hardware platform. This would in effect replace the user access with a managed machine access for aspects of the NSP TA as well as aspects of the application services offered through the UNA DA . Thus the combination creates an integral gateway device providing both network service and application services under centralized management. Although integrated network interconnect functions of the NSP TA may still be managed by the network service provider as in the example of . Those skilled in the art will readily see additional suitable combinations and configurations for the hardware comprising the NSP TA and the UNA DA . For example in a further embodiment all the hardware dedicated to the network service provider interface may reside and be integral with the hardware comprising the UNA DA . Thus the network service provider interface may reside on the UNA DA .

The composition of the premises gateway device earlier described with reference to is now described in greater detail with reference to . are more detailed logical diagrams of an embodiment of an exemplary gateway device . As shown in the gateway device utilizes a layered architecture which enables the encapsulation of similar functionality and the minimization of dependencies between functions in different layers. shows the lower portion of the layered architecture and shows the upper portion of the layered architecture. The completed set of layers can be conceptualized as if was combined with with the layers of above those of . also depict exemplary functionality hardware and logical resident in each of the layers.

The layered architecture includes but not limited to a hardware components layer hardware driver layer base operating system layer system services layer platform modules layer platform management layer services framework layer application services layer and application services interfaces layer . These layers combined represent the layered architecture of the exemplary gateway device .

An overview of made in reference to is provided for orientation purposes. The logical elements of the network interconnect Layer residing on the gateway device are found in the hardware drivers layer in which govern the operation of the hardware components layer . The processor runs a base operating system shown in at layer which plays a role in each of the network interconnect network function application services and platform manager layer . Logical elements represented by the network function layer comprise elements from the system services layer . In a similar fashion the platform manager layer is implemented in the exemplary architecture of by the platform modules and the platform management layer . Particular logical elements comprising the ASL module and ASE module of the application services layer are shown in as comprising logical elements from each of services framework and application services . The layered architecture displayed in facilitates reuse or sharing of logic across the layers to provide a managed services framework . Finally application services interface enables communications from user endpoint devices within their respective service environments.

As shown in the hardware components layer includes a central processing unit CPU which may be a system on a chip that includes processing elements digital signal processor resources and memory. The implementation of functions and the related control such as a router with quality of service QoS firewall VoIP gateway voice services and voice mail may be embodied and performed within the CPU .

The CPU is also coupled to a random access memory RAM and additionally non volatile hard drive disk magnetic and or optical disk memory storage . Generally the hard drive disk magnetic and or optical disk memory storage provides non volatile storage of computer readable instructions data structures program modules objects service configuration data and other data for use by the gateway device . The non volatile hard drive disk magnetic and or optical disk memory storage may be partitioned into a network side which is the repository for storing all of the service logic and data associated with executing services subscribed to by the user and is invisible to the user and a user side for storing user generated content and applications in which the user has visibility. Although not shown the CPU may be coupled to a microcontroller for controlling a display device and or other devices.

Additional hardware components include one or more Ethernet LAN and WAN interface cards e.g. 802.11 T1 T3 56 kb X.25 DSL or xDSL which may include broadband connections e.g. ISDN Frame Relay ATM Gigabit Ethernet Ethernet over SONET etc. wireless connections or some combination of any or all of the above. For wireless connections the cards would be associated with WiFi LAN access point to enable a wireless connection. The Ethernet LAN interface provides data communication connectivity within the user premises essentially for communication with any endpoint devices operating within the premises. The Ethernet WAN interface provides data communication connectivity for the gateway device and endpoint devices not shown communicating through the device with the wide area network like IP network shown in .

For additional or alternative customer premises communications the hardware components may also include one or more USB interfaces . Furthermore for additional or alternative communications with the wide area network the hardware components may also include the PCMCIA EvDO interface card .

A data encryption decryption unit is additionally provided as part of the architecture for providing data security features. A watchdog timer element or like timer reset element is provided as is one or more LED devices for indicating status and other usable information to users of the gateway device .

The hardware layer may also include an option module . The hardware components at layer have multiple interfaces for connection to such an option module . These interfaces by way of example could be a data bus e.g. PCI etc network interface e.g. Ethernet RJ45 MoCA HPNA Coax and Power feeds. The option module allows additional functionality to be added to the gateway device at the hardware layer . For example this additional functionality could be everything from support for a variety of extra WAN interfaces e.g. xDSL DOCSIS Fiber PON cellular packet WiMAX etc. media processing e.g. Cable TV termination Digital Video Recording Satellite TV Termination over the air broadcasting etc to voice processing FXS FXO Speech Detection Voice to Text etc . The option module may have its own standalone CPU memory inputs outputs storage or provide additional functionality by its use of the CPU memory inputs outputs and storage facilities off of the other hardware layer components. The option module may be managed indirectly by the platform manager layer .

The discussion of the gateway hardware layer above and the illustration thereof in the drawings provides a high level functional disclosure of an example of the hardware that may be used in the gateway device. Those skilled in the art will recognize that the gateway device may utilize other hardware platforms or configurations.

As further shown in the hardware drivers layer comprises a multitude of driver interfaces including but not limited to a PCMCIA driver for enabling low level communication between the gateway CPU and the PCMCIA network interface card wireless interface an IDE driver for enabling low level communication between the gateway CPU and the local mass memory storage element and LAN WAN Ethernet drivers for enabling low level communication between the gateway CPU and the respective network interface cards and . The exemplary driver layer also includes but not limited to an LED driver controller for driving LED s a USB driver allowing CPU to communicate via USB interface and an 802.11b g or n wireless network driver for allowing the CPU to communicate via the WiFi LAN access point . The drivers provide the logical connectivity between the low level hardware devices and the base operating system .

The base operating controls the execution of computer programs and provides scheduling input output control file and data management memory management and communication control and related services for the gateway device . With respect to the base operating system the gateway device architecture may support any embedded operating system any real time operating system any open source operating system any proprietary operating system or even any operating systems for mobile computing devices as long as the operational needs of the client discussed herein below can be met. Exemplary operating systems that may be employed include WINDOWS MACINTOSH LINUX or UNIX or even an embedded Linux operating system. For instance the gateway device may be advantageously provided with an embedded base operating system that provides operating system functions such as multiple threads first in first out or round robin scheduling semaphores mutexes condition variables and message queues for example.

Built upon the base operating system as shown in is a system services support layer providing both client like and server like functions that enable a wide range of functionality for the types of services capable of being managed by the gateway device . For instance a Dynamic Host Configuration Protocol DHCP client and server software modules are provided. The DHCP client particularly requests via a UDP IP User Datagram Protocol Internet Protocol e.g. IPv4 IPv6 etc. configured connection information such as the IP address that the gateway device has been dynamically assigned by a DHCP service not shown and or any the subnet mask information the gateway device should be using. The DHCP server dynamically assigns or allocates network IP addresses to subordinate endpoints on a leased basis. A Virtual Private Network VPN client may communicate via a proxy server in the service management center according to a VPN protocol or some other tunneling or encapsulation protocol. An SMTP client handles incoming outgoing email over TCP in accordance with the Simple Mail Transfer protocol. A Network Time Protocol NTP RFC 1305 generates and correlates timestamps for network events and generally provides time synchronization and distribution for the Internet. A Domain Name Server DNS client and server combination are used by the IP stack to resolve fully qualified host or symbolic names i.e. mapping host names to IP addresses.

An HTTP S server handles secure Hypertext Transfer Protocol HTTP Secure Sockets Layer communications and provides a set of rules for exchanges between a browser client and a server over TCP. It provides for the transfer of information such as hypertext and hypermedia and for the recognition of file types. HTTP provides stateless transactions between the client and server.

A Secure File Transfer Protocol SFTP client and server combination govern the ability for file transfer over TCP. A SAMBA server is an open source program providing Common Internet Files Services CIFS including but not limited to file and print services authentication and authorization name resolution and service announcement browsing . An EvDO PPP driver includes a Point to Point Protocol PPP daemon configuration for wireless broadband services. A PPPoE Point to Point Protocol over Ethernet client combines the Point to Point Protocol PPP commonly used in dialup connections with the Ethernet protocol. The PPPoE client supports and provides authentication and management of multiple broadband subscribers in a local area network without any special support required from either the telephone company or an Internet service provider ISP . The gateway device is thus adapted for connecting multiple computer users on an Ethernet local area network to a remote site through the gateway and can be used to enable all users of an office or home to share a common Digital Subscriber Line DSL cable modem or wireless connection to the Internet. A Secure Shell or SSH server implemented with HTTP protocol provides network protocol functionality adapted for establishing a secure channel between a local and a remote computer and encrypts traffic between secure devices by using public key cryptography to authenticate the remote computer and optionally to allow the remote computer to authenticate the user.

Additionally provided as part of the system services layer is intelligent routing capability provided by an intelligent router device that provides Quality of Service QoS guaranteed bandwidth intelligent routing services for example by enforcing routing protocol rules and supporting unlimited multiple input sources and unlimited multiple destinations and particularly for routing communications to networked digital endpoint devices subordinate to the gateway device . A central database server handles all of the database aspects of the system. For example the database server maintains and updates registries and status of connected digital endpoint devices maintains and updates service configuration data services specific data e.g. indexes of backed up files other service specific indexes metadata related to media services etc. and firmware configurations for endpoint devices . The database server may also store billing and transaction detail records and performance diagnostics. The database server logic also satisfies all other database storage needs as will be described in greater detail herein.

Built on top of the system services layer is the platform module layer as seen in . The platform module layer provides a software framework for base operating system layer and communications level platform functionality such as CPU management timer management memory management functions a firewall a web wall for providing seamless WWW access over visual displays via access technologies enumerated herein e.g. HTTP SMS Short Messaging Service and WAP Wireless Access Protocol QoS management features bandwidth management features and hard disk drive management features

The layered architecture further provides a platform management layer as shown in which together with the platform modules implement the platform manager layer discussed earlier . In the layered architecture the platform management layer and elements shown above it in are built upon the platform modules .

The features and functions in platform management layer include a platform manager module which will implement unique rules based notification services. On operational failure for example when one of the components or services fails the platform manager module would detect this failure and take appropriate action such as implement a sequence of rules to provide notification to a user. Another module within platform management layer is a scheduler manager module . Scheduler manager module manages scheduled device maintenance managing scheduled services e.g. back up services etc. The layer also includes a diagnostics manager module and a firmware upgrades manager module for managing firmware upgrades. A resource manager module manages system resources and digital contention amongst the various resources e.g. CPU bandwidth utilization within platform management layer . A display manager module and a logger manager module store and track gateway log in activity of users and applications e.g. voice call logs at the user premises.

The platform management layer in concert with resource manager module and the platform manager module enforce the separation of network side managed service control and user side delegations depending upon service subscriptions and configurations. For example the platform manager module and resource manager module encompass rules and guidelines provided according to subscribed services that act to enforce manage and control the input output operations and use of hard drives space. Thus the operation of the platform manager module and resource manager module help to determine the line between what is owned by the customer and what is owned by the application service provider thereby establishing the application service provider demarcation as seen in .

In general the logical platform management layer allows for inter layer allocation of local resources. This function guarantees access between the application services management logic implemented at the higher layers of the architecture within the gateway device and the applications service management function in the service management center by assuring that the local user premises hardware and software modules are functioning at a required state CPU and memory usage bandwidth usage QoS settings etc. . The platform management layer is also responsible for implementing that part of the managed application services to be performed by the gateway device . In that regard the platform management layer secures and manages the overall hardware platform given that in this scenario the network function layer and the application service layer reside on one hardware platform. This secure hardware platform provides a robust and secure operating environment for the application services layer. So to establish a secure and robust hardware operating environment the platform management layer must interface with all the layers above it and allow for bi directional operational information flow among all of the functions.

Referring back to built on top of the platform management layer is the Services Framework Layer which provides a library of application support service processes that facilitate data collection and data distribution to and from the endpoint devices . The application support service processes include but are not limited to a device authentication manager for use in authenticating devices connected to the gateway device and the user of the gateway device a billing manager for collecting and formatting service records and service usage by endpoint devices e.g. calls back up services etc. a fault manager for detecting and managing determined system and or service faults that are monitored and used for performance monitoring and diagnostics a database manager a control channel interface via which the gateway initiates secure communications with the operations support infrastructure a configuration manager for tracking and maintaining device configuration a user manager a service manager for managing service configuration and firmware versions for subscribed services provided at the gateway device and a statistics manager for collecting and formatting features associated with the gateway device. Statistics may relate to the use of one or more services and associated time stamped events that are tracked. Finally the layered service architecture shown in additionally provides the gateway device with intra process communication and inter process communication amongst the many services and modules in the service framework layer that enables the provisioning management and execution of many applications and services at the application services layer .

As seen in next to the Services Framework layer is the application services layer providing library of user application services and application support threads including but not limited to file share manager backup server home storage network device manager basic photo editor home automation controller media services module call processing module voice mail and interactive voice response IVR server presence and networking parental control and intelligent ads manager

The gateway device shown in further provides application service interfaces that are used to enable a variety of user applications and communications modalities. Furthermore the application service interfaces enable communications from user endpoint devices within service environments. In that regard the application service interfaces enable the application services to act as an appropriate server with respect to client device application or service functionality of the endpoint devices . The application service interfaces also enable corresponding interfaces for the application services with aspects of service environments implemented outside the user premises. In that regard the interfaces enable the application services layer to act as an appropriate client for extending the application or service related communications to a server accessed via a wide area network such as a server of the service management center .

Specific application service interfaces might include a Session Initiation Protocol SIP Interface . SIP interface is an interface to the generic transactional model defined by the session initiation protocol that provides a standard for initiating modifying or terminating interactive user sessions that involve one or more multimedia elements that can include voice video instant messaging online games etc. by providing access to dialog functionality from the transaction interface. For instance a SIP signaling interface enables connection to a SIP network that is served by a SIP directory server via a session border controller element in the service management center .

Additionally application service interfaces layer may include the web interface that enables HTTP interactions requests and responses between two applications. Also the Web services interface that provides the access interface and manages authentication as gateway device access the service management center via web services may be included in the application service interface layer . The IM Interface which can optionally be located within the application service interface layer is a client that enables the gateway device to connect to one or more specific IM network s . As further shown in within the application service interface layer the UPnP Universal Plug and Play interface enables connectivity to other stand alone devices and PCs from many different vendors.

The XMPP interface within the application service interface layer is provided to implement the protocol for streaming XML elements via the gateway device in order to exchange messages and presence information in close to real time e.g. between two gateway devices. The core features of XMPP interface provide the building blocks for many types of near real time applications which may be layered as application services on top of the base TCP IP transport protocol layers by sending application specific data qualified by particular XML namespaces. For example the XMPP interface provides the basic functionality expected of an IM and presence application that enable users to perform the following functions including but not limited to 1 exchange messages with other users 2 exchange presence information with other devices 3 manage subscriptions to and from other users 4 manage items in a contact list in XMPP this is called a roster 5 block communications to or from specific other users by assigning and enforcing privileges to communicate and send or share content amongst users buddies and other devices and 6 communicating with applications in the service management center and vice versa. The synchronization of allowed services and features and the real time notification of service and configuration changes can be communicated through this interface.

Now that the components of gateway device have been described in detail attention will now turn to the activation initialization authentication and authorization of the gateway device within the exemplary system. In gateway device the service manager shown in drives activation initialization authentication and authorization. To perform these functions also shown in the service manager interacts with the representational state transfer REST client control channel interface and network device manager . Additionally the service manager interacts with the system services layer shown in including the DHCP client the DHCP server and the web server . Further details will be described below with reference to how the components of gateway device are used for activation initialization authentication and authorization purposes. The architecture may also utilize the hardware and software of endpoint devices such as STB DMA that are associated with the gateway device in activation initialization authentication and authorization processes.

In addition as shown in the activation initialization authentication and authorization of gateway device involves databases software and services in the service management center . Specific to activation initialization authentication and authorization the service management center maintains the gateway device s activation state system service state and application services state and stores configuration information location information service provider ID and subscription information with respect to each gateway device within the exemplary system. The gateway device s initial state prior to activation may be stored optionally at the activation manager or the database server or other storage device as may be within the choice of the skilled artisan. After activation the information is preferably stored on the database server . The state of a gateway device provides information relevant to whether a gateway is activated within the exemplary system i.e. able to provide managed application services . Configuration information refers to information concerning the current configuration of the gateway device with respect to the various application services and hardware resources attached to gateway device . Location information refers to the location of the gateway device within the exemplary network such that the gateway device can be accessed via the appropriate network layer addressing. The service provider ID dictates with which application service provider the gateway device has been associated to provide application services. Finally the subscription information refers to the application services provided by application service provider that the end user has subscribed to and thereby can be used by gateway device .

The database server is used by the various managers in the service management center including the authentication manager and the service configuration manager . In addition these managers provide services to the activation manager . Details concerning these managers will be described in greater detail below.

The process of activation of the gateway device is preferably separate from the process of system service connectivity to the service management center and the resultant authentication and authorization of the gateway device. The activation manager as seen in is a scalable server with a well known fully qualified domain name that serves all gateway devices during activation. Activation manager activates gateway devices independent of any one application service provider that a particular gateway device may belong to or will belong to after activation. To be discussed in more detail below the high level function performed by the activation manager is to assign a gateway to a service management center . Because any one network service provider may operate multiple service management centers and because one or more network service providers may operate service management centers the gateway device is in open communication with the assigned network service provider and the assigned service management center operated by that network service provider. Likewise system security is provided so that that only intended devices are allowed access to the service management center. Once the gateway device opens network communications and seeks to activate with the activation service the activation manager or authenticates the gateway device based on the activation certificate to be described in more detail below that is given to the gateway device at the time of manufacture and also authorizes and assigns the gateway device to at least one service management center. That authorization and assignment may be based on the provisioned attributes and various policies and rules established in connection with the creation and operation of the system. The gateway s assignment to a service management center and application service provider is confirmed by the service provider ID residing in the database of the service management center. The service provider ID is then transferred to the gateway device. The deferral of the assignment of a particular gateway device to a particular service provider until the gateway is deployed and in the hands of the user provides additional flexibility in the gateway device supply chain increases the number of security options and protocols and allows for the various models by which different or varying combinations of gateway device manufacturers system service providers service management center operators and application service providers may deploy the novel architecture and the services it provides.

In one exemplary embodiment the activation manager is isolated from the rest of the service management center . The activation service being a separate service which may or may not reside operated within or by the service management center maintains the activation state and activation configuration for each gateway. In a novel feature of this architecture the activation manager may optionally be provisioned so that it is outside and wholly independent of the service management center framework see activation manager of . In that configuration the activation manager may serve gateway devices during activation independent of the particular service management center to which the gateway belongs. The activation center is able to communicate with any number of service management centers to associate the deployed gateway devices with a particular service center based on the activation certificate assigned to the gateway. One skilled in the art recognizes that this approach has several advantages including but not limited to the ability to scale the activation manager function separately from the rest of the service management center and to ease demand on network elements by separating activation demands from the service delivery demands. A further advantage is that with the separation of the activation process from the system connectivity authentication and authorization the gateway device completes its initial security authentication and authorization process before being directed to a service management center increasing the likelihood that only properly activated devices communicate with the service management center. Moreover the activation manager may then be managed by an entity separate from the service management center provider. In one example the manufacturer of the gateway may control the activation manager operations with respect to gateways associated with any number of service management centers each of which may be operated by independent service providers in which case the activation manager operations are not be limited to serving any one management center. Thus it is a further inventive aspect of this novel architecture and the robust capabilities of the gateway device that the gateway device is agnostic to the system service center operator and the application service provider. The gateway device may be deployed in the foregoing manner without the requirement that upon manufacture it be dedicated to and capable of being activated by only one devoted service provider.

The authentication manager as seen in is responsible for authenticating gateway device the user of the gateway device and the application services associated with that gateway device . The authentication manager also is responsible for generating renewing and storing each service authentication key voice services key and web services key for a particular gateway device . Finally the authentication manager is responsible for storing and verifying the user s activation state in database server .

What follows is a description of the activation process as performed by the interaction between the gateway device and service management center . This description describes the success path for activation and is sufficient that one skilled in the art could assemble or implement the gateway and service center hardware and software to enable the activation success path and error paths accounting for error scenarios e.g. a corrupted IP packet containing the activation request message .

Activation begins when the gateway device is manufactured. During the manufacturing process the gateway device is assigned a unique serial number a public key certificate also called the activation certificate signed by optionally application service provider which may be for example the manufacturer of the gateway device or the network service provider or the operator of the service management center and a private key. The unique serial number is a random number that identifies the gateway device . The private and public keys are used for verification and security purposes so that service management center can verify that the gateway device possesses the private key associated with the public key in the certificate and thereby maintain a secure platform. The unique serial number public key certificate and the private key are stored on the gateway device . The storage may be on non volatile read only memory such as hard drive . The public key certificate certifies the gateway device as being trusted by as appropriate the activation manager operator the system network service provider the service management center operator or the application service provider and as such must be non transferable by cryptographically locking the certificates to the gateway device on which it resides.

When an end user orders the gateway device and subscribes to the application services provided by application service provider the end user selects a user identifier. The user identifier is a unique identification sequence that associates the gateway device with a particular end user. At the time of order the user identifier the serial number of the gateway device and the subscribed application services are provisioned within the assigned service management center s database servers . At this point in the activation process the end user is associated with a user identifier that is associated with a specific gateway device signed by as appropriate the activation manager operator the system network service provider the service management center operator or the application service provider through the public key certificate.

Optionally at the time of order an end user can be issued an activation code. The activation code is an additional security method that may be implemented. Specifically an activation code may be used during the activation process so that the end user is prompted to enter the activation code at some point during the activation process in order to activate the gateway device . For security purposes the activation code should be delivered in a separate correspondence with the end user preferably delivered to the end user s billing address. If an end user is given an activation code then this code is also provisioned within the service management center s database server . The activation code may also be used to validate the association of the end user with the assigned gateway device and vice versa.

Upon receipt of the gateway device the gateway is not activated. The end user plugs a network connection into the gateway device . Once the network cable is connected the gateway device configures the WAN Termination and thereby gains access to the WAN . In the exemplary system the WAN is an IP network . One skilled in the art will recognize that this configuration can be performed by using DHCP or in any number of other common methods e.g. static IP address provisioning .

The next step in the activation process differs at this point depending upon whether an activation code was issued for the particular gateway device requesting activation. If the end user was provided with an activation code the activation manager transmits via the HTTPS connection a request for the activation code to the gateway device shown within step on . At this point as shown in step of the activation process the gateway device is in a status called activation pending and will remain in that status until the activation code is entered by the end user.

The end user typically enters the activation code through an endpoint device . Specifically in step of the endpoint device here being the combination of set top box with the television display device discussed in is first detected by the gateway device s service manager because the endpoint device is requesting an IP address through for example a DHCP request. The service manager responds by assigning the endpoint device an IP address. In this example the gateway acts as the router and DHCP server in the customer premises and provides the IP address. The endpoint devices using various well known mechanisms and protocols then identify the gateway device and start communication with it. At step the endpoint device after being connected to the gateway device realizes that the gateway device is in an activation pending status. In the example shown in at step when the user attempts to use any services on the endpoint device the web interface recognizes that the gateway device is in an activation pending state and thereby presents the user with an activation screen asking the user for his activation code. Upon entry of the activation code into the endpoint by the end user the code is transmitted back to the gateway device where the web server captures the activation code and sends the code to the service manager which in turn forwards this to the activation manager via the web services interface . The foregoing example for endpoint device presentation uses a web based technology although the presentation method may use other technologies as well including by way of example STB or DMA specific presentation methods or protocols proprietary and otherwise .

It should be noted that other application interfaces of layer from may be used instead of the web server in order to prompt the end user for the activation code. For example if the endpoint device had been a SIP phone then the SIP interface would have recognized the gateway was in an activation pending state prompted the user for the activation code and subsequently sent the code onto service manager

At step the service manager resends the activation request to the REST client . Utilizing the web services interface the REST client forms the HTTPS connection with the activation manager . As previously mentioned the HTTPS connection allows the gateway device to send the activation request to the activation manager . This activation request would include the public key certificate the unique serial number of the gateway device and the activation code. The activation manager then verifies the gateway s public key certificate issued for example in accordance with established or known standards ensuring that the certificate is signed by as appropriate the manufacturer the operator of the activation manager the system service provider the service management center operator or an application service provider and that the gateway possesses the private key associated with the public key in the certificate. The activation manager verifies this certificate by reference to the public key certificate information for every gateway device in order to confirm the identity of the gateway and the validity of the public key certificate.

The above referenced the use of an activation code. If the end user was not provisioned an activation code when ordering the gateway device then the activation process does not involve any aspects relating to the use of an activation code discussed above including prompting the end user with a screen requesting the activation code. In the case of no activation code step would not include prompting the end user for the activation code but instead just involve the connection of the endpoint device to the gateway device .

Once the activation manager verifies the gateway device s public key certificate the activation manager at step in sends the activation request to the authentication manager of the appropriate service management center in order to activate the gateway device . The activation request sent by the activation manager may include the unique serial number of the gateway device the public key certificate and if applicable the activation code. The authentication manager of the appropriate service management center uses the database server to verify the current authorization information sent within the activation request.

Assuming the authentication manager of that service management center is able to verify the information sent within the activation request the authentication manager generates a service authentication key to confirm that the gateway device is activated authenticated as part of the network and thereby be able to receive system services and connectivity through the control channel with the appropriate service management center. The authentication manager stores the key in the database server and also marks the gateway device as activated in the database server . At step of the authentication manager of that service management center passes the service authentication key to the activation manager or which then sends the service authentication key and the subscription information with the domain names of several services within the service management center over the HTTPS connection to the gateway device . The service manager of gateway device saves the key and domain on gateway device such as by way of example in hard drive . In this way authorization for receiving services is obtained through the gateway device without having to resort to network resources or assets. Also the service manager marks the gateway device as activated. In addition the gateway device is now configured to properly interact and communicate with the service management center. At this point in the activation process the activation manager informs the gateway device of the service management center details and the gateway device then established connectivity and communication with the service management center. After reference is made to the database server and the identification information residing thereon the gateway device s application service is associated with a specific application service provider s .

At step of the service manager generates a private and public key pair and requests a gateway authentication certificate from the activation manager . The activation manager forwards this certificate request at step to the certificate server . The certificate server confirms and validates through the activation manager 1 that the gateway device it has a valid activation certificate 2 that the gateway device is to be placed on the network for that particular service management center 3 the identity of that particular gateway device 4 the user of the gateway device 5 that the user is properly associated with the particular gateway device 6 that the gateway device is authorized to receive a particular suite of services from the application service provider . Thus while the gateway device is authenticated and validated by the activation manager the certificate server authorizes and ensures that the certificate request is originated only from the gateway device. Lastly step of involves the certificate server issuing a gateway authentication certificate for the gateway device and subsequently sending that certificate back to the activation manager which in turn forwards the certificate to the service manager . This final step completes the activation process.

The final step of this end to end activation process provides the gateway authentication certificate that transfers the application service provider s trust to the gateway device and thereby completing the trust chain from the factory through end user provisioning and activation to the gateway device and its endpoint devices . By delivering the gateway authentication certificate to the gateway device the system architecture eliminates the need for a gateway authentication certificate residing on the certificate server within the service management center . The gateway authentication certificate is used whenever an endpoint device accesses the gateway device and assures the endpoint device that the gateway device is trusted by the application service provider . Because the gateway authentication certificate resides on the gateway device efficiency is achieved within the exemplary system as endpoint devices can trust activated gateway devices without having to access the application service provider through the service management center to determine whether to trust gateway device . Additionally through the gateway authentication certificate the gateway device is enabled to generate its own certificates that can be presented to other gateway devices to allow peer to peer communication between multiple gateway devices .

After activation the gateway device performs service initialization. Service initialization refers to the process of configuring and authorizing a gateway device with respect to a particular designated service management center to use particular application services provided by application service provider . The service initialization process for each application service consists of service configuration download and when required in connection with a service requiring a subscription a service authentication key.

Once the gateway device has been authenticated as mentioned earlier the service initialization process may optionally involve service key renewal and service configuration. With respect to service key renewal the service manager is responsible for the management and storage of the service authentication key for application services such as for example web service voice service movie service music service file sharing service file backup service gaming service advertising service food ordering service and other application services. The service authentication key was previously described above with respect to the activation process. The web service key the voice service key and other service keys which are similar to the service authentication key but as regards a particular application service are used whenever a gateway device has to be authenticated such as for example when conducting a web based or voice transaction or accessing the service management center . Thus the management of these key is critical to the ability of gateway device to provide application services.

As seen in at step when the user makes an application service request through the gateway device the service manager sends a service request for application services to the service management center . With each application service request made by the user through the gateway device the service manager has to provide a valid service key to the service management center to prove that it is authorized for the application service requested by the user. Generally these service keys are used for application service requests. Each of these keys which include by way of example the service authentication key web service key and voice service key have parameters that limit their validity. The service manager is responsible for requesting renewal of these keys when these keys no longer have valid parameters. It should be noted that by periodically requiring the renewal of the service specific keys the consequences of the revelation of any single key to an outside entity are limited to the circumstances specified by the parameters that confer validity to the key. Therefore by limiting the validity parameters of the key a service hacker is less willing to expend resources attacking the system.

At step the authentication manager has responded to the service manager that the particular key for the service has for example expired. To request a new key as seen in at step the service manager sends a service key request message to the authentication manager through the control channel interface transiting the presence and networking infrastructure . At step the authentication manager either uses the same key or generates a new one when renewing the expired service key. The authentication manager sets the new expiration time for the service key and returns the service key with the expiration time to the gateway device using the control channel . Finally at step the service manager of the gateway device receives the updated service key and stores the key on the gateway device such as on hard drive . With the updated service key the gateway device and its associated endpoint devices can access application services specified by the updated key.

While the service keys and service authentication key are used to authenticate the gateway device s access to application services the gateway device itself is the primary authorization enforcement point for the user and the user s endpoint devices for accessing an application service. Authorization is referred to as the process of determining whether the gateway device and or an endpoint device is authorized to the use a particular application service. is a data flow diagram of an embodiment of the process for authorization of the gateway device at the user premises through service configuration updates. The gateway device s service manager manages the enforcement of service authorization by ensuring that service configuration information is up to date. Through updating the configuration information on gateway device authorization is effectively handled because the gateway device and its associated endpoints would be updated with respect to their ability to access and use a particular application service.

The service manager becomes apprised of pending configuration updates in two ways. First as shown in any time when the control channel is established step including service initialization time the service manager at step sends a service request message to the service configuration manager of service management center . Referencing the service request is sent through control channel to the presence and networking infrastructure until reaching service configuration manager . In response to the service request the service configuration manager responds with data concerning the current version of configuration information for a particular application service as seen in step in . The information concerning the current version of the configuration information is transmitted back to gateway device through control channel . Upon receipt of information concerning the latest configuration information at step the configuration manager of gateway device checks the version of the configuration information received against the configuration information version installed on the gateway device . If the configuration manager determines the gateway device has the most current version of the configuration information then the configuration update ends. However if the configuration manager determines the gateway device does not have the most current version of the configuration information installed then the configuration manger at step requests through the service manager the most current version of the configuration information. The service manager sends the request through control channel to the service configuration manager within service management center . In turn as shown as step the service configuration manager send the requested version of the configuration information back to the gateway device across the control channel . Upon receipt of the most current version of the configuration information at step the configuration manager updates the appropriate modules within gateway device and notifies the service manager of the update. This last step ends the first method of how service manager becomes apprised of pending configuration updates and subsequently receives them.

The second method of how the service manager becomes apprised of pending configuration updates occurs when a configuration change is introduced in the service management center and the gateway device already has its control channel established. In this scenario referring to the service configuration manager notifies the publisher subscriber Pub Sub server of a configuration update. The Pub Sub server determines which gateway devices have the early version of the configuration information and sends a notification containing the new configuration version to the gateway devices service manager transiting the presence and networking infrastructure . If the gateway device has a previous version of configuration information the service manager of the gateway device follows steps as described above with reference to in order to update the version of the configuration information on the gateway device . If on the other hand the gateway device determines it has the most up to date version of the configuration information then the configuration update ends and steps of are not performed.

It should be noted that the gateway device performs the service initialization processes which includes service key renewal and configuration information update any time it requires initial service establishment and or service re establishment. For example if the gateway device is disconnected from IP Network the gateway detects this loss of connectivity and puts itself in a disconnected state. When the gateway device is reconnected the gateway not only follows the activation process described above but also follows the service initialization process described herein to re establish service.

With further respect to the architecture of service management center is composed of various layers that provide the security and service architecture required to support the various gateway devices . This layered architecture is a way to group the functional components into logical related grouping. The layered architecture as seen in is made up of the following layers access load distribution and security layer ALDS externally accessible service EAS layer VoIP support layer internal services support ISS layer system support SS layer and network management NM layer .

The equipment in the ALDS layer provides the public interfaces addressable from the public Internet through the IP access routers connecting the service management center to gateway device across IP network . This layer contains all devices that will be the initial entry point of all traffic entering the service management center . The ALDS layer provides security access control and load balancing of traffic directed to the service management center . Furthermore the ALDS layer may use network address translation to provide virtual public IP addresses that map to servers located in the externally accessible service interface layer .

The components of the ALDS layer provide safe access into the service management center by 1 only mapping well known connection ports to listening servers 2 providing port based network address translation PAT from the public access network to the private service management center network 3 protecting the internal application servers from attacks on accidentally open ports and 4 screening for protocol bugs that allow illegal access into applications.

The EAS layer contains servers that can be accessed by devices external to service management center such as gateway device . Specifically the servers comprising the EAS layer may include for example the activation manager . The activation manager receives and processes a new gateway device s activation request coordinating with the authentication manager and the certificate server to authenticate and provide keys and certificates for the activated gateway.

The EAS layer contains the initial entry point for access into the ISS layer to provide services to the gateway device . For example the servers within the EAS layer may provide access for Internet based services like email and remote user access. Additionally the servers in the EAS layer may be grouped into server farms and load balanced using the server load balancer in the ALDS layer .

The VoIP support layer may comprise of servers supporting voice services within the exemplary architecture. For example the VoIP support layer may process session initiation protocol SIP voice calls by performing end user authorization using the authentication manager and redirect the SIP call to the users location i.e. IP address . The equipment in the VoIP Support layer is protected from access from the Internet via the session border controller located in the ALDS layer .

The ISS layer provides the functional support for the application services available to the gateway device . All service requests from the gateway device enters though the EAS layer prior to being processed by the functions residing in the ISS layer . The equipment in the ISS layer may include but not limited to service configuration manager authentication manager certificate server database server and billing collector . The service configuration manager maintains the subscribers service information used to configure the gateway device and its associate endpoint devices . The authentication manager receives requests to authenticate the gateway device and the services the subscribers use. The certificate server creates signing certificates for the gateway device and its associated endpoint devices . The database server for example is the database for the service configuration manager the authentication manager the presence and networking infrastructure and the activation manager . The billing collector collects billing records.

The SS layer provides the services that are used internally within the service management center . For example the SS layer may provide a timing server to synchronize the internal architecture within the service management center . The internal services provided by the SS layer can be used by all other internal layers of service management center but are not accessible by the gateway device .

The equipment comprising the NM layer may include but not limited to the network management system and alarms and statistics aggregator . The network management system is a collection of computer equipment that receives and manages alarms and statistics for the service management center and the gateway device and its associated endpoint devices . The alarms and statistics aggregator processes the statistic and alarm feeds from all gateway devices and all other servers and sends them to the network management system .

The NM layer provides the support for access to and management of operational information from other components of the service management center as well as gateway device and its associated endpoint devices . In addition the NM layer may contain the access point for the network operations center and subsequently application service provider into the infrastructure of the service management center .

Additional components of the service management center include the network operations center the presence and networking infrastructure publisher subscriber server and IP access routers . The network operations center is a location containing computers used by network support personnel for managing the service management center . The presence and networking infrastructure maintains the control channel to the connected gateway device to route command and control messages between the gateway device and the support servers within the service management center . The publisher subscriber server allows the servers in the service management center to subscribe gateway devices and its associated endpoint devices to topics and send notifications to gateway devices and its associated endpoint devices which have subscribed to a topic. The IP access routers are the routers that terminate the physical interfaces to the IP network and route IP packets to and from the service management center .

The gateway device and its interactions with various endpoint devices service management center and application service provider have been described with reference to diagrams of methods apparatus systems and computer program products. It will be understood that elements and functions illustrated in the diagrams can be implemented by computer program instructions running on one or more appropriately configured hardware platforms e.g. to operate as a gateway device or as one or more systems implementing functions of the service management center . Hence operations described above may be carried out by execution of software firmware or microcode operating on a computer other programmable device of any type. Additionally code for implementing such operations may comprise computer instruction in any form e.g. source code object code interpreted code etc. stored in or carried by any computer or machine readable medium.

Program aspects of the technology may be thought of as products typically in the form of executable code and or associated data for implementing desired functionality which is carried on or embodied in a type of machine readable medium. In this way computer program instructions may be provided to a processor of a general purpose computer special purpose computer embedded processor or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus so as to implement functions described above.

Terms regarding computer or machine readable medium or media as used herein therefore relate to any storage medium and any physical or carrier wave transmission medium which participates in providing instructions or code or data to a processor for execution or processing. Storage media include any or all of the memory of the gateway device or associated modules thereof or any of the hardware platforms as may be used in the service management center such as various semiconductor memories tape drives disk drives and the like which may provide storage at any time for the software programming. All or portions of the software may at times be communicated through the Internet or various other telecommunication networks. Such communications for example may enable loading of the software from one computer into another computer for example from gateway device or from another source into an element of the service management center . Thus another type of media that may bear the software elements includes optical electrical and electromagnetic waves such as used across physical interfaces between local devices through wired and optical landline networks and over various air links. The physical elements that carry such waves such as wired or wireless links optical links or the like also may be considered as media bearing the software. Hence the broad class of media that may bear the instructions or data encompass many forms including but not limited to non volatile storage media volatile storage media as well as carrier wave and physical forms of transmission media.

Those skilled in the art will recognize that the teachings of this disclosure may be modified extended and or applied in a variety of ways. An extension of the system architecture for example provides the ability of various and disparate third party application service providers to provide multiple application services independently. Application services are managed by the application service provider through the service management center meaning generally authorizing provisioning and monitoring the usage of a particular application service. This can be accomplished in a variety of ways with varying degrees of involvement of or coordination with the service management center . The service management center could manage these items soup to nuts or have minimal involvement. For example the service management center could deal directly with the third party application service provider to acquire application services at the request of a user and manage the delivery authorization usage monitoring and upgrading of the application service. At the other end of the spectrum a service provider may have arrangements with the third party application service provider by which orders or requests from the users may come directly to the third party application service provider and services are delivered to the user by the third party service provider who in turn coordinates with the managed service provider to register and monitor the particular application service placed in the gateway device . It should be noted that this ability to manage application services extends through the gateway device into the endpoint devices registered or associated with the gateway device or service management center .

While embodiments of the invention have been illustrated and described in detail in the disclosure the disclosure is to be considered as illustrative and not restrictive in character. All changes and modifications that come within the spirit of the invention are to be considered within the scope of the disclosure.

The foregoing has described what are considered to be the best mode and or other examples it is understood that various modifications may be made therein and that the subject matter disclosed herein may be implemented in various forms and examples and that the teachings may be applied in numerous applications only some of which have been described herein. It is intended by the following claims to claim any and all applications modifications and variations that fall within the true scope of the present teachings.

