---

title: System and method for characterizing color separation misregistration utilizing a broadband multi-channel scanning module
abstract: A system and method for characterizing color separation misregistration of a multi-color printing system utilizing a broadband multi-channel scanning module, such as an RGB scanner, are provided. The system and method include generating a spectral reflectance data structure corresponding to a broadband multi-channel scanning module. The spectral reflectance data structure includes at least one parameter. The at least one parameter may correspond to the broadband multi-channel scanning module and/or a printing module. The system and method further provide for calibrating a spectral-based analysis module by utilizing the spectral reflectance data structure. The system and method also include characterizing color separation misregistration utilizing the calibrated spectral-based analysis module by examining at least one plurality-separation patch.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08228559&OS=08228559&RS=08228559
owner: Xerox Corporation
number: 08228559
owner_city: Norwalk
owner_country: US
publication_date: 20070521
---
The present disclosure is related to previously filed U.S. patent applications entitled SYSTEM AND METHOD FOR CHARACTERIZING COLOR SEPARATION MISREGISTRATION filed on Aug. 1 2006 and assigned U.S. patent application Ser. No. 11 496 909 SYSTEM AND METHOD FOR CHARACTERIZING SPATIAL VARIANCE OF COLOR SEPARATION MISREGISTRATION filed on Aug. 1 2006 and assigned U.S. patent application Ser. No. 11 496 927 and SYSTEM AND METHOD FOR HIGH RESOLUTION CHARACTERIZATION OF SPATIAL VARIANCE OF COLOR SEPARATION MISREGISTRATION filed on Aug. 1 2006 and assigned U.S. patent application Ser. No. 11 496 907 all three of which have been assigned to the present assignee and the entire contents thereof are hereby incorporated by reference.

The present disclosure relates to multi color printing systems and in particular to a system and method for characterizing color separation misregistration of a multi color printing system utilizing a multi channel scanner.

In multi color printing systems a limited number of color separations are used for marking a substrate for achieving a wider variety of colors with each separation marking the substrate using discrete shapes such as dots having a circular or oval shape or periodic line patterns. This concept is generally known as color halftoning and involves combining two or more patterned separations on the substrate. The selection of color separations and halftone pattern designs are carefully chosen for achieving a visual effect of the desired color.

Many prior art printing systems use cyan magenta yellow and black also referred to as CMYK color separations that mark a substrate using discrete cluster dots. The dots may be marked in a dot on dot fashion by marking the substrate with a first and second color separation with the dots of the second color separation superimposed over the dots of the first color separation for achieving the desired color. In addition the dots may be applied in a dot off dot fashion with the dots of the second color separation placed in the voids of the dots of the first color separation for achieving the desired color. However multi color printing systems are susceptible to misregistration between color separations due to a variety of mechanical related issues. For both dot on dot and dot off dot rendering color separation misregistration may cause a significant color shift in the actual printed color that is noticeable to the human eye.

Broadband multi channel scanners are widely available. Typically they include a plurality of channels each of which are responsive to a wide spectrum of optical wavelengths. Since the human eye has three types of daytime optical receptors i.e. cone cells broadband multi channel scanners usually contain 3 channels each of which are usually referred to as Red Blue and Green channels. Therefore these broadband three color scanners are called RGB scanners.

A widely used marking technology includes using rotated cluster dot sets since anomalies e.g. color shifts due to color separation misregistrations are subtle and less detectable by the human eye. However even in these cases color misregistrations can be objectionable particularly at edges of objects that contain more than one separation. Therefore it is important to characterize color separation misregistration in order to perform corrective action in the print engine.

Many other methods for characterizing misregistration of color separations include using physical registration marks. The registration marks include two fine straight lines each line formed using a different color separation. The two lines are aligned and joined to form one straight line. Alignment of the two lines is analyzed with misalignment indicating misregistration of one of the color separations relative to the other. The analysis may include studying the printed registration marks with a microscope and visually determining if misregistration has occurred. Such analysis is tedious and not conducive to automation. The analysis may include imaging the marker with a high resolution scanning device and analyzing the high resolution scanned image using complex software for determining the positions of the registration marks relative to one another. These types of analysis sometimes require high resolution scanning equipment and may involve a significant amount of computational power.

In another method used for higher end printer devices outputting high volume and or high quality images misregistration of color separations is characterized by measuring the transition time between the edges of two primary separation patches e.g. cyan and magenta on a moving photoreceptor belt. The patches have angled edges e.g. chevrons that allow the determination of misregistration in both the fast scan direction transverse to the longitudinal axis of the photoreceptor belt and slow scan direction parallel to the longitudinal axis of the photoreceptor belt . Simple photo detectors are used to measure the time between the moving edges of the chevrons and this can in turn be used to compute the misregistration in both slow and fast scan directions. However there is a continuing need to characterize color separation misregistration effectively and or efficiently.

The present disclosure relates to multi color printing systems and in particular to a system and method for characterizing color separation misregistration of a multi color printing system utilizing a multi channel scanner.

One aspect of the present disclosure includes a method for characterizing color separation misregistration of a multi color printing system that involves generating a spectral reflectance data structure. The spectral reflectance data structure may correspond to a broadband multi channel scanning module and may include at least one parameter. The broadband multi channel scanning module may be a RGB scanner. The method may provide for calibrating a spectral based analysis module by utilizing the spectral reflectance data structure and characterizing color separation misregistration utilizing the calibrated spectral based analysis module by examining at least one plurality separation patch. The plurality separation patch described in more detail infra.

In another aspect thereof the step of generating the spectral reflectance data structure may include marking a substrate to form a misregistration gamut target on the substrate. The misregistration gamut target may include at least one training patch and or at least one Neugebauer primary patch. The step of marking the substrate to form a misregistration gamut target on the substrate may utilize a printing module. In addition the step of generating the spectral reflectance data structure may also include scanning the misregistration gamut target utilizing a broadband multi channel scanning module.

In another aspect thereof at least one parameter mentioned supra may be an approximation of at least one of and circumflex over discussed in more detail infra. The approximation of may be calculated by an module. The module may utilize Equation 6. The approximation of circumflex over may be calculated by a circumflex over module. The circumflex over module may utilize Equation 13. The approximation of may be calculated by a module discussed in more detail infra.

In another aspect thereof the step of calibration of the spectral based analysis module by utilizing the spectral reflectance data structure may include inverting Equation 15 utilizing at least one parameter of the spectral reflectance data structure. Also the step of inverting the Equation 15 may result in a solution in accordance with at least one of Equation 18 for at least one of P partitions of an RGB color space.

In another aspect thereof the step of characterizing color separation misregistration utilizing the calibrated spectral based analysis module by examining at least one plurality separation patch may include scanning at least one plurality separation patch utilizing the broadband multi channel scanning module. Additionally or alternatively the step may further include determining r g and b for at least one plurality separation patch and or determining the approximate color separation misregistration within the spatial domain of at least one plurality separation patch in accordance with at least one Equation 18 for the at least one of P partitions of the RGB color space by utilizing r g and b .

In another aspect thereof the present disclosure includes a system implemented by an operative set of processor executable instructions configured for execution by at least one processor for determining color separation misregistration in a multi color printing system. The system may include a communication module a spectral based analysis module a generation module and or a calibration module. The communication module may be configured for receiving a patch data structure. The patch data structure may correspond to at least one plurality separation patch and may have been generated utilizing a broadband multi channel scanning module e.g. an RGB scanner. The spectral based analysis module may be in operative communication with the communication module and may process the patch data structure to characterize color separation misregistration. Also the spectral based analysis module may be calibrated.

The generation module may generate a spectral reflectance data structure corresponding to a multi channel scanner and the spectral reflectance data structure may include at least one parameter. The calibration module may calibrate the spectral based analysis module by utilizing a spectral reflectance data structure. The calibration module may calibrate the spectral based analysis module by utilizing the spectral reflectance data structure by inverting Equation 15 utilizing at least one parameter of the spectral reflectance data structure resulting in a solution in accordance with at least one Equation 18 for at least one of P partitions of an RGB color space. As mentioned above at least one parameter may be an approximation of at least one of and circumflex over .

In another aspect thereof a system implemented by an operative set of processor executable instructions configured for execution by at least one processor for estimating color separation misregistration is provided. The system may include a means for calibrating a spectral based analysis module and a means for characterizing a color separation misregistration by examining a plurality separation patch utilizing an RGB scanner.

Color shifts due to misregistration for dot on dot and dot off dot patterns have been described in the article by Warren L. Rhodes Charles H. Hains entitled The Influence of Halftone Orientation on Color Gamut published in Recent Progress in Digital Halftoning an Imaging Society Technology publication in January of 1995. Therein color shifts that may occur due to misregistration for dot on dot and dot off dot halftone patterns are described in addition to the relationship between the value of chroma C with regards to transition from dot on dot and dot off dot color separation registrations which increases approximately monotonically as the halftone patterns transition therebetween.

Referring now to the drawings depicts a plurality separation patch . Plurality separation patch is a species of color separation misregistration patches color separation misregistration patches being the genus . The previously filed U.S. patent application entitled SYSTEM AND METHOD FOR HIGH RESOLUTION CHARACTERIZATION OF SPATIAL VARIANCE OF COLOR SEPARATION MISREGISTRATION discloses a color separation misregistration patch that is configured for characterizing color separation misregistration of multiple separations relative to a reference separation usually K is used as an example for reference by utilizing overlapping color separation markings referred to therein as a measurement patch however the aforementioned patch described in more detail therein is described herein as a plurality separation patch .

The plurality separation patch includes overlapping parallel lines using each of the color separations in a color space CMYK in the present example and having a first line pattern orientation i.e. parallel lines along the first direction. A line pattern may be formed by a plurality of lines. For example consider lines that are marked by a C separation. Lines form a line pattern of the C separation lines and form a line pattern of the Y and M separations lines form a line pattern of the K separation. The CMYK color space in this example may be formed by Cyan Magenta Yellow and Black inks or toners . The CMYK color space is typically used by multi color printing system. The CMYK color space may correspond to the individual inks or toners of a printing system utilized by a respective color separation e.g. a printing system may have a yellow ink that marks paper with a specific color separation dedicated for marking paper with that ink. However other combinations of toners and or inks may be used.

Although the line patterns are depicted as being parallel to the axis of the first direction refer to the axes depicted in other line pattern orientation may be used e.g. lines and may be at a 45 angle to a line parallel to the axis of the first direction. As depicted lines and are parallel to the axis of the first direction and consequently may determine each respective color separation misregistration relative to a K color separation in the second direction. Utilizing multiple color separations patches with multiple orientations may be needed to characterize color separation misregistration in both of the first and second directions. One method of rotation is described in a previously filed U.S. Application entitled SYSTEM AND METHOD FOR CHARACTERIZING COLOR SEPARATION MISREGISTRATION .

Plurality separation patch may be a graphic depiction a digital image e.g. depicts plurality separation patch as a visualization of a digital image file that may be sent to color separations to mark on paper. Additionally or alternatively plurality separation patch may be a depiction of a patch marked on a substrate with no color separation e.g. a patched marked on paper with no relative C M and or Y color separation misregistration relative to the K color separation.

Plurality separation patch may be utilized by a method for simultaneously estimating misregistration of C M and Y color separations relative to a K color separation from spectral measurements of plurality separation patch . A unique reflectance spectrum may result from plurality separation patch based upon misregistration s and as long as the reflectance properties of the individual inks or toners of each respective color separation have suitable optical absorptions characteristics an examination of the reflectance spectrum of plurality separation patch may be utilized to characterize color separation misregistration s .

For an example consider the following assume that plurality separation patch is a depiction of an image stored in a file. If multiple color separations CMYK is this example are instructed to mark paper with plurality separation patch the average color appearance of the image as marked on the paper will be a function of the relative color separation misregistration of the C M and Y color separations relative to the K color separation. In addition the reflectance spectrum of plurality separation patch may be measured by a spectrophotometer to assist in determining the color separation misregistration mentioned in this example.

Note that several of the color separation halftone lines are shifted relative to the K halftone pattern lines also referred to as halftone lines . For example the C halftone lines are phase shifted L 4 relative to K. And the M and Y halftone lines are phase shifted L 4 relative to K. Note that the halftone lines are repeating creating a periodic halftone pattern the repeating pattern is defined as having a period L. For misregistrations of the C M and Y color separations relative to the K color separations a unique reflectance spectrum exists for each possible color misregistration.

Referring now to the drawings is a cross section view of a plurality separation patch as marked on a substrate with a color separation misregistration of the Y color separation in the negative second direction relative to the C M and K color separations. Note that the orientation of the axes of relative to that of for proper orientation however the cross section view of plurality patch is not to scale and does not possess the same proportions as depicted in . Additionally is shown consistent with a plurality separation patch with a color separation misregistration while does not assuming it is a depiction of a patch marked on a substrate rather than a depiction of an image file .

There may be significant disparity between the actual reflectance spectrum vs. the predicted reflectance spectrum of plurality separation patch . Substrate scattering can cause significant deviations in actual reflectance spectrum compared to some predicted reflectance spectrum theoretical models of plurality separation patch . This disparity is partly because photons entering into one region of plurality separation patch may emerge from another region of plurality separation patch . The reflectance spectrum of plurality separation patch may be mathematically modeled using a probabilistic framework to account for substrate scattering e.g. paper scattering. To account for scattering of local substrate plurality patch s reflectance spectrum may be described in terms of a point spread function PSF x x indicating the probability that a photon will enter the substrate at region at region x and exit at region x . The average reflectance across a halftone cell and by extension plurality patch can be computed by 

The coefficients of Equation 1 are based purely upon the geometric properties of plurality patch and describe the coupling between region m and region n. And T is the transmission of the mregion as shown in .

Referring simultaneously to is a 3 axes graphic depicting multiple color separation misregistration states relative to a reference color separation K and is a 3 axes graphic of a CIE 1976 L a b color space depicting multiple discrete reflectance spectra that correspond to the color separation misregistration states depicted in . shows discrete misregistration states with a resolution of about 5 m relative to a K color separation and may correspond to misregistration states associated with plurality patch . Also may correspond to the misregistration states of plurality patch in a specific direction e.g. the second direction of plurality patch as depicted in .

Utilizing Equation 1 an estimate of the reflectance spectra resulting from each possible misregistration state depicted in of plurality patch may be calculated. The resulting reflectance spectra may be depicted as a corresponding discrete reflectance spectra in terms of a CIE 1976 L a b color space as depicted in . For example a misregistration of a plurality patch as marked on the substrate may have a misregistration of 15 m of a Y color separation in a second direction 10 m of a C color separation in second direction and a 20 m misregistration of a M color separation in the second direction. These misregistration states are described in terms of a differential to the K color separation. Thus there is a color separation misregistration state corresponding to the misregistration state described and utilizing Equation 1 a discrete reflectance spectra in term of a CIE 1976 L a b color space may be calculated. That calculation may be depicted as a discrete reflectance spectra in .

Each misregistration state depicted in may be considered to be mapped i.e. correspond to a depicted discrete reflectance spectra within the graphic of utilizing Equation 1. A lookup table may be generated that maps the misregistration states of to the corresponding spectra of . The lookup table may be implemented in hardware software software in execution or some combination thereof. Additionally or alternatively the lookup table may be a data structure such as an array and or an associative array. If an estimated reflectance spectra is measured by a spectrophotometer of plurality patch and within the lookup table there is not a discrete value described therein a discrete reflectance spectra that is closest to the measured reflectance in terms of Euclidian distance to may be chosen to determine a discrete color separation misregistration state of . Additionally or alternatively an interpolation algorithm may be utilized in order to determine a color separation misregistration estimate utilizing a Lookup table.

However note that a measurement patch such as plurality patch has the property of having a spatial domain for determining and or estimate color separation misregistration. For example plurality patch may have a spatial domain corresponding approximately to the length and width dimensions of the patch and may only estimate color separation misregistration in the second direction. Another separation patch may be needed to estimate color separation in a certain spatial domain to character color separation misregistration in the first and second directions. The spatial domain may be the area of a substrate in which a color separation misregistration patch such as plurality patch may be used to measure and or estimate the color separation misregistration of that region of the substrate.

Referring simultaneously to B and and note as mentioned supra the previously filed U.S. patent entitled SYSTEM AND METHOD FOR HIGH RESOLUTION CHARACTERIZATION OF SPATIAL VARIANCE OF COLOR SEPARATION MISREGISTRATION describes in more detail the spectral effects of a color separation misregistration has on plurality separation patch as may be measured from a spectrophotometer however depicts a flow chart diagram of a method for characterizing color separation misregistration of a multi color printing system utilizing a broadband multi channel scanning module . Broadband multi channel scanning module may be a Red Green Blue RGB scanner. For example broadband multi channel scanning module may be the Canon DR 1210C or the Xerox DocuMate . Note that broadband multi channel scanning module is depicted twice in only for providing a more intuitive representation of method and should be considered to be the same module .

Referring now to the drawings depicts a method that may be implemented by processing module that may include processor . Processor may be a microprocessor a microcontroller a virtual processor on a virtual machine an ASICS microchip soft microprocessor software emulation of hardware or other device sufficient for processing instructions. Additionally or alternatively processor may communication with memory . Memory may include data and or instructions e.g. processing module may follow the Von Neumann architecture. Alternatively in another embodiment processing module may follow the Harvard architecture i.e. instructions may be outside of memory and may be part of other memory not depicted .

Method contains off line stage and on line stage . In this exemplary embodiment method may use the acts within off line stage once and alternately may use on line stage multiple times e.g. off line stage is mostly used for execution of a one time calibration algorithm while on line stage characterizes color separation misregistration multiple times.

Method may include step which is generating the spectral reflectance data structure corresponding to broadband multi channel scanning module . Step may include step that is marking a substrate e.g. paper to form a misregistration gamut target such as misregistration gamut target . Step may utilize printing module to accomplish the marking. Printing module may be a printer a printer system a software interface e.g. a software driver and or other technology that has the capability to directly and or indirectly to form misregistration gamut target .

Misregistration gamut target may include training patches and Neugebauer primary patches . The relevance of gamut target including training patches and Neugebauer primary patches is discussed in more detail infra. Broadband multi channel scanning module may scan the misregistration gamut target during step to assist in generating spectral reflectance data structure . Broadband multi channel scanning module may be a RGB scanner a software interface to a scanner a two or more channel scanner and or any other hardware and or software device that is sufficient to assist in generating spectral reflectance data structure .

Spectral reflectance data structure may include parameters . Parameters may be a data file implemented in software hardware and or some combination thereof. Additionally or alternatively parameter may be any technology to store data. Parameters may include parameters and or . Parameter may be an approximate of and or may be a representation of parameter may be an approximate of circumflex over and or may be a representation of circumflex over and finally parameter may be an approximation of and or may be a representation of . Parameters and are described in more detail infra.

Parameter may be calculated by module utilizing Equation 6 parameter may be calculated by circumflex over module utilizing Equation 13 and parameter may be calculated by module . The way in which the module calculates parameter may be found by referencing the previously filed U.S. application entitled SYSTEM AND METHOD FOR HIGH RESOLUTION CHARACTERIZATION OF SPATIAL VARIANCE OF COLOR SEPARATION MISREGISTRATION and more specially by referencing Equation 7 found therein.

Method may include step which is calibrating analysis module by utilizing the spectral reflectance data structure . Step may include step which is inverting Equation 15 utilizing parameters of spectral reflectance data structure resulting in a solution for at least one Equation 18 for at least one P partition of a RGB color space. Step is discussed in more detail infra.

Spectral based analysis module may be implemented in hardware software or some combination thereof and may be utilized to assist broadband multi channel scanning module in determining color separation misregistration associated with printing module . Spectral based analysis module may be calibrated one or more times and or in another embodiment may be partially or wholly calibrated before off line stage .

Step calibrates spectral based analysis module that becomes calibrated spectral based analysis module ready for characterizing color separation misregistration. Note that calibrated spectral based analysis module is part of on line stage .

Step is characterizing color separation misregistration utilizing the calibrated spectral based analysis module by examining at least one color separation misregistration patch depicted as at least one color separation misregistration patch . The calibrated spectral based analysis module referred to in step may be calibrated spectral based analysis module . Calibrated spectral based analysis module may implement and or control step e.g. For example calibrated spectral based analysis module may control step by utilizing an application programming interface API an application binary interface ABI a remote procedure call RPC Inter Process Communication IPC any message passing scheme and or any other sufficient implementation e.g. communicating with drivers. Additionally or alternatively the patch mentioned may be the one referred to in steps through . Step is marking a substrate forming the at least color separation misregistration patch . Step may be accomplished by printing module printing at least one color separation misregistration patch .

Step may also include step which is scanning the at least one color separation utilizing the broadband multi channel scanning module . As mentioned supra broadband multi channel scanning module may be a RGB scanner. Step is determining r g and b for the at least one color separation misregistration patch discussed in more detail infra. Step may utilize the scanning that takes place in step . And step is determining the approximate color separation misregistration within the spatial domain of the at least one color separation misregistration patch in accordance with the at least one Equation 18 for the at least one P partition of the RGB color space by utilizing the r g and b . This is discussed in more detail infra as well.

A further discussion of the mathematical basis for method follows. An operator that projects a reflectance spectra to the scanner space of the broadband multi channel scanning module is needed. Typically multi channel color scanners measure the intensities of each respective channel three in an RGB scanner . The intensity of the three channels of a RGB scanner such as broadband multi channel scanning module as measured at a particular pixel y i r g b for a three channel color scanner is given by 

Generally a reflectance spectrum is considered to be adequately sampled in discrete form when the reflectance spectrum is sampled 31 times in the range of approximately 400 nm to 700 nm. The signal acquired for each pixel may be described by the matrix vector equation y Sr 4 where .represents the matrix transpose y is the measured RGB color S is a matrix that has the combined quantum efficiencies of the three channels as its columns of broadband multi channel scanning module and r is the sampled reflectance spectrum of a measured pixel e.g. a sample taken from plurality patch . For a large number of scanner measurements Equation 9 discussed infra allows for the formulation of three over determined systems of equations of the form of Equation 5 as follows y Rs i r g b 5 

Equation 5 may be used to independently relate three color measurements from N patches at each channel of broadband multi channel scanning module to a corresponding reflectance spectra of each respective patch. For example consider an exemplary patch referred to as Npatch. Npatch may be measured utilizing broadband multi channel scanning module . With the reflectance measurement in R of Equation 5 and with the information of scorresponding to broadband multi channel scanning module the corresponding channels may be mapped to y which is illustrated in Equation 5.

The rows of the matrix R may be formed by stacking r k 1 2 . . . N the reflectance spectra corresponding to the measurements in y.

Estimates of scan be obtained by solving Equation 5. To ensure that the estimates of sare sufficiently accurate for RGB values likely to result due to a color separation misregistration we need to choose a training set of N patches that well represent the range of RGB values of color separation misregistration states.

Referring now simultaneously to B A and B a k means algorithm was used to cluster the reflectance spectra depicted in to obtain a reduced number of reflectance spectra that represent a reduced but sufficient number of color separation misregistration states depicted in with the corresponding reflectance spectra whose CIELAB representations are shown in . Each color separation misregistration state depicted in may be mapped to a reflectance spectra depicted in . Additionally or alternatively a lookup table may be generated that maps the misregistration states of to the corresponding spectra depicted in . has the 3 dimensional domain of a CIE 1976 L a b color space. The resulting CIE 1976 L a b color space values and the corresponding color separation misregistration states are shown in respectively and may correspond to training patches of . Misregistration gamut target may be formed from 353 patches having approximately the same reflectance spectra as the discrete spectra represented in . Additionally Misregistration gamut target may have patches corresponding to the Neugebauer primaries of printing module e.g. Neugebauer primary patch .

However the systems of equations that may be expressed by Equation 5 are ill posed i.e. no exact solution is likely to be determined and can not be reliably solved as a least squares problem. However the standard regularization solution may be used and the smoothness of the quantum efficiency functions may be utilized. The sharp peaks may be neglected that may be present in the efficiency functions due to the spectral power distribution of the illuminant associated with broadband multi channel scanning module . However rather than using Equation 5 to solve for an Equation 6 with the function being smoothed utilizing and L is shown infra. The concept of smoothing may be found in the book titled Nonlinear Programming 2edition by Dimitri P. Bertsekas ISBN 1 886529 00 0 published by Atena Scientific.

where y N is the number of patches measured that may be included in misregistration gamut target as training patches L is the Laplacian operator that provides a penalty on the roughness of s are regularization parameters and are chosen using generalized cross validation GCV . Referring to module may utilize Equation 6 for determining parameter .

Referring now to shows the combined RGB channel efficiency functions obtained by solving Equation 10 discussed infra and shows the volume occupied by possible color separation misregistrations in the RGB gamut associated with broadband multi channel scanning module .

The reflectance measured at a particular pixel as measured by broadband multi channel scanning module See may be expressed by a modified version of Equation 1 as 

The intensity measured at each scanner color channel of multi channel scanning module may be expressed as follows 

Where k r g b in Equations 8 9 and 10 when broadband multi channel scanning module is embodied as a RGB scanner. However the i referred to in Equations 8 10 above and Equations 11 12 is not the same as the i r b g referred to above. However in accordance with the present disclosure another model is disclosure for channel measurements of broadband multi channel scanning module inspired by the standard Yule Nielsen correction applied to the Neugebauer reflectance model. To account for substrate scattering the Neugebauer model may be extended by adding an empirical correction parameter as 

where the coefficients and serve as fit parameters in standard printer modeling such as modeling of printing module .

However for the purposes of simplifying subsequent modeling another model is provided that models scanner color measurements e.g. broadband multi channel scanning module that accounts for scattering inspired by the standard Yule Nielsen correction applied to the Neugebauer reflectance model and includes a such as in 

Note that only diagonal elements of are considered i.e. and those elements are computed in the absence of scattering. In other words simply become the fill factors of the individual regions shown in . In this way the scattering effects are accounted for purely by . Measurements of the misregistration gamut target may then be used to obtain the values of such that 

However the model described by Equation 12 may describe scanner RGB measurements e.g. broadband multi channel scanning module in terms of misregistrations states based upon a misregistration patch e.g. plurality patch . Note that the matrix formed from the coefficients is a function of C M and Y which represent relative hence the delta function misregistration of C M and Y color separations with respect to a K color separation e.g. the color separations associated with printing module . To get color separation misregistration estimates from RGB measurements such as from broadband multi channel scanning module we need to invert the model e.g. derive a model capable of estimating color separation misregistrations as a function of channel measurements from broadband multi channel scanning module .

 may be approximated by discarding all but the first order coefficients of its Taylor series expansion denote y y to get

Referring to Equation 14 note that y are linear in C M and Y and also note that gamma compensated scanner color measurements can be expressed by the linear relation as follows 

Note the linearity of gamma compensated color measurements with respect to misregistration states as expressed by Equation 15 and also note that is only piecewise continuous together these two aspects suggest that the inverse of Equation 15 has a locally linear solution. Therefore a model that expresses estimated color separation misregistration states in terms of gamma compensated color measurements is as follows 

where an RGB color space may be divided into P partitions and Aand crepresent the coefficients for the ppartition. A closed form solution to Equation 18 is highly intractable due to the inseparable partial derivatives that constitute the coefficients of however an inverting algorithm that may be utilized by step of bas ed upon a hierarchical locally linear framework. An embodiment of step of is depicted in . Refer simultaneously to A and B. is a flow chart diagram depicting an embodiment of step of . Step of includes step that is utilizing a look up table to solve for a partition of a color space having a global fit. The lookup table of step may include color space values mapped to reflectance values. The lookup table may include color space values mapped to respective reflectance values. The look up table may be the one discussed supra regarding . Additionally or alternatively the look up table may be one discussed supra regarding . The partition referred to in step may be cuboid of . Step is partitioning the partition e.g. cuboid further into a first and second sub partition at the median along the longest side of the partition of the color space. Step is solving for a locally optimal solution for Aand cfor at least one of the partition the first sub partition and the second sub partition of the color space. Step is Evaluating the errors with respect to color separation misregistration estimates obtained from spectral measurements for each sub partition and determining the partition with the highest error. Then decision may be made. Decision is deciding to repeat on to step or if step terminates. If either an acceptable global error value is reached or an acceptable number of partitions is reached then step may be finished. Otherwise step may continue on the step which is partitioning the sub partition with the highest error recursively and that partition is further partitioned during step etc.

Referring to graphic is a 3 axes graphic depicting a RGB color space with multiple partitions as described in step . shows a graphic which shows the results error over a misregistration gamut of an implementation of step as a function of the total number of partitions and sub partitions.

Referring to the drawings depicts a system for characterizing color separation misregistration of a multi color printing system. System may include communication module spectral based analysis module calibration module and generation module . Modules through may be implemented in hardware software software in execution and or some combination thereof. Additionally or alternatively system may be implemented utilizing an operative set of processor executable instructions e.g. instructions configured for execution by at least one processor e.g. processor for determining color separation misregistration in a multi color printing system. For example system may determine color separation misregistration in a printing system corresponding to printing module . Processing module may be similar to the one shown in however as depicted in for facilitating system . Additionally or alternatively in another embodiment processing module may be configured using a Harvard Architecture.

Printing module may print at least one plurality separation patch that may be similar to plurality separation patch of . Broadband multi channel scanning module may either directly or indirectly scan at least one plurality separation patch . Additionally or alternatively broadband multi channel scanning module may directly or indirectly convert it to or generate patch data structure . For example broadband multi channel scanning module may be a software interface to an RGB scanner that can scan at least one plurality separation patch and then process the scan so that patch data structure is created patch data structure may include any sufficient data. Additionally or alternatively broadband multi channel scanning module may be an RGB scanner.

Patch data structure may be implemented in hardware software firmware and or some combination thereof. For example patch data structure may be an object such as in an object orientated programming language and or patch data structure may be on in the stack memory or in the heap memory of a computer system.

Communication module can receive patch data structure . As mentioned supra communication module may be implemented in hardware and or software. For example communication module may be an internet connection a TCP IP connection a bus a USB connection or any technology sufficient for receiving patch data structure . Note that patch data structure may have been generated by utilizing broadband multi channel scanning module therefore patch data structure may correspond to at least one plurality separation patch .

System may include spectral based analysis module and may be in operative communication with communication module which may be similar to the one shown in . Spectral based analysis module can process patch data structure to characterize color separation misregistration and may be calibrated to characterize color separation registrations errors of printing module utilizing broadband multi channel scanning module . Steps of may be utilized by spectral based analysis module directly and or indirectly. Additionally or alternatively spectral based analysis module may direct step for example spectral based analysis module may call one or more software subroutines e.g. a Java method so that step occurs.

System may also include calibration module which may assist or conduct the calibration of spectral based analysis module . Additionally or alternatively calibration module may utilize spectral reflectance data structure which may be similar the one depicted in . Step see is calibrating a spectral based analysis module e.g. spectral based analysis module utilizing the spectral reflectance data structure e.g. spectral reflectance data structure step may be implemented and or utilized by calibration module directly or indirectly. Note the arrow between calibration module and spectral based analysis module that indicates the two modules may be in operative communication with each other. Calibration module also may include step as depicted in either and or . Step is inverting Equation 15 utilizing the parameters of the spectral reflectance data structure resulting in a solution for at least one Equation 18 for at least one P partition of a RGB color space.

Generation module may generate spectral reflectance data structure . Additionally or alternatively generation module may implement and or utilize either directly of indirectly step . Additionally generation module may utilize any of the block items as shown in e.g. printing module as necessary to implement step . Any of modules through may utilize any other modules shown in to sufficiently and or efficiently implement system .

It will be appreciated that variations of the above disclosed and other features and functions or alternatives thereof may be desirably combined into many other different systems or applications. Also that various presently unforeseen or unanticipated alternatives modifications variations or improvements therein may be subsequently made by those skilled in the art which are also intended to be encompassed by the following claims.

