---

title: Receiver and receiving method
abstract: A receiver includes a receiving section configured to receive digital broadcasts; a demodulating section configured to demodulate a signal received by the receiving section and output a frame-based signal including a plurality of symbols; a detecting section configured to detect a symbol position in a frame-based signal provided from the demodulating section; a decoding section configured to decode a frame-based signal from the demodulating section in accordance with a symbol position; a symbol counter configured to output a count output specifying a symbol position in a signal decoded in the decoding section; and a control section configured to control counting of the symbol counter on the basis of a symbol position detected by the detecting section and on a count value of the symbol counter.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07885356&OS=07885356&RS=07885356
owner: Kabushiki Kaisha Toshiba
number: 07885356
owner_city: Tokyo
owner_country: JP
publication_date: 20071226
---
This application is based upon and claims the benefit of priority from the prior Japanese Patent Application No. 2006 356368 filed on Dec. 28 2006 the entire contents of which are incorporated herein by reference.

The present invention relates to a receiver and a receiving method suitable for OFDM applied to mobile communication systems wireless LAN systems and the like.

Digital television broadcasting has been started recently. OFDM Orthogonal Frequency Division Multiplexing modulation is used as a transmission scheme for terrestrial television broadcasting systems in Europe and Japan. An advantage of the OFDM is its ability to reduce delay interference in multipath transmission channels which is essential transmitting conditions to terrestrial television broadcasting systems by transmitting wideband signals by a large number of orthogonal carriers.

Digital broadcasting in Japan has adopted ISDB T. In ISDB T signal processing such as error correction coding interleaving coding and digital modulation is applied to a transport stream TS specified in the MPEG 2 standard and the TS is OFDM modulated and output.

In ISDB T 108 OFDM symbol carriers in the frequency domain make up one block and one two or four blocks make up one segment depending on modes. That is the number of carries in one segment is 108 216 or 432. In ISDB T a bandwidth equivalent to 13 segments is used for transmission.

Also in ISDB T 204 OFDM symbols make up one frame in the time domain. TS transmission and energy spreading are performed on a frame by frame basis.

ISDB T allows hierarchical transmission in which multiple layers of data with different transmission properties are transmitted simultaneously. Each layer includes one or more OFDM segments and parameters such as a carrier modulation scheme a coding rate of inner codes and a time interleave length can be specified for each layer.

Information about such layers and a frame synchronization signal is transmitted as TMCC Transmission and Multiplexing Configuration Control . TMCC is into inserted every block of each symbol. That is one carrier of each block is allocated to TMCC and one symbol contains 1 bit BPSK modulated TMCC information. Accordingly 204 bits of TMCC information is transmitted in one frame in each block.

16 bits of the 204 bits of TMCC information in an OFDM frame are a synchronization signal. A receiver detects the synchronization signal to establish frame synchronization. In ISDB T energy spreading is performed in order to prevent concentration of energy on a particular frequency. Energy spreading is accomplished by adding pseudorandom numbers to data by using a PN pseudorandom number generator. The initial value of the pseudorandom generation is provided at the start of a frame. Decoding cannot be performed unless a pseudorandom number value is known. Therefore when a synchronization signal is detected halfway in a frame synchronization is established at the start of the frame subsequent to the frame in which the synchronization signal is detected.

Therefore Japanese Patent Laid Open No. 2002 84255 discloses a technique that when a synchronization signal is detected halfway in a frame a pseudorandom number generated at the point is calculated thereby enabling decoding to be started with the symbol immediately after the synchronization is detected. However digital broadcasting in which multiple modes and layers are set as mentioned above requires a huge amount of calculation and memory capacity in order to calculate pseudorandom number values for all settings.

In ISDB T two types of synchronization signals having patterns different with each other are alternately used in every other frame. Accordingly time for two or more frames is required for establishing full synchronization. Japanese Patent Laid Open No. 2005 65219 discloses a technique that calculates reliability in order to successfully establish synchronization using only one frame. However the technique proposed in Japanese Patent Laid Open No. 2005 65219 cannot establish synchronization until the start of a next frame at which the initial value for energy spreading is provided even when a synchronization signal is detected halfway in the previous frame.

A receiver in one mode of the present invention includes a receiving section configured to receive digital broadcasts a demodulating section configured to demodulate a signal received by the receiving section and output a frame based signal including a plurality of symbols a detecting section configured to detect a symbol position in a frame based signal provided from the demodulating section a decoding section configured to decode a frame based signal from the demodulating section in accordance with a symbol position a symbol counter configured to output a count output specifying a symbol position in a signal decoded in the decoding section and a control section configured to control counting of the symbol counter on the basis of a symbol position detected by the detecting section and on a count value of the symbol counter.

A baseband OFDM signal is input in a receiving circuit in . The OFDM signal can be obtained by tuning in on the OFDM signal received at an antenna not shown with a tuner and detecting the OFDM signal with quadrature detection. The receiving circuit removes guard intervals from the baseband OFDM signal and transforms the OFDM signal in a time domain to an OFDM symbol in a frequency domain by FFT Fast Fourier transform . The OFDM symbol is provided to a demodulating circuit .

The demodulating circuit restores original data from the input OFDM symbol. For example each sub carrier of OFDM symbols has been modulated with a modulation scheme such as PSK modulation or QAM modulation and the demodulating circuit restores original data by demodulation corresponding to the modulation scheme used.

An output from the demodulating circuit is provided to a decoding circuit . The decoding circuit performs the reverse of inner coding and outer coding which are error correction applied at the transmitter side and the reverse of energy spreading to restore data transmitted by the OFDM signal. The inner coding and outer coding may be convolutional coding RS coding or the like. While specific types of coding have been given by way of example the present invention is not limited to these.

The output from the demodulating circuit is also provided to a TMCC detecting circuit . The TMCC detecting circuit detects TMCC inserted in each OFDM frame from the output of the demodulating circuit .

The synchronization signal in TMCC detected by the TMCC detecting circuit is provided to a frame synchronization detecting circuit . As shown in Table 1 16 bits B to B in each frame represent a synchronization signal. The frame synchronization detecting circuit detects the same pattern that is specified by bits B to B in Table 1 as a synchronization signal. The frame synchronization detecting circuit detects the synchronization pattern at a midpoint in an OFDM frame. The frame synchronization detecting circuit outputs a detection result of the frame synchronization signal to a pseudorandom number generator .

Data from the demodulating circuit is provided to a Viterbi decoding circuit in the decoding circuit . The Viterbi decoding circuit performs Viterbi decoding of a signal convolutional coded at a transmitter. An output from the Viterbi decoding circuit is provided to an adder . Provided to the adder is a pseudorandom number value from a PN generating circuit which will be described later. The adder adds a pseudorandom number value to an output from the Viterbi decoding circuit after synchronization is established thereby performing energy despreading. Accordingly energy despreading in the decoding circuit is enabled by detection of frame synchronization.

An output from the adder is provided to deinterleave circuit . The deinterleave circuit performs the reverse of interleaving performed at the transmitter. An output from the deinterleave circuit is provided to an RS decoding circuit . The RS decoding circuit corrects errors in transmission to restore original data and outputs it as decoded data.

In the present embodiment pseudorandom number values used in the decoding circuit can be obtained in the pseudorandom number generator .

A detected frame synchronization signal from the frame synchronization detecting circuit is provided to a control circuit in the pseudorandom number generator . The pseudorandom number generator includes a PN generating circuit that generates pseudorandom number values. The PN generating circuit is given an initial value by the control circuit and generates a pseudorandom number value every time a clock is input. Typically the same initial value that was set at the transmitter is set in the PN generating circuit at the timing of the start of a frame and a clock of a symbol period is provided to the PN generating circuit to enable the PN generating circuit to generate a pseudorandom number value required for energy despreading.

The clock is provided from a symbol counter to the PN generating circuit . The symbol counter counts signals of the OFDM periods under the control of the control circuit . That is a count value of the symbol counter after frame synchronization is established matches an OFDM symbol number. The symbol counter outputs a clock to the PN generating circuit at every count.

In the present embodiment the control circuit allows the PN generating circuit to run freely until a frame synchronization signal is input. That is the control circuit allows the symbol counter to generate a clock at every symbol period for example regardless of whether frame synchronization is detected by the frame synchronization detecting circuit . Accordingly the count value of the symbol counter does not match an OFDM symbol number until the frame synchronization detecting circuit detects a frame synchronization signal.

In the present embodiment the control circuit provides an initial value to the PN generating circuit regardless of whether a frame synchronization signal is detected or not and allows the symbol counter to start counting at the time when the initial value is set in the PN generating circuit . When a detected frame synchronization signal is provided from the frame synchronization detecting circuit to the control circuit the control circuit increases or decreases the speed of counting by the symbol counter or stops counting so that the count value of the symbol counter matches the position symbol number of the frame synchronization signal in the OFDM frame.

For example the control circuit causes the symbol counter to count up at a higher or lower speed so that the count value matches the symbol number within a time for example one to several symbol durations if the count value of the symbol counter is smaller or greater than the symbol number of the frame synchronization signal. The symbol counter provides a clock to the PN generating circuit every time the symbol counter counts up and the PN generating circuit generates a pseudorandom number value every time a clock is input in the PN generating circuit . Thus the pseudorandom number value from the PN generating circuit will match a symbol number in input data within a time period of one to several symbol durations.

An operation of the embodiment configured as described above will be described below with reference to B C and . B and C are diagrams illustrating an operation of the pseudorandom number generator and is a flowchart showing an operation flow. shows count values of the symbol counter starting at the time when an initial value is set shows symbol numbers of received data and shows the timing of detection of a synchronization signal. The example shown in B and C differs from the example shown in in that the last symbol number of a synchronization signal pattern is 129.

A baseband OFDM signal is input in the receiving circuit . The receiving circuit removes guard intervals from the baseband OFDM signal and transforms the OFDM signal in the time domain to an OFDM symbol in the frequency domain by using FFT Fast Fourier transform . The OFDM symbol is provided to the demodulating circuit . The demodulating circuit restores original data from the input OFDM symbol. The demodulating circuit provides an OFDM frame to the decoding circuit . The Viterbi decoding circuit in the decoding circuit decodes the output from the demodulating circuit using Viterbi decoding and outputs the decoded data to the adder which performs energy despreading.

It is assumed here that synchronization with the received OFDM signal has not been established as in a time immediately after the receiver in is powered on or channel switching. The control circuit of the pseudorandom number generator controls the PN generating circuit to allow the PN generating circuit to run freely at step S of . In particular the control circuit sets an initial value in the PN generating circuit immediately after power on or channel switching and causes the PN generating circuit to start counting at the timing of the initial value setting.

A count value of the symbol counter is provided to the control circuit . A clock is provided to the PN generating circuit each time the symbol counter counts up. The PN generating circuit generates a pseudorandom number at every clock. The count value of the symbol counter has not yet matched a symbol number of an OFDM frame during being received and therefore the adder cannot perform energy despreading using a pseudorandom number value from the PN generating circuit .

On the other hand an OFDM frame is provided from the demodulating circuit to the TMCC detecting circuit . The TMCC detecting circuit detects TMCC inserted in each OFDM frame and provides the TMCC to the frame synchronization detecting circuit . When the frame synchronization detecting circuit detects a synchronization signal contained in TMCC the frame synchronization detecting circuit provides the detected synchronization signal to the control circuit .

The control circuit determines at a step S whether a synchronization signal has been detected. If a synchronization signal has been detected the control circuit increases or decreases the speed of counting of the symbol counter so that the count value of the symbol counter matches the symbol number of an OFDM frame during being received within a short of time step S .

It is assumed here that a synchronization signal is detected at the point of time when the count value of the symbol counter changes from 61 to 62 as shown in B and C. The control circuit controls the symbol counter to cause the symbol counter to increase the speed of counting. As a result the symbol counter counts up faster and in the duration of one symbol of the OFDM frame the count value of the symbol counter reaches the symbol number 131 of the OFDM symbol during being received as shown in B and C.

The control circuit after detecting the frame synchronization signal determines whether the symbol number of the OFDM frame during being received matches the count value of the symbol counter step S . Once the count value of the symbol counter matches the symbol number as a result of the faster counting up of the symbol counter the control circuit provides a signal of a symbol period to the symbol counter to cause the symbol counter to count up at every symbol period as shown in step S .

The symbol counter provides a clock to the PN generating circuit on every count even during the fast counting. The PN generating circuit generates a pseudorandom number value every time a clock is input. The pseudorandom number from the PN generating circuit changes to a value corresponding to the symbol number 131 in one symbol duration after detection of the synchronization signal.

Thus the adder can start energy despreading within a very short time after the synchronization signal is detected. The adder adds an output from the Viterbi decoding circuit to a pseudorandom number value from the PN generating circuit to accomplish energy despreading. An output from the adder is deinterleaved by the deinterleave circuit decoded by the RS decoding circuit and is output as decoded data.

In the present embodiment the speed of counting of the symbol counter is increased or decreased to cause the symbol count value to match the symbol number of an OFDM signal being received thereby causing the PN generating circuit to generate a pseudorandom number value in a short time that enables energy despreading. Consequently frame synchronization can be established within a very short time after a frame synchronization signal is detected.

While the synchronization signal is detected when the count value of the symbol counter is smaller than the symbol number in the example described above and shown in B and C similar control can be achieved in an example in which a synchronization signal is detected when the count value of the symbol counter is greater than the symbol number. In that case as well the speed of counting of the symbol counter is increased or decreased to enable the count value to match the symbol number in a short time. It should be noted that when a count value is smaller than a symbol number while the symbol counter is counting at a low speed including during a period in which the symbol counter is not counting a certain amount of time is required for the symbol number to reach the count value but by allowing the symbol counter to count fast frame synchronization can be established in a sufficiently short time regardless of whether the count value is smaller or greater than the symbol number depending on the speed of counting.

In the first embodiment detecting a frame synchronization signal in TMCC in an OFDM frame controls the PN generating circuit. However it can be unable to detect a frame synchronization signal from an OFDM frame immediately after reception depending on the timing or the like of the channel switching because the frame synchronization signal is transmitted only once in an OFDM frame. In such a case synchronization is not established until reception of a next OFDM frame. In the second embodiment a certain pattern other than a synchronization signal is detected in TMCC so that synchronization is established in a short time.

The second embodiment differs from the first embodiment in that a pattern detecting circuit is added and the frame synchronization detecting circuit is replaced with a frame synchronization detecting circuit . The pattern detecting circuit detects a certain pattern in TMCC and provides a result of the detection to the frame synchronization detecting circuit .

The transmission parameter information for layer C in Table 2 is used when transmission is performed in layer C. At present transmission is rarely performed in layer C and C layer transmission parameter information is all 1s . For example if 13 successive bits in TMCC are 1s the pattern detecting circuit determines that those bits are the 54th to 66th bits B B in the TMCC and outputs the result to the frame synchronization detecting circuit indicating that bits B B has been detected. The frame synchronization detecting circuit provides a detected synchronization signal or a result indicating detection of a pattern provided from the pattern detecting circuit to a control circuit of a pseudorandom number generator . The control circuit of the pseudorandom number generator controls a symbol counter on the basis of not only the detected frame synchronization signal but also the result of detection provided from the pattern detecting circuit .

An operation of the embodiment configured as described above will be described below with reference to B and C. shows TMCC during being received shows symbol numbers and shows timing of detection of a predetermined pattern by the pattern detecting circuit .

A TMCC from a TMCC detecting circuit is provided to the frame synchronization detecting circuit and also to the pattern detecting circuit . The pattern detecting circuit detects a known pattern in TMCC and outputs the result of detection to the frame synchronization detecting circuit . The frame synchronization detecting circuit outputs a detected frame synchronization signal or a result of detection provided from the pattern detecting circuit to the pseudorandom number generator .

The control circuit controls the symbol counter on the basis of a detected frame synchronization signal or a result of detection provided from the pattern detecting circuit . When the control circuit uses the detected frame synchronization signal the control circuit controls in the same way as described with respect to the first embodiment.

It is assumed here that channel switching is made immediately after a synchronization signal in the TMCC appears. The synchronization signal immediately after channel switching is not detected by the frame synchronization detecting circuit . If C layer transmission parameter information is not used the 54th to 66th bits B B in the TMCC are all 1s . When the pattern detecting circuit detects that 13 bits or more are 1s the pattern detecting circuit outputs a result of detection indicating that the 54th to the 66th bits B B in the TMCC are all 1s see .

The result of detection is provided to the control circuit through the frame synchronization detecting circuit . In this case information indicating the symbol position of the detected pattern in the TMCC from the frame synchronization detecting circuit is also provided to the control circuit . The control circuit controls the symbol counter to increase the speed of counting. As a result the symbol counter is caused to count up at a higher speed to match the count value of the symbol counter to the symbol number 67 in an OFDM symbol being received within one symbol duration in an OFDM frame for example.

Once the count value of the symbol counter matches the symbol number as a result of the faster counting up of the symbol counter the control circuit provides a signal of a symbol period to the symbol counter to cause the symbol counter to count up at every symbol period. Thus an adder can start energy despreading in a very short time after the synchronization signal is detected.

In this way a symbol number of received data is determined by using a known pattern of TMCC in addition to a frame synchronization signal and therefore a pseudorandom number value can be matched to a symbol number in a short time in the present embodiment. Thus the time required for establishing synchronization can be reliably reduced even in such a case where switching is made from one channel to another immediately after a frame synchronization signal appears.

While frame synchronization and a predetermined pattern are detected in the second embodiment described above detection of frame synchronization may be omitted and a predetermined pattern alone may be detected to determine a symbol number of received data. While a pattern of C layer transmission parameter information is detected in the example described above any known pattern in TMCC may be detected.

In the second embodiment if it takes much time to detect a frame synchronization signal a predetermined pattern in TMCC in an OFDM frame is detected to control a PN generating circuit. However depending on a symbol preceding or succeeding the predetermined pattern false pattern detection can occur. Therefore in the third embodiment a pilot SP signal inserted at predetermined intervals is used to detect a predetermined pattern without fail to establish synchronization in a short time.

The third embodiment differs from the second embodiment in that an SP detecting circuit is added and the frame synchronization detecting circuit is replaced with a frame synchronization detecting circuit . The SP detecting circuit detects a symbol pilot SP signal in an OFDM frame and provides the result of the detection to the frame synchronization detecting circuit . The frame synchronization detecting circuit provides a detected synchronization signal or a result of detection based on outputs from a pattern detecting circuit and the SP detecting circuit to a control circuit of a pseudorandom number generator . The frame synchronization detecting circuit also provides information indicating which of the symbol numbers in an OFDM frame are identified by the output result of detection to the control circuit .

The SP signal is inserted in an OFDM frame every four symbols for example irrespective of TMCC as indicated by the shaded cells in . The SP signal was modulated by BPSK modulation. The SP signal was set to a fixed value. Accordingly which of the four symbols carries the SP signal can be identified. It can be seen from that a symbol carrying a value that differs from the values in the other three symbols in a unit in the carrier with carrier number for example is any of the 0th 4th 8th . . . and 200th symbols.

The SP detecting circuit outputs a result indicating detection of the SP signal to the frame synchronization detecting circuit . The frame synchronization detecting circuit outputs a detected synchronization signal or a result indicating detection of an SP signal that matches or is closest to a result of detection by the pattern detecting circuit to the control circuit of the pseudorandom number generator . The control circuit controls a symbol counter on the basis of results of detection provided from the pattern detecting circuit and the SP detecting circuit in addition to a result of detection provided from the frame synchronization detecting circuit .

An operation of the third embodiment configured as described above will be described below with reference to B and C. shows a TMCC being received shows symbol numbers of received data and shows timing of detection of an SP by the SP detecting circuit .

An OFDM frame from a demodulating circuit in the third embodiment is also provided to the SP detecting circuit . The SP detecting circuit detects an SP signal inserted in the OFDM frame and outputs the result of detection to the frame synchronization detecting circuit .

The pattern detecting circuit may detect a pattern before the frame synchronization detecting circuit detects a synchronization signal depending on the timing of channel switching. In such a case the frame synchronization detecting circuit uses an output from the pattern detecting circuit .

It is assumed for example that a pattern a predetermined number of symbols before the 121st symbol of a TMCC is a known pattern for example a sequence of 1s . If the 122nd symbol is also 1 as shown in B and C the frame synchronization detecting circuit cannot identify the position in which the pattern is detected. On the other hand the SP detecting circuit detects any of the symbols that appear every four symbols in an OFDM frame. For example it is assumed that a symbol detected by the SP detecting circuit is one of the 2nd 6th . . . 122nd 126th 130th . . . .

The frame synchronization detecting circuit identifies the symbol number of a received symbol from outputs from the pattern detecting circuit and the SP detecting circuit . That is the frame synchronization detecting circuit determines that the received symbol is a symbol close to the 121st symbol from the output from the pattern detecting circuit . The frame synchronization detecting circuit also determines that an SP signal from the SP detecting circuit close to the timing of detection by the pattern detecting circuit is a symbol position of the SP signal that is close to the 121st symbol position that is the 122nd symbol position. Thus the frame synchronization detecting circuit outputs a result of detection specifying the 122nd symbol position to the control circuit at the timing of detection of the SP signal.

With this the control circuit identifies the symbol number of the received data and causes the symbol counter to count up faster so that a value of the symbol connecter matches a symbol number. Once the count value of the symbol counter matches the symbol number as a result of the faster counting up by the symbol counter the control circuit provides a signal at every symbol period to the symbol counter to cause the symbol counter to count up at every symbol period. Consequently an adder can start energy despreading in a very short time after detection of the synchronization signal.

As described above an SP signal inserted at every predetermined number of symbols is used to reliably detect the symbol number of received data even when a pattern cannot accurately be detected depending on a symbol preceding or succeeding a known pattern of a TMCC. Thus a pseudorandom number value can be matched to a symbol number within a short time.

In the third embodiment detection of frame synchronization may be omitted and a symbol number of received data may be determined only on the basis of detection of a predetermined pattern and detection of an SP signal.

While the second and third embodiments have been described with respect to an example in which the result of detection of a pattern is used when the pattern is detected by the pattern detecting circuit before a frame synchronization signal is detected the output from the pattern detecting circuit may be used only during pull in and thereafter only the result of detection of a frame synchronization signal may be used.

The present embodiments described above have the advantageous effects of reducing the time required for establishing synchronization using a simple configuration.

Having described the embodiments of the invention referring to the accompanying drawings it should be understood that the present invention is not limited to those precise embodiments and various changes and modifications thereof could be made by one skilled in the art without departing from the spirit or scope of the invention as defined in the appended claims.

