---

title: Appearance manifolds for modeling time-variant appearance of materials
abstract: A method for modeling a time-variant appearance of a material is described. A sample analysis of a material sample is performed, wherein the sample analysis orders surface points of the material sample with respect to weathering from data captured at a single instant in time. An appearance synthesis using the sample analysis is performed, wherein the appearance synthesis generates a time-variant sequence of frames for weathering an object.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07933442&OS=07933442&RS=07933442
owner: Microsoft Corporation
number: 07933442
owner_city: Redmond
owner_country: US
publication_date: 20070330
---
Materials in the real world exhibit spatial variations that arise naturally over the course of time. Large scale variations in material appearance are mainly influenced by global factors such as object geometry and weathering environment while the local variations in weathered appearance are often intrinsic to the material a natural characteristic of how it looks.

One approach for generating time variant material appearance is to visually simulate the distribution of weathering effects on a 3 Dimensional 3D model. Existing visual simulation techniques can successfully generate large scale variations of material appearance based on global factors such as object geometry and weathering environment. However these techniques are limited in their ability to produce local characteristics that are intrinsic to a material.

An alternative approach is to simulate the weathering interactions of a material based on physical principles. While realistic results have been produced through such simulations they require substantial computation and for each new material a complete understanding of its physical weathering process needs to be developed. Another way to obtain physically accurate appearance is to capture a video of a material over time to obtain real life information on how appearance changes as weathering progresses. Such data intensive techniques are often challenging in practice because of the need for considerable labor and time. Moreover technical difficulties with image registration and data storage arise when recording time variant Bidirectional Reflectance Distribution Functions BRDFs in addition to surface colors.

The following presents a simplified summary of the disclosure in order to provide a basic understanding to the reader. This summary is not an extensive overview of the disclosure and it does not identify key critical elements of the invention or delineate the scope of the invention. Its sole purpose is to present some concepts disclosed herein in a simplified form as a prelude to the more detailed description that is presented later.

Embodiments herein use a visual simulation technique called appearance manifolds for modeling the time variant surface appearance of a material from data captured at a single instant in time. In modeling time variant appearance embodiments of the invention take advantage of the observation that concurrent variations in appearance over a surface represent different degrees of weathering. By reorganizing these various appearances in a manner that reveals their relative order with respect to weathering degree spatial and temporal appearance properties of the material s weathering process are determined that can be used to generate its weathered appearance at different points in time.

Example applications include visual simulation of weathering on 3D models. In another example appearance manifolds may be used to increase or decrease the weathering on an object. In yet another example weathered material may be transferred from one object to another resulting in a material transformation with realistic weathering detail.

Many of the attendant features will be more readily appreciated as the same become better understood by reference to the following detailed description considered in connection with the accompanying drawings.

The detailed description provided below in connection with the appended drawings is intended as a description of the present examples and is not intended to represent the only forms in which the present examples may be constructed or utilized. The description sets forth the functions of the examples and the sequence of steps for constructing and operating the examples. However the same or equivalent functions and sequences may be accomplished by different examples.

For realistic and easy modeling of weathered appearance of materials embodiments of a visual simulation technique is presented that acquires time variant appearance information from data captured at a single instant in time. Embodiments herein capitalize on the key observation that at a given instant spatial variations in surface appearance on a weathered material sample correspond to varying degrees of weathering. These appearance variations are utilized to construct an appearance manifold that approximates an underlying intrinsic structure of weathered surface point appearances for the material. The relative degrees of weathering among these surface point appearances can be inferred from the path of this variation. By assigning the weathering degrees to corresponding appearance states spatial and temporal characteristics of the material s weathered appearance may be determined including local appearance properties and valid progressions of surface point appearance over time.

Embodiments herein utilize these time variant appearance characteristics to generate convincing weathered appearance of the material sample at different points in time. Embodiments herein use a new texture synthesis algorithm to generate a time variant appearance sequence for a given material and object. Although embodiments herein do not perform a physically based weathering simulation they can easily synthesize natural looking non linear progressions of weathered appearance and its spatial variations.

For example referring to synthesis of time variant weather appearance from the spatially variant BRDFs of a rusted iron sample measured at a single instant in time is shown at . This appearance synthesis may be applied to the 3D gargoyle model shown at . The gargoyle model is rendered at different points in time from earliest i.e. least weathering at to oldest i.e. most weathering at .

It will be noted that the appearance manifold is constructed from data captured at a single instant in time making techniques described herein versatile and easy to use. Embodiments of the invention also include time variant weathering appearance from a single color image for a weather effect that mainly alters color features.

In one application images of time variant materials may be applied to 3D objects. Such objects may used in various applications such as video games computer generated images CGI in movies and the like. In another application appearance manifolds can be applied for increasing or decreasing the weathering of a real object. A real object refers to an object that is scanned e.g. using a 3D laser scanner from a real world object. In contrast a synthetic object is generated by an artist from its beginning. In another application weathered material from one object may be transferred to another object.

From spatially variant BRDF data captured from a weathered material sample at a single instant in time the appearance variations on the sample are analyzed to obtain spatial and temporal appearance properties useful for synthesis of weathered effects. Embodiments of modeling the time variant surface appearance of a material from data captured at a single instant in time includes two phases sample analysis and appearance synthesis as shown in . In sample analysis an appearance manifold is constructed from material data captured from a material sample and with some simple user annotation the weathering degrees of each appearance state and their spatial distribution is inferred. Appearance synthesis uses the information from sample analysis and an input time variant degree distribution to generate time variant weathered appearance on a surface.

In embodiments herein the course of weathering is assumed to produce gradual monotonic transformations in appearance that exist at spatially varying degrees over the surface of the material sample such that the various states of per pixel appearance form a manifold in an appearance space. To obtain a good approximation of this underlying manifold the process plots the captured BRDF data of each surface point in an appearance space defined by reflectance features and construct a neighborhood graph among these sample points. The neighborhood graph is referred to as an appearance manifold . With some annotations by a user embodiments herein infer from the relative positions of points on the appearance manifold annotated appearance manifold the points relative degrees of weathering weathering degree map .

Since sample points in the appearance space typically form a dense distribution the k nearest rule discussed below may be utilized to build the graph and then disconnect links having distances longer then the threshold to prune outliers. The user is prompted to highlight some regions at early later stages of weathering most weathering at and least weathering at . With this hint the relative weathering degrees on the constructed neighborhood graph are deduced to form the appearance manifold.

The appearance manifold describes the weathering degree of the points on the material. The weathering degree is a relative value. That is the degree for the most weathered point on the object is 1.0 and vice versa. It is noted that the appearance manifold is related to the weathering of the material and not related to the weathering of a particular object. For example the appearance manifold is not related to weathering distribution on the object affected by the shape of the object.

From the structure of the resulting appearance manifold an ordering of points with respect to weathering degree is inferred. This is ordering of points is referred to herein as a source weathering degree map or just weathering degree map. The weathering degree map characterizes local distribution of weathering degree variations for the given material and weathering process. The weathering degree map is the collection of the weathering degree of all points on the surface.

Thus from the association of weathering degrees to appearance states in the appearance manifold two characteristics of the material s time variant appearance can be derived. First since weathering degrees should be non decreasing over time the determination of weathering degrees indicates valid temporal progressions in the appearance of a surface point. Second by assigning these weathering degrees to points on the material sample a weathering degree map is obtained that characterizes local distributions of weathering degree variations for the given material sample and weathering process. With the assignment of degree values to points in the appearance manifold the relative weathering degrees of the various per pixel appearance states may be determined and hence the valid temporal sequences of pixel appearance.

With the appearance manifold and weathering degree map of a material sample detailed weathering appearance onto a 3D model may be synthesized according to a given large scale time variant distribution of weathering degrees over the surface time variant weathering degree map on gargoyle surface shown at . This weathering degree distribution can be generated using existing visual simulation techniques or by manual user specification. Local weathering appearance is then synthesized onto the model using the appearance manifold and weathering degree map. The resulting time variant appearance on the gargoyle surface is shown at .

In one embodiment the resulting appearance sequence may also adhere to two temporal constraints. First the time variant appearance sequence for each pixel follows a valid path in the appearance manifold. Second the spatial characteristics of appearance change smoothly over time. For this purpose a multi scale texture synthesis technique based on a progressive texture synthesis approach is used.

In embodiments of a synthesis algorithm the appearance sequence is synthesized frame by frame. The degree values of each frame are initialized by extrapolating those of the preceding frame except for the first frame that is initialized randomly. To determine an initial appearance for the frame an interpolation is conducted according to the initial degree values along the shortest path in the appearance manifold. Although this initialization produces consistent spatial appearance characteristics through the temporal sequence it does not account for progressive texture variations from frame to frame. To obtain an improved initialization randomness is introduced by averaging appearance values with values in patches that are randomly selected from source regions. Each initial appearance frame is then refined by synthesis with multiple neighborhood scales with the temporal constraints introduced above.

Turning to flowchart of the logic and operations of a sample analysis in accordance with an embodiment of the invention is shown. Starting in block a material sample image for analysis is provided. The material sample may include organic material or inorganic material. The material sample may include a non living object or a living object. Also the material sample may include material with different optic properties such as opaque material and translucent material.

With data captured from a material sample block an appearance manifold is formed by constructing the neighborhood graph for the BRDFs of surface points block . From the appearance manifold the relative weathering degrees of the various per pixel appearance states are deduced and hence the valid temporal sequences of pixel appearance. With this weathering degree information a weathering degree map is formed that represents spatial variations in weathering degree that are present on the sample.

As used herein spatial variations refer to the concept that different points on the sample having different degrees of weathering. Time variation refers to the idea that a point becomes more weathered over time.

While Bidirectional Reflectance Distribution Functions BRDFs are well known to one skilled the art a short summary is provided here. A BRDF provides the reflectance of a surface as a function of illumination geometry and viewing geometry. In simpler terms a BRDF describes how an object appears based on the direction of illumination of the object and the direction of the observer from the object. BRDF is a property of the object surface and is defined over an infinite number of angles towards the illumination source and towards the observer. The BRDF of a surface may be defined by mathematical models or directly measured from real world material samples.

In mathematics manifolds describe complicated structures in simpler spaces. Additional structures may be defined on manifolds. Appearance manifolds refers to the connected smooth shape for a weathering appearance on an object in the appearance space.

In constructing the neighborhood graph of a given material sample I x y the n dimensional appearance attributes of each pixel x y is organized into a vector which is plotted as a point in a corresponding n dimensional appearance space. A spatially variant BRDF from flat material samples is captured using a linear light source device. To the BRDF of each point parameters of the isotropic Ward model are fitted such that a 7D appearance space is formed for the material samples.

Since sample points in the appearance space typically form a dense distribution as exemplified in diffuse image of rusted iron sample shown at and corresponding initial appearance manifold shown at the rule and k rule are utilized to construct the neighborhood graph. Specifically an initial graph is formed using the k rule which connects each point i.e. the appearance value of a surface point when this appearance value is projected in appearance space it is a point in appearance space. to its k nearest neighbors for all examples herein k 8 . Outliers in the graph are then pruned using the rule which allows connections only between points separated by a distance less than a threshold . In embodiments herein 1.5dwhere dis the average pairwise i.e. point to point distance between connected points after applying the k rule. To compute d an appearance vector is first constructed for each of the two points by sampling its BRDF over a set of lighting and viewing directions. The distance of the two samples is then computed by the distance of their appearance vectors in a logarithm space.

From the structure of the resulting neighborhood graph an ordering of points is inferred with respect to weathering degree. One possible approach is to perform dimensionality reduction to map the data into a 1D curve that indicates relative degrees of weathering. However this mapping may be influenced by secondary appearance variations such as from material non uniformity and incidental weathering processes that are non orthogonal to the principal mode of weathering variation. Consequently weathering degrees might not be reliably determined in this manner. For example although the two points indicated by arrows in exhibit no weathering their appearance variations lead to different estimates of weathering degree by dimensionality reduction. In associated weathering degrees are determined using isomap reduction to 1D exhibited in both the appearance manifold and the weathering degree map . Two unweathered points indicated by arrows in weathering degrees map with different BRDFs are mistakenly assigned to different weathering degrees.

As shown in block the appearance manifold is annotated such as by a user. To approximately factor out the effects of non orthogonal secondary variations from weathering degrees user interaction may be utilized to incorporate high level knowledge into the analysis process. Specifically the user assists by identifying sets of most weathered and least weathered points in the appearance manifold. In appearance manifold the user has annotated some most weathered points at and some least weathered points at . In one embodiment the user only needs to specify a small set of most weathered points and least weathered points and then the system may extend the sets of points.

In one embodiment the user is prompted to highlight pixels in I x y to form initial sets X and X of least and most weathered points respectively. The set X of most weathered points is then dilated according to 

where the appearance distance x x between points xand xis defined as their geodesic distance in the manifold e.g. the shortest path along the connected nodes between xand x X X denotes the minimum appearance distance between X and X x denotes the closest point in X to x and is a coefficient. In one embodiment is set to 0.9. Xis then made convex by including all points that lie on geodesics between pairs of its points. A set Xof least weathered points is determined similarly.

Between these two sets a gradual transition in appearance exists from least weathered to most weathered. According to the relative distances of a point x from the two sets a degree of weathering of point x is defined as a scalar function of appearance 

where x and x are respectively the closest points in Xand Xto x. As exhibited in the same weathering degree is correctly determined for the two points indicated by arrows in weather degree map using this approach. Appearance manifold is corrected accordingly. For a weathering process that leads to complex appearance manifolds with significant twist and turns a greater amount of user input may be needed to separate weathering variations from appearance variations unrelated to weathering.

With the assignment of weathering degree values to points in the appearance manifold valid sequences of weathered appearance for a surface point may be determined. Since weathering degrees naturally increase over time the appearance of a point must follow a forward path from a point xto xthat satisfies x x for all neighboring pairs of points x xon the path.

In one embodiment validity of appearance sequences is utilized as a constraint in weathered appearance synthesis. Validity of appearance means that the weathering degree in the previous frame should be smaller than the weathering degree of the same point in current frame. In other words the weathering degree of each point in the sequence should be increasing. To generate a valid appearance sequence between two points x x a straightforward way is simply to interpolate along the shortest path between them.

In sum in embodiments herein with the knowledge that the primary variation of captured BRDFs from a material is caused by weathering focus is on deriving the non linear changes in the BRDFs of a given material with respect to weathering degree. Additionally spatially variant BRDFs and their temporal variations are handled by embodiments herein.

By replacing appearance values of the sample i.e. the BRDF value on each point with degree values a source weathering degree map is constructed block . An example weathering degree map is shown in . The weathering degree map displays spatial variations in weathering degree over the material sample. Although the global distribution of weathering degrees in the weathering degree map tends to be specific to the shape of the material sample for many materials the local variations are an intrinsic characteristic of its weathered appearance. These textures of weathering degree often change over the course of time. As exemplified in neighborhoods at different levels of weathering may exhibit different spatial patterns while local areas that have similar weathering levels have textures that approximately follow the same stationary stochastic model. In the following appearance synthesis process these time variant local weathering characteristics of the material sample may be accounted for.

Turning to flowchart of the logic and operations of an appearance synthesis in accordance with an embodiment of the invention is shown. Starting in block the source texture sample I also referred to as the material sample and associated weathering degree map D from the sample analysis are provided. Also a target weathering level map sequence L is given for a 3D model that indicates the large scale time variant distribution of weathering degrees over the surface. This time variant degree distribution can be generated using existing visual simulation techniques or by manual specification. With the appearance manifold and these inputs embodiments herein synthesize detailed weathering appearance onto a 3D model according to a given large scale time variant distribution of weathering degrees over the surface.

Next source weathering level map L is computed from the source weathering degree map block . In one embodiment the source weathering degree map is constructed as described above in connection with block . The source weathering level map L is the averaged source weathering degree map. The source weathering level map L will be used to specify the candidate regions in the appearance synthesis. To generate local detailed weathering appearance on a 3D model labeled with only large scale degree variations pixels on the model and on the material sample are identified that have a similar local level of weathering. The source weathering level map L is computed by averaging the weathering degrees within 2N 2N local neighborhoods in their corresponding source weathering degree map where N is the largest neighborhood size used in the texture synthesis procedure. Local weathering appearance is then synthesized onto the model in a manner consistent with the original texture map embodiment discussed below in blocks and .

Referring to the synthesis algorithm receives the following inputs source level map L shown at source texture sample I shown at weathering degree map D shown at and target weathering level maps L shown at . The resulting output is a time variant appearance sequence of frames I shown at . The frame sequence I may be used to produce a time variant weathered appearance on a surface such as a 3D model of an object.

In one embodiment the resulting time variant appearance sequence I may adhere to two temporal constraints. First the time variant appearance sequence for each pixel p x y should follow a valid path in the appearance manifold. The valid path refers to that path in the appearance manifold graph where all points along the path have monotonic weathering degree values. Second the spatial characteristics of appearance should change smoothly over time.

A naive approach to appearance synthesis is to generate each frame independently. However generated appearance sequences would exhibit flickering due to a lack of frame to frame coherence. Another possible solution is to synthesize the first frame on the surface and then extrapolate the appearance of each point along the appearance manifold. Although this approach could generate a consistent time sequence for each surface point a convincing evolution of texture patterns is unlikely to be obtained. These two approaches may leave artifacts when the weathered object is displayed in a video sequence.

One embodiment of generating a time variant sequence of frames is shown in blocks and of flowchart . Embodiments herein use a multi scale texture synthesis technique to generate a time variant appearance sequence from input samples. For simplicity a synthesis algorithm for an image appearance sequence is described. However one skilled in the art having the benefit of this description will appreciate that the image appearance sequence can be easily modified to synthesize a time variant appearance sequence on an object such as a 3D model e.g. as shown with the gargoyle model at .

As illustrated in for a given input sample texture I p its associated weathering degree map D p and its source level map L p where pixel p x y the algorithm may synthesize a time variant appearance sequence I p t at time t where i 0 1 2 . . . n. In the time variant appearance sequence I p t local textures are consistent with the sequence of weathering level maps L p t computed from the given large scale time variant degree distribution i.e. there is a one to one correspondence between each weathering level map L and each time variant appearance sequence frame I . 

In embodiments of the synthesis algorithm the appearance sequence is synthesized frame by frame. For each frame the appearance synthesis is executed in three steps. First the algorithm initializes the appearance of each frame from the appearance of the preceding frame block . Specifically the degree values of each frame is initialized by extrapolating those of the preceding frame according to D p t D p t L p t L p t for each pixel p in the frame. To determine an initial appearance for the frame interpolation according to these initial degree values along the shortest path in the appearance manifold between points for I p t and the set Xof most weathered points is performed. Although this initialization produces valid temporal sequences of weathered appearance for each pixel it does not account for progressive texture variations from frame to frame. Without these progressive changes in local degree distributions the quality of matches in the synthesis process becomes poor and this may result in a repetition of texture patterns as illustrated in . shows initial values extrapolated from the preceding frame at and the resulting synthesized frame which contains undesirable repetition of texture patterns.

In the second step to avoid this repetition problem information from input samples of the material i.e. the original material sample are incorporated to obtain an improved initialization block . In short randomness is introduced into the frames by incorporating appearance values from randomly selected patches from the material sample. The patches are selected randomly from a specific region of the material but not randomly from the whole map. The specific region has a similar degree value with the corresponding region in the target weathering map i.e. their values in the corresponding level maps source level map and target weathering level map are similar. As illustrated in input sample of let and respectively represent an N N neighborhood and an m m sub neighborhood centered on p where m N 3 in one embodiment. The frame is divided into a set of m m patches and denote as P the centers of all these non overlapping patches. For each p P the appearance values are averaged in neighborhood with those in of a randomly selected pixel p from a candidate set 

where 0.15 in one embodiment is a value used to control the range of the candidate region in source texture samples . With this approach changes in texture characteristics over time can effectively be incorporated. For the first frame in the sequence which cannot be extrapolated from others its values I p t and D p t are initialized based on random patches from candidate sets Z p . In input sample texture contains the set Z p of candidates for p in a synthesized frame .

In the third step the initial appearance frame is refined by synthesis with multiple neighborhood scales i.e. sizes of the neighborhoods block . For each frame synthesized there will be an initial frame. For each scale the synthesis algorithm traverses all pixels in P and synthesizes an m m patch for each pixel. Specifically for each p P the algorithm constructs its candidate set Z p and then searches for the pixel p in I whose patch best matches in the L norm. For the search result the algorithm copies q to q if it is temporally coherent i.e. the degree value of q is greater than or equal to that of q in the preceding frame. Otherwise the appearance and degree values of q are kept unchanged. This procedure is repeated for successively smaller sizes of until N is decreased to 3. displays the final synthesis result at frame refined from the improved initial values in frame . In improvement of initial values in frame is performed by considering neighborhood information on the input sample . The resulting synthesized frame is shown.

In one embodiment for greater efficiency selected key frames from the sequence are synthesized and intermediate frames are interpolated. This is because in some cases a frame by frame synthesis of the appearance sequence is time consuming and not necessary because of the small changes in appearance and degree between the two adjacent frames. With the first frame as a key frame k successive key frames are selected according to k max L p k L p k . In one embodiment is set to 0.2. The appearance of each pixel in an intermediate frame is interpolated along the shortest path in the appearance manifold between the corresponding pixels in the preceding and subsequent key frames.

With the association of weathering degrees to appearance vectors other weathering applications become easy to formulate. Non limiting example applications include weathering and deweathering the appearance of a real object and transferring material from one object to another with weathering effects.

In weather and deweathering of an input weathered object or input image sample analysis is first performed to obtain the object s weather degree map which is then used to generate a time variant degree sequence with some user assistance. In one embodiment to aid the user in this process a user tool as shown in may be provided to the user for easy editing of a default degree sequence with interactively updated appearance sequences displayed as feedback.

In the default weathering degree sequence the user can select key frames for degree modification key frame selected at and key frame displayed at . With the user tool the degree values d in a key frame can be transformed to new values d by adjusting a mapping function d d . Additionally the tool allows the user to hand paint degree modifications in a key frame brush tool shown at . As the user applies these alterations the degree values in non key frames are interpolated among key frames. To efficiently update the appearance sequence after each degree sequence revision the user tool simply warps the appearance sequence of each pixel in correspondence with its change in degree. After the user has fully completed adjusting the degree sequence the original appearance synthesis procedure is applied again to obtain a more refined appearance sequence.

A weather mapping is shown at and is used to adjust the weathering degree of current frame. The slider at is used to slide along the time axis to different frames.

In one embodiment the default degree sequence is computed by placing the object s degree map at the center of the sequence and linearly increasing or decreasing the degree values in weathering or deweathering frames until all degree values reach 1.0 for weathering or 0.0 for deweathering . A corresponding default appearance sequence is then computed using the appearance synthesis algorithm described above. The input appearance of the object is used as the initial appearance frame from which the rest of the default sequence is synthesized into the future and the past.

Another image based application is to render a weathered object Owith a different material of another weathered object O. With user assistance a sample analysis on the two objects is performed to determine their weathering characteristics and then synthesizing the appearance of Oonto Oin a manner consistent with O s shape dependent weathering degree distribution. This appearance synthesis proceeds as in the method described above except that appearance attributes from Oare synthesized to the degree map of O.

The time variant appearance of Ocan also be synthesized with the material of Oby extrapolating O s degree map into a degree sequence using the techniques for weathering and deweathering discussed above. With this degree sequence the appearance manifold and degree map of Ocan then be used to synthesize an appearance sequence using methods described above.

Embodiments of the invention are not limited by the example results discussed below. In these examples the appearance manifold system was implemented on a computing device having a Pentium IV 2.8 GHz CPU 2 GB memory and a Nvidia Geforce7800 256 MB graphics card. Further embodiments of an example computing device for implementing embodiments of the invention are discussed below in connection with . Sample resolutions and the largest window sizes used in appearance synthesis are given in Table 1 for the presented examples. For computational efficiency the appearance manifold is constructed using 10 000 sampled pixels with distinct appearance vectors and the weathering degree values of all other pixels are copied from the nearest sample point in the appearance space. For the examples below sample analysis requires approximately five minutes and appearance synthesis times range from one to five hours. Rendering is performed at about 20 Hz.

It is also noted that there are appearance differences between linear texture blending and embodiments of a non linear appearance manifold technique as described herein. Linear blending is seen to produce appearances that diverge considerably from rusting iron such as rust colors with significant specularity.

Three bananas at different states of weathering are exhibited in where their appearances are all synthesized using the material sample and the weather degree map . Images show rendering results of bananas under global illumination from least weathered in image to most weathered in image . The most weathered banana at the bottom of each image is kept constant for reference. In this example the initial degree map on the rendered bananas is specified by an artist and then the weathering deweathering procedure is used to generate the weathering sequence. The appearance of spatial variations and their evolution over time are synthesized onto the new objects to produce convincing results.

One application of the appearance manifold technique is weathering and deweathering of an object shown in a single image. In this application the object of interest is segmented out and then a sample analysis is performed on the object of interest. To minimize the effects of intensity variations due to shading pixel colors are converted into L space and then only the channels are used for analysis. To each degree value d the algorithm associates the average luminance Lof all pixels of the same degree. Shading variations in the image are then approximately separated from weathering and stored in a illumination map L x y L x y L where L x y is the original luminance of the pixel and d x y denotes the pixel degree. After generating a new weathering degree map as described above in connection with appearance syntheses the weathered deweathered color for each pixel is obtained by interpolating along the shortest path from its point in the appearance manifold to the most least weathered point sets. The final result is obtained by multiplying the illumination map with the weathering color image. Non weathering variations such as from sharp specularities and texture may reduce the performance of this basic method but could potentially be addressed by further image analysis. Since the input is just a single image this application targets weathering effects that primarily alter only color appearance features.

Embodiments of an appearance manifold technique described herein generate weathering sequences that are consistent with the changing local reflectance characteristics of a material over time using input data from only a single material sample at a single time instance. It complements existing visual simulation techniques that are designed to compute weathering degree distributions and leads to various weathering applications for synthetic 3D models real weathered objects and even single snapshots of weathered objects. With this method the input data is simple to acquire and natural non linear appearance variations over time are easy to produce.

Since reorganization of appearance data into an appearance manifold determines only a sequential relationship among the observed weathered appearances rather than correspondences to actual degrees of weathering the simulations of weathering effects are not physically precise. However embodiments herein generate visually compelling weathered appearance from a small amount of easily captured image data.

Although input data from only a single material sample and time instant is needed embodiments of appearance manifold analysis can also jointly handle data from multiple samples and instants in time as long as the data all represents the same weathering process of the same material. Without the need for surface point correspondences BRDFs can be recorded at different times without image registration. This property is particularly useful in broadening the range of modeled weathering effects. For example sample analysis for the banana in was performed using two bananas at different stages of ripening.

In other embodiments device may include additional features and or functionality. For example device may also include additional storage e.g. removable and or non removable including but not limited to magnetic or optical disks or tape. Such additional storage is illustrated in by storage . In one embodiment computer readable instructions to implement embodiments of the invention may be stored in storage . Storage may also store other computer readable instructions to implement an operating system an application program and the like.

The term computer readable media as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory and storage are examples of computer storage media. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM Digital Versatile Disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .

Device may also include communication connection s that allow device to communicate with other devices such as computing device through network . Communication connection s may include a wired interface or a wireless interface. Communication connection s may include but is not limited to a modem a Network Interface Card NIC an integrated network interface a radio frequency transmitter receiver an infrared port or other interfaces for connecting computing device to other computing devices. Communication connection s may transmit and or receive communication media.

The term computer readable media may include communication media. Communication media typically embodies computer readable instructions or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic radio frequency infrared and other wireless media.

Device may include input device s such as keyboard mouse pen voice input device touch input device infra red cameras video input devices and or any other input device. Output device s such as one or more displays speakers printers and or any other output device may also be included in device .

Components of computing device may be connected by various interconnects such as a bus. Such interconnects may include a Peripheral Component Interconnect PCI such as PCI Express a Universal Serial Bus USB firewire IEEE 1394 an optical bus structure and the like. Input devices and output devices may be connected to device via a wired connection wireless connection or any combination thereof.

Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example a computing device accessible via network may store computer readable instructions to implement one or more embodiments of the invention. Computing device may access computing device and download a part or all of the computer readable instructions for execution. Alternatively computing device may download pieces of the computer readable instructions as needed or some instructions may be executed at computing device and some at computing device . Those skilled in the art will also realize that all or a portion of the computer readable instructions may be carried out by a dedicated circuit such as a Digital Signal Processor DSP programmable logic array and the like.

Various operations of embodiments of the present invention are described herein. In one embodiment one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media which if executed by a computing device will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further it will be understood that not all operations are necessarily present in each embodiment of the invention.

The above description of embodiments of the invention including what is described in the Abstract is not intended to be exhaustive or to limit the embodiments to the precise forms disclosed. While specific embodiments and examples of the invention are described herein for illustrative purposes various equivalent modifications are possible as those skilled in the relevant art will recognize in light of the above detailed description. The terms used in the following claims should not be construed to limit the invention to the specific embodiments disclosed in the specification. Rather the following claims are to be construed in accordance with established doctrines of claim interpretation.

