---

title: Method and system for determining the compliance encrypted and non-encrypted display outputs
abstract: A method and system are implemented for verifying connection status information associated with a specific display attachment location. Specifically, one embodiment of the present invention sets forth a method, which includes the steps of receiving a first signature representative of a first set of connection states tracked by a graphics subsystem associated with the display attachment location, authenticating whether the integrity of a content path including the display attachment location is maintained based on the first signature, and deciding whether to continue sending the content to the display attachment location so that requirements associated with protecting the content are satisfied.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08605097&OS=08605097&RS=08605097
owner: Nvidia Corporation
number: 08605097
owner_city: Santa Clara
owner_country: US
publication_date: 20071214
---
Embodiments of the present invention relate generally to content protection techniques and more specifically to a method and system of determining the compliance of encrypted and non encrypted display outputs.

Unless otherwise indicated herein the approaches described in this section are not prior art to the claims in this application and are not admitted to be prior art by inclusion in this section.

Digitization of content not only provides new ways to distribute and commercialize content but it also enables new and easier ways to violate copyright or to steal or misuse premium content such as feature films. To combat rampant piracy of digital content some content providers have developed advanced content protection schemes in digital medium such as laser disks and cable satellite TV and impose strict requirements on the licensees of such conveyance schemes in order to safeguard their premium content. For example the content protection licenses for popular content formats and mediums such as Digital Versatile Disc DVD Blu ray High Definition HD DVD Fairplay and OpenCable include requirements of safeguarding the handling and protection of content during the decode process to prevent unintended interception and copying.

One of the requirements is to verify the compliance of the display outputs to the standards of the content protection schemes before delivering or continuing to deliver data to such display outputs. With all the different types of display devices that are available today there is a need for a client application to efficiently and thoroughly verify the compliance of the display devices regardless of whether the display devices support encryption.

As a part of verifying the compliance of the display outputs especially when dealing with a graphics adapter that has many content outputs whether the display content actually reaches an intended display output destination needs to be verified. is a simplified block diagram illustrating how the content to be played by a content player executing in a computer system may be maliciously rerouted from an intended output destination to an unintended one. Suppose the content is initially stored in a storage device . To play back the content the content player causes the content to be retrieved from the storage device and temporarily stores it in a specific location of the memory for processing. After a conventional graphics adapter in the computer system processes the display content it sends the processed content in the form of a display content stream to an intended output or an attach point . An attach point generally refers to a physical attachment location for a display device such as a High Definition Multimedia Interface HDMI connector or an internal panel. Here the graphics adapter has two attach points AP and AP . The AP is attached to a display device and is the intended attach point in this illustration. Suppose the AP is a Digital Visual Interface DVI connection that supports High Bandwidth Digital Content Protection HDCP and the AP is associated with an unprotected analog connection to an analog display device . As the display content stream travels through the graphics adapter a rogue agent may redirect the display content stream to the AP instead. Even though the content player is assured by the driver of the graphics adapter that the AP is the destination for the display content stream the rogue agent can without being detected by the content player modify software accessible registers in the graphics adapter to cause the redirection of the display content stream to the unprotected AP . Once redirected the display content stream can be illegally duplicated.

As the foregoing illustrates what is needed in the art is a method and system that are capable of determining the compliance of a display output and address at least the shortcomings of the prior art approaches set forth above.

A method and system of verifying the connection status information associated with a specific display attachment location are disclosed. Specifically one embodiment of the present invention sets forth a method which Specifically one embodiment of the present invention sets forth a method which includes the steps of receiving a first signature representative of a first set of connection states tracked by a graphics subsystem associated with the display attachment location authenticating whether the integrity of a content path including the display attachment location is maintained based on the first signature and deciding whether to continue sending the content to the display attachment location so that requirements associated with protecting the content are satisfied.

One advantage of the disclosed method and system is the ability to determine the compliance of a display output whether it supports encryption or not so that a client application can verify the integrity of a content path including an attach point and also a display device connected to the attach point in an effective and secure manner.

The present application describes a method and system for determining the compliance of encrypted and non encrypted display outputs. Throughout this disclosure the terms attach point AP and display attachment location are used interchangeably to refer to a physical location through which a display device is connected and receives display content. One embodiment of the invention may be implemented as a program product for use with a computer system. The program s of the program product define functions of the embodiments including the methods described herein and can be contained on a variety of computer readable storage media. Illustrative computer readable storage media include but are not limited to i non writable storage media e.g. read only memory devices within a computer such as CD ROM disks readable by a CD ROM drive flash memory ROM chips or any type of solid state non volatile semiconductor memory on which information is permanently stored and ii writable storage media e.g. floppy disks within a diskette drive or hard disk drive or any type of solid state random access semiconductor memory on which alterable information is stored.

The graphics subsystem mainly includes a video memory and a GPU . In one implementation the GPU also includes a blender a processing core and an AP selector . To display images on either or both of the display devices and the graphics content data are retrieved from the video memory and processed through processing core . Specifically the blender combines different display planes to form a display content stream or a head HD. Then the head HD is directed through an AP selector to one or more selected attach points to which the display devices are connected to.

In one implementation the graphics application makes decisions regarding the handling of content in view of content protection requirements. As an example suppose the graphics application is developed according to the licensed Advanced Access Content System AACS specification. One of the robustness rules imposed by the AACS license agreement requires the graphics application to ensure the video portion of decrypted AACS content in any usable form is reasonably secure from being intercepted or copied. Thus one of the decisions that the graphics application faces is whether the downstream path is sufficiently secure to retain the integrity of the video portion of the decrypted AACS content while still satisfying the robustness rule. Here the graphics application leverages the upstream protocol supported by the API to make such a decision.

To further explain the encryption mechanism deployed in one implementation of the upstream protocol is a simplified block diagram illustrating the exchanges among the graphics application the graphics subsystem and the display device of according to one embodiment of the present invention. First the link between the graphics application and the graphics subsystem is broadly referred to as the upstream link and the link between the graphics subsystem and the display device is broadly referred to as the downstream link. Only session control values and certain unique identifiers of the senders are exchanged on these links. In one example these unique identifiers are Key Selection Vectors KSVs . Sensitive values such as keys needed to make sense of the KSVs are not exchanged on the links. In one implementation the graphics application has C keys the graphics subsystem has both A keys and D keys and the display device has B keys.

If the display device does not support HDCP such as the non HDCP display device then the downstream link is not encrypted. Further even though a non HDCP display device is not associated with B it still needs to be identified so that its compliance can be evaluated. Referring back to the graphics application proceeds to check whether this second link connected to the display device is internal i.e. not accessible by users and secure in step . In one implementation the graphics subsystem is also asked to verify whether the non HDCP display is associated with Abefore validating such a non HDCP end point as compliant to playback content from the media player. In other words if a display device does not support encryption but is identifiable with Aksv and is connect to a user inaccessible link then such a display device can still be considered to comply with the robustness rules as described above. So if the second link is deemed to be secure then the media player still proceeds to deliver content through the second link to the display device in step . Otherwise the media player stops sending content through the second link in step .

On the other hand for the HDCP display device because the associated first link is established to be an encrypted link then the media player proceeds to get and validate certain connection status of the first link in step . In one implementation the validation process involves signing exchanging and verifying of certain unique identifiers associated with this first link such as the KSVs. Subsequent paragraphs will further detail the retrieval and validation process. Since unique identifiers may still be compromised they may be revoked. Thus before the media player begins delivering content through the first link it checks in step whether any of the unique identifiers has been revoked. If there has not been any revocation then the media player can send content through the first link to the display device with some level of confidence that the aforementioned robustness rules are adhered to. Otherwise the media player terminates sending content through the first link. Moreover the media player continues to monitor the first and the second links from time to time. In one implementation at a first timed interval the media player gets and validates the link status again to ensure the integrity of the link is maintained. At a second timed interval which is typically longer in duration than the first timed interval one implementation of the media player forces a renegotiation of the link in step .

To illustrate the retrieval and the validation process discussed above is a simplified block diagram of the processing core of according to one embodiment of the present invention. The processing core includes a signing logic an AP status register to store status information of an AP and a connection state register to store the connection state information tracked by the GPU and another signature register to store a signature Kcomputed by the signing logic based a number of parameters including the collected AP status information and the connection state information. The connection state information stored in the register specifies a set of connection states associated with each head in the graphics subsystem including information indicative of which of the attach points is connected to the head. With respect to each of the connected attach points the AP status information tracked in the register further indicates the type and connection activity of the attach point.

To better understand how the AP status information and the connection state information are defined is a simplified conceptual diagram illustrating examples of connection state information Cs and AP status information S tracked by the GPU of according to one embodiment of the present invention. Suppose the AP selector is configured to connect the head HD to the display device via the attach point AP . In one implementation Cs includes an attach point bit mask field providing a one bit flag for each attach point that is attached and actively transmitting a head identifier field indicating the source of content stream and a number of heads field indicating the number of active heads. So for this example the resulting set of connection state information Cs includes 1 in the number of heads field head HD in the head identifier field the bit flag associated with the attach point AP being set to 1 while the other big flags associated with the other attach points that are not connected to the head HD are set to 0. Other information fields in the connection state information Cs include without limitation bit flags for planes that can be attached to the head and a bit for indicating whether a non HDCP display device is attached to the head.

For each of the attach points that is identified as being connected to the head HD such as AP a corresponding set of AP status information such as S is also tracked by the GPU of . The AP status information S which is associated with the attach point AP includes an attach point index field containing the indexing information of the attach point AP . In one implementation such indexing information can be the bit position of AP in the attach point bit mask in Cs. The AP status information S also contains additional attach point states including without limitation information relating to a non compliant output a number of connectable attach points and whether the attach point is transmitting and the information relating to the security level of such a transmission.

Referring back to is a flowchart illustrating a process for verifying the compliance of an attach point to address the inquiry of the get and validate link status step according to one embodiment of the present invention. In initial step the graphics application of queries the graphics subsystem via the upstream link about the configuration of any head associated with a particular session. In one implementation the graphics application generates a client session ID also referred to as Cn to identify this session and sends it to the graphics subsystem . As shown in a set of connection state information Cs describing the configuration of an identified head HD generated by the GPU is kept in the register . In step the register then is accessed to identify the attach point s that is connected to the head HD such as the attach point AP . For each attach point that is identified as being connected to the head HD the graphics application then proceeds to determine whether it is compliant with a content protection policy and thus is suitable for continuing to deliver content to it.

On the other hand if the anticipated signature is the same as the signature Kreceived from the GPU then the graphics application has authenticated that integrity of the information relating to the content path is maintained in the graphics subsystem . Thus the graphics application may at this point decide in step to continue delivering content to the graphics subsystem and the attach point AP without violating the terms imposed by the content protection license agreements that it is required to comply with.

As has been described above the method and system described herein thus is able to determine the compliance of both an encrypted and a non encrypted display device in an effective and secure manner and the integrity of a content path through specific attach points can be verified.

The above description illustrates various embodiments of the present invention along with examples of how aspects of the present invention may be implemented. The above examples embodiments instruction semantics and drawings should not be deemed to be the only embodiments and are presented to illustrate the flexibility and advantages of the present invention as defined by the following claims.

