---

title: Synchronizing nodes in an optical communications system utilizing frequency division multiplexing
abstract: Attenuation caused by dispersion in an optical fiber communications system is compensated. A number of low-speed channels is to be transmitted across an optical fiber. Each low-speed channel is allocated a different frequency band for transmission. The attenuation caused by dispersion is estimated for each of the frequency bands. The power of each low-speed channel is adjusted to compensate for the estimated attenuation. The power-adjusted low-speed channels are frequency division multiplexed together to produce an electrical high-speed channel suitable for transmission across the communications system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07664403&OS=07664403&RS=07664403
owner: 
number: 07664403
owner_city: 
owner_country: 
publication_date: 20070307
---
This application is a divisional of U.S. patent application Ser. No. 09 854 153 entitled Channel Gain Control For An Optical Communication System Utilizing Frequency Division Multiplexing filed May 11 2001 now U.S. Pat. No. 7 228 077.

This application is a continuation in part of U.S. patent application Ser. No. 09 569 761 Channel Gain Control for an Optical Communications System Utilizing Frequency Division Multiplexing by Laurence J. Newell and James F. Coward filed May 12 2000 now abandoned.

This application is also a continuation in part of U.S. patent application Ser. No. 09 816 242 Through timing of Data Transmitted across an Optical Communications System Utilizing Frequency Division Multiplexing by David A. Pechner et al. filed Mar. 23 2001 now U.S. Pat. No. 7 154 914 which is a continuation in part of U.S. patent application Ser. No. 09 571 349 Through timing of Data Transmitted across an Optical Communications System Utilizing Frequency Division Multiplexing by David A. Pechner and Laurence J. Newell filed May 16 2000 now abandoned.

This application claims the benefit of U.S. Provisional Patent Application Ser. No. 60 273 833 High Speed Optical Signal in an Optical Frequency Division Multiplexing System by Michael W. Rowan et al. filed Mar. 6 2001 U.S. Provisional Patent Application Ser. No. 60 211 935 Method and Apparatus to Mitigate Polarization Mode Dispersion Effects in Optical Communication Networks Utilizing Frequency Division Multiplexing by Laurence J. Newell et al. filed Jun. 15 2000 and U.S. Provisional Patent Application Ser. No. 60 209 020 Optical Communications Networks Utilizing Frequency Division Multiplexing by Michael W. Rowan et al. filed Jun. 1 2000.

This application is related to U.S. patent application Ser. No. 09 853 556 Control Channel for an Optical Communications System Utilizing Frequency Division Multiplexing by Laurence J. Newell and David A. Pechner filed on May 11 2001 now abandoned and U.S. patent application Ser. No. 09 854 246 Synchronizing Nodes in an Optical Communications System Utilizing Frequency Division Multiplexing by Laurence J. Newell filed on May 11 2001 now abandoned .

This invention relates generally to optical fiber communications and more particularly to the use of independent gain control for different frequency channels in an optical fiber communications systems utilizing frequency division multiplexing.

As the result of continuous advances in technology particularly in the area of networking there is an increasing demand for communications bandwidth. For example the growth of the Internet home office usage e commerce and other broadband services is creating an ever increasing demand for communications bandwidth. Upcoming widespread deployment of new bandwidth intensive services such as xDSL will only farther intensify this demand. Moreover as data intensive applications proliferate and data rates for local area networks increase businesses will also demand higher speed connectivity to the wide area network WAN in order to support virtual private networks and high speed Internet access. Enterprises that currently access the WAN through T1 circuits will require DS 3 OC 3 or equivalent connections in the near future. As a result the networking infrastructure will be required to accommodate greatly increased traffic.

Optical fiber is a transmission medium that is well suited to meet this increasing demand. Optical fiber has an inherent bandwidth which is much greater than metal based conductors such as twisted pair or coaxial cable. There is a significant installed base of optical fibers and protocols such as the SONET protocol have been developed for the transmission of data over optical fibers. The transmitter converts the data to be communicated into an optical form and transmits the resulting optical signal across the optical fiber to the receiver. The receiver recovers the original data from the received optical signal. Recent advances in transmitter and receiver technology have also resulted in improvements such as increased bandwidth utilization lower cost systems and more reliable service.

However current optical fiber systems also suffer from drawbacks which limit their performance and or utility. Many of these drawbacks are frequency dependent. For example optical fibers typically exhibit dispersion meaning that signals at different frequencies travel at different speeds along the fiber. More importantly if a signal is made up of components at different frequencies the components travel at different speeds along the fiber and will arrive at the receiver at different times and or with different phase shifts. As a result the components may not recombine correctly at the receiver thus distorting or degrading the original signal. In fact at certain frequencies the dispersive effect may result in destructive interference at the receiver thus effectively preventing the transmission of signals at these frequencies. Dispersion effects may be compensated by installing special devices along the fiber specifically for this purpose. However the additional equipment results in additional cost and different compensators will be required for different types and lengths of fiber.

As another example the electronics in an optical fiber system typically will have a transfer function which is not flat. That is the electronics will exhibit different gain at different frequencies. In other applications an electronic equalizer may be used to compensate for these frequency dependent gain variations in the electronics. However in an optical fiber system the electronics produce an electrical signal which eventually is converted to from an optical form. In order to take advantage of the wide bandwidth of optical fibers the electrical signal produced by the electronics preferably will have a bandwidth matched to the wide bandwidth of the optical fiber. Hence any electronic equalizer will also have to operate over a wide bandwidth which makes equalization difficult and largely impractical.

Furthermore as optical fiber systems become larger and more complex there is an increasing need for efficient approaches to manage and control these systems. In a common architecture for optical fiber systems the system includes a set of interconnected nodes with data being transmitted from node to node. In these systems there is commonly also a need for control administrative or overhead information to be transmitted throughout the system or between nodes. Information describing the overall network configuration software updates diagnostic information including both point to point diagnostics as well as system wide diagnostics timing data such as might be required to implement a global clock if so desired and performance metrics are just a few examples of these types of information.

Thus there is a need for optical communications systems which reduce or eliminate the deleterious effects caused by frequency dependent effects such as fiber dispersion and the non flat transfer function of electronics in the system. There is further a need for systems which support the efficient transmission of control and overhead information.

In accordance with the present invention a method for compensating for dispersion effects in an optical fiber includes the following steps. Examples of dispersion effects are those which result from chromatic dispersion and or polarization mode dispersion. Two or more low speed channels are received. Each low speed channel is allocated a different frequency band for transmission across a communications system which includes the optical fiber. For each low speed channel the attenuation caused by dispersion resulting from transmission of the low speed channel across the optical fiber in the frequency band allocated to the low speed channel is estimated. The power of each low speed channel is adjusted to compensate for the estimated attenuation. The power adjusted low speed channels are frequency division multiplexed together to produce an electrical high speed channel for transmission across the communications system. In one embodiment gain which is equal in magnitude to the estimated attenuation is applied to each low speed channel.

In another aspect of the invention an optical fiber communications system includes a variable gain block coupled to a FDM multiplexer. The variable gain block adjusts the power of each low speed channel as described above. The FDM multiplexer combines the power adjusted low speed channels into the electrical high speed channel suitable for transmission across the communications system.

The present invention is particularly advantageous because dispersion effects such as chromatic dispersion and or polarization mode dispersion may be compensated in an optical fiber communications system. This in turn enhances the performance of the overall system.

Receiver A reverses the function performed by transmitter B reconstructing the original channels B at the receiver location. More specifically receiver includes an O E converter coupled to an FDM demultiplexer . The O E converter preferably a detector such as a high speed PIN diode converts the incoming optical high speed channel from optical to electrical form. The frequency division demultiplexer frequency division demultiplexes the electrical high speed channel into a plurality of low speed channels A.

The various components in transmitter B and receiver A are controlled by their respective control systems . The control systems preferably also have an external port to allow external control of the transmitter B and receiver A. For example an external network management system may manage a large fiber network including a number of transmitters B and receivers A. Alternately a technician may connect a craft terminal to the external port to allow local control of transmitter B or receiver A as may be desirable during troubleshooting.

Various aspects of the invention will be illustrated using the example system . However the invention is not limited to this particular system . For example is a block diagram of another fiber optic communications system also in accordance with the present invention. System includes two nodes A and B each of which includes a transmitter B and receiver A. The two nodes are coupled to each other by two fibers A and B each of which carries traffic from one node to the other . Fiber A carries traffic from transmitter B A to receiver A B whereas fiber B carries traffic from transmitter B B to receiver A A . In a preferred embodiment the fibers also carry control or other overhead signals between the nodes . In an alternate embodiment the nodes may be connected by a single fiber which carries bidirectional traffic. In other embodiments the nodes may contain additional functionality such as add drop functionality thus allowing the nodes to from more complex network configurations.

In more detail low speed channels B are received B by transmitter B. The FDM multiplexer combines these channels into a high speed channel using frequency division multiplexing B techniques. Typically each low speed channel B is modulated on a carrier frequency distinct from all other carrier frequencies and these modulated carriers are then combined to form a single electrical high speed channel typically an RF signal. E O converter converts B the electrical high speed channel to optical form preferably via an optical modulator which modulates an optical carrier with the electrical high speed channel. The optical high speed channel is transmitted B across fiber to receiver A.

Receiver A reverses the functionality of transmitter B. The optical high speed channel is received A by the high speed receiver A. O E converter converts A the optical high speed channel A to an electrical high speed channel typically an RF signal. This electrical high speed channel includes a number of low speed channels which were combined by frequency division multiplexing. FDM demultiplexer frequency division demultiplexes A the high speed signal to recover the low speed channels A which are then transmitted A to other destinations. The frequency spectrum of signals as they propagate through receiver A generally is the reverse of that shown in .

Note that each low speed channel has been allocated a different frequency band for transmission from transmitter B to receiver A. For example referring again to the low frequency channel A may enter transmitter B at or near baseband. FDM multiplexer upshifts this channel A to a frequency of approximately 900 MHz. E O converter then intensity modulates this channel resulting in two sidelobes A which are 900 MHz displaced from the optical carrier . Low speed channel A propagates across fiber at these particular frequencies and is then downshifted accordingly by receiver A. In contrast the high frequency channel N is upshifted by FDM multiplexer to a frequency of approximately 5436 MHz and sidelobes N are correspondingly displaced with respect to optical carrier .

In a preferred embodiment the optical signal carries signals in addition to the sidelobes carrying the low speed channels . is the frequency spectrum of an electrical high speed channel which also includes a pilot tone and a frequency band used for control or other overhead information. For convenience frequency band shall be referred to as a control channel although it may carry overhead information other than control signals or be used for purposes other than control.

In general the control channel provides a communications link between the nodes along the same media i.e. fiber used by the data carrying sidelobes . The control channel has many uses. For example the control channel may be used for remote monitoring performance metrics measured at one node may be communicated to another node or to a central location via the control channel. The control channel may also be used to send commands to each node for example to set or alter the configuration of a node. When a node first comes onto a network or returns to the network after a fault the control channel may be used to implement part of the procedure for bringing the node onto the network. For example the control channel may be established before the data carrying channels and may then be used to help set up the data carrying channels. Alternately the control channel may also be used to establish handshaking between nodes. As a final example in fault situations the control channel may be used to gather diagnostic information for fault isolation and also to aid in fault recovery.

The pilot tone is used to synchronize local oscillators used in the transmitter B and receiver A. The transmitter B generates a reference signal at a frequency of 36 MHz and RF electronics at transmitter B are locked to this reference signal. Electronics also generate the pilot tone from the reference signal. In this particular case the pilot tone is at a frequency of 324 MHz or the ninth harmonic of the base frequency of 36 MHz. Conventional intensity modulation results in double sideband modulation. The ninth harmonic is used in order to provide adequate separation between the pilot tones and the optical carrier in the final optical signal. At the receiver A the pilot tone is recovered and frequency divided by nine to recover the original 36 MHz reference signal. Local oscillators at receiver A are locked to the recovered reference signal and local oscillators at transmitter B are locked to the original reference signal. Thus local oscillators at the receiver A and the transmitter B are locked to each other.

In this embodiment the control channel has a width of 26 MHz and a center frequency of 816 MHz. The control channel is described in more detail below. In this embodiment both the control channel and the pilot tone are located at frequencies lower than the data carrying sidelobes . However this is not required. Alternate embodiments can locate the control channel s and pilot tone s at different frequencies including interspersed among the sidelobes and or at frequencies higher than the sidelobes .

Since each low speed channel is allocated a different frequency band each channel will typically experience a different gain as it propagates through system . For example fiber losses such as due to chromatic dispersion or polarization mode dispersion typically will be different for sidelobes A and N since they are located at different frequencies. Similarly the gain due to propagation through the various electronic components may also differ since electronics may exhibit different responses at different frequencies. The term gain is used here to refer to both losses and amplification.

However since the frequency band of each low speed channel is known the gain which the low speed channel will experience as it propagates through system may be estimated and then compensated for by adjusting the power of each low speed channel. For example if sidelobe N is expected to experience more loss than sidelobe A due to chromatic dispersion then sidelobe N may be amplified with respect to sidelobe A in order to compensate for the expected higher loss. The amplification may be applied directly to sidelobe N or at other locations within system for example to lobe N exiting the FDM multiplexer or to the corresponding low speed channel B as it enters the system .

The gain may be estimated in any number of ways. For example with respect to fiber in one embodiment standard analytical models are used to estimate the gain due to propagation through fiber at different frequencies due to different physical phenomena. Often these gain estimates will depend on the length of fiber which itself may be estimated based on the expected application. Alternately the length may be measured for example by using time domain reflectometry. In a preferred embodiment a test signal is sent from node A over fiber A to node B. Node B receives the signal and then returns it to node A via fiber B A timer circuit measures the round trip elapsed time which is used to estimate the fiber length.

Similarly the gain estimates for fiber may alternately be determined empirically by measuring the actual gain experienced at different frequencies or by using empirical models. Analogous techniques may be applied to the rest of system . For example the gain of electronics may be estimated based on models or may be measured by calibrations for example performed by the manufacturer at the time of production.

Thus if all of the sidelobes were of equal power when they entered a fiber with the gain profile shown in the higher frequency sidelobes typically would experience more attenuation in the detected signal as the optical signal propagates through the fiber. This would result in a rolloff in power received at the receiver A at the higher frequencies. Since it is desirable for power for all sidelobes to be roughly equal at the receiver A it is desirable to compensate for this rolloff effect. Accordingly at the transmitter B the power of the higher frequency low speed channels is boosted with respect to the lower frequency channels so that after propagation through fiber the sidelobes are of roughly equal power when they reach the receiver A. is a graph of the gain G applied to compensate for the rolloff. As the inverse of gain g in i.e. G 1 g the gain G in increases with increasing frequency and is concave up. This gain profile is also known as a gain ramp. The gain G is shown as a continuous curve. However in a preferred embodiment a constant gain is applied across each sidelobe . For example the gain G at the center frequency of a specific sidelobe may be applied to the entire sidelobe.

When more than one effect is present the gain G preferably compensates for all significant effects. For example in some situations both chromatic dispersion and polarization mode dispersion result in substantial attenuation of the signal. In one embodiment the compensatory gain function G f is determined according to G f G f G f where G F compensates for attenuation due to chromatic dispersion and G f compensates for attenuation due to polarization mode dispersion. In one embodiment the function G is selected to accommodate for the peak instantaneous differential group delay intended to be tolerated. In a preferred embodiment the gain G compensates for a peak differential group delay of 46 ps and results in a 3 dB gain applied to low speed channel number centered at frequency f 5436 MHz. This 3 dB gain offsets the differential group delay of 46 ps and ensures that data channel arrives with the same power as a data channel propagating without substantial PMD and therefore without a gain ramp. Continuing this example an instantaneous differential group delay of 70 ps due to polarization mode dispersion results in an optical power penalty of 3 dB.

Other compensatory gain functions G will be apparent. For example the external optical modulator in E O converter may result in a rolloff with frequency. The gain G can be used to compensate for this rolloff for example by using a power amplifier to apply gain to the RF signal entering the modulator.

The gain may also be estimated using closed loop techniques. In other words the low speed channel is transmitted across system and a feedback signal is produced responsive to this transmission. The power of the low speed channel is then adjusted responsive to the feedback signal. As examples in one embodiment the feedback signal may depend on the power of the low speed channel after it has been transmitted across system . In another embodiment it may depend on the signal to noise ratio or various error rates in the received low speed channel A.

In a preferred embodiment the feedback signal is generated by monitor circuitry coupled to the FDM demultiplexer and fed back from receiver A to transmitter B via fiber as opposed to some other communications channel. In system of the control systems may communicate with each other via the bidirectional traffic on these fibers . For example consider traffic flow from transmitter B A across fiber A to receiver A B . The feedback signal generated at receiver A B for this traffic is fed back to transmitter B A via the other fiber B. The control system for node A then generates the appropriate control signals to adjust the powers of the low speed channels. Similarly the feedback signal for traffic flowing from transmitter B B across fiber B to receiver A A may be fed back to transmitter B B via the other fiber A.

In a preferred embodiment a frequency band located between the sidebands see and the optical carrier is allocated for control and or administrative purposes e.g. for downloading software updates . In a preferred embodiment this control channel is also used to transmit the feedback signal between the nodes and for time domain reflectometry in order to estimate the length of the fiber. Since it is often desirable to establish initial communications between nodes using the control channel before establishing the actual data links using sidebands the control channel preferably has a lower data rate and is less susceptible to transmission impairments than the data carrying sidebands . In an alternate embodiment one of the frequency bands within the electrical high speed channel is used for the feedback signal.

Referring now to in one embodiment the control channel has a spectral bandwidth of 26 MHz and utilizes alternate mark inversion frequency shift keying AMI FSK modulation with a peak frequency deviation of 9 MHz. Data is transmitted at a rate of 2.048 Mbps using the E1 protocol. Because the control channel transmits at the E1 data rate which is lower than the transmission rate of the data carrying sidebands control channel is more robust than the data channels and can tolerate lower SNR. Furthermore because of the lower data rate and because in the optical signal the control channel is closer to the optical carrier than the data carrying channels the control channel is generally more resistant to fiber impairments than the data channels . Thus in situations when the data channels are not transmitting properly the control channel may still be functioning normally. The control channel can then be used by control system to communicate between nodes A and B in order to bring the data channels to normal operation. This situation may occur if there is a fault in the system or upon start up of the system. The control channel can also be used to exchange information during routine operation as described above.

Any number of techniques may be used to adjust the power of the low speed channels . For example if a closed loop technique is used standard control algorithms such as proportional control may be used. In another approach a common mode and a differential mode adjustment may be used alternately. In the differential mode adjustment the total power of all low speed channels is kept constant while the allocation of power among the various channels is adjusted. Thus for example the gain applied to sidelobe A may be increased by a certain amount if the gain applied to sidelobe N is reduced by the same amount so that the total power in all sidelobes remains constant. In the common mode adjustment the allocation of power among the various low speed channels remains constant while the total power is adjusted. Thus for example the gain applied to sidelobes A N and all other sidelobes may be increased by the same amount thus increasing the total power.

The use of frequency division multiplexing in system allows the transport of a large number of low speed channels over a single fiber in a spectrally efficient manner. It also reduces the cost of system since the bulk of the processing performed by system is performed on low speed electrical signals. In addition since each low speed channel is allocated a specific frequency band the use of frequency division multiplexing allows different gain to be applied to each low speed channel in an efficient manner thus compensating for the specific gain to be experienced by the low speed channel as it propagates through system .

Low speed input converter of implements the reverse functionality of converter converting four 155 Mbps low speed channels A into a single outgoing OC 12 tributary A. In particular converter includes CDR FIFO TDM multiplexer parallel to serial converter and E O converter coupled in series. CDR performs clock and data recovery of each of the four incoming low speed channels A determines framing for the channels and converts the channels from serial to byte wide parallel. The result is four byte wide signals entering FIFO . FIFO is a buffer which is used to synchronize the four signals in preparation for combining them into a single STS 12 signal. Multiplexer performs the actual combination using TDM on a byte level to produce a single byte wide signal equivalent in data capacity to an STS 12 signal. Parallel to serial converter adds STS 12 framing to complete the STS 12 signal and converts the signal from byte wide parallel to serial. E O converter converts the STS 12 signal to electrical form producing the outgoing OC 12 tributary A.

Converters and have been described in the context of OC 3 and OC 12 tributaries and low speed channels with the same date rate as STS 3 signals but the invention is not limited to these protocols. Alternate embodiments can vary the number bit rate format and protocol of some or all of these tributaries . One advantage of the FDM approach illustrated in system is that the system architecture is generally independent of these parameters. For example the tributaries can comprise four 2.5 Gbps data streams 16 622 Mbps data streams 64 155 Mbps data streams 192 51.84 Mbps data streams or any other bit rate or combinations of bit rates without requiring major changes to the architecture of system .

In one embodiment the tributaries are at data rates which are not multiples of the STS 3 data rate. In one variant low speed input converter demultiplexes the incoming tributary B into some number of parallel data streams and then stuffs null data into each resulting stream such that each stream has an STS 3 data rate. For example if tributary B has a data rate of 300 Mbps converter may demultiplex the tributary into four 75 Mbps streams. Each stream is then stuffed with null data to give four 155 Mbps low speed channels. In another variant the speed of the rest of system specifically the modulator and demodulator of may be adjusted to match that of the tributary . Low speed output converter typically will reverse the functionality of low speed input converter .

Referring to modulator modulates the 64 incoming low speed channels B to produced 64 QAM modulated channels which are input to the IF up converter . For convenience the QAM modulated channels shall be referred to as IF channels because they are inputs to the IF up converter . In this embodiment each low speed channel is modulated separately to produce a single IF channel and depicts the portion of modulator which modulates one IF channel. Modulator in its entirety would include 64 of the portions shown in . For convenience the single channel shown in shall also be referred to as a modulator . Modulator includes a FIFO Reed Solomon encoder an interleaver a trellis encoder a digital filter and a D A converter coupled in series. Modulator also includes a synchronizer coupled between the incoming low speed channel B and the filter .

Modulator operates as follows. FIFO buffers the incoming low speed channel. Reed Solomon encoder encodes the low speed channel B according to a Reed Solomon code. Programmable Reed Solomon codes are preferred for maintaining very low BER typ. lower than 10 with low overhead typ. less than 10 . This is particularly relevant for optical fiber systems because they generally require low bit error rates BER and any slight increase of the interference or noise level will cause the BER to exceed the acceptable threshold. For example a Reed Solomon code of 204 188 can be applied for an error correction capability of 8 error bytes per every 204 encoded bytes.

The interleaver interleaves the digital data string output by the Reed Solomon encoder . The interleaving results in more robust error recovery due to the nature of trellis encoder . Specifically forward error correction FEC codes are able to correct only a limited number of mistakes in a given block of data but convolutional encoders such as trellis encoder and the corresponding decoders tend to cause errors to cluster together. Hence without interleaving a block of data which contained a large cluster of errors would be difficult to recover. However with interleaving the cluster of errors is distributed over several blocks of data each of which may be recovered by use of the FEC code. Convolution interleaving of depth 0 is preferred in order to minimize latency.

The trellis encoder applies a QAM modulation preferably 16 state QAM modulation to the digital data stream output by the interleaver . The result typically is a complex baseband signal representing the in phase and quadrature I and Q components of a QAM modulated signal. Trellis encoder implements the QAM modulation digitally and the resulting QAM modulated signal is digitally filtered by filter in order to reduce unwanted sidelobes and then converted to the analog domain by D A converter . Synchronizer performs clock recovery on the incoming low speed channel B in order to synchronize the digital filter . The resulting IF channel is a pair of differential signals representing the I and Q components of the QAM modulated signal. In alternate embodiments the QAM modulation may be implemented using analog techniques.

Referring to demodulator reverses the functionality of modulator recovering a low speed channel A from an incoming IF channel i.e. analog I and Q components in this embodiment received from the IF down converter . Demodulator includes an A D converter digital Nyquist filter equalizer trellis decoder deinterleaver Reed Solomon decoder and FIFO coupled in series. Demodulator further includes a synchronizer which forms a loop with Nyquist filter and a rate converter phase locked loop PLL which is coupled between synchronizer and FIFO .

Demodulator operates as would suggest. The A D converter converts the incoming IF channel to digital form and Nyquist filter synchronized by synchronizer digitally filters the result to reduce unwanted artifacts from the conversion. Equalizer applies equalization to the filtered result for example to compensate for distortions introduced in the IF signal processing. Trellis decoder converts the I and Q complex signals to a digital stream and deinterleaver reverses the interleaving process. Trellis decoder may also determine the error rate in the decoding process commonly referred to as the channel error rate which may then be used to estimate the gain of system as described previously. Reed Solomon decoder reverses the Reed Solomon encoding correcting any errors which have occurred. If the code rate used results in a data rate which does not match the rate used by the low speed channels FIFO and rate converter PLL transform this rate to the proper data rate.

Referring again to transmitter B IF up converter receives the 64 IF channels from modulator . Together IF up converter and RF up converter combine these 64 IF channels into a single RF signal using FDM techniques. In essence each of the IF channels or equivalently each of the 64 low speed channels B is allocated a different frequency band within the RF signal. The allocation of frequency bands shall be referred to as the frequency mapping and in this embodiment the IF channels may also be referred to as FDM channels since they are the channels which are FDM multiplexed together. The multiplexing is accomplished in two stages. IF up converter first combines the 64 IF channels into 8 RF channels so termed because they are inputs to the RF up converter . In general the terms IF and RF are used throughout as labels rather than for example indicating some specific frequency range. RF up converter them combines the 8 RF channels into the single RF signal also referred to as the electrical high speed channel.

Referring to IF up converter includes eight stages identical in this embodiment but not necessarily so each of which combines 8 IF channels into a single RF channel. depicts one of these stages which for convenience shall be referred to as an IF up converter . IF up converter includes eight frequency shifters and a combiner . Each frequency shifter includes a modulator a variable gain block a filter and a power monitor coupled in series to an input of the combiner .

IF up converter operates as follows. Modulator receives the IF channel and also receives a carrier at a specific IF frequency e.g. 1404 MHz for the top frequency shifter in . Modulator modulates the carrier by the IF channel. The modulated carrier is adjusted in amplitude by variable gain block which is controlled by the corresponding control system and bandpass filtered by filter . Power monitor monitors the power of the gain adjusted and filtered signal and transmits the power measurements to control system .

In a preferred embodiment each IF channel has a target power level based on the estimated gain due to transmission through system . Control system adjusts the gain applied by variable gain block so that the actual power level as measured by power monitor matches the target power level. The target power level may be determined in any number of ways. For example the actual power level may be required to fall within a certain power range or be required to always stay above a minimum acceptable power. Alternately it may be selected to maintain a minimum channel error rate or to maintain a channel error rate within a certain range. In this embodiment variable gain block implements the step of adjusting the power of each low speed channel .

In alternate embodiments the power adjustment may be implemented by other elements at other locations or even at more than one location. For example one gain block may apply a common mode gain to all low speed channels and another series of gain blocks at a different location may apply individual gain to each channel i.e. differential mode gain . However applying the gain adjustment at the location of variable gain block has some advantages. For example if the power were adjusted prior to modulator where each low speed channel consists of an I and a Q channel care would need to be taken to ensure that the same gain was applied to both the I and Q channels in order to prevent distortion of the signal. Alternately if the power were adjusted after combiner it typically would be more difficult to adjust the power of each individual low speed channel since combiner produces a composite signal which includes multiple individual channels.

The inputs to combiner are QAM modulated IF signal at a specific frequency which have been power adjusted to compensate for estimated gains in the rest of system . However each frequency shifter uses a different frequency e.g. ranging in equal increments from 900 MHz to 1404 MHz in this example so combiner simply combines the 8 incoming QAM modulated signal to produce a single signal i.e. the RF channel containing the information of all 8 incoming IF channels. In this example the resulting RF channel covers the frequency range of 864 1440 MHz.

Referring to RF up converter is structured similar to IF up converter and performs a similar function combining the 8 RF channels received from the IF up converter just as each IF up converter combines the 8 IF channels received by it. In more detail RF up converter includes eight frequency shifters and a combiner . Each frequency shifter includes a mixer various gain blocks and various filter coupled in series to an input of the combiner .

RF up converter operate as follows. Mixer mixes one of the RF channels with a carrier at a specific RF frequency e.g. 4032 MHz for the top frequency shifter in thus frequency upshifting the RF channel to RF frequencies. Gain blocks and filters are used to implement standard amplitude adjustment and frequency filtering. For example in one filter bandpass filters the incoming RF channel and another bandpass filters the produced RF signal both filters for suppressing artifacts outside the frequency range of interest. Each frequency shifter uses a different frequency e.g. ranging in equal increments from 0 to 4032 MHz in this example so combiner simply combines the 8 incoming RF signals to produce the single electrical high speed channel containing the information of all 8 incoming RF channels or equivalently all 64 IF channels received by IF up converter . In this example the electrical high speed channel covers the frequency range of 864 5472 MHz.

RF down converter and IF down converter implement the reverse functionalities splitting the RF signal into its 8 constituent RF channels and then splitting each RF channel into its 8 constituent IF channels respectively thus producing 64 IF channels i.e. FDM channels to be received by demodulator .

Referring to RF down converter includes a splitter coupled to eight frequency shifters. Each frequency shifter includes a mixer various gain blocks and various filters coupled in series. Splitter splits the incoming electrical high speed channel into eight different RF signals and each frequency shifter recovers a different constituent RF channel from the RF signal it receives. Mixer mixes the received RF signal with a carrier at a specific RF frequency e.g. 4032 MHz for the top frequency shifter in thus frequency downshifting the RF signal to its original IF range e.g. 864 1440 MHz . Filter then filters out this specific IF frequency range. Each frequency shifter uses a different RF frequency with mixer and thus recovers a different RF channel. The output of RF down converter is the 8 constituent RF channels.

IF down converter of operates similarly. It includes a splitter and 8 frequency shifters each including a bandpass filter variable gain block demodulator and power monitor . Splitter splits the incoming RF channel into eight signals from which each frequency shifter will recover a different constituent IF channel. Filter isolates the frequency band within the RF channel which contains the IF channels of interest. Demodulator recovers the IF channel by mixing with the corresponding IF carrier. The resulting 64 IF channels are input to demodulator .

Variable gain block and power monitor control the power level of the resulting IF channel. In a preferred embodiment each IF channel is output from IF down converter at a target power in order to enhance performance of the rest of the receiver A. Power monitor measures the actual power of the IF channel which is used to adjust the gain applied by variable gain block in order to match the actual and target power levels. As described previously the actual received power level for each low speed channel may be used to estimate the gain of system . In IF down converter the actual receive power level may be determined by dividing the output target power for each IF channel by the gain applied by variable gain block in order to maintain the output target power. In another approach the actual receive power level may be directly measured for example by placing a power monitor where variable gain block is located.

The RF upconverter in is changed in a similar manner. Specifically in addition to the eight signal paths leading to combiner shown in the RF upconverter in includes two additional signal paths. Each signal path includes a variable gain block coupled in series to a filter . One path is for adding the control channel and the other adds the pilot tone .

A preferred embodiment of method will now be described with reference to the bidirectional system and the further details given in . In the preferred method the gain applied to each low speed channel is adjusted in order to optimize the channel error rate measured at the receiver A. Feedback occurs over fibers . More specifically gain is applied to each of the low speed channels via variable gain block . This gain is initially selected based on an open loop estimate. As data is transmitted from transmitter B A over fiber A to receiver A B trellis decoder determines the channel error rate at the receiver A B . The channel error rate is fed back to node A via the control channel on fiber B. In this embodiment the control channel is a frequency modulated alternate mark inverted B8ZS encoded baseband transmitted at 2 Mbps. The gain applied by variable gain block is adjusted to optimize this channel error rate. One optimization approach alternates between differential mode and common mode adjustments. In the differential mode adjustment the gain is increased for low speed channels which have unacceptable channel error rates and decreased for low speed channels with acceptable channel error rates while keeping the overall power in all low speed channels constant. In the common mode adjustment if the median channel error rate is unacceptable then the gain for all channels is increased by equal increments until the median channel error rate is acceptable. In alternate embodiments channel performance can be monitored by metrics other than the channel error rate for example received power signal to noise ratio or bit error rate.

It should be noted that many other implementations which achieve the same functionality as the devices in will be apparent. For example referring to note that the bottom channel occupies the frequency spectrum from 864 1440 MHz and therefore no mixer is required. As another example note that the next to bottom channel is frequency up shifted from the 864 1440 MHz band to the 1440 2016 MHz. In a preferred approach this is not accomplished in a single step by mixing with a 576 MHz signal. Rather the incoming 864 1440 MHz signal is frequency up shifted to a much higher frequency range and then frequency down shifted back to the 1440 2016 MHz range. This avoids unwanted interference from the 1440 MHz end of the original 864 1440 MHz signal. For example referring to in a preferred embodiment the filters are not required due to the good spectral characteristics of the signals at that point. A similar situation may apply to the other filters shown throughout or the filtering may be achieved by different filters and or filters placed in different locations. Similarly amplification may be achieved by devices other than the various gain blocks shown. In a preferred embodiment both RF down converter and RF up converter do not contain variable gain elements. As one final example in some functionality is implemented in the digital domain while other functionality is implemented in the analog domain. This apportionment between digital and analog may be different for other implementations. Other variations will be apparent.

The FDM aspect of preferred embodiment has been described in the context of combining 64 low speed channels into a single optical high speed channel . The invention is in no way limited by this example. Different total numbers of channels different data rates for each channel different aggregate data rate and formats and protocols other than the STS OC protocol are all suitable for the current invention. In fact one advantage of the FDM approach is that it is easier to accommodate low speed channels which use different data rates and or different protocols. In other words some of the channels B may use data rate A and protocol X while others may use data rate B and protocol Y while yet others may use data rate C and protocol Z. In the FDM approach each of these may be allocated to a different carrier frequency and they can be straightforwardly combined so long as the underlying channels are not so wide as to cause the different carriers to overlap. In contrast in the TDM approach each channel is allocated certain time slots and essentially will have to be converted to a TDM signal before being combined with the other channels.

Another advantage is lower cost. The FDM operations may be accomplished with low cost components commonly found in RF communication systems. Additional cost savings are realized since the digital electronics such as modulator and demodulator operate at a relatively low data rate compared to the aggregate data rate. The digital electronics need only operate as fast as the data rate of the individual low speed channels . This is in contrast to TDM systems which require a digital clock rate that equals the aggregate transmission rate. For OC 192 which is the data rate equivalent to the high speed channels in system this usually requires the use of relatively expensive gallium arsenide integrated circuits instead of silicon.

Moving further along transmitter B E O converter preferably includes an optical source and an external optical modulator. Examples of optical sources include solid state lasers and semiconductor lasers. Example external optical modulators include Mach Zehnder modulators and electro absorptive modulators. The optical source produces an optical carrier which is modulated by the electrical high speed channel as the carrier passes through the modulator. The electrical high speed channel may be predistorted in order to increase the linearity of the overall system. Alternatively E O converter may be an internally modulated laser. In this case the electrical high speed channel drives the laser the output of which will be a modulated optical beam i.e. the optical high speed channel B .

The wavelength of the optical high speed channel may be controlled using a number of different techniques. For example a small portion of the optical carrier may be extracted by a fiber optic splitter which diverts the signal to a wavelength locker. The wavelength locker generates an error signal when the wavelength of the optical carrier deviates from the desired wavelength. The error signal is used as feedback to adjust the optical source e.g. adjusting the drive current or the temperature of a laser in order to lock the optical carrier at the desired wavelength. Other approaches will be apparent.

The counterpart on the receiver A is O E converter which typically includes a detector such as an avalanche photo diode or PIN diode. In an alternate approach O E converter includes a heterodyne detector. For example the heterodyne detector may include a local oscillator laser operating at or near the wavelength of the incoming optical high speed channel A. The incoming optical high speed channel and the output of the local oscillator laser are combined and the resulting signal is detected by a photodetector. The information in the incoming optical high speed channel can be recovered from the output of the photodetector. One advantage of heterodyne detection is that the thermal noise of the detector can be overcome and shot noise limited performance can be obtained without the use of fiber amplifiers.

The modularity of the FDM approach also makes the overall system more flexible and scaleable. For example frequency bands may be allocated to compensate for fiber characteristics. For a 70 km fiber there is typically a null around 7 GHz. With the FDM approach this null may be avoided simply by not allocating any of the frequency bands around this null to any low speed channel . As a variant each of the frequency bands may be amplified or attenuated independently of the others for example in order to compensate for the transmission characteristics of that particular frequency band.

Various design tradeoffs are inherent in the design of a specific embodiment of an FDM based system for use in a particular application. For example the type of Reed Solomon encoding may be varied or other types of forward error correction codes or none at all may be used depending on the system margin requirements. As another example in one variation of QAM the signal lattice is evenly spaced in complex signal space but the total number of states in the QAM constellation is a design parameter which may be varied. The optimal choices of number of states and other design parameters for modulator demodulator will depend on the particular application. Furthermore the modulation may differ on some or all of the low speed channels. For example some of the channels may use PSK modulation others may use 16 QAM others may use 4 QAM while still others may use an arbitrary complex constellation. The choice of a specific FDM implementation also involves a number of design tradeoffs such as the choices of intermediate frequencies whether to implement components in the digital or in the analog domain and whether to use multiple stages to achieve the multiplexing.

As a numerical example in one embodiment a 187 204 Reed Solomon encoding may be used with a rate 16 QAM trellis code. The 187 204 Reed Solomon encoding transforms 187 bytes of data into 204 bytes of encoded data and the rate 16 QAM trellis code transforms 3 bits of information into a single 16 QAM symbol. In this example a single low speed channel B which has a base data rate of 155 Mbps would require a symbol rate of 155 Mbps 204 187 56.6 Mega symbols per second. Including an adequate guard band a typical frequency band would be about 72 MHz to support this symbol rate. Suppose however that it is desired to decrease the bandwidth of each frequency band. This could be accomplished by changing the encoding and modulation. For example a 188 205 Reed Solomon code with a rate 64 QAM trellis code would require a symbol rate of 155 Mbps 205 188 33.9 Megasymbols per second or 43 MHz frequency bands assuming proportional guard bands. Alternately if 72 MHz frequency bands were retained then the data rate could be increased.

As another example an optical modulator with better linearity will reduce unwanted harmonics and interference thus increasing the transmission range of system . However optical modulators with better linearity are also more difficult to design and to produce. Hence the optimal linearity will depend on the particular application. An example of a system level tradeoff is the allocation of signal power and gain between the various components. Accordingly many aspects of the invention have been described in the context of the preferred embodiment of but it should be understood that the invention is not to be limited by this specific embodiment.

It should be noted that the embodiments described above are exemplary only and many other alternatives will be apparent. For example in the embodiments discussed above the low speed channels were combined into an electrical high speed channel using solely frequency division multiplexing. For example each of the 64 low speed channels B was effectively placed on a carrier of a different frequency and these 64 carriers were then effectively combined into a single electrical high speed channel solely on the basis of different carrier frequencies. This is not meant to imply that the invention is limited solely to frequency division multiplexing to the exclusion of all other approaches for combining signals. In fact in alternate embodiments other approaches may be used in conjunction with frequency division multiplexing. For example in one approach 64 low speed channels B may be combined into a single high speed channel in two stages only the second of which is based on frequency division multiplexing. In particular 64 low speed channels B are divided into 16 groups of 4 channels each. Within each group the 4 channels are combined into a single signal using 16 QAM quadrature amplitude modulation . The resulting QAM modulated signals are frequency division multiplexed to form the electrical high speed channel.

As another example it should be clear that the tributaries may themselves be combinations of signals. For example some or all of the OC 3 OC 12 tributaries may be the result of combining several lower data rate signals using either frequency division multiplexing or other techniques. In one approach time division multiplexing may be used to combine several lower data rate signals into a single OC 3 signal which serves as a tributary .

As a final example frequency division multiplexing has been used in all of the preceding examples as the method for combining the low speed channels into a high speed channel for transmission across optical fiber . Other approaches could also be used. For example the low speed channels could be combined using wavelength division multiplexing in which the combining of channels occurs in the optical domain rather than in the electrical domain. In this approach the low speed channels are optical in form the optical power of each low speed channel is adjusted and the power adjusted optical low speed channels are combined using wavelength division multiplexing rather than frequency division multiplexing. Many of the principles described above may also be applied to the wavelength division multiplexing approach. Although the invention has been described in considerable detail with reference to certain preferred embodiments thereof other embodiments are possible. Therefore the scope of the appended claims should not be limited to the description of the preferred embodiments contained herein.

