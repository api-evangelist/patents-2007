---

title: Method and apparatus for demodulating signals processed in a transmit diversity mode
abstract: Demodulator architectures for processing a received signal in a wireless communications system. The demodulator includes a number of correlators coupled to a combiner. Each correlator typically receives and despreads input samples (which are generated from the received signal) with a respective despreading sequence to provide despread samples. Each correlator then decovers the despread samples to provide decovered “half-symbols” and further demodulates the decovered half-symbols with pilot estimates to generate correlated symbols. The decovering is performed with a Walsh symbol having a length (T) that is half the length (2T) of a Walsh symbol used to cover the data symbols in the transmitted signal. The combiner selectively combines correlated symbols from the assigned correlators to provide demodulated symbols. One or more correlators can be assigned to process one or more instances of each transmitted signal. The pilot estimates used within each assigned correlator to demodulate the decovered half-symbols are generated based on the signal instance being processed by that correlator.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07684474&OS=07684474&RS=07684474
owner: QUALCOMM Incorporated
number: 07684474
owner_city: San Diego
owner_country: US
publication_date: 20070117
---
The present application for patent is a Divisional and claims priority to patent application Ser. No. 10 651 446 entitled Method and apparatus for demodulating signals processed in a transmit diversity mode filed Aug. 28 2003 now allowed which is a Continuation Application claiming priority to patent application Ser. No. 09 594 466 entitled Method and Apparatus for Demodulating Signals Processed in a Transmit Diversity Mode filed Jun. 14 2000 now issued U.S. Pat. No. 6 628 702 having a common assignee with the present application and hereby expressly incorporated by reference herein.

The present invention relates to data communications. More particularly the present invention relates to method and apparatus for efficiently demodulating signals that have been processed and transmitted in a diversity mode.

In a typical digital communications system data is processed modulated and conditioned at a transmitter unit to generate a modulated signal that is then transmitted to one or more receiver units. The data processing may include for example formatting the data into a particular frame format encoding the formatted data to provide error detection and or correction at the receiver unit channelizing i.e. covering the coded data and spreading the channelized data over the system bandwidth. The data processing is typically defined by the system or standard being implemented.

At the receiver unit the transmitted signal is received conditioned demodulated and digitally processed to recover the transmitted data. The processing at the receiver unit is complementary to that performed at the transmitter unit and may include for example despreading the received samples decovering the despread samples to generate decovered symbols and decoding the decovered symbols.

In some communications systems data is processed and redundantly transmitted over two or possibly more antennas to provide transmit diversity. The processing may include for example covering the data for each antenna with a particular channelization code e.g. a particular Walsh symbol . In some systems the data for one or more antennas may also be reordered prior to the channelization. Due to multipath and other phenomena the transmitted signals may experience different path conditions and may arrive at the receiver unit at different times. If the transmit antennas are spaced sufficiently far apart then the received signals from the antennas tend to fade independently. Each transmitted signal may also reach the receiver unit via multiple signal paths. The receiver unit is then required to receive track and process one or more instances of each transmitted signal and to combine the results from the processed signal instances to recover the transmitted data. On the downlink the processing typically includes tracking a pilot that has been transmitted along with the data and using the recovered pilot to demodulate data samples.

The signal processing e.g. demodulation to process multiple transmitted signals and multiple instances of such signals can be complicated. Moreover transmit diversity is typically provided on the downlink and user terminals are required to support such a mode. The user terminals are typically more impacted by complexity and costs considerations. Therefore techniques that can be used to efficiently demodulate signals that have been processed and transmitted in a diversity mode are highly desirable.

The present invention provides demodulator architectures demodulators and receiver units for processing signals that have been processed and transmitted in a transmit diversity mode. When operating in the transmit diversity mode data symbols are typically covered with a channelization code e.g. a Walsh symbol having a length 2T that is twice the length T of the channelization code used to cover the data symbols in the non transmit diversity mode. The demodulator architectures of the invention exploit this property and perform partial processing e.g. despreading decovering pilot demodulation or a combination thereof on each fraction of a channelization symbol period of 2T. The processed partial symbols are then appropriately combined to generate the demodulated symbols. By performing partial processing on each fraction e.g. each half of the symbol period of 2T computational complexity and costs can be reduced and performance may be improved. For example with the present invention the pilot demodulation in each assigned correlator i.e. finger can be performed based only on pilot estimates generated by that correlator whereas conventional techniques may require pilots from multiple correlators. Other advantages are described below.

An embodiment of the invention provides a demodulator for processing a received signal in a wireless communications system. The demodulator includes a number of correlators coupled to a combiner. Each correlator typically receives and despreads input samples with a respective despreading sequence to provide despread samples. The input samples are generated from the received signal. Each correlator then decovers the despread samples to provide decovered partial symbols and further demodulates the decovered partial symbols with pilot estimates to generate correlated symbols. The decovering is performed with a channelization symbol e.g. a Walsh symbol having a length e.g. T that is a fraction e.g. half the length 2T of the channelization symbol used to cover the data symbols in the received signal. The combiner receives and selectively combines correlated symbols from the assigned correlators to provide demodulated symbols.

In the transmit diversity mode of a CDMA 2000 or W CDMA standard which are identified below the received signal includes a pair of signals transmitted from a pair of antennas. One or more correlators can then be assigned to process at one or more instances of each transmitted signal. Each assigned correlator processes the received signal to recover pilot estimates corresponding to the signal instance being processed. The pilot estimates are then used within the assigned correlator to demodulate the decovered partial symbols.

A specific embodiment of the invention provides a demodulator that includes a number of correlators coupled to a combiner. Each correlator typically includes a despreader a decover element a complex multiplier and a switch coupled in series. The despreader receives and despreads input samples with a particular despreading sequence to provide despread samples and the decover element decovers the despread samples to provide pairs of decovered half symbols. The decovering is performed with a Walsh symbol W having a length T that is half the length 2T of a Walsh symbol Wused to cover the data in the received signal. Space Time Spreading STS is a transmit diversity mode defined by the CDMA 2000 standard. One pair of decovered half symbols is provided for each Walsh symbol period of 2T. The complex multiplier then demodulates the decovered half symbols with a pilot recovered by the correlator to provide demodulated half symbols.

The switch provides a first combination of decovered half symbols for each Walsh symbol period of 2T in a first e.g. even symbol stream and a second combination of decovered half symbols for each Walsh symbol period of 2T in a second e.g. odd symbol stream. The combiner combines the first symbol streams from the correlators to provide a first even output symbol stream and further combines the second symbol streams from the correlators to provide a second odd output symbol stream.

In one design of this specific embodiment the multiplier in each correlator performs a dot product and a cross product between the decovered half symbols and the pilot to provide dot symbols and cross symbols respectively. The combiner can then be designed to selectively combine the dot and cross symbols for each Walsh symbol period of 2T to provide the demodulated symbols for the first and second output symbol streams.

Another specific embodiment of the invention provides a demodulator that also includes a number of correlators coupled to a combiner. Each correlator typically includes a despreader a decover element first and second summers and first and second complex multipliers. The despreader receives and despreads input samples with a particular despreading sequence to provide despread samples and the decover element decovers the despread samples to provide pairs of decovered half symbols. Again the decovering is performed with a Walsh symbol W having a length T that is half the length 2T of a Walsh symbol Wused to cover data symbols in the received signal and one pair of decovered half symbols is generated for each Walsh symbol period of 2T.

Each correlator typically further includes a switch coupled to the decover element. The switch provides decovered half symbols corresponding to the first half of the Walsh symbol period of 2T to a first output and decovered half symbols corresponding to the second half of the Walsh symbol period of 2T to a second output. Each summer then operatively couples to the outputs of the switch and combines each pair of decovered half symbols in a particular manner to provide a decovered symbol. Each multiplier then demodulates the decovered symbols from a respective summer with a respective pilot to provide a respective symbol stream.

The combiner receives the first and second symbol streams from the first and second multipliers respectively of each assigned correlator combines the first symbol streams from all assigned correlators to provide a first output symbol stream and further combines the second symbol streams from all assigned correlators to provide a second output symbol stream.

Another embodiment of the invention provides a method for processing a received signal in a wireless communications system. The received signal can include a pair of signals transmitted from a pair of antennas. In accordance with the method input samples are generated from the received signal. At least one signal instance of each transmitted signal is then processed to provide correlated symbols. The processing for each signal instance typically includes despreading the input samples with a particular despreading sequence associated with the signal instance being processed to provide despread samples decovering the despread samples to generate decovered partial symbols e.g. half symbols and demodulating the decovered partial symbols with pilot estimates to generate the correlated symbols for the signal instance. Again the decovering is performed with a Walsh symbol W having a length e.g. T that is a fraction of e.g. half the length 2T of a Walsh symbol Wused to cover the data in the received signal. The correlated symbols for all signal instances being processed are then selectively combined to provide demodulated symbols.

The invention further provides other demodulator architectures correlators demodulators receiver units and methods to process signals that have been processed and transmitted in a transmit diversity mode

At a receiver unit the transmitted signals are received by an antenna and provided to a receiver RCVR . Within receiver the received signal is amplified filtered downconverted quadrature demodulated and digitized to provide inphase I and quadrature Q samples. A demodulator DEMOD then receives despreads and decovers the samples to generate decovered symbols. In certain designs demodulator further demodulates the decovered symbols with pilot estimates to generate demodulated symbols. The demodulated symbols are then decoded and processed by a receive RX data processor to recover the transmitted data. The despreading decovering decoding and processing at receiver unit are performed complementary to the spreading covering coding and processing at transmitter unit . The recovered data is then provided to a data sink .

The signal processing described above supports transmissions of voice video packet data messaging and other types of communication in one direction. A bi directional communications system supports two way data transmission. However the signal processing for the other direction is not shown in for simplicity.

Communications system can be a code division multiple access CDMA system a time division multiple access TDMA communications system e.g. a GSM system a frequency division multiple access FDMA communications system or other multiple access communications system that supports voice and data communication between users over a terrestrial link.

The use of CDMA techniques in a multiple access communications system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS and U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM . Another specific CDMA system is disclosed in U.S. Pat. No. 6 574 211 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION issued Jun. 3 2003. These patents are assigned to the assignee of the present invention and incorporated herein by reference.

CDMA systems are typically designed to conform to one or more standards such as the TIA EIA IS 95 A Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System hereinafter referred to as the IS 95 A standard the TIA EIA IS 98 Recommended Minimum Standard for Dual Mode Wideband Spread Spectrum Cellular Mobile Station hereinafter referred to as the IS 98 standard the standard offered by a consortium named 3rd Generation Partnership Project 3GPP and embodied in a set of documents including Document Nos. 3G TS 25.211 3G TS 25.212 3G TS 25.213 and 3G TS 25.214 hereinafter referred to as the W CDMA standard and the TR 45.5 Physical Layer Standard for cdma2000 Spread Spectrum Systems hereinafter referred to as the CDMA 2000 standard . New CDMA standards are continually proposed and adopted for use. These CDMA standards are incorporated herein by reference.

In the non transmit diversity non TD mode of the CDMA 2000 standard complex data symbols are transmitted serially with each data symbol having a signaling period of T. In the STS mode two complex data symbols are transmitted in parallel over two antennas with each data symbol having a signaling period of 2T. As defined by the CDMA 2000 standard within each modulator one of the complex symbol streams even or odd is covered with a Walsh symbol Whaving a length of 2T and the other complex symbol stream odd or even is covered with a complementary Walsh symbol having a length of 2T.

Within modulator the even and odd complex symbol streams Yand Y are provided to symbol repeaters and respectively. In the STS mode each symbol repeater repeats each received data symbol once to double the signaling period from T to 2T. The symbol streams from symbol repeaters and are then provided to cover elements and respectively which cover the data symbols with a channelization code associated with the physical channel used for the data transmission. In the STS mode the channelization code for cover element is the Walsh symbol Whaving a length of 2T and the channelization code for cover element is the complementary Walsh symbol having the same length of 2T. Each cover element covers e.g. multiplies each received data symbol with the Walsh symbol Wor in a manner known in the art.

In the STS mode the complex symbols from cover element are provided to a complex conjugator that conjugates each received symbol. The conjugated symbols from complex conjugator are then provided to a summer and subtracted from the symbols from cover element to provide complex covered symbols. Each complex covered symbol thus includes a pair of data symbols that have been covered with the Walsh symbols Wand . The signal processing in the STS mode provides diversity in the transmitted signals which can result in improved performance.

In the embodiment shown in the complex covered symbols from summer are provided to a phase rotator . In an embodiment phase rotator provides a phase rotation of the received complex symbols e.g. in 90 increments when enabled by a control signal ROTATE. For example if the received complex symbols are expressed as I jQ phase rotator can provide 90 phase rotation of the complex symbols which can then be expressed as Q jI. The phase rotation allows modulator to account i.e. compensate for phase shifts in the modulated signal due to switching or adjustments in the subsequent signal conditioning circuitry within transmitter .

A complex multiplier then receives the phase rotated complex symbol stream from phase rotator and a complex spreading sequence PN spreads the complex symbol stream with the complex spreading sequence and provides a complex output symbol stream S. The complex spreading sequence PN is generated in a manner defined by the particular CDMA system or standard being implemented. For the CDMA 2000 system the complex spreading sequence PN is generated by multiplying the short PN sequences IPN and QPN assigned to the transmitting base station with the long PN sequence assigned to the receiving user terminal for which the data transmission is destined.

Within complex multiplier the inphase data symbols Dare provided to multipliers and and the quadrature data symbols Dare provided to multipliers and . Each of the multipliers and also receives the inphase spreading sequence PN and each of multipliers and also receives the quadrature spreading sequence PN. Each multiplier multiplies the received data symbols with the received spreading sequence and provides respective spread symbols. A summer receives and subtracts the output from multiplier from the output from multiplier to provide the inphase output symbols S. A summer receives and combines the outputs from multipliers and to provide the quadrature output symbols S.

Referring back to modulator is configured similar to modulator with three differences. First in modulator the complementary Walsh symbol is used to cover the even complex symbol stream Yand the Walsh symbol Wis used to cover the odd complex symbol stream Y. Second complex conjugator couples to the output of cover element i.e. the processing path for the even complex symbol stream Y . And third the signs for the inputs of summer are different than the signs for the inputs of summer in modulator

The processing performed by modulator can be described as follows. Initially the even and odd complex symbol streams can be expressed as and Eq 1 Eq 2 As defined by the CDMA 2000 standard the Walsh symbols Wand are used to cover the even and odd complex symbol streams. Each of these Walsh symbols has a length of 2T and can be generated from a Walsh symbol W of length T as follows W WW and W Eq 3 where W 

If only the data symbols and the covering are considered i.e. ignoring the PN spreading phase rotation transmit gain pulse shaping and other signal processing the complex output symbol stream for antenna can be expressed as Eq 4 where the asterisk denotes a complex conjugate operation. Similarly the complex output symbol stream for antenna can be expressed as Eq 5 

The complex output symbol streams Sand S are subsequently provided to two respective processing paths in transmitter . Each processing path filters the inphase and quadrature symbol streams Sand S of the complex symbol stream S modulates the filtered Sstream with an inphase carrier signal cos t modulates the filtered Sstream with a quadrature carrier signal sin t sums the two modulated components and further conditions the resultant signal to generate a modulated signal. In the STS mode two modulated signals are generated based on two complex symbol streams Sand S and are transmitted from two antennas.

Typically distinct i.e. orthogonal pilots are sent on respective transmit antennas. For example for the CDMA 2000 system an unmodulated pilot using Walsh code 0 64 is sent on the common antenna and a modulated diversity pilot using Walsh code 16 128 is sent on the diversity antenna. The pilots are selected to be orthogonal so that the amplitude and phase of one or both signals transmitted from the respective antennas can be recovered.

The downlink signal processing for the CDMA 2000 standard is described in further detail in the CDMA 2000 standard and by M. Buehrer et al. in a paper entitled Proposed Text for Space Time Spreading STS v0.3 dated 1999 and incorporated herein by reference. This paper was adopted into the CDMA 2000 standard by the 3GPP2 standard body.

Initially the received signal is conditioned e.g. amplified filtered downconverted quadrature demodulated and so on and digitized to provide a complex sample stream comprised of inphase samples Iand quadrature samples Q. The complex sample stream is provided to each correlator assigned to process the received signal. Each correlator receives tracks and processes a respective instance i.e. a particular multipath of the signal from one of the transmit antennas.

As shown in a correlator is assigned to receive and process the signal from the first transmit antenna and a correlator is assigned to receive and process the signal from the second transmit antenna. Within correlator the complex received samples i.e. I jQ are provided to a complex multiplier that also receives a complex despreading sequence PN i.e. PN PN jPN having a particular time offset assigned to correlator and matching the time delay of the signal instance being processed. Complex multiplier despreads the complex samples with the PNsequence and provides the complex despread samples i.e. I jQ to a decover element . Decover element decovers the complex received samples with the Walsh symbol Wand provides complex decovered symbols to each of the complex multipliers and . The decovering is achieved by multiplying the inphase and quadrature samples with the Walsh symbol Wand accumulating the results over the length 2T of the Walsh symbol Wto provide inphase and quadrature decovered symbols.

Complex multiplier then demodulates the complex decovered symbols with a conjugated complex pilot estimated from a pilot transmitted from a first transmit antenna recovered by correlator . Similarly complex multiplier demodulates the complex decovered symbols with a conjugated complex pilot estimated from a pilot transmitted from a second transmit antenna recovered by correlator . The output from complex multiplier comprises the even complex symbol stream Cthat is provided to an accumulator within a combiner . Similarly the output from complex multiplier comprises the odd complex symbol stream Cthat is provided to an accumulator within combiner .

Within correlator the complex received samples i.e. I jQ are despread by a complex multiplier with a complex despreading sequence PN i.e. PN PN jPN having a particular time offset assigned to correlator . The complex despread samples i.e. I jQ are decovered by decover element with the complementary Walsh symbol and conjugated by a complex conjugator . The conjugated symbols are then demodulated with the complex pilot by a complex multiplier and further demodulated with the negative complex pilot by a complex multiplier . The output from complex multiplier comprises the even complex symbol stream Cthat is provided to accumulator and the output from complex multiplier comprises the odd complex symbol stream Cthat is provided to accumulator

Accumulator combines the even complex symbol streams Cand Cfrom correlators and and provides the even output symbol stream C i.e. C C jC . Similarly accumulator combines the odd complex symbol streams Cand C from correlators and and provides the odd output symbol stream C C C jC . The symbol streams C C C and Care estimates of the symbol streams Y Y Y and Y respectively generated within modulator in and expressed in equations 1 and 2 .

Demodulator architecture is described in further detail by A. Kogiantis et al. in a paper entitled Downlink Improvement through Space Time Spreading dated Aug. 5 1999 and incorporated herein by reference. This paper was submitted to the 3GPP2 standard body for adoption into the CDMA 2000 standard.

Demodulator architecture shown in has several major disadvantages. First sharing of information between correlators is required to perform the pilot demodulation. Each correlator performs two complex multiplications to achieve the pilot demodulation. The first complex multiplication is performed between the decovered symbols and the complex pilot estimated by that correlator. The second complex multiplication is performed between the decovered symbols and the complex pilot estimated by the other correlator. Demodulator architecture can be modified to share decovered symbols instead of pilot estimates. However in both cases the need to share information between correlators is highly undesirable in many circuit designs. Additional circuitry would likely be required to coordinate the sharing of information which would lead to increased complexity and costs.

Second if more than one multipath of any of the transmitted signals is processed it is necessary to pair up correlators with the same path delay to perform the pilot demodulation. This requirement imposes constraints on the use of the correlators and requires coordination between the correlators.

Consequently as a result of these disadvantages system performance may be compromised by the use of demodulator architecture .

Within correlator the complex received samples i.e. I jQ are despread by a complex multiplier with a complex despreading sequence PNhaving a particular time offset assigned to correlator . The complex despread samples i.e. I jQ are then decovered by decover element with a Walsh symbol W having a length of T to provide decovered half symbols . The decovering is achieved by multiplying the inphase and quadrature samples by the Walsh symbol W and accumulating the resultant samples over the length T of the Walsh symbol W.

Referring back to in the STS mode each data symbol is covered by the Walsh symbol Wor having a length of 2T which corresponds to one STS symbol period. Also referring to equation 3 the Walsh symbols Wand are generated by combining the Walsh symbol W and the complementary Walsh symbol . The Walsh symbols W and each has a length of T which is half the length of the Walsh symbols Wand Each decovered half symbol from decover element thus corresponds to only half of the STS symbol period.

The complex decovered half symbols from decover element are provided to a switch . Switch provides the decovered half symbols corresponding to the first half of the STS symbol period switch in position A to a delay element and the decovered half symbols corresponding to the second half of the STS symbol period switch in position B to summers and . Switch can be implemented with a demultiplexer registers latches or some other element. Delay element delays the received half symbols and provides the delayed half symbols to summers and . The delay is selected such that the decovered half symbols for each STS symbol period are aligned in time at the inputs of each of summers and

For each STS symbol period of 2T i.e. the length of the Walsh symbols Wand and after the decovered half symbol corresponding to the second half of the STS symbol period has been received summer sums the two received half symbols and provides the decovered symbol to a complex multiplier . Similarly for each STS symbol period summer subtracts the half symbol received from switch from the half symbol received from delay element and provides the decovered symbol to a complex conjugator . Complex conjugator conjugates the received symbols and provides the conjugated symbols to a complex multiplier

Complex multiplier demodulates the complex decovered symbols from summer with a conjugated complex pilot recovered by correlator . Similarly complex multiplier demodulates the complex decovered symbols from complex conjugator with the negated complex pilot . The output from complex multiplier comprises the even complex symbol stream Cthat is provided to an accumulator within a combiner and the output from complex multiplier comprises the odd complex symbol stream Cthat is provided to an accumulator within combiner .

Correlator performs similar processing as correlator . Within correlator the complex received samples i.e. I jQ are despread by a complex multiplier with a complex despreading sequence PNhaving a particular time offset assigned to correlator . The complex despread samples are then decovered by decover element with the Walsh symbol W to provide decovered half symbols.

The complex decovered half symbols from decover element are provided to a switch which provides decovered half symbols corresponding to the first half of the STS symbol period switch in position A to a delay element and decovered half symbols corresponding to the second half of the STS symbol period switch in position B to summers and . Delay element delays the received half symbols and provides the delayed half symbols to summers and . Again the delay is selected such that the decovered half symbols for each STS symbol period are time aligned at the inputs of each of summers and . For each STS symbol period summer subtracts the half symbol received from switch from the half symbol received from delay element and provides the decovered symbol to a complex conjugator which conjugates the received symbol and provides the conjugated symbol to a complex multiplier . For each STS symbol period summer sums the two received half symbols and provides the decovered symbol to a complex multiplier

Complex multiplier demodulates the complex decovered symbols from complex conjugator with a complex pilot recovered by correlator . Similarly complex multiplier demodulates the complex decovered symbols from summer with the conjugated complex pilot . The output from complex multiplier comprises the even complex symbol stream Cthat is provided to accumulator and the output from complex multiplier comprises the odd complex symbol stream Cthat is provided to accumulator

Accumulator combines the even complex symbol streams Cand C from correlators and and provides the even output symbol stream C i.e. C C jC . Similarly accumulator combines the odd complex symbol streams Cand Cfrom correlators and and provides the odd output symbol stream C i.e. C C jC . The symbol streams C C C and Care estimates of the symbol streams Y Y Y and Y respectively generated within modulator in .

The processing performed by demodulator architecture can be analyzed by first characterizing the transmitted symbol streams. The transmitted symbol streams Sand S in the STS mode are expressed above in equations 4 and 5 . The Walsh symbols Wand of length 2T can each be decomposed into a combination of Walsh symbols W and each of length T. The transmitted symbols can be decomposed into a combination of half symbols transmitted over the first time interval Tof the STS symbol period and half symbols transmitted over the second time interval Tof the STS symbol period.

Similarly the transmitted symbols for the second antenna in equation 5 can be expressed as S S S and Eq 7 

The signals from the first and second transmit antennas are received with random amplitudes and phases given by the complex values hand h respectively. The values hand hcharacterize the path loss and multipath fading experienced by the transmitted signals. If the noise is ignored the composite received signal can be expressed as R Sh Sh R R and Eq 8 where Rand Rrepresent the received symbol waveforms for the first and second time intervals Tand T respectively of the STS symbol period. The even complex symbol streams Cand Cfrom correlators and respectively can be computed as 

The even complex symbol stream Cfrom combiner and the odd complex symbol stream Cfrom combiner can be expressed as 

Demodulator architecture can recover the transmitted symbols if one transmit antenna should fail to operate or if the signal transmitted from one of the antennas experiences a deep fade. As an example if the second transmit antenna should fail the received symbol stream can be expressed as R Sh R Sh and R Sh Eq 17 

At the receiver unit one correlator can be used to receive and process the transmitted signal. The even and odd complex symbol streams Cand Cfrom the assigned correlator can be expressed as 

Demodulator architecture shown in provides a number of advantages over demodulator architecture shown in . These advantages can result in a simplified design reduced costs improved performance some other advantages or a combination thereof. Some of these advantages are described below.

First demodulator architecture does not require the sharing of pilot estimates and data symbols between correlators. Each correlator receives processes and demodulates the received sample stream with its own pilot estimate. The autonomous design for the correlators eliminates the need to transfer information between correlators and simplifies the design of the receiver unit that uses demodulator architecture .

Second demodulator architecture does not require correlators to be paired up. This allows for flexibility in assigning correlators to the strongest signal instances which can lead to improved performance.

Third demodulator architecture does not require synchronization of the pilots of paired correlators that have unequal path delays. This feature results from the ability of each correlator to operate independently based on the received samples and its own pilot estimate. In contrast since the correlators are operated in pairs in demodulator architecture the pilots needs to be properly aligned in time to account for any delays between the signal instances being processed by the pair of correlators.

Fourth demodulator architecture allows for reception of the transmitted symbols if one of the transmit antennas should fail to operate or is in a deep fade. In contrast demodulator architecture can only recover half of the transmitted symbol should one transmit antenna fail. Demodulator architecture can be used to provide a more robust and reliable communication.

Within correlator the complex received samples are despread by a complex multiplier with a despreading sequence PNand decovered by a decover element with the Walsh symbol W to provide decovered half symbols. The decovered half symbols are then demodulated with a conjugated complex pilot recovered by correlator to provide demodulated half symbols which are then provided to a switch . In the first half of the STS symbol period switch is in position A and the demodulated half symbol is provided to a signal path and the inverted demodulated half symbol is provided to a signal path . In the second half of the STS symbol period switch is in position B and the demodulated half symbol is provided to signal paths and . Switch can be implemented with a demultiplexer or some other element.

The demodulated half symbols on signal path are provided to an accumulator within a combiner . The demodulated half symbols on signal path are provided to a complex conjugator which conjugates the received half symbols and provides the conjugated half symbols to an accumulator within combiner .

Correlator processes the complex received samples in similar manner as correlator . Specifically correlator despreads the complex received samples with a despreading sequence PN decovers the despread samples with the Walsh symbol W to provide decovered half symbols and demodulates the decovered half symbols with a conjugated complex pilot recovered by correlator to provide demodulated half symbols. The demodulated half symbols corresponding to the first half of the STS symbol period are provided to accumulator and also conjugated and provided to accumulator . Similarly the demodulated half symbols corresponding to the second half of the STS symbol period are provided to accumulator and also inverted and conjugated and provided to accumulator

For each STS symbol period accumulator combines the four received demodulated half symbols and provides an even output symbol and accumulator combines the four received demodulated half symbols to provide an odd output symbol.

Demodulator architecture generates equivalent results as demodulator architecture in . However by performing the pilot demodulation after the decovering only one complex multiplier is required. Complex multiplier performs one complex multiply e.g. one dot product and one cross product for each half of the STS symbol period i.e. each period of T . In contrast each of multipliers in demodulator architecture performs one complex multiply for each STS symbol period of 2T.

Also the summers i.e. summers used to combine the decovered half symbols for each STS symbol period are not needed in demodulator architecture since this function is performed by accumulators and . Each accumulator performs twice the number of read accumulate write operations for each STS symbol period as accumulator in demodulator architecture .

Within each correlator the complex received samples are despread by a complex multiplier with a despreading sequence PN having a particular time offset assigned to that correlator decovered by a decover element with the Walsh symbol W to provide decovered half symbols and demodulated by a complex multiplier with a conjugated complex pilot recovered by that correlator to provide demodulated half symbols.

Within correlator a switch provides demodulated half symbols corresponding to the first half of the STS symbol period to an accumulator within a combiner and further provides demodulated half symbols corresponding to the second half of the STS symbol period to an accumulator within combiner . Similarly within correlator a switch provides demodulated half symbols corresponding to the first half of the STS symbol period to an accumulator and demodulated half symbols corresponding to the second half of the STS symbol period to an accumulator . Each accumulator selectively combines the received half symbols to provide the output symbols.

In complex multipliers and are each configured to perform two complex multiplies for each STS symbol period. The complex multiply from correlator n for time interval Tx of the STS symbol period can be expressed as 

where X jXis the complex decovered half symbol to be demodulated P jPis the conjugated pilot estimate e.g. P jP and Cand Care the dot and cross products respectively for the complex multiply.

As shown in equation 20 each complex multiply can be performed with a dot product and a cross product. The four complex multiplies performed by multipliers and for each STS symbol period can be achieved with four dot products and four cross products which yield four dot symbols and four cross symbols respectively. The dot and cross symbols are also referred to as intermediate symbols. In an embodiment the eight intermediate symbols for each STS symbol period can be stored to eight memory locations and later combined when the symbols are retrieved from memory.

The symbol combination performed by accumulators can be computed as follows. In correlator the dot and cross products generate the intermediate symbols Cand C respectively in the first half of the STS symbol period and the intermediate symbols Cand C respectively in the second half of the STS symbol period. Similarly in correlator the dot and cross products generate the intermediate symbols Cand C respectively in the first half of the STS symbol period and the intermediate symbols Cand C respectively in the second half of the STS symbol period. The even complex output symbols Ccan be expressed as . and Eq 21 

In equation 23 the quantity within the parenthesis can be computed once for the dot products and once for the cross products for each STS symbol period. Two such combined symbols can be computed for each STS symbol period. For each output symbol e.g. C a corresponding intermediate symbol e.g. C is scaled by a factor of two e.g. shifted left by one bit and subtracted from a corresponding combined symbol e.g. C C C C .

The present invention has been described with designs in which the partial processing is performed on half symbols. However partial processing on other fractions of the symbol period may also be performed and are within the scope of the present invention. For example the partial processing may be performed on quarter symbol period eighth symbol period or some other fraction.

In the embodiments shown in and two correlators are used to process the two signals transmitted from two antennas. Each of these correlators can be operated to track the timing corresponding to the signal instances being processed.

The signals from the two transmit antennas may also be processed based on the same timing e.g. the timing of one of the signal instances being processed or the average timing of the two signal instances or others . In this implementation the same symbols are used for both transmitted signals and the processing can be performed by a single modified correlator. The modified correlator can be designed to perform despreading and decovering with a particular time offset and two pilot demodulation. Common sampling decimation despreading and decovering are performed for both transmitted signals. The use of the same timing may result in higher cancellation of cross talk which can provide improved performance.

The demodulator architectures of the invention can be employed in various receiver architectures such as for example a rake receiver. The design and operation of a rake receiver for a CDMA system is described in further detail in U.S. Pat. No. 5 764 687 entitled Mobile demodulator architecture for a spread spectrum multiple access communication system and U.S. Pat. No. 5 490 165 entitled Demodulation element assignment in a system capable of receiving multiple signals both assigned to the assignee of the present invention and incorporated herein by reference.

The rake receiver typically includes many correlators i.e. fingers that are assigned to process strong instances of the received signal. The demodulator architectures of the invention allow for easy combining of symbols or half symbols from multiple assigned correlators. For example referring back to the even complex symbols from each assigned correlator are provided to accumulator and the odd complex symbols from each assigned correlator are provided to accumulator . For each STS symbol period each accumulator combines all received symbols and provides a complex output symbol. Generally the rake receiver using the demodulator architectures of the invention can be designed to include as many correlators as desired. Each accumulator is then designed to accumulate symbols from all assigned correlators.

The processing to recover the transmitted pilot is known in the art and not described in detail herein. The pilot processing is dependent in the particular CDMA system or standard being implemented. For example different pilot processing is typically performed depending on whether the pilot is added to i.e. superimposed over the data or time division multiplexed with the data. An example of the pilot processing is described in the aforementioned U.S. Pat. Nos. 5 764 687 and 5 490 165.

For clarity the demodulator architectures demodulators and receiver units of the invention have been described specifically for the STS mode defined by the CDMA 2000 standard. The invention can also be used in other communications systems that employ the same similar or different transmit diversity modes. The demodulator architecture of the invention can be used to provide the basic functionality e.g. decovering pilot demodulation and so on . Modification of the basic functionality and or additional processing e.g. combining reordering of the symbols and so on may be implemented to achieve the desired results.

For example the W CDMA standard provides a space time block coding transmit antenna diversity STTD mode in which symbols are transmitted redundantly over two antennas. In the STTD mode data symbols are redundantly sent to two modulators but the symbols provided to the second modulator are reordered with respect to the symbols provided to the first modulator in accordance with a particular ordering scheme. To support the STTD mode demodulator architectures of the invention can be modified to temporarily store the demodulated symbols from the assigned correlators reorder the symbols in the inverse manner and combine the symbols to recover the transmitted symbols.

The demodulator architectures described above can be advantageously used in a user terminal e.g. a mobile unit a telephone and so on of a communications system and may also be used at a base station. The signal processing for the downlink and uplink may be different and is typically dependent on the particular CDMA standard or system being implemented. Thus the demodulator architectures are typically adopted especially for the particular application for which it is used.

Some or all of the elements described above for the demodulator architectures of the invention e.g. the complex multipliers decover elements switches delay elements summers combiner and so on can be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs controllers micro controllers microprocessors programmable logic devices PLDs other electronic units designed to perform the functions described herein or a combination thereof. Also some or all of the elements described above can be implemented using software or firmware executed on a processor.

As an example a demodulator can be designed in which the despreader and decoverer elements for each correlator are implemented in hardware and the pilot demodulation and symbol accumulation for all correlators are performed by a DSP in a time division multiplexed manner. As another example one correlator and combiner can be implemented and used to process samples corresponding to various signal instances in a time division multiplexed manner. Numerous other implementations can be contemplated and are within the scope of the present invention.

The foregoing description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

