---

title: Sampling rate conversion system
abstract: A sampling rate conversion system reduces the signal processing burdens carried by cellular phones, headsets, and other electronic devices. Because the system consumes fewer resources to convert between signal sampling rates, the system may significantly reduce processing time and resource requirements in the device. As a result, the device may instead devote resources to performing other useful tasks, such as interacting with the user through a graphical user interface and performing selected processing tasks.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07554465&OS=07554465&RS=07554465
owner: Harman Becker Automotive Systems GmbH
number: 07554465
owner_city: Karlsbad
owner_country: DE
publication_date: 20070914
---
This application is a continuation of U.S. patent application Ser. No. 11 657 408 filed Jan. 24 2007 which claims the benefit of priority from European Patent Application No. 06001452.9 filed Jan. 24 2006 both of which are incorporated by reference herein.

Electronic devices that communicate with one another process signals at different sampling rates. To use a signal a device may need to convert a signal having one sampling rate into a signal having a different sampling rate. For instance a Bluetooth headset for a cellular phone may up sample the signal obtained from the cellular phone before the headset further processes the signal. In the context of telephony signals are often band limited to between less than 300 Hz to 3.4 kHz thereby severely limiting speech quality. Accordingly pre processing functions such as increasing the sampling rate using interpolation may be performed prior to an analysis done on the band limited signal in order to generate an extended bandwidth signal that supports enhanced speech quality.

Sampling rate conversion techniques specifically up sampling techniques may use interpolation such as Lagrange interpolation and cubic splines polynomial fitting. Other systems may convert between sampling rates by highly over sampling a signal and choosing the closest artificially generated time sample. In these systems the higher the over sampling rate the lower the corresponding error is Some systems may use a quasi continuous interpolation of individual samples x n of a continuous absolutely integrable signal x t employing the sinc function to generate a signal value at the desired sampling time T as follows 

These systems and methods may require a large amount of resources. Some systems may need a long computing time to perform calculations. Other systems may require a large amount of memory to store sample information. Thus sampling rate conversion remains a significant problem in modem signal processing systems and in modem devices that often have severely limited processing capability memory resources and power reserves.

A sampling rate conversion system decreases signal processing burden on cellular phones headsets and other electronic devices. Such devices may have limited processing memory and power resources. The conversion system in the device may consume significantly less computing time and memory resources to convert between sampling rates. Relieved of some of the signal processing burden the device may instead execute other useful tasks and operations.

The sampling rate conversion system converts an input signal sampling rate to a different output signal sampling rate. The system may produce the output signal sampling rate by processing the input signal using up sampling filtering time delaying weighting and adding logic. The system may down sample an intermediate signal to produce an output signal. The filtering may use a finite impulse response filter and convolution. A controller may choose appropriate weight factors and down sample factors in order to create a correspondence between sampling instants of the input signal and sampling instants of the output signal at a chosen output signal sampling rate. The system may also convert time dependent sampling rates of the output and or input signals by using buffers.

Other systems methods features and advantages will be or will become apparent to one with skill in the art upon examination of the following figures and detailed description. It is intended that all such additional systems methods features and advantages be included within this description be within the scope of the invention and be protected by the following claims.

A sampling rate conversion system adapts the sampling rate of an input signal into a different sampling rate for an output signal. The input signal may be a digital signal sampled from an analog signal at an input signal sampling rate. The system may generate an output signal from the input signal using logic that implements up sampling filtering time delaying weighting adding and other operations. The system may also filter the signal during processing using a low pass filter that may be a finite impulse response filter. The system may also down sample an intermediate signal such as the signal obtained by the adder to produce the output signal. The system may generate time dependent sampling rates for the output signal and or the input signal by using buffers or other logic. The sampling rate conversion system may use a relatively small amount of computing resources and memory thereby freeing the device that processes the signal to devote more resources to other useful operations such as interacting with a user through a graphical user interface executing user commands and other operations.

The up sampler may up sample the input signal x n to a sampling rate f fby a factor of L where L is an integer e.g. f L f. The up sampler may generate an up sampled signal x n by inserting L 1 nulls between the samples of the original signal e.g. x n x n L if mod n L 0 and x n 0 otherwise. The system may employ other up sampling techniques however. The up sampler may be coupled to the first convolution logic and the time delay element .

The first convolution logic may convolve the up sampled signal x n with an impulse response of a low pass filter with coefficients hto generate a filtered non delayed up sampled signal y n 

Because x n is generated by inserting L 1 nulls in the up sampler the filtered non delayed up sampled signal y n is given by 

The system may use X n only for non vanishing values. As a result the filtered non delayed up sampled signal y n may be expressed as 

The time delay element may delay the up sampled signal x n by one sampling instant to generate a time delayed signal x n 1 . The time delay element may be coupled to the second convolution logic . The second convolution logic may convolve the time delayed up sampled signal x n 1 with an impulse response of a low pass filter with coefficients hdelayed by one sampling instant to generate a filtered delayed up sampled signal y n 1 . To prevent aliasing a finite impulse response FIR filter may be used for the low pass filter in the first convolution logic and the second convolution logic .

The output of the first convolution logic and the output of the second convolution logic may be coupled to the multipliers and respectively. The multipliers and may multiply the filtered up sampled signals y n and y n 1 by weight factors such as a n and 1 a n . The multiplier and may be coupled to the adder which may add the weighted signals to generate an output signal v n .

The controller may be coupled to the multipliers and and the down sampler . The controller may provide time dependent weight factors such as a n and 1 a n or about 1 a n to the multipliers and . The output signal v n has an output signal sampling rate different than the input signal sampling rate of the input signal x n . The output signal v n is given by the weighted sum of y n and y n 1 1 1 . The weighting and convolution logic may implement where the superscript T indicates the transposition operation the signal vector is 

The sampling rate fof the output signal v n may be higher than the output sampling rate fthat v n exhibits. Thus v n is optionally down sampled in the down sampler . The controller may select the down sampling factor R n for the down sampler . The controller may select the value of a n and the down sampling factor R n such that each sampling instant of the original signal corresponds to a sampling instant in the output signal. In other words no samples of the input signal are lost. The controller may choose the parameters as follows 

Thus the output signal v n with a resultant output signal sampling rate higher than the input signal sampling rate of the input signal x n but lower than the output signal sampling rate of v n may be obtained as

The system monitors the write read pointers associated with the buffer monitoring logic and . The system may thereby determine when either of the buffers and are empty or have overflowed. The system may correct the output signal sampling rate to avoid an empty or overflow state of one of the buffers and to improve processing of the input signal. The output signal sampling rate fmay be expressed as the sum of a constant term and a time dependent correction term f n f f n where

The system may perform the processing noted above in reference to using the time dependent output signal sampling rate including the correction term f n . The system thereby obtains the output signal characterized by the selected time dependent output signal sampling rate. The output signal v n of the sampling rate conversion logic may be expressed as 

Similarly signal processing may be performed for a time dependent input sampling rate where the input signal x n is sampled from a continuous analog signal at temporally varying rates.

The system may also weight the filtered signals by selected weight factors Act . The system may add the weighted signals to generate a discrete output signal e.g. an intermediate output signal v n with a different output signal sampling rate than the input signal sampling rate present in the input signal Act . In addition the system may also down sample the intermediate output signal to produce a resultant discrete output signal e.g. v n with a resultant signal sampling rate different from either the input signal sampling rate of the input signal Act and the output signal sampling rate.

The system may also weight the filtered signals. In particular the system may weight the filtered up sampled signal Act and weight the filtered delayed up sampled signal Act with different weights e.g. a m and 1 a m . To generate a discrete output signal e.g. an intermediate output signal v n with a different output signal sampling rate than the input signal sampling rate the system may add the weighted signals Act . The system may also down sample the intermediate output signal to produce a discrete resultant output signal e.g. v n with a resultant output signal sampling rate different from either input signal sampling rate of the input signal Act the intermediate signal sampling rate or both.

Buffer monitoring logic may monitor the ring buffer write read pointers to determine if the ring buffers are empty or have overflowed Act . If the system detects that a buffer is empty or has overflowed or has a capacity that is above or below predetermined upper or lower thresholds the system may decide to change the output signal sampling rate Act to avoid or to try to correct these buffer conditions. To that end the system may choose a new time dependent output signal sampling rate Act . Alternatively the system may change the selected output signal sampling rate at any time in response to external input newly arising processing considerations e.g. processing done by other tasks in the device that may require different sampling rates and other considerations.

The logic described above may be encoded in a computer readable medium such as a CD ROM disk flash memory RAM or ROM an electromagnetic signal or other machine readable medium as instructions for execution by a processor. Accordingly the processor may execute the instructions to perform sampling rate adaptation. Alternatively or additionally the logic may be implemented as analog or digital logic using hardware such as one or more integrated circuits or one or more processors executing sampling rate adaptation instructions or in software in an application programming interface API or in a Dynamic Link Library DLL as functions available in a shared memory or defined as local or remote procedure calls or as a combination of hardware and software.

The logic may be encoded on a computer readable medium machine readable medium propagated signal medium and or signal bearing medium. The media may comprise any device that contains stores communicates propagates or transports software for use by or in connection with an instruction executable system apparatus or device. The machine readable medium may selectively be but is not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus device or propagation medium. A non exhaustive list of examples of a machine readable medium includes an electrical connection having one or more wires a portable magnetic or optical disk a volatile memory such as a Random Access Memory RAM a Read Only Memory ROM optical memory an Erasable Programmable Read Only Memory i.e. EPROM or Flash memory or an optical fiber. A machine readable medium may also include a tangible medium upon which executable instructions are printed as the logic may be electronically stored as an image or in another format e.g. through an optical scan then compiled and or interpreted or otherwise processed. The processed medium may then be stored in a computer and or machine memory.

The systems and may include additional or different logic and may be implemented in many different ways. A controller may be implemented as a microprocessor microcontroller application specific integrated circuit ASIC discrete logic or a combination of other types of circuits or logic. Similarly memories may be DRAM SRAM Flash or other types of memory. Parameters e.g. conditions and thresholds and other data structures may be separately stored and managed may be incorporated into a single memory or database or may be logically and physically organized in many different ways. Programs and instruction sets may be parts of a single program separate programs or distributed across several memories and processors. The systems and may be included in a wide variety of electronic devices including a cellular phone a headset a hands free set a speakerphone communication interface or an infotainment system.

While various embodiments of the invention have been described it will be apparent to those of ordinary skill in the art that many more embodiments and implementations are possible within the scope of the invention. Accordingly the invention is not to be restricted except in light of the attached claims and their equivalents.

