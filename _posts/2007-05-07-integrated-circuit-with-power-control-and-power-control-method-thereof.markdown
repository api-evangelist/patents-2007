---

title: Integrated circuit with power control and power control method thereof
abstract: Power management methods for integrated circuits are disclosed. A system core block is disposed in a chip and comprises a central processing unit. A power control block is disposed in the chip and comprises a power management mechanism coupled to a power supply to control the supply of power to the system core block. The power management mechanism outputs a power down signal and stops supply of power to the system core block according to a power saving mode setting signal from the central processor unit and starts the supply of power to the system core block according to a power saving mode release signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07831847&OS=07831847&RS=07831847
owner: Mediatek Inc.
number: 07831847
owner_city: Hsin-Chu
owner_country: TW
publication_date: 20070507
---
The invention relates to integrated circuits having a power control block and a power control method thereof.

In many systems utilizing processors particularly microprocessors minimal system power consumption is desirable. Methods to achieve this end typically seek to reduce power consumption in the controlling processor as well as any peripherals as the processor often consumes a significant portion of the total system power.

Conventional methods conserve system power by turning off peripherals that are not currently in use. Simply turning off peripherals however does not minimize power consumption of the processor as it typically continues to operate. Moreover power consumption continues to increase with the continual miniaturization of semiconductor integrated circuits and increases in operating frequency. In integrated circuits fabricated by deep sub micron process technologies in particular leakage has exceeded 30 or more of the total system power consumption.

Accordingly total power consumption can comprise dynamic power consumption affected by power voltage Vand operating frequency fand leakage power consumption affected by power voltage V.

US patent application publication NO. 2002 0078391 discloses a system that runs at a very low frequency clock rate in power saving mode compared to that in normal mode. Namely it utilizes frequency scaling to reduce power consumption. This system however is hindered by dynamic power consumption and leakage power consumption because the dynamic power consumption can only be partially reduced.

U.S. Pat. No. 6 803 784 discloses a microprocessor a clock of which stops in power saving mode. Namely the microprocessor utilizes a stopped clock to reduce power consumption. This microprocessor however suffers from leakage power consumption because only the dynamic power consumption can be reduced. Further leakage current increases with larger die size and deeper sub micron processes thus dynamic power consumption is increased.

U.S. Pat. No. 6 523 127 discloses an external microcontroller controlling the power supplied to every chip in the entire system to reduce power consumption. This method however requires an external microcontroller and still consumes power.

A detailed description is given in the following embodiments with reference to the accompanying drawings.

Integrated circuits are provided. An exemplary embodiment of an integrated circuit comprises a system core block disposed in a chip and a central processing unit CPU . The integrated circuit further comprises a power control block disposed in the chip and a power management mechanism coupled to a power supply to control the supply of power to the system core block.

Electronic systems comprising the disclosed integrated circuit are provided. An exemplary embodiment of an electronic system comprises a power supply powering the disclosed integrated circuit and a storage unit coupled to the integrated circuit storing programs executable by an operating system via CPU in the integrated circuit at system startup.

Power control methods for an integrated circuit are provided. In an exemplary embodiment of a power control method for an integrated circuit the integrated circuit in a chip is divided into a system core block and a power control block. The system core block is powered by a first voltage from a power supply and comprises a central processing unit CPU . A second voltage provided via power supply powers the power control block. A power management mechanism disposed in the power control block stops supply of the first voltage to the system core block according to a power saving mode signal from the CPU thus a power saving mode entered.

The following description is of the best contemplated mode of carrying out the invention. This description is made for the purpose of illustrating the general principles of the invention and should not be taken in a limiting sense. The scope of the invention is best determined by reference to the appended claims.

The integrated circuit comprises at least two blocks one is a system core block A and the other is a power control block B. For example the system core block A the power control block B as well as the flash memory and the DRAM can be integrated in the same chip as integrated circuit . The system core block A and the power control block B in the integrated circuit are powered via voltages VDD and VDD respectively and the voltages VDD and VDD can for example be 5 VSB and 5V respectively but are not limited thereto.

The system core block A is designed to provide multiple functions according to different commands and comprises a central processing unit a direct memory access DMA controller a system bus an on screen display OSD controller a flash controller a DRAM controller a A V output circuit a MPEG decoder a transport de multiplexer and a clock generator B.

The central processing unit is coupled to the direct memory access controller the OSD controller the flash controller the DRAM controller the A V output circuit the MPEG decoder and the transport de multiplexer through the system bus . The CPU performs computational routines and controls the entire system based on a program and can also be replaced by a microprocessing unit MPU a digital signal processor a microcontroller or multiple processing units but is not limited thereto. In this embodiment the system A can be operated in a normal mode a power saving sleep mode or the like. For example in power saving mode the CPU outputs control signals to the power control block B such that the power control block B stops the power supply from powering the system core block A.

The flash controller is used to couple the flash memory to the system bus . The flash memory stores programs executable by an operating system at system startup. The DRAM controller couples the DRAM to system bus . The DRAM stores application programs and intermediate processing data. The clock generator B generates clocks applicable to the system core block A based on the received oscillation signals.

The power control block B coupled between the system core block A and the power supply controls power supplied to the system core block A. For example the power control block B stops supply of power to system core block A according to control signals from the CPU to reduce power consumption. As shown the power control block B comprises control unit and AND gates AG AG. The control unit comprises a power control logic circuit a core reset counter a wake up detector an internal wake up circuit and a clock generator A.

The power control logic circuit provides a power down signal SPRDN and a control signal PWDN N according to the operating mode of the electronic system A and triggers the core reset counter to output a reset signal WKUPST for resetting the system core block A. For example the power control logic circuit sets the power down signal SPRDN to a high level from a low level upon receiving a power saving mode setting signal. The power down signal SPRDN is set to the low level from the high level upon receiving a power saving mode release signal from CPU via system bus .

Note that the power control logic circuit is a digital logic circuit composed of logic gates comprising AND gates OR gates NOT gates NAND gates NOR gates and or EX OR gates rather than a microprocessing unit MPU a digital signal processor a microcontroller a central processing unit or a microprocessor that can execute instructions or commands programmed in a program stored in a storage device such as flash memory or DRAM. In this embodiment the CPU in the system core block A outputs a control signal to the power control block B such that the power control logic circuit controls the power supply to stop supplying power to the system core block A. Namely the CPU is powered down via power control logic circuit in the same integrated circuit rather than by an external component outside of the integrated circuit .

The core reset counter is triggered via power control logic circuit to output the reset signal WKUPST such that the AND gate AG outputs a core reset signal COREST thereby resetting the system core block A when the power saving mode release signal has been detected. Further when the power supply is turned on the voltage VDD charges the capacitor C to generate a power reset signal PRST N such that the AND gate AG outputs the core reset signal COREST thereby resetting the system core block A.

The wake up detector and the internal wake up circuit generate the power saving mode release signal directing the power control logic circuit to set the power down signal SPRDN to the low level and the power supply restores the supply of power to the system core block A i.e. the power supply again provides the voltage VDD to the system core block A. For example the wake up detector generates the power saving mode release signal according to the external wake up signal EWKUPS from external components outside of integrated circuit . The internal wake up circuit generates the power saving mode release signal according to the internal wake up signals generated by internal components in the integrated circuit . Alternatively the CPU sets at least one predetermined condition for the wake up detector and the internal wake up circuit before enters power saving mode and the wake up detector or the internal wake up circuit generates the power saving mode release signal to the power control logic circuit when the predetermined condition set via CPU is satisfied thus power supply restores the supply of power to the system core block A.

The crystal oscillator generates oscillating signals to the clock generators A and B in the system core block A and the power control block B respectively. In this embodiment the crystal oscillator outputs the oscillation signals to the power control block B first and then the power control block B delivers the received oscillation signals to the clock generator A therein and the clock generator B in the system core block A. The clock generator A generates applicable clocks for the power control block B based on the received oscillating signal. The AND gates AG and AG prevent malfunctions caused by floating between the system bus and the control unit according to the control signal PRDN N.

The power supply selectively powers the integrated circuit according to the control of the power control logic circuit in the integrated circuit . For example the power supply outputs the voltages VDD and VDD when the power down signal SPRDN is at low level disabled and outputs the voltage VDD when the power down signal SPRDN is at high level enabled . Namely the power supply outputs the voltages VDD and VDD to power the system core block A and the power control block B respectively when turned on. When the power down signal SPRDN is disabled via power control logic circuit in the power saving mode the power supply stops outputting the voltage VDD to the system core block A and maintains to output the voltage VDD to the power control block B. Further because the power supply outputs the voltage VDD in power saving mode or normal mode the power reset signal PRST N can be maintained at high level until the power supply is turned off. In addition the voltages VDD and VDD from the power supply are regulated to applicable voltages via regulators and for powering the system core block A and the power control block B.

The AND gate AG is coupled to the watchdog timer and core reset counter . Core reset counter outputs the core reset signal COREST to reset the system core block A according to the power reset signal PRST N and the output of the watchdog timer and the core reset counter . For example the AND gate AG outputs the core reset signal COREST to reset the system core block A according to the power reset signal PRST N when the power supply is turned on. Alternatively the AND gate AG outputs the core reset signal COREST to reset the system core block A according to the output of the core reset counter when the system C enters normal mode from power saving mode. Namely the power control logic circuit triggers the core reset counter such that the AND gate AG outputs the core reset signal COREST when the system C enters normal mode from power saving mode.

The GPIO ports are coupled between the power control logic circuit and external components not shown coupled to the integrated circuit . The CPU in the system core block A can execute an external IC power control on the external components before system C enters power saving mode. For example the CPU turns off the external components by an external power control signal EPC before system C enters power saving mode. In addition the external component can be a keypad and the CPU sets a power key of the keypad before system C enters power saving mode. When the keypad not shown outputs a keypad wake up signal WKK to the power control logic circuit through the GPIO ports the power control logic circuit sets the power down signal SPRDN to the lower level to wake up the system.

The IR receiver is coupled between an external IR device not shown and the integrated circuit for IR transmission therebetween and outputs a wake up signal WKIR to trigger the power control logic circuit to disable the power down signal SPRDN. For example before system C enters power saving mode the CPU in the system core block A writes or sets specific IR codes to IR receiver . When the IR receiver finds that the received IR codes in the IR signal IRIN are the same as the codes set by the CPU IR receiver outputs a wake up signal WKIR to direct trigger the power control logic circuit to disable the power down signal SPRDN such that the system core block A is again powered by power supply .

The UART detector detects a specific communication signal URX on a communication port and outputs a wake up signal WKUA to trigger the power control logic circuit to disable the power down signal SPRDN upon detecting the specific communication signal URX. For example the communication port can be a RS232 port but is not limited thereto. When the UART detector detects a specific communication signal on the RS232 port the UART detector outputs wake up signal WKUA directing power control logic circuit to disable the power down signal SPRDN such that the system core block A is powered by power supply . Namely the electronic system C can be woken up by remote control through communication ports.

The synchronization signal detector detects a display control signal SD coupled to the integrated circuit and outputs a wake up signal WKSYNC to trigger the power control logic circuit to disable the power down signal SPRDN upon detecting the display control signal SD. For example the display control signal SD can be a TV signal horizontal synchronization signal Hsync or vertical synchronization signal Vsync for display devices or the like. Before system C enters power saving mode the CPU in the system core block A writes or sets specific conditions corresponding to the display control signal SD to the synchronization signal detector . When the synchronization signal detector detects the display control signal SD is set or defined by CPU the synchronization signal detector outputs the wake up signal WKSYNC to direct the power control logic circuit to disable the power down signal SPRDN such that the system core block A is again powered by power supply .

The servo ADC receives analog inputs VAIN such as analog voltages and converts the inputs to corresponding digital codes for output to the servo wake up unit . Before system C enters power saving mode the CPU in the system core block A writes specific codes to the servo wake up unit . When the servo wake up unit detects that a corresponding digital code from the servo ADC is the same as code written or set by CPU the servo wake up unit outputs a wake signal WKA directing power control logic circuit to disable the power down signal SPRDN such that the system core block A is again powered by power supply .

Namely the keypad wake up signal WKK received by GPIO ports the IR signal TRIN received by IR receiver the specific communication signal UORX received by UART detector the display control signal SD received by synchronization signal detector and the analog inputs VAIN received by servo ADC can serve as the external wake up signal EWKUPS.

The real time counter can serve as the internal wake up circuit shown in and can be reserved output a wake up signal WKI for triggering the power control logic circuit to disable the power down signal SPRDN. For example before system C enters the power saving mode the CPU in the system core block A can set a time reservation for the real time counter . When the real time counter detects that the time set by CPU is reckoned counted the real time counter outputs the wake up signal WKI to directing power control logic circuit to disable the power down signal SPRDN such that the system core block A is again powered by power supply . Namely electronic system C can be woken up by an internal circuit of integrated circuit rather than by an external circuit outside integrated circuit . For example the wake up signals WKK WKIR WKUA WKSYNC and WKA from the GPIO port IR receiver UART detector the synchronization signal detector and the servo wake up unit and the wake up signal WKI from the real time counter can serve as the power saving mode release signal.

The comparator compares the IR expected codes stored in the IR expected code registers and the decoded IR codes from the IR decoder and outputs the wake up signal WKIR to direct the power control logic circuit to disable the power down signal SPRDN when the decoded IR codes from the IR decoder are the same as the IR expected codes in the IR expected code registers written by CPU .

In step S the power supply is turned on and provides the voltage VDD to the power control block B. The voltage on the capacitor C is charged by voltage VDD and the voltage stored in the capacitor C serves as a power reset signal PRST N.

In step S the power control block B is reset by the power reset signal PRST N and the power down signal SPRDN is disabled. For example the power control logic circuit disables the power down signal SPRDN after being reset i.e. the power down signal SPRDN is set to a low level. Because the power down signal SPRDN is disabled set to the low level the power supply provides the voltage VDD to the system core block A.

In step S when receiving the voltage VDD from the power supply the system core block A is turned on. The power control logic circuit then triggers the core rest counter to output the reset signal WKUPST but the core reset counter triggers the AND gate AG1 to output a core reset signal COREST after a time delay such that the system core block A can be reset after being powered by power supply .

In step S the CPU executes programs stored in the flash memory to boot operating system. Thus the electronic system enters a normal mode.

When the CPU executes a power saving down mode command the power saving power down flow comprises actions including steps S S shown in is performed such that the electronic system enters the power saving mode for reducing power consumption.

In step S the CPU sets the wake up mechanism in the power control block B before entering the power saving mode. For example the CPU can set specific conditions for the wake up mechanism and the wake up mechanism generates power saving mode release signals to wake up the electronic system when one of the specific conditions is satisfied.

In some embodiments the wake up mechanism comprises an internal wake up mechanism such as internal wake up circuit shown in and an external wake up mechanism such as wake up detector shown in . The wake up detector can generate power saving mode release signals according to external wake up signals EWKUPS from external components outside of the integrated circuit and the internal wake up circuit generates the power saving mode release signals by internal components in the integrated circuit . Namely the CPU sets specific conditions for the wake up detector and the internal wake up circuit thereby waking up the electronic system when one of the specific conditions set by CPU is satisfied.

As shown in the wake up detector can for example comprise a GPIO port an IR receiver a UART detector a synchronization signal detector a servo ADC and a servo wake up unit to generate power saving mode release signals to wake up electronic system according to external wake up signals EWKUPS. For example the CPU sets power keys of external components such as a keypad through the GPIO port writes specific IR codes to the IR receiver defines a specific display signal to the synchronization signal detector and or writes specific digital codes corresponding to analog voltages to the servo wake up unit before entering power saving mode. For example the CPU can set some IR specific IR codes serving as the IR expect code to the IR expected code registers as shown in .

The internal wake up circuit can for example comprise a real time counter RTC shown in thereby generating power saving mode release signals to wake up electronic system by time reservation. In this case the CPU can reserve a time for the real time counter before entering power saving mode. Note that the wake up mechanism detects the specific conditions set by CPU such as the power key of the keypad specific IR codes the specific display signal the specific digital codes corresponding to analog voltages and or the time reservation defined set or written by CPU . When any one of the specific conditions set by CPU is detected satisfied the wake up mechanism generates power saving mode release signals to wake up the electronic system.

In step S the CPU turns off external components such as integrated circuits coupled to the integrated circuit through the GPIO port shown in . For example the CPU output an external power control signal EPC to turn off the external components before system C enters power saving mode. In the embodiment of the CPU further sets the multiplexer such that the oscillation signals generated by ring oscillator are output to the clock generator A. Thus the clock generator A can generate applicable clocks for the power control block B by oscillation signals generated by ring oscillator when the crystal oscillator is turned off during the power saving mode.

In step S the CPU triggers the power control logic circuit to enable the power down signal SPRDN. For example the power control logic circuit sets the power down signal SPRDN to a high level from the low level.

In step S the power supply stops providing the voltage VDD to the system core block A because the power down signal SPRDN is enabled meanwhile the power supply still provides the voltage VDD to the power control block B. Thus the electronic system enters the power saving mode.

The power saving wake up flow comprises actions including steps S S shown in and is performed such that the electronic system returns to the normal mode from the power saving mode.

In step S the power down signal SPRDN is disabled set to the low level from the high level by power control logic circuit when any one of the specific conditions set by CPU is detected satisfied by wake up mechanism. For example when a keypad wake up signal WKK through the GPIO ports shown in from the external components is detected the power control logic circuit sets the power down signal SPRDN to the lower level to wake up the system.

Alternatively when UART detector shown in detects a specific communication signal on the RS232 port the UART detector outputs a wake up signal WKUA to direct the power control logic circuit to disable the power down signal SPRDN or when the synchronization signal detector detects a specific display control signal SD defined by CPU the synchronization signal detector outputs a wake up signal WKSYNC to direct the power control logic circuit to disable the power down signal SPRDN. For example the specific display control signal SD can be a TV signal horizontal synchronization signal Hsync or vertical synchronization signal Vsync for display devices and the like.

Further the servo ADC shown in receives and converts analog inputs VAIN such as analog voltages to corresponding digital codes for output to the servo wake up unit . Before system C enters power saving mode the CPU in the system core block A writes specific codes to the servo wake up unit . When the servo wake up unit detects that a corresponding digital code from the servo ADC is the same as the code written by CPU the servo wake up unit outputs a wake up signal WKA to direct the power control logic circuit to disable the power down signal SPRDN. Alternatively when the real time counter shown in detects that the time set by CPU is reckoned counted the real time counter outputs a wake up signal WKI to direct the power control logic circuit to disable the power down signal SPRDN.

Alternatively when the IR receiver finds that the received IR codes in the IR signal IRIN is the same as the code set by CPU IR receiver outputs a wake up signal WKIR to direct the power control logic circuit to disable the power down signal SPRDN. For example the comparator compares the IR expected codes stored in the IR expected code registers and the decoded IR codes from the IR decoder and outputs the wake up signal WKIR to direct the power control logic circuit to set the power down signal SPRDN to the low level when the decoded IR codes from the IR decoder are the same as the IR expected codes in the IR expected code registers written by CPU .

Namely the keypad wake up signal WKK received by GPIO ports the IR signal IRIN received by IR receiver the specific communication signal UORX received by UART detector the display control signal SD received by synchronization signal detector and the analog inputs VAIN received by servo ADC can serve as the external wake up signal EWKUPS and the wake up signals WKK WKIR WKUA WKSYNC and WKA from the GPIO port IR receiver UART detector the synchronization signal detector and the servo wake up unit and the wake up signal WKI from the real time counter can serve as the power saving mode release signal generated by wake up mechanism to wake up the electronic system.

In step the power supply restores the power supply of the system core block A i.e. the power supply provides the voltage VDD to the system core block A because the power down signal SPRDN is disabled set to the low level from the high level by power control logic circuit according to the wake up signals from the wake up mechanism. In addition the power control logic circuit also triggers the core reset counter in the step but the core reset counter triggers the AND gate AG to output the core reset signal COREST after a time delay such that the system core block A can be reset after being powered by power supply .

In step the CPU executes programs stored in the flash memory to boot the operating system. Thus the electronic system returns to the normal mode from the power saving mode.

In step the CPU turns on external components by external power control signal EPC through the GPIO port . In addition the CPU can also reset registers in the power control block B if necessary. For example the CPU resets registers for the wake up mechanism.

In the invention the system core block A including a processor consuming a significant portion of the total system power is powered off without requiring an external microcontroller which still consumes a great amount of power in power saving mode. Because the system core block A is powered off the entire power consumption thereof such as dynamic power consumption affected by power voltage Vand operating frequency fand leakage power consumption affected by power voltage V can be reduced. Moreover because power control logic circuit is a digital logic circuit composed of logic gates comprising AND gates OR gates NOT gates NAND gates NOR gates and or EX OR gates rather than a microprocessing unit MPU a digital signal processor a microcontroller a central processing unit or a microprocessor that can execute instructions or commands programmed in a program stored in a storage device the power consumption of the power control logic circuit is far less than that of a microprocessing unit MPU a digital signal processor a microcontroller a central processing unit or a microprocessor. Thus the power consumption of the electronic system of the invention can be far less than that controlled by microcontroller.

While the invention has been described by way of example and in terms of preferred embodiment it is to be understood that the invention is not limited thereto. To the contrary it is intended to cover various modifications and similar arrangements as would be apparent to those skilled in the art . Therefore the scope of the appended claims should be accorded the broadest interpretation so as to encompass all such modifications and similar arrangements.

