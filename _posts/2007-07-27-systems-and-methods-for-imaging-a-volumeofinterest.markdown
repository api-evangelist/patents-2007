---

title: Systems and methods for imaging a volume-of-interest
abstract: Systems and methods for imaging a volume-of-interest, which may include an object or point of interest to be analyzed in a display of three-dimensional data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09171391&OS=09171391&RS=09171391
owner: Landmark Graphics Corporation
number: 09171391
owner_city: Houston
owner_country: US
publication_date: 20070727
---
The present invention generally relates to systems and methods for imaging a volume of interest which include an object or point of interest to be analyzed in a display of three dimensional data.

In some fields it is useful to model objects in two or three dimensions. Modeling such objects proves useful in a variety of applications. For example modeling the subsurface structure of a portion of the earth s crust is useful for finding oil deposits locating fault lines and in other geological applications. Similarly modeling human body parts is useful for medical training exercises diagnoses performing remote surgery or for other medical applications. The foregoing objects are exemplary only and other fields may likewise find utility in modeling objects.

In the field of earth sciences seismic sounding is used for exploring the subterranean geology of an earth formation. An underground explosion excites seismic waves similar to low frequency sound waves that travel below the surface of the earth and are detected by seismographs. The seismographs record the time of arrival of seismic waves both direct and reflected. Knowing the time and place of the explosion the time of travel of the waves through the interior can be calculated and used to measure the velocity of the waves in the interior. A similar technique can be used for offshore oil and gas exploration. In offshore exploration a ship tows a sound source and underwater hydrophones. Low frequency e.g. 50 Hz sound waves are generated by for example a pneumatic device that works like a balloon burst. The sounds bounce off rock layers below the sea floor and are picked up by the hydrophones. In either application subsurface sedimentary structures that trap oil such as faults and domes are mapped by the reflective waves.

In the medical field a computerized axial topography CAT scanner or magnetic resonance imaging MRI device is used to collect information from inside some specific area of a person s body. Such modeling can be used to explore various attributes within an area of interest for example pressure or temperature .

The data is collected and processed to produce three dimensional volume data sets. A three dimensional volume data set for example may be made up of voxels or volume elements whereby each voxel may be identified by the x y z coordinates of one of its eight corners or its center. Each voxel also represents a numeric data value attribute associated with some measured or calculated physical property at a particular location. Examples of geological seismic data values include amplitude phase frequency and semblance. Different data values are stored in different three dimensional volume data sets wherein each three dimensional volume data set represents a different data value.

Graphical displays allow for the visualization of vast amounts of data such as three dimensional volume data in a graphical representation. However displays of large quantities of data may create a cluttered image or an image in which a particular object or point of interest is partially obscured by undesirable data objects. There is therefore a need to restrict the data displayed to a volume containing the object or point of interest.

One conventional solution requires the selective deletion of particular objects that are blocking the view of an object or point of interest or cluttering the display of the data. There are disadvantages associated with this solution which include significant time consumption and the required deletion of an entire object instead of just that portion of the object that is outside the volume of interest. A more efficient and selective technique is needed which will allow the selective removal of all undesirable objects or portions thereof outside the display of a particular volume of interest without having to individually select and remove each displayed object in its entirety.

Another approach is described in U.S. Pat. No. 6 765 570 which is assigned to Landmark Graphics Corporation and incorporated herein by reference the 570 patent . This patent describes a system and method for analyzing and imaging three dimensional volume data sets using a three dimensional sampling probe. The sampling probe can be created shaped and moved interactively by the user within a three dimensional volume data set. As the sampling probe changes shape size or location in response to user input an image representing an intersection of the sampling probe and the three dimensional volume data set is re drawn at a rate sufficiently fast to be perceived in real time by the user. In this manner the user can achieve real time interactivity by limiting the display of the three dimensional volume data set to an image of an intersection of the sampling probe and the three dimensional volume data set.

Although the 570 patent describes a method for limiting the display of a three dimensional data set the sampling probe is created in a default shape size and location upon instantiation. As a result the sampling probe must be manipulated to surround only an object or point of interest. The sampling probe upon instantiation may therefore often include extraneous information or an image of only part of the object or point of interest. Manipulation of the probe shape size and location to achieve a desired volume of interest containing the object or point of interest necessarily entails additional time consumption which leads to inefficiency in producing a clear image of the object or point of interest. Further the 570 patent fails to describe or disclose how to move an object or point of interest within the three dimensional volume data set while it is surrounded by the sampling probe.

As such there is a need for automatically imaging a volume of interest comprising an object or point of interest in a display of three dimensional data by reducing extraneous three dimensional data in the display rather than adjusting the volume of interest. Further there is a need for maintaining a volume of interest relative to the object or point of interest if the object or point of interest needs to be moved.

The present invention therefore meets the above needs and overcomes one or more deficiencies in the prior art by providing systems and methods for automatically imaging a volume of interest which may comprise an object or point of interest to be analyzed in a display of three dimensional data and may be maintained relative to the object or point of interest as the object or point of interest is moved.

In one embodiment the present invention includes a method for imaging a volume of interest comprising i selecting an object or point of interest from a display of three dimensional data ii positioning a bounding box around the object or point of interest using a computer processor the bounding box surrounding only the object or point of interest and a predetermined margin upon instantiation and iii displaying an image of only the contents of the bounding box upon instantiation of the bounding box the displayed image representing the volume of interest and initially comprising the object or point of interest.

In another embodiment the present invention includes a non transitory computer readable medium tangibly carrying computer executable instructions for performing a method to image a volume of interest the instructions being executable to implement i selecting an object or point of interest from a display of three dimensional data ii positioning a bounding box around the object or point of interest the bounding box surrounding only the object or point of interest and a predetermined margin upon instantiation and iii displaying an image of only the contents of the bounding box upon instantiation of the bounding box the displayed image representing the volume of interest and initially comprising the object or point of interest.

In yet another embodiment the present invention includes a non transitory computer readable medium tangibly carrying computer executable instructions for imaging a volume of interest comprising i a user input module for accepting user inputs related to selecting an object or point of interest from a display of three dimensional data ii a volume of interest module for processing a set of instructions to position a bounding box around the object or point of interest upon instantiation of the bounding box the bounding box surrounding only the object or point of interest and a predetermined margin upon instantiation and iii a rendering module for displaying an image of only the contents of the bounding box the displayed image representing the volume of interest and initially comprising the object or point of interest.

The subject matter of the present invention is described with reference to certain preferred embodiments however is not intended to limit the scope of the invention. The claimed subject matter thus might also be embodied in other ways to include different steps or combinations of steps similar to the ones described herein and other technologies. Although the term step may be used herein to connote different elements of methods employed the term should not be interpreted as implying any particular order among or between various steps herein disclosed unless and except when the order of individual steps is explicitly described.

In one embodiment the present invention may be described in the general context of a computer executable program of instructions such as program modules generally referred to as software. The software may include for example routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The software forms an interface to allow a computer to react according to a source of input. The software may also cooperate with other code segments to initiate a variety of tasks in response to data received in conjunction with the source of the received data. The software may be stored onto any variety of memory media such as CD ROM magnetic disk bubble memory and semiconductor memory e.g. various types of RAM or ROM . Furthermore the software and results may be transmitted over a variety of carrier media such as optical fiber metallic wire free space and or through any of a variety of networks such as the internet.

Those skilled in the art will appreciate that the present invention may be implemented in a variety of computer system configurations including hand held devices multiprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like. Any number of computer systems and computer networks are therefore acceptable for use with the present invention. The present invention may be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment the software may be located in both local and remote computer storage media including memory storage devices.

The present invention may therefore be implemented using hardware software or a combination thereof in a computer system or other processing system. is a block diagram illustrating one embodiment of a software program for the present invention. At the base of the program is an operating system . A suitable operating system may include for example a Windows operating system from Microsoft Corporation or other operating systems as would be apparent to one of skill in the relevant art.

Menu interface software overlays the operating system . The menu interface software are used to provide various menus and windows to facilitate interaction with the user and to obtain user input and instructions. As would be readily apparent to one of skill in the relevant art any number of menu interface software programs could be used in conjunction with the present invention.

A basic graphics library overlays menu interface software . Basic graphics library is an application programming interface API for three dimensional computer graphics. The functions performed by basic graphics library may include for example geometric and raster primitives RGBA or color index mode display list or immediate mode viewing and modeling transformations lighting and shading hidden surface removal alpha blending translucency anti aliasing texture mapping atmospheric effects fog smoke haze feedback and selection stencil planes and accumulation buffer.

A particularly useful basic graphics library is OpenGL marketed by Silicon Graphics Inc. SGI . The OpenGL API is a multi platform industry standard that is hardware window and operating system independent. OpenGL is designed to be callable from C C FORTRAN Ada and Java programming languages. OpenGL performs each of the functions listed above for basic graphics library . Some commands in OpenGL specify geometric objects to be drawn and others control how the objects are handled. All elements of the OpenGL state even the contents of the texture memory and the frame buffer can be obtained by a client application using OpenGL . OpenGL and the client application may operate on the same or different machines because OpenGL is network transparent. OpenGL is described in more detail in the OpenGL Programming Guide ISBN 0 201 63274 8 and the OpenGL Reference Manual ISBN 0 201 63276 4 both of which are incorporated herein by reference.

A rendering module overlays basic graphics library . The rendering module is an API for creating real time multi processed three dimensional visual simulation graphics applications. As will be understood by those skilled in the art the rendering module may include a suite of tools for two dimensional and or three dimensional seismic data interpretations including for example interactive horizon and fault management three dimensional visualization and attribute analysis. The rendering module therefore provides functions that bundle together graphics library state control functions such as lighting materials texture and transparency. These functions track state and the creation of display lists that can be rendered later. Asset View which is a commercial software package marketed by Landmark Graphics Corporation for use in the oil and gas industry is one example of an appropriate rendering module for use with the present invention.

Another example of an appropriate rendering module is OpenGL Performer which is available from SGI . OpenGL Performer supports the OpenGL graphics library discussed above. OpenGL Performer includes two main libraries libpf and libpr and four associated libraries libpfdu libpfdb libpfui and libpfutil .

The basis of OpenGL Performer is the performance rendering library libpr a low level library providing high speed rendering functions based on GeoSets and graphics state control using GeoStates. GeoSets are collections of drawable geometry that group same type graphics primitives e.g. triangles or quads into one data object. The GeoSet contains no geometry itself only pointers to data arrays and index arrays. Because all the primitives in a GeoSet are of the same type and have the same attributes rendering of most databases is performed at maximum hardware speed. GeoStates provide graphics state definitions e.g. texture or material for GeoSets.

Layered above libpr is libpf a real time visual simulation environment providing a high performance multi process database rendering system that optimizes use of multiprocessing hardware. The database utility library libpfdu provides functions for defining both geometric and appearance attributes of three dimensional objects shares state and materials and generates triangle strips from independent polygonal input. The database library libpfdb uses the facilities of libpfdu libpf and libpr to import database files in a number of industry standard database formats. The libpfui is a user interface library that provides building blocks for writing manipulation components for user interfaces C and C programming languages . Finally the libpfutil is the utility library that provides routines for implementing tasks and graphical user interface GUI tools.

An application program which uses OpenGL Performer and OpenGL API typically performs the following steps in preparing for real time three dimensional visual simulation 

Once the application program has created a graphical rendering environment by carrying out steps 1 through 6 above then the application program typically iterates through the following main simulation loop once per frame 

Alternatively Open Scene Graph may be used as another example of an appropriate rendering module. Open Scene Graph operates in the same manner as OpenGL Performer providing programming tools written in C C for a large variety of computer platforms. Open Scene Graph is based on OpenGL and is publicly available.

Overlaying the other elements of program is volume of interest module . The volume of interest module is configured to interact with three dimensional data sets representing predetermined objects such as for example horizons and faults or three dimensional point sets. In a manner generally well known in the art the volume of interest module interfaces with and utilizes the functions carried out by the rendering module the basic graphics library the menu interface software and the operating system . The volume of interest module may be written in an object oriented programming language such as for example C to allow the creation and use of objects and object functionality. Methods enabled by the volume of interest module are further described in reference to .

The program illustrated in may be executed or implemented through the use of a computer system incorporating the program and various hardware components. The system hardware components may include for example a processor memory e.g. random access memory and or non volatile memory devices one or more input devices one or more display devices and one or more interface devices. These hardware components may be interconnected according to a variety of configurations and may include graphics cards like GeForce marketed by NVIDIA and processors manufactured by Intel and or AMD . Non volatile memory devices may include for example devices such as tape drives semiconductor ROM or EEPROM. Input devices may include for example devices such as a keyboard a mouse a digitizing pad a track ball a touch sensitive pad and or a light pen. Display devices may include for example devices such as monitors projectors and or head mounted displays. Interface devices may be configured to require digital image data from one or more acquisition devices and or from one or more remote computers or storage devices through a network.

Any variety of acquisition devices may be used depending on the type of object being imaged. The acquisition device s may sense various forms of mechanical energy e.g. acoustic energy displacement and or stress strain and or electromagnetic energy e.g. light energy radio wave energy current and or voltage .

A processor may be configured to reprogram instructions and or data from RAM and or non volatile memory devices and to store computational results into RAM and or non volatile memory devices. The computer executable instructions direct the processor to operate on three dimensional data sets and or three dimensional point sets based on the methods described herein.

In one embodiment a three dimensional volume data set may be stored in a format generally well known in the art. For example the format for a particular data volume may include two parts a volume header followed by the body of data that is as long as the size of the data set. The volume header typically includes information in a prescribed sequence such as the file path location of the data set size dimensions in the x y and z directions annotations for the x y and z axes annotations for the data value etc. The body of data is a binary sequence of bytes and may include one or more bytes per data value. For example the first byte is the data value at volume location 0 0 0 the second byte is the data value at volume location 1 0 0 and the third byte is the data value at volume location 2 0 0 . When the x dimension is exhausted then the y dimension and the z dimension are incremented respectively. This embodiment however is not limited in any way to a particular data format or data volume.

When a plurality of data volumes is used the data value for each of the plurality of data volumes may represent a different physical parameter or attribute for the same geographic space. By way of example a plurality of data volumes could include a geology volume a temperature volume and a water saturation volume. The voxels in the geology volume can be expressed in the form x y z seismic amplitude . The voxels in the temperature volume can be expressed in the form x y z C. . The voxels in the water saturation volume can be expressed in the form x y z saturation . The physical or geographic space defined by the voxels in each of these volumes is the same. However for any specific spatial location x y z the seismic amplitude would be contained in the geology volume the temperature in the temperature volume and the water saturation in the water saturation volume.

The input data may be provided to the computer system through a variety of mechanisms. For example the input data may be acquired into non volatile memory and or RAM using one or more interface devices. As another example the input data may be supplied to the computer system through a memory medium such as a disk or a tape which is loaded into onto one of the non volatile memory devices. In this case the input data will have been previously recorded onto the memory medium. It is noted that the input data may not necessarily be raw sensor data obtained by an acquisition device. For example the input data may be the result of one or more processing operations using a set of raw sensor data. The processing operation s may be performed by the computer system and or one or more other computers.

Referring now to a method for imaging a volume of interest is illustrated in the form of a flow diagram.

In step one or more three dimensional volume data sets are selected from available data sets using the GUI tools and menu interface software described in reference to . The selected data set s may then be displayed for interpretation and or analysis using techniques generally well known in the art and or described in the 570 patent. For example voxel data is read from memory and converted into a specified color representing a specific texture. Textures are tiled into 254 pixel by 256 pixel images. This process is commonly referred to as sampling by those skilled in the art and may be coordinated among multiple CPU s on a per tile basis. The process of interpreting the data often results in the display of one or more objects or points of interest which are used to populate the scene or display in step .

In step an object or point of interest is selected from the display for further analysis using the GUI tools and menu interface software described in reference to . An object or point of interest could be selected for example based on its spatial relationship with another object or point of interest. An object or point of interest may also be predefined using other criteria to allow selection of objects or points of interest that do not share a single defining characteristic with another object or point of interest in the display for example.

In order to more fully analyze an object or point of interest and its immediate surroundings a bounding box may be positioned around the object or point of interest in step . In one embodiment after an object or point of interest is selected from the display the bounding box automatically surrounds the object or point of interest upon instantiation which is centered using a default setting in the bounding box. The bounding box defaults may be adjusted using the GUI tools and menu interface software described in reference to such as a keyboard or mouse. The data inside of the bounding box remains visible upon its instantiation and as the bonding box moves. The bounding box therefore isolates a volume of interest initially surrounding each selected object or point of interest for display and analysis.

The bounding box may be implemented using various techniques generally well known in the art and may include for example clipping planes that essentially clip or remove the seismic data displayed outside of the bounding box. One technique for example is described in U.S. Pat. No. 7 170 530 which is incorporated herein by reference. Another technique is described in U.S. Pat. No. 7 218 331 which is also incorporated herein by reference. Other techniques are described in VR User Interface Closed World Interaction by Ching Rong Lin and R. Bowen Loftin and Interaction with Geoscience Data in an Immersive Environment by Ching Rong Lin R. Bowen Loftin and H. Roice Nelson Jr. which are incorporated herein by reference and include techniques for displaying an image of the contents of a bounding box as the bounding box is manipulated.

In step the bounding box may be set as a default to initially surround the entire object or point of interest selected or any portion thereof. The bounding box is automatically instantiated at the default position relative to the object or point of interest. Preferably the bounding box default is set to a size that is just large enough to surround the entire object or point or interest and a predetermined margin which enlarges the volume of interest as needed. The predetermined margin can be for example set as a specific value or set to be proportionate to the size of the bounding box. Because an object and a point of interest are typically different in shape and size the bounding box may also be set to default to any shape and size most closely associated with the shape and size of the object or point of interest in order to automatically surround the entire object or point of interest and the predetermined margin. The bounding box therefore may be set to default to a different shape and size for each object or point of interest. Alternatively the bounding box may be set to default to any predetermined shape and size in order to enlarge or reduce the volume of interest for display.

In one embodiment for example a bounding box may be set to default to a rectangle for objects and a square for points which may comprise six clipping planes i.e. two planes located perpendicular to each axis x y and z . Each clipping plane in a parallel set the two clipping planes perpendicular to the same axis is located opposite the other clipping plane in each parallel set relative to the object or point of interest and is positioned at a default distance the pre determined margin from the nearest object or point of interest.

In step the contents of the bounding box are displayed for analysis. In this manner the volume of interest including the object or point of interest may be displayed without extraneous data as illustrated in for example. The display may also include other graphical features useful for user interface such as for example a compass to allow for directional determinations or estimations.

In a volume of interest is displayed and includes a bounding box not visible positioned around an object of interest which is the horizon and a portion of the seismic data and remaining objects in surrounding the horizon . The spatial relationship between the faults and the horizon is now visible due to the removal of extraneous data. The reduced clutter is particularly apparent when compared to the display in . The bounding box and its contents may also be manipulated in various ways using the GUI tools and menu interface software to adjust the view of the horizon and the surrounding data in the volume of interest .

As the image is displayed in step several options described in reference to steps through may be interactively controlled through the GUI tools and menu interface software to reduce the amount of extraneous three dimensional data and analyze selected objects or points of interest within the display of a volume of interest.

In step the object or point of interest may be interactively moved using the GUI tools and menu interface software relative to the display for example. As the object or point of interest moves the bounding box surrounds the object or point of interest and the predetermined margin. As a result an image of only the contents of the bounding box is displayed which includes the object or point of interest. This technique may be used to interactively move an object like a well path due to an interpretation error and display the contents of the bounding box as the object is being moved to a more appropriate location. Alternatively the bounding box may be interactively moved in order to view other objects or points of interest as they fall within the parameters of the bounding box. In either case only an image of the contents of the bounding box is displayed as the bounding box moves which may or may not include an object or point of interest. Accordingly step may be repeated to provide a new display of an image of the bounding box contents as the bounding box and or the object or point of interest move.

In step the displayed image representing the volume of interest may be interactively manipulated rotated or zoomed in out using the GUI tools and menu interface software to view a different perspective of the object or point of interest and the surrounding data as demonstrated by the volume of interest in which has been rotated clockwise and tilted when the horizon is compared in . As the volume of interest is rotated or zoomed an image of only the contents of the bounding box is displayed. Accordingly step may be repeated to provide a different perspective of the volume of interest.

In step another default shape and size for the bounding box may be determined using the GUI tools and menu interface software based on for example the shape or size of an object or point of interest selected. Accordingly step may be repeated to provide for auto instantiation of the bounding box according to the newly determined default settings.

In step a new object or point of interest may be interactively selected in the manner described in step for analysis. In this step a previously selected object or point of interest may be automatically removed and replaced with the new object or point of interest at the same time as the new object or point of interest is selected. Accordingly step may be repeated to provide for the selection of a new object or point of interest.

In step another bounding box may be utilized to position around another object or point of interest interactively selected from the scene in the manner described in step to display another volume of interest. In this step a current volume of interest containing a previously selected object or point of interest may be displayed with another volume of interest containing another selected object or point of interest. Data therefore may be selectively and interactively displayed in multiple volumes of interest that may or may not intersect each other for expanding the displayed image of three dimensional data. Accordingly step may be repeated to provide for the addition of another bounding box after selection of another object or point of interest.

In step an arbitrary object two dimensional or three dimensional or point of interest may be inserted into the scene using the GUI tools and menu interface software . An arbitrary object may be opaque or translucent and may be introduced into any location within the scene as illustrated in for example. In this step a previously selected object or point interest may be automatically removed and replaced with the arbitrary object or point of interest at the same time as the arbitrary object or point of interest is inserted. Alternatively a current volume of interest containing a previously selected object or point of interest may be displayed with another volume of interest containing the arbitrary object or point of interest. Accordingly step may be repeated.

In a volume of interest is displayed and includes a bounding box not visible positioned around an arbitrary object of interest which is a translucent plane and a portion of the three dimensional seismic data and remaining objects in surrounding the arbitrary plane . The spatial relationship of the well paths the horizon and the faults is now apparent due to the removal of extraneous data and the insertion of the translucent plane . The bounding box and its contents may also be manipulated in various ways to adjust the view of the translucent plane and its surroundings in the volume of interest . In this manner the preferred image of any volume of interest can be managed by selectively inserting an arbitrary object or point of interest into a scene for analysis of other objects that appear in the contents of the bounding box but may not be desirable selections for instantiating the bounding box. Further the arbitrary object or point of interest may be optionally moved or viewed in the manner described in reference to steps and .

In step the bounding box parameters such as the default shape and size of the bounding box may be interactively adjusted using the GUI tools and menu interface software to reduce or enlarge the volume of interest as desired for analysis. Accordingly step may be repeated to provide for a new display of an image of only the bounding box contents according to the new bounding box parameters.

In another embodiment illustrated in the bounding box is visible as a frame which may include opaque edges with control tabs located on each corner along each edge and along each face of the bounding box. Control tabs permit interactive manipulation of the bounding box as described in reference to steps and . For example the bounding box may be resized using the GUI tools and menu interface software to select a control tab to change the shape and size of the bounding box. In all other respects the bounding box operates in the same manner described in reference to .

Because the systems and methods described herein may be used to selectively and interactively analyze various objects or points of interest in a volume of interest they may be particularly useful for analyzing three dimensional medical or geological data however may also find utility for analyzing and interpreting any other type of three dimensional data.

While the present invention has been described in connection with presently preferred embodiments it will be understood by those skilled in the art that it is not intended to limit the invention to those embodiments. It is therefore contemplated that various alternative embodiments and modifications may be made to the disclosed embodiments without departing from the spirit and scope of the invention defined by the appended claims and equivalents thereof.

