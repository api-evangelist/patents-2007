---

title: Methods and apparatus to route a communication session in an internet protocol (IP) multimedia subsystem (IMS) network
abstract: Methods and apparatus to route a communication session in an Internet Protocol (IP) Multimedia Subsystem (IMS) network are disclosed. An example method comprises determining at a tElephone NUMber mapping (ENUM) query server if a called destination associated with an ENUM query request message is subject to re-direction, and determining at the ENUM server a final destination for the called destination when the destination is subject to redirection, the final destination being different from the called destination.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09049209&OS=09049209&RS=09049209
owner: AT&T Intellectual Property I, L.P.
number: 09049209
owner_city: Atlanta
owner_country: US
publication_date: 20070508
---
This disclosure relates generally to Internet Protocol IP Multimedia Subsystem IMS networks and more particularly to methods and apparatus to route a communication session in an IMS network.

In communication networks such as Internet Protocol IP Multimedia Subsystem IMS networks communication sessions are routed through a communication network from an originating device e.g. a voice over IP VoIP telephone and or plain old telephone service POTS telephone to a terminating device e.g. a VoIP telephone and or a POTS telephone . However if a particular communication session is to be re directed at and or for a particular terminating device and or a particular subscriber e.g. the subscriber has activated call forwarding the communication session is first routed by through and or within the communication network to the particular terminating call server and then is re directed and or re routed by the particular terminating call server possibly through one or more additional intermediate and or terminating devices to a final destination for the communication session.

Methods and apparatus to route a communication session in an Internet Protocol IP Multimedia Subsystem IMS network are disclosed. A disclosed example method includes determining at a tElephone NUMber mapping ENUM server if a called destination associated with an ENUM query request message is subject to re direction and determining at the ENUM server a final destination for the called destination when the destination is subject to redirection the final destination being different from the called destination. Another disclosed example methods includes sending an ENUM query request message that specifies a first destination to an ENUM query server receiving an ENUM response message that specifies a second destination the second destination different from the first destination and sending a communication session initiation message to the second destination.

A disclosed example tElephone NUMber mapping ENUM server includes a query redirector to identify whether a communication session directed to a first destination specified in an ENUM query request message is to be re directed based on a redirect flag associated with the first destination and a call rerouting director to identify at the ENUM server a final destination for the communication session when the communication session to be re directed.

In the interest of brevity and clarity throughout the following disclosure references will be made to the example IMS communication system the example IMS network the example IP networks and the example access networks and and or the example IMS devices of . Moreover the following disclosure will utilize SIP messages and or message exchanges. However it should be understood that the methods and apparatus to perform cut through routing of communication sessions are applicable to other VoIP communication systems and or networks e.g. based on soft switches IMS devices access networks IP networks IMS networks and or IMS communication systems and or other types of protocols messages and or message exchanges.

To access IMS communication services throughout and or within a site location building geographic area and or geographic region the example IMS communication system of includes any number and or type s of access networks two of which are designated in with reference numbers and . In general the example access networks and provide and or facilitate a communicative coupling of the IMS devices to and or with an IMS network which provides and or enables IMS communication services to the IMS device . However in some examples one or more of the IMS devices may access the IMS network without use of an access network . The example access networks and can be implemented using any number and or type s of past present and or future standards specifications communication devices networks technologies and or systems such as public switched telephone network PSTN systems public land mobile network PLMN systems e.g. cellular wireless distribution systems wired or cable distribution systems coaxial cable distribution systems Ultra High Frequency UHF Very High Frequency VHF radio frequency systems satellite or other extra terrestrial systems cellular distribution systems power line broadcast systems fiber optic networks and or any combinations and or hybrids of these devices systems and or networks.

While in the illustrated example of each of the example IMS devices are depicted as having an associated access network such depictions are merely illustrative. For example the example IMS devices may utilize a common access network an IMS device may be configured and or capable to utilize more than one access network at the same and or different times an IMS device may be configured to access the IMS network directly or via the IP network without an intervening access network etc.

To provide IMS communication services e.g. telephone services Internet services data services messaging services instant messaging services electronic mail email services chat services video services audio services gaming services etc. the example IMS communication system of includes one or more IMS networks one of which is designated in with reference numeral . In IMS networks such as the example IMS network of a tElephone NUMber mapping ENUM server e.g. an example enhanced ENUM cENUM server is generally used to obtain a session initiation protocol SIP uniform resource identifier URI for a destination based on the telephone number associated with the destination. The SIP URI is then used by and or within the IMS network to route a communication session to the destination.

As described more fully below the example IMS network of performs cut through communication session routing. That is an example enhanced ENUM cENUM server determines and or identifies a final destination e.g. the example IMS device C for a communication session based on an original destination e.g. the example IMS device B specified in an ENUM query request message received at the cENUM server . If communication sessions directed to the original destination are configured to be re directed then the final destination will be different than the original destination. However if communication sessions directed to the original destination are not configured to be re directed then the final destination is the same as the original destination. After identifying and or determining the final destination which may in some instances be the same as the original destination the example cENUM server of returns an ENUM query response message specifying the final destination to the call server that sent the ENUM query request message. Example call servers include but are not limited to a serving call session control function S CSCF server a media gateway control function MGCF server and or a softswitch. When the call server receives the ENUM query response message from the cENUM server the call server sends a communication session initiation message e.g. a session initiation protocol SIP INVITE message directly to the final destination rather than to via and or through the original destination. In this manner the communication session is cut through to the final destination without forwarding through any unnecessary intermediate servers nodes and or devices. Thus the example IMS network of substantially reduces unnecessary consumption of communication transport transmission server memory storage and or processing resources.

As used herein the term destination refers to a physical entity device location and or subscriber. Generally re direction for a destination is controlled at a call server that serves the destination. However in some examples a destination may include and or implement end point call features in addition to any implemented by an associated call server to control their own communication session re directions. A destination may be specified by any type of logical identifier such as a telephone number e.g. an E.164 number and or a session initiation protocol SIP uniform resource identifier URI . Moreover a destination may simultaneously be identified by specified by and or associated with more than one identifier. For example an IMS device may be associated with both a telephone number and a SIP URI.

The example IMS network of may include one or more legacy ENUM servers in addition to the example cENUM server . Because the example cENUM server may be used to over time transparently replace legacy ENUM servers the example IMS network of may include any combination of cENUM servers and legacy ENUM servers. Moreover because some of the feature servers or destinations to include and or implement end point call features may not be updated e.g. as described below in connection with to support cut through routing the example cENUM server may not be aware of the re direction configuration for all destinations. In such mixed configurations e.g. when not all of the feature servers implement the example machine accessible instructions of some communication sessions will be cut through routed to their final destinations while other communication sessions will be routed via their original destination. However when the example cENUM server is used to determine the SIP URI for an original destination and if the cENUM server has been provided redirection configuration information for the original destination e.g. from an updated feature server that implements the example machine accessible instructions of the example cENUM server of will identify and return the final destination for a communication session directed to the original destination. However if the cENUM server has not been provided re direction configuration information for the original destination e.g. the original destination is associated with a feature server that does not implement the example machine accessible instructions of the example cENUM server operates substantially similar to legacy ENUM servers with regards to that particular original destination. Thus the cENUM server and or more generally the example IMS network may realize cut through routing for some destinations and legacy routing for other destinations. The mixture of cut through routing and legacy routing implemented by the example IMS network depends on the number of feature servers that implement providing redirection configuration information to the cENUM server .

In the example IMS communication system of the example IMS devices are communicatively coupled to the example IMS network via one or more of the example access networks and or and or any number and or type s of private and or public IP based communication networks such as for example the Internet two of which are illustrated in with reference numerals and . While in the illustrated example of each of the example IMS devices are depicted as having an associated IP network such depictions are merely illustrative. For example the example IMS devices may utilize the same public IP network an IMS device may be configured and or capable to utilize more than one IP network at the same and or different times etc. In general the example IP networks and of provide and or facilitate a communicative coupling of the IMS devices to and or with the IMS network .

In some examples the IMS devices may be communicatively coupled to the access networks and via one or more additional IP based networks and or devices not shown such as a local area network LAN a gateway and or a router located within a place of business a school and or a residence. The example IMS devices of are communicatively coupled to the example access networks and the example IP networks and and or more generally the example IMS network via any number and or type s of past current and or future communication network s communication system s communication device s transmission path s protocol s technique s specification s and or standard s . For instance the example IMS devices may be coupled to the example access networks and the example IP networks and and or the example IMS network via any type s of voice band modem s digital subscriber line DSL modem s cable modem s Ethernet transceiver s optical transceiver s IP virtual private network VPN connection s Institute of Electrical and Electronics Engineers IEEE 802.11x a.k.a. WiFi transceiver s IEEE 802.16 a.k.a. WiMax wireless local area network WLAN access point s general packet radio services GPRS networks in G wireless networks etc. Moreover any or all of the example IMS network the example access networks and and or the example IP networks and of may extend geographically to include one or more locations near to and or encompassing one or more of the IMS devices . For example the access network may include a wireless access point not shown by which for example a WiFi IP phone connects to the IP network and the IMS network .

In the example IMS communication system of the example access networks and the example IP networks and and the IMS network need not be owned implemented and or operated by a single service provider. For example the IMS devices may access IMS services provided by an IMS network owned operated and or implemented by a first service provider via access networks and which are owned operated and or implemented by one or more additional service providers. However any or all of the access networks and the IMS network and or the IP networks and may be operated by a single service provider.

In the illustrated example IMS communication system of each IMS device e.g. the example IMS devices that is registered to the example IMS network is associated with and or assigned to a S CSCF server three of which are designated in with reference numerals and . The example S CSCF servers of are responsible for handling incoming and or outgoing IMS communication sessions e.g. telephone calls and or data and or video sessions associated with its registered IMS devices .

While three S CSCF servers are illustrated in the IMS network may include any number and or type s of S CSCF servers and each such S CSCF server may support any number and or type s of IMS devices . The example S CSCF servers of perform session control maintain session states and or enable communications with call feature servers e.g. the example application servers of for its associated and or registered IMS devices . For instance when the calling IMS device A initiates for example an outgoing telephone call to the example IMS device B a communication session initiation message e.g. a SIP INVITE message is routed by the IMS network from the IMS device A to the S CSCF server A associated with that particular IMS device A .

In response to the communication session initiation message the example S CSCF server A sends an ENUM query request message to the example cENUM server to obtain an identifier e.g. a SIP URI for the IMS device B . If communication services for the IMS device B have been configured to be re directed to for example the IMS device C the cENUM server returns an identifier e.g. a SIP URI for the IMS device C instead of an identifier e.g. a SIP URI for the IMS device B . However if communication services for the IMS device B have not been configured to be re directed the cENUM server returns an identifier e.g. a SIP URI for the IMS device B . Thus regardless of whether the IMS device B has communication service re direction activated the S CSCF server A sends a communication session initiation message to the final destination for the communication session. Because the determination of the final destination e.g. the IMS device B or the IMS device C was made at the example cENUM server the S CSCF server A need not be aware that the communication session was re routed. Thus the example S CSCF servers of need not be modified adapted and or updated to perform cut through routing as described herein.

To locate and or identify the final destination for a requested communication session e.g. directed to a telephone number the example IMS network of includes any number of cENUM servers one of which is designated in with reference numeral . The example cENUM server of identifies based upon an ENUM query request message received from an S CSCF server if the original destination specified in the ENUM query request message has re direction routing enabled. If communication sessions to the original destination are to be re directed the example cENUM server of determines a final destination for the communication session. If communication sessions to the original destination are not to be re directed the final destination is the same as the original destination. The example cENUM server then performs based on the final destination a lookup of an ENUM database e.g. the example ENUM database of to obtain a SIP URI for the final destination. The ENUM database stores and or represents associations between device identifiers e.g. E.164 telephone numbers to SIP URIs . Thus for example by performing an ENUM lookup a SIP URI e.g. an IP address for the final destination can be identified based upon a called telephone number assigned to the final destination. However the ENUM database may store any number and or type s of associations between any number and or type s of identifiers. In some examples a final destination associated with and or configured to an original destination may already be a URI e.g. a SIP URI an application URI and or an hypertext transfer protocol HTTP URI and thus the ENUM database lookup need not be performed. An example manner of implementing the example cENUM server is described below in connection with .

To provide an access entry point for an IMS device into the IMS network the example IMS network of includes any number and or type s of proxy call session control function P CSCF servers two of which are designated in with reference numerals and . The example P CSCF servers and of among other things route SIP messages between IMS devices and their associated S CSCF servers .

To locate and or identify the S CSCF server associated with an IMS device the example IMS network of includes any number and or type s of interrogating call session control function I CSCF servers one of which is designated in with reference number . The example I CSCF server of serves as a contact point within the example IMS network for connections destined for an IMS device of the IMS communication system and or for an IMS device currently located within the serving area of the IMS communication system e.g. a roaming subscriber . For example for a final destination identified by the example cENUM server the example I CSCF identifies to which S CSCF server the final destination IMS device is registered. IMS protocol messages directed to the destination IMS device are then routed to the S CSCF server identified by the I CSCF .

To manage subscriber information and or to enable subscribers and or servers to locate other servers subscribers and or destinations the example IMS network of includes any number and or type s of home subscriber server s HSSs one of which is designated in with reference numeral . The example HSS of maintains a device profile and or one or more preferences for each subscriber and or IMS device of the IMS network . The example I CSCF server of uses information contained in the HSS to for example determine and or locate the S CSCF server associated with a particular subscriber and or IMS device .

To provide one or more additional call features the example IMS network of includes any number and or type s of application servers three of which are designated in with reference numerals and . The example application servers of provide and or implement additional service features to subscribers e.g. call barring calling name delivery and or blocking call blocking call forward call forking call trace voicemail announcement servers call trees etc. . Example application servers include but are not limited to voice over Internet protocol VoIP feature servers. The application servers may be used to provide and or implement call features and or services for both calling and or called parties.

As illustrated in the example S CSCF servers the example exception cENUM server the example P CSCF servers and the example I CSCF server the example HSS and or the example application servers communicate and or are communicatively coupled via any number type s and or combination of communication paths communication networks busses and or communication devices .

While an example IMS communication system example IMS devices and an example IMS network have been illustrated in the devices networks systems servers and or processors illustrated in may be combined divided re arranged eliminated and or implemented in any way. For example it will be readily appreciated by persons of ordinary skill in the art that the example S CSCF servers the example exception cENUM server the example P CSCF servers and the example I CSCF server the example HSS and or the example application servers illustrated in are logical entities of the example IMS network . They may therefore be implemented separately and or in any combination using for example machine accessible instructions executed by one or more computing devices and or computing platforms. Further the example IMS devices the example S CSCF servers the example exception cENUM server the example P CSCF servers and the example I CSCF server the example HSS the example application servers and or more generally the example IMS network may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still the example IMS communication system the example IMS devices and or the example IMS network may include additional devices servers systems networks gateways portals and or processors in addition to or instead of those illustrated in and or may include more than one of any or all of the illustrated devices servers networks systems gateways portals and or processors. For example an IMS network may include any number and or type s of media gateways media gateway control function BGCF servers breakout gateway control function BGCF severs and or session border controllers.

To allow feature servers e.g. the example feature servers of to configure update and or otherwise provide re direction information and or data the example cENUM server of includes a service oriented architecture protocol SOAP interface . The example SOAP interface of allows feature servers to notify the cENUM server whether communication sessions directed to a particular destination are to be re directed. That is the example SOAP interface is used by feature servers to set a redirect flag for a particular destination. For example a first value e.g. a logical TRUE may be used to indicate that communication sessions are to be re directed i.e. are subject to redirection while a second value e.g. a logical FALSE may be used to indicate that communication sessions are not to be re directed. Additionally if communication sessions are to be re directed the feature servers use the SOAP interface to update change and or modify rerouting data to configure and or define the destination to which communication sessions are to be re directed. In other examples the interface may be implemented using an open application programming interface API such as for example JAVA and or common object request broker architecture CORBA .

The example ENUM database the example redirect flags and or the example rerouting data may be implementing using any number and or type s of data structures and may be stored in and or within any number and or type s of memories and or memory devices . An example data structure that may be used to implement the example redirect flags of is described below in connection with . An example data structure that may be used to implement the example rerouting data of is described below in connection with .

While in the illustrated example of the ENUM database the example redirect flags and the example rerouting data are implemented with separate data structures they may be implemented using one or more combined data structures. However by implementing the ENUM database separately from the redirect flags and or the rerouting data the ENUM database can remain substantially static and the ENUM querier can be implemented to maintain the high efficiencies and or high real time throughputs typically associated with ENUM queriers. Additionally by separating the ENUM database from the redirect flags and or the rerouting data the ENUM database need not be implemented to support updates by the example feature servers .

To allow call servers e.g. the example S CSCF servers of to perform ENUM queries the example cENUM server of includes any type of ENUM query interface . Using any message s format s and or protocol s e.g. in accordance with Internet Engineering Task Force IETF Request for Comment RFC 3761 the example ENUM query interface of exchanges ENUM query request messages and ENUM query response messages with call servers.

To allow the example cENUM server of to locate a final destination for a communication session the example cENUM server of includes a query redirector and a call rerouting director . When an ENUM query request message is received at the cENUM server the example query redirector of checks the value of a redirect flag for the original destination specified in the ENUM query request message. If the redirect flag for the original destination indicates that the communication session is to be re directed and or is subject to redirection e.g. has a logical value of TRUE the example query redirector directs the example call rerouting director to identify the final destination for the communication session. If the redirect flag for the original destination indicates that the communication session is not to be re directed e.g. has a logical value of FALSE i.e. the final destination of the communication session is the same as the original destination the example query redirector directs an ENUM querier to perform an ENUM lookup in the ENUM database to identify a SIP URI for the original destination.

When directed by the example query redirector the example call rerouting director of accesses and or performs one or more lookups of the rerouting data and or the redirect flags to identify a final destination for a communication session. For example the call rerouting director performs a first lookup of the rerouting data to obtain a first destination identifier based upon the original destination specified in the ENUM query request message. The call rerouting director next performs a lookup of the redirect flags to determine if the destination associated with the first destination identifier is also being re directed and if so performs a second lookup of the rerouting data based on the first destination identifier to obtain a second identifier. The process continues until the call rerouting director identifies and or obtains a final destination identifier that is not re directed. The call rerouting director then directs the example ENUM querier to perform an ENUM lookup to obtain a SIP URI for the final destination. However if the final destination identifier is already a URI e.g. a SIP URI an application URI and or an HTTP URI the final destination identifier may be returned via the ENUM query interface to the call server without performing the ENUM lookup.

To perform ENUM lookups the example cENUM server of includes any type of example ENUM querier . As directed by the example query redirector and or the example call rerouting director using any method s algorithm s and or logic the example ENUM querier of performs a lookup of the ENUM database to identify a SIP URI associated with a telephone number. In some examples the ENUM database is implemented using one or more legacy ENUM servers.

While an example manner of implementing the example cENUM server of has been illustrated in one or more of the data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example interfaces and the example databases and the example query redirector the example call rerouting director the example ENUM querier and or more generally the example cENUM server may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still the example cENUM server may include data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated data structures elements processes and or devices.

To allow the example feature server of to configure update and or otherwise provide re direction information to for example the cENUM server of the example feature server includes a SOAP interface . The example SOAP interface of is used to notify the cENUM server whether communication sessions directed to a particular destination are to be re directed. That is the SOAP interface is used by a redirection configurer to set and or define a redirect flag e.g. one of the example redirect flags of for a particular destination. For example a first value e.g. a logical TRUE may be used to indicate that communication sessions are subject to redirection while a second value e.g. a logical FALSE may be used to indicate that communication sessions are not to be re directed. Additionally when communication sessions are to be re directed the example redirection configurer uses the SOAP interface to update configure and or define rerouting data e.g. the example rerouting data to configure the destination to which communication sessions are to be re directed. In some examples the interface may be implemented using an open application programming interface API such as for example JAVA and or CORBA.

The example redirection configurer of also interacts with a subscriber e.g. via an interactive voice response IVR system and or web portal to allow a subscriber to enable and or disable communication session redirection and or to configure a redirection destination. After the subscriber completes the re direction configuration the example redirection configurer provides the redirection information and or data to the cENUM server via the example SOAP interface .

To store subscriber information the example feature server of includes subscriber data . The example subscriber data of stores and or includes any necessary data required to provide call features for subscribers associated with the feature server . The example subscriber data may additionally or alternatively store one or more values that represent communication session re directions to be performed by the feature server and or the cENUM server . For example if a legacy ENUM server is used to obtain a SIP URI for an original destination call re direction may still have to be performed by the example feature server using a prior art technique. The subscriber data may be stored and or implemented by any type of data structure s and or stored in any number and or type s of memories and or memory devices . In some examples the subscriber data is stored separately from the feature server . For example the subscriber data could be stored in the example HSS .

To implement call services and or features the example feature server of includes any number and or type s of application servers one of which is designated at reference numeral . The example application server of implements any call services and or features such as for example call barring call name delivery call name blocking call blocking call forwarding call forking call trace and or voicemail.

While an example manner of implementing any or all of the example feature servers of has been illustrated in one or more of the data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example interfaces and the example subscriber database the example redirection configurer the example application server and or more generally the example feature servers may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still the example feature servers may include data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated data structures elements processes and or devices.

To indicate whether a destination has communication session re direction activated each of the example entries of includes a redirect flag field . The example redirect flag field of contains a first value e.g. a logical TRUE if communication sessions to the destination are currently subject to redirection or a second value e.g. a logical FALSE if re directing is not currently active for the destination.

To identify a destination to which a communication session is to be re directed each of the example entries of includes a route to identifier field . The example route to identifier field of contains one or more values and or strings that uniquely identify a destination. Example identifiers include an E.164 telephone number and a SIP URI.

By using the example data structures of and or the example cENUM of can a determine whether a communication session directed to a destination is to be re directed e.g. by examining the value of the example redirect flag field for the destination and b if the communication session is to be re directed determine the destination to which the communication session is to be re directed e.g. by examining the value of the example route to identifier field for the destination . Persons of ordinary skill in the art will readily recognize that the data structures of and or may be used to trace through a string of one or more re directions to identify the final destination for a communication session.

While example data structures that may be used to implement the example redirect flags and the example rerouting data of are illustrated in the example data structures of and or may be implemented using any number and or type s of other and or additional entries fields and or data. Further the entries fields and or data illustrated in and or may be combined divided re arranged eliminated and or implemented in any way. For example the example redirect flags and the example rerouting data may be implemented using a single data structure. Moreover the example data structures may include entries fields and or data in addition to or instead of those illustrated in and or and or may include more than one of any or all of the illustrated entries fields and or data.

The example protocol message exchanges of begin with the example IMS device A sending a communication session initiation message e.g. a SIP INVITE message which specifies IMS device B as the original destination to its associated S CSCF server A . The S CSCF server A forwards the initiation message to the feature server FS A which performs carries out and or implements originating call features if any for the IMS device A block .

When the feature server A is done performing originating call features block it returns an updated version of the initiation message to the S CSCF server . The example S CSCF server A sends an ENUM query request message specifying the telephone number of the IMS device B to the example cENUM server . Based on the telephone number of IMS device B TN B the cENUM server determines a final destination for the requested communication session block . In the illustrated example of IMS device B has its communication sessions re directed to IMS device C and thus the cENUM server responds with an ENUM response message that specifies a SIP URI for IMS device C SIP URI C .

The S CSCF server A then sends and or forward a communication session initiation message e.g. a SIP INVITE message to the S CSCF server C associated with the IMS device C . For example as illustrated in the S CSCF server A sends the SIP INVITE message to the I CSCF . The I CSCF identifies the S CSCF server C by querying the HSS and then forwards the SIP INVITE message to the S CSCF server C . Following the SIP INVITE message the communication session may continue being established in accordance with techniques performed in the industry including if applicable the implementation of any terminating call features for the IMS device C .

In the illustrated example of a user of the IMS device B provides re direction configuration data and or information to the cENUM to re configure communication session re direction for the IMS device B and thus the feature server B using a SOAP interface e.g. any of the example SOAP interfaces and of . In the example of telephone calls directed to the telephone number for IMS device B TN B are to be re directed to the telephone number for IMS device C TN C . The cENUM sets the redirect flag for TN B e.g. to a logical value of TRUE block performs an ENUM lookup to obtain the SIP URI for TN C block and sets the route to identifier for TN B to the SIP URI for TN C block . Persons of ordinary skill in the art will readily appreciate that the example protocol exchanges of may be used to configure re direction for any type s of communication sessions.

The example machine accessible instructions of begin when an ENUM query request message is received at a cENUM server e.g. the example cENUM server of . The example ENUM query request message of is directed to a telephone number TN B. The cENUM server creates a path data structure that is used as described below to detect re direction loops block and initializes a path count value to zero block . The cENUM server e.g. the example query redirector of determines if there is a redirect flag e.g. one of the example redirect flags defined for TN B block .

If there is no redirect flag defined for TN B block the cENUM server returns an ENUM response indicating that no record was found block and control exits from the example machine accessible instructions of . The call will then be processed without redirection i.e. to the original destination . If there is a redirect flag defined for TN B block and if the redirect flag indicates that re directing is inactive e.g. a logical FALSE block the cENUM server e.g. the example ENUM querier of performs an ENUM lookup based on TN B block . If the ENUM lookup is successful block the cENUM server returns an ENUM response message that specifies the SIP URI for TN B block and control exits from the example machine accessible instructions of . If the ENUM lookup is not successful block the cENUM server returns an ENUM response message indicating that no record was found block and the call will be processed in accordance with techniques performed in the industry. Control then exits from the example machine accessible instructions of .

Returning to block if the redirect flag for TN B is a logical TRUE i.e. re direction for TN B is active block the cENUM server e.g. the example call rerouting director of queries rerouting data e.g. the example rerouting data for a re direction destination block . If no redirection destination is found block control proceeds to block to perform an ENUM lookup based on TN B as explained above.

If a redirection destination is found block and if the redirection destination is a URI block the cENUM server returns an ENUM response message that specifies the URI for the redirection destination block and control exits from the example machine accessible instructions of . The call is processed using the returned SIP URI. If the redirection destination is not a URI e.g. it is a telephone number block the redirection destination is appended to the path data structure and the path count is incremented block . If the same destination occurs more than once in the path data structure i.e. a redirection loop was detected and or the path count equals or exceeds a threshold block the cENUM server returns an ENUM response indicating that a loop was detected and or that the redirection path was too long block and control exits from the example machine accessible instructions of and the call will be processed in accordance with techniques performed in the industry. If a redirection loop was not identified and the path count is less than the threshold block control returns to block to recursively trace the remainder of the re direction path. However upon each return to block the most recently identified redirection destination is used.

It should also be noted that the example software and or firmware implementations described herein are optionally stored on a tangible storage medium such as a magnetic medium e.g. a disk or tape a magneto optical or optical medium such as a disk or a solid state medium such as a memory card or other package that houses one or more read only non volatile memories random access memories or other re writable volatile memories. Accordingly the example software and or firmware described herein can be stored on a tangible storage medium such as those described above or equivalents and successor physical media.

Returning to block if a feature processing request is not received block the feature server e.g. the example redirection configurer of determines if a request to configure re direction for a destination was received block . If a request to configure re direction for a destination was not received block control returns to block to check for a feature processing request.

If a request to configure re direction for a destination was received block the redirection configurer prompts collects receives and or otherwise obtains one or more re direction configuration parameters block and sends the obtained re direction configuration parameter s to a cENUM server e.g. the example cENUM server block . Control then returns to block to check for a feature processing request as explained above.

The processor platform of the example of includes at least one general purpose programmable processor . The processor executes coded instructions and or present in main memory of the processor e.g. within a RAM and or a ROM . The processor may be any type of processing unit such as a processor core a processor and or a microcontroller. The processor may execute among other things the example exchanges and or the example machine accessible instructions of to implement the example methods and apparatus described herein.

The processor is in communication with the main memory including a ROM and or the RAM via a bus . The RAM may be implemented by DRAM SDRAM and or any other type of RAM device and ROM may be implemented by flash memory and or any other desired type of memory device. Access to the memory and may be controlled by a memory controller not shown . The RAM may be used to store and or implement for example the example redirect flags the example rerouting data the example ENUM database and or the example subscriber data .

The processor platform also includes an interface circuit . The interface circuit may be implemented by any type of interface standard such as an external memory interface serial port general purpose input output etc. One or more input devices and one or more output devices are connected to the interface circuit . The input devices and or output devices may be used to for example implement the example interfaces and or of and or the example interfaces and or of .

Of course persons of ordinary skill in the art will recognize that the order size and proportions of the memory illustrated in the example systems may vary. Additionally although this patent discloses example systems including among other components software or firmware executed on hardware it will be noted that such systems are merely illustrative and should not be considered as limiting. For example it is contemplated that any or all of these hardware and software components could be embodied exclusively in hardware exclusively in software exclusively in firmware or in some combination of hardware firmware and or software. Accordingly persons of ordinary skill in the art will readily appreciate that the above described examples are not the only way to implement such systems.

At least some of the above described example methods and or apparatus are implemented by one or more software and or firmware programs running on a computer processor. However dedicated hardware implementations including but not limited to an ASIC programmable logic arrays and other hardware devices can likewise be constructed to implement some or all of the example methods and or apparatus described herein either in whole or in part. Furthermore alternative software implementations including but not limited to distributed processing or component object distributed processing parallel processing or virtual machine processing can also be constructed to implement the example methods and or apparatus described herein.

It should also be noted that the example software and or firmware implementations described herein are optionally stored on a tangible storage medium such as a magnetic medium e.g. a disk or tape a magneto optical or optical medium such as a disk or a solid state medium such as a memory card or other package that houses one or more read only non volatile memories random access memories or other re writable volatile memories or a signal containing computer instructions. A digital file attachment to e mail or other self contained information archive or set of archives is considered a distribution medium equivalent to a tangible storage medium. Accordingly the example software and or firmware described herein can be stored on a tangible storage medium or distribution medium such as those described above or equivalents and successor media.

To the extent the above specification describes example components and functions with reference to particular devices standards and or protocols it is understood that the teachings of the invention are not limited to such devices standards and or protocols. Such systems are periodically superseded by faster or more efficient systems having the same general purpose. Accordingly replacement devices standards and or protocols having the same general functions are equivalents which are intended to be included within the scope of the accompanying claims.

Although certain example methods apparatus and articles of manufacture have been described herein the scope of coverage of this patent is not limited thereto. On the contrary this patent covers all methods apparatus and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

