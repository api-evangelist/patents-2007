---

title: Method and apparatus for concurrently processing multiple calls in a spread spectrum communications system
abstract: The call processing state machines defined by the CDMA standards (e.g., IS-95 and IS-2000) are modified to include a “traffic channel” substate indicative of the mobile station processing at least one active call. Call control (CC) state machines of various types are also provided to control the processing of the calls. To process one or more calls concurrently, a CC state machine is instantiated upon receiving an indication to process a particular call. The instantiated CC state machine is identified with, and used to control the processing of, the particular call. Upon receiving an indication to process an additional call, another CC state machine can be instantiated for the additional call. Each call to be processed can also be associated with a particular a service option connection, which includes information indicative of a set of parameters (e.g., the physical channels) to be used for data transmission.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07466741&OS=07466741&RS=07466741
owner: QUALCOMM Incorporated
number: 07466741
owner_city: San Diego
owner_country: US
publication_date: 20070117
---
The present Application for patent is a Continuation and claims priority to U.S. Pat. No. 7 184 459 entitled Method and Apparatus for Concurrently Processing Multiple Calls in a Spread Spectrum Communications System issued Feb. 27 2007 which is a continuation which claims priority to patent application Ser. No. 09 519 003 entitled Method and Apparatus for Concurrently Processing Multiple Calls in a Spread Spectrum Communications System filed Mar. 3 2000 now issued as U.S. Pat. No. 6 625 198 and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present invention relates to wireless communication. More particularly the present invention relates to method and apparatus for concurrently processing multiple calls in a spread spectrum communications system.

The use of code division multiple access CDMA modulation techniques is one of several techniques for facilitating communication in which a large number of system users are present. Although other multiple access communication system techniques are known in the art such as time division multiple access e.g. TDMA and GSM frequency division multiple access FDMA and AM modulation schemes such as amplitude companded single sideband ACSSB the spread spectrum modulation technique of CDMA has significant advantages over these other modulation techniques for multiple access communications systems. The use of CDMA techniques in a multiple access communications system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS issued Feb. 13 1990 and U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING SIGNAL WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM issued Apr. 7 1992 both assigned to the assignee of the present invention and incorporated herein by reference.

CDMA systems are typically designed to conform to one or more particular CDMA standards. Examples of such CDMA standards include the TIA EIA IS 95 A Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System TIA EIA IS 95 B Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System collectively the IS 95 standard the TIA EIA IS 98 A B and C standards entitled Recommended Minimum Performance Standard for Dual Mode Spread Spectrum Cellular and PCS Mobile Stations and The cdma2000 standards for spread spectrum systems hereinafter the IS 2000 standard . New standards are continually proposed and adopted for use.

Each of the standards noted above defines a mechanism for processing a single call between a mobile station and a base station. The mechanism is characterized by a call processing state machine on the signaling layer i.e. layer 3 that includes a number of states and a set of allowed transitions between the states. Each state in the state machine corresponds to a particular state of the mobile station or base station with respect to the call being processed. A transition to a new state takes place upon the occurrence of certain specified events.

CDMA systems are originally designed to primarily provide voice communication. Consequently the call processing state machine defined by the CDMA standards is designed to support a single call which is typically a voice call. For systems that conform to a particular CDMA standard and designed to implement the call processing state machine defined by that standard only one call can typically be processed at any given moment and a new call cannot be processed until the active call is terminated. This one call limitation restricts the type of services that can be provided to the user.

As modern day communication evolves it is highly desirable to provide enhanced communications services beyond just voice only or data only communication. These enhanced services often rely on the ability of the system to concurrently support multiple calls. For example the ability to concurrently transmit voice and video e.g. via two concurrent calls can be used to provide video conferencing. For some applications it is desirable to allow for concurrent transmission of voice and data e.g. transfer of a file while carrying on a conversation .

Thus techniques that allow for the concurrent processing of multiple calls in a spread spectrum environment are highly desirable.

The present invention provides techniques that enable the processing of multiple calls in a spread spectrum communications system. The invention achieves this by modifying or redefining the call processing state machine defined by the CDMA standards e.g. IS 95 and IS 2000 to include a traffic channel substate indicative of the mobile station processing at least one active call. The invention further provides call control CC state machines of various types which are used to control the processing of the associated calls. In an embodiment one CC state machine is instantiated for each call to be processed and the instantiated CC state machine is terminated upon the release of the associated call. Referring to Layer 3 processing state machine refers to the overall state machine and call control CC state machines refer to the voice data ISDN and GSM state machine instantiated for each call.

An embodiment of the invention provides a method for processing one or more calls concurrently in a spread spectrum communications system. In accordance with the method an indication of a particular call to be processed is received and a CC state machine for this call is instantiated. The instantiated CC state machine is identified with and used to control the processing of the particular call. Thereafter one or more data transmissions related to the particular call are exchanged. Upon receiving an indication of an additional call to be processed another CC state machine can be instantiated for the additional call. Correspondingly upon receiving a directive to release a particular call the call is released and its instantiated CC state machine is terminated. In an embodiment each call to be processed is associated with a particular service option connection which includes information indicative of a set of parameters e.g. the physical channels to be used for data transmission.

The instantiated CC state machine can be of a particular type selected based on the type of the call being processed. For example different CC state machines can be used for voice data video fax ISDN GSM and other types of call. In one implementation the instantiated CC state machine for a voice call includes 1 a waiting for order substate indicative of a wait for an order from the base station 2 a waiting for answer substate indicative of a wait for a user response to the particular call 3 a conversation substate indicative of a period of permissible transmissions for the voice call and 4 a release substate indicative of termination of the voice call.

Another embodiment of the invention provides a method for supporting two or more calls concurrently in a spread spectrum communications system. In accordance with this method an indication of a first call Call to be processed is received. A first service option connection SO Conn to be used for data transmissions is determined and a set of one or more physical channels is associated with the service option connection. The first call is mapped to the first service option connection and a CC state machine is instantiated to control the processing of the first call. For each subsequent call to be processed a separate CC state machine can be instantiated. Upon receiving a directive to release a particular call the call is released and the instantiated CC state machine for that call is also terminated.

For the embodiments described above when multiple concurrent calls are being processed one or more additional service option connections to be used for data transmission can be determined. Each active call is mapped to one of the service option connections. When a call is released a determination is made as to whether the service option connection of the just released call is used by at least one active call. The service option connection is released if it is not used by at least one active call. Similarly when a service option connection is released a determination is made as to whether the physical channel s associated with the released service option connection are used by another service option connection. A physical channel is released if it is not used by at least one active service option connection.

Yet another embodiment of the invention provides a method for processing one or more calls in a spread spectrum communications system. In accordance with the method a particular communications system is selected for use and a paging channel is monitored for an alert message of an incoming call. For each of the calls being processed one or more physical channels are established for data transmission and a CC state machine is instantiated. Messages are then exchanged for the calls over the established physical channels. An indication to release a particular call is received and the instantiated CC state machine for the particular call is released in response to the received indication. Yet another embodiment of the invention provides a mobile unit that includes a controller coupled to a receiver unit and a transmitter unit. The receiver unit receives incoming messages and the transmitter unit transmits outgoing messages. The controller receives an indication of a particular call to be processed instantiates a call control state machine for the particular call and exchanges one or more messages related to the particular call via the receiver and transmitter units. The instantiated call control state machine is identified with and used to control processing of the particular call. The controller can further receive an indication of an additional call to be processed and can instantiate an additional call control state machine for the additional call. The controller can also receive a directive to release the particular call and thereafter releases the call control state machine for the particular call.

As shown by each mobile station especially those located near a cell boundary can receive data transmissions and or pilot signals from multiple base stations. If the measured pilot signal from a particular base station is above a particular signal level the mobile station can request that base station be added to the active set of the mobile station. In an embodiment each mobile station can receive data transmission from zero or more member of the active set.

Mobile switching center includes many selector elements although only one is shown in for simplicity. One selector element is assigned to control the communication between one or more base stations and one mobile station . If a selector element has not been assigned to mobile station a call control processor is informed of the need to page mobile station . Call control processor then directs base station to page mobile station .

Data source contains the data to be transmitted to mobile station . Data source provides the data to packet network interface which receives and routes the data to selector element . Selector element then sends the data to each base station in communication with mobile station . Each base station maintains a data queue that contains the data to be transmitted to mobile station .

In an embodiment on the forward link the data is partitioned into packets that are then formatted with other control and coding bits and subsequently encoded. Depending on the particular physical layer implementation of the CDMA system the encoded packet may be demultiplexed into parallel streams and transmitted over one or more Walsh channels.

The data is sent in packets from data queue to a channel element . For each packet channel element inserts the necessary control fields. The data packet control fields check bits and code tail bits comprise a formatted packet. Channel element then encodes one or more formatted packets and interleaves or reorders the symbols within the encoded packets. The interleaved packet is scrambled with a scrambling sequence covered with Walsh covers and spread with a long PN code and short PNI and PNQ codes. The spread data is quadrature modulated filtered and amplified by a transmitter within a RF unit . The forward link signal is sent through an antenna and transmitted over the air on a forward link . A channel scheduler located within base station coordinates the communication between mobile station and one or more base stations .

At mobile station the forward link signal is received by an antenna and routed to a receiver unit within a front end . The receiver unit filters amplifies quadrature demodulates and quantizes the signal. The digitized signal is provided to a demodulator DEMOD where it is despread with the long PN code and the short PNI and PNQ codes decovered with the Walsh covers and descrambled with the identical scrambling sequence. The demodulated data is provided to a decoder that performs the inverse of the signal processing functions performed at base station e.g. the de interleaving decoding and frame check functions . The decoded data is provided to a data sink . The hardware as described above supports transmissions of data messaging voice video and other types of communication over the forward link. These various types of communication are generically referred to herein as simply data .

System supports data transmissions on the reverse link from mobile station to base station . Within mobile station a controller processes the data to be transmitted by routing the data to an encoder . Controller can be implemented as a microcontroller a microprocessor a digital signal processing DSP chip or an ASIC configured to perform the functions described herein.

In an embodiment encoder encodes the data in accordance with a Blank and Burst signaling data format described in U.S. Pat. No. 5 504 773 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention and incorporated herein by reference. Encoder then generates and appends a set of CRC bits appends a set of code tail bits encodes the data and appended bits and reorders the symbols within the encoded data. The interleaved data is provided to a modulator MOD .

Modulator can be implemented in many embodiments. In an embodiment the interleaved data is covered with Walsh codes spread with a long PN code and further spread with the short PNI and PNQ codes. The spread data is provided to a transmitter unit within a front end . The transmitter unit modulates the data performs filtering and amplification and transmits the reverse link signal through antenna over the air on reverse link .

At base station the reverse link signal is received by antenna and provided to RF unit . RF unit filters amplifies demodulates and quantizes the received signal and provides the digitized signal to channel element . Channel element despreads the digitized signal with the short PNI and PNQ codes and the long PN code and decovers the despread data with the proper Walsh code. Channel element then reorders the decovered data decodes the de interleaved data and performs the CRC check function. The decoded data e.g. the voice video data or message is provided to selector element that then routes the data to the appropriate destination. Channel element may also forward a quality indicator to selector element indicative of the condition of the received data packet.

The physical layer used to process data for an IS 95 compliant CDMA system is described in further detail in the aforementioned U.S. Pat. No. 5 103 459. The physical layer of another CDMA system is described in U.S. Pat. No. 6 574 211 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION filed Nov. 3 1997 and incorporated herein by reference.

System can be designed to conform to any CDMA standard currently in existence or future standards to be adopted. Each standard defines a mechanism for processing calls with the mobile station.

In state the mobile station selects a particular system to use. If the selected system is an analog system e.g. a GSM or TDMA system the mobile station transitions to a state and begins analog mode operation. Otherwise if the selected system is a CDMA system the mobile station proceeds to acquire and synchronize to the selected CDMA system i.e. to one or more base stations in the selected system . Once the mobile station has acquired the timing of the selected CDMA system it enters a mobile station idle state .

In state the mobile station is on but not active. The mobile station monitors a paging channel on the forward link for messages from the base station. If the mobile station is unable to receive the paging channel or if another base station is to be added to the active set e.g. for soft handoff the mobile station returns to state and acquires the base station. In state the mobile station can receive messages or an incoming call originate a call perform registration initiate a message transmission or perform some other actions. Upon initiating any of these actions the mobile station transitions to a system access state .

In state the mobile station sends messages to the base station on one or more access channels and receives messages from the base station on the paging channel in an attempt to access the base station. The exchange of messages is dependent on the particular type of communication e.g. voice data between the mobile station and the base station and the originator of the message i.e. the mobile station or base station and is described in further detail below. Depending on the outcome of the message exchange the mobile station can return to idle state if no active communication is to be performed with the base station or proceed to a mobile station control on the traffic channel state if a call with the base station is to be processed. Prior to the transition to state the mobile station is assigned a forward traffic channel for the call.

In state the mobile station communicates with the base station using the established forward and reverse traffic channels. Upon termination of the call the mobile station returns to state .

The state machine shown in is further described in the applicable CDMA standards e.g. the IS 95 and IS 2000 standards . For a particular CDMA standard each of the states shown in is defined by a state machine that includes a number of substates.

In substate the mobile station verifies that it can receive data on the forward traffic channel begins transmitting data on the reverse traffic channel and synchronizes the traffic channels between the mobile station and the base station. The mobile station also performs a set of other functions e.g. adjustment of the power control upon entering and while in substate . The mobile station then waits for an indication from layer 2 for an IS 2000 compliant system or from the base station for an IS 95 compliant system that the forward traffic channel has been acquired. The mobile station then transitions to a waiting for order substate if it received a call originated from the base station or to a conversation substate if it originated the call.

In substate the mobile station waits for an Alert with Information Message from the base station. This message indicates how and when the mobile station should ring the phone. If the mobile station receives the message within a particular time period T of entering substate it transitions to a waiting for mobile station answer substate .

In substate the mobile station informs the user of the incoming call by ringing the phone in accordance with the received Alert with Information Message. The mobile station then waits for a user response. Upon receiving the user response e.g. an indication of a depression of the answer button the mobile station transitions to conversation substate .

In substate the mobile station communicates with the base station via the assigned traffic channels and in accordance with the negotiated service option connection which is described in further detail below. For a data call or a call originated by the mobile station user the user needs not be notified of the call and the mobile station enters substate from substate . The mobile station stays in substate for the duration of the call. The mobile station transitions to a release substate if it receives a command from the user or a release order from the base station to release the call.

Substate signifies the termination of the call with the base station and represents the end of mobile station control on the traffic channel state . In substate the mobile station confirms the call disconnection. Upon confirmation the mobile station returns to a system determination substate of mobile station initialization state .

The state machines shown in are described in further detail in the IS 95 and IS 2000 standards documents including TR45 Upper Layer Layer 3 Signaling Standard for cdma2000 Spread Spectrum Systems PN 4431 Jul. 11 1999 which is incorporated herein by reference.

The state machine shown in supports a single voice call between the mobile station and the base station. In particular if the mobile station is in conversation substate e.g. during a voice or data call and another call originated by the base station is received the mobile station is not able to return to waiting for order substate to inform the user of the newly received call. To return to substate the current call would need to be terminated and the mobile station would need to return to mobile station initialization state . The single call limitation generally prevents the CDMA system from offering a number of services such as video conferencing multiple services e.g. voice and video and others.

In an embodiment states and are implemented similar to states and respectively. In an embodiment traffic channel initialization substate and release substate are implemented similar to that described for traffic channel initialization substate and release substate respectively in .

Upon power up state the mobile station selects a particular system to use and acquires and synchronizes to the selected system state . The mobile station then monitors the paging channel on the forward link state for messages from the base station and can initiate one or more actions e.g. receive messages or an incoming call originates a call performs registration initiate a message transmission and so on . Upon performing some of these actions the mobile station sends messages to the base station on the access channel and receives messages from the base station on the paging channel state to establish a traffic channel for the communication. The mobile station then enters traffic state and remains in this state while it has at least one pending call. Once all calls have been released the mobile station returns to mobile station initialization state .

Upon entering traffic state for the first call the mobile station synchronizes to the assigned traffic channel substate . The mobile station then transitions to traffic channel substate and upon receiving the appropriate message e.g. a Call Setup Message instantiates or invokes a call control CC state machine for the call. For example the mobile station can instantiate a voice CC state machine for a voice call a data CC state machine for a data call an ISDN CC state machine for a call with an ISDN network a GSM CC state machine for a call with a GSM network or some other CC state machines for some other types of communication. The CC state machines are used to control the processing of the associated calls.

While in traffic state if another call is originated or received the mobile station instantiates another CC state machine for this new call. In an embodiment one CC state machine is instantiated for each call being processed. The CC state machine is used to direct control of the associated call and to handle the call control messages related to that particular call. In this manner a number of L CC state machines can exist at any given moment where L 0 1 2 3 and so on. The mobile station remains in traffic state as long as there is at least one pending call. Upon termination of each call the CC state machine for that call is released and the mobile station determines whether the released call is the last pending call. If the released call is the last call the mobile station proceeds to release substate .

State machine comprising states and can be used to implement a lower layer 3 state machine for a particular CDMA system. State machine defines the interaction between the mobile station and the base station and is not specific to any particular call. State machine can be used to concurrently support any number of calls. The CC state machines are call specific and can be implemented based on the system requirements. Moreover CC state machines can be added removed or modified independent of state machine to provide different and or additional services. The use of multiple CC state machines facilitates independent connection and release of calls.

As shown in a call Call is processed in CC sublayer and mapped to a particular service option connection SO Conn . In the example shown in Callis mapped to SO Conn Callis mapped to SO Conn and Callis also mapped to SO Conn. The subscripts A B and C represent the call identifiers CALL IDs for the pending calls and the subscripts and represent the connection references CON REFs for the established service option connections.

Each service option connection identifies one or more physical channels to be used for data transmission. In the example shown in SO Connis mapped to i.e. utilizes the dedicated control channel DCCH and the supplemental channel SCH and SO Connis mapped to the fundamental channel FCH and the supplemental channel SCH .

As each call is connected a new CC state machine denoted as Call is instantiated. The instantiated CC state machine is of a type selected based on the type of call being processed e.g. voice data ISDN GSM and so on . Each CC state machine type includes a number of substates specific to that state machine type. The CDMA system can be designed to support a number of different CC state machine types and additional CC state machine types for new call types such as video and others can be added as required or desired.

As indicated in any number of calls can be concurrently processed. Moreover one call or multiple calls can be mapped to each service option connection. The one to one mapping between call and service option connection can be used to implement voice communication in conformance with the IS 95 standard. In some instances the reference for the service option connection i.e. CON REF can also be used as the CALL ID. In an embodiment to support a many to one mapping between call and service option connection a call to service option connection mapping is maintained by both the mobile station and the base station. When the last call mapped to a particular service option connection is released that service option connection can also be released. Similarly when the last service option connection mapped to a particular physical channel is released that physical channel can be released.

The service option connection SO Conn defines a set of parameters to be used for data transmission referred to as the service option SON and is identified by a service option connection reference CON REF . In an embodiment the service option connection is local to the mobile station and the base station.

The service option connection is negotiated via service negotiation procedures. In an embodiment while the mobile station is in traffic state if a service option connection is required to support a new call the service option request and assignment are accomplished using the service negotiation procedures. An example of such procedures is outlined in the IS 2000 standard document. Other service negotiation procedures can also be implemented and are within the scope of the invention.

In some embodiments the physical channels are established through the service negotiation. For these embodiments the service negotiation procedures can be designed to include request for one or more new traffic channels and the exchange of channel configuration information. The required physical channels can then be connected and configured using the negotiated channel configuration information. Upon completion of the service option negotiation between the mobile station and the base station the required physical channel s are established and ready for transmission.

In an embodiment a number of different types of CC state machines are provided to support different types of call. Some example CC state machine types include 

In the specific embodiment shown in voice CC state machine includes four substates a waiting for order substate a waiting for mobile station answer substate a conversation substate and a call release substate . Substates and generally correspond to substates and respectively in . During termination of the voice call the voice CC state machine transitions to the call release substate. Upon termination of the voice call the CC state machine for this call is released.

In an embodiment to facilitate the tracking of the calls and the processing of the instantiated CC state machines in a multiple concurrent call environment each call can be identified by a unique call identifier CALL D . In an embodiment the CALL ID is local to the mobile station mobile switching center MSC path and is selected by the originator of the call. Implementing local CALL ID allows the same CALL ID to be used by multiple mobile stations concurrently. The CALL ID can be analogized to the Call Reference in ISDN and the Transaction Identifier in GSM systems.

Once the CC state machine for a particular call has been established subsequent call specific transmissions e.g. a Flash with Information Message between the mobile station and the base station include the CALL ID so that the transmissions can be routed to the proper CC state machine. In an embodiment the CALL ID can be implied for the IS 95 voice CC state machine and for other CC state machines when there are no ambiguities. With this implementation signaling in conformance with the IS 95 standard can be generated and backward compatibility with existing IS 95 systems is maintained. When a single voice call or circuit switched data or fax call is running only minimal changes if any may be required to add a possibly optional field to identify the type of the CC state machine CC Type in the appropriate message. In some implementations packet data calls may not require CALL IDs since the signaling is in band.

In an embodiment the CC state machines are defined with the capability to support multiple calls per connection similar to that of an ISDN network. The resources to support multiple calls per connection may be provided by the mobile switching center and such processing may be transparent to the mobile station. For example ISDN permits 3 way calls to have multiple call presence CALL IDs at the mobile station. In this case the mobile station explicitly handles the different call presence. However in an ANSI 41 wireless systems the mobile switching center handles the explicit call presence and the mobile station uses the Flash with Information Message to signal a change in 3 way call state to the mobile switching center. This mechanism for handling multiple calls per connection is further described in TIA EIA 664 which is incorporated herein by reference.

The invention can be implemented with slight modifications within the framework of the call processing state machine currently defined by the IS 95 and IS standards. Referring back to upon entering mobile station control on the traffic channel state from mobile station access state the mobile station proceeds to traffic channel initialization substate as currently performed by the IS 95 and IS 2000 standards. From traffic channel initialization substate the mobile station enters a newly defined traffic channel substate. This new substate replaces waiting for order substate waiting for mobile station answer substate and conversation substate . One or more timers can be associated with substates and to provide the required time out indicators implemented by the current CDMA standards.

In waiting for order substate of the instantiated voice CC state machine the mobile station informs the user of the incoming call e.g. by ringing the phone and waits for a user response. In some system implementations this Call Setup Message may be omitted for the first call i.e. default values can be used for CALL ID and CON REF and the CC Type can be signaled via the ECAM. In this case the CC state machine can be instantiated upon entering traffic channel substate .

The mobile station then executes the service negotiation procedures with the base station. In an embodiment as part of the service negotiation procedures the mobile station receives a Service Request Message with a service configuration record SCR that includes the newly added service option SO. A set of service negotiation messages is then exchanged between the mobile station and the base station in negotiating the parameters for the call which may include the service option number. At the conclusion of the service negotiation the mobile station receives a Service Connect Message that includes the SCR having the newly added service option SOand the CON REFfor the assigned service option connection.

In an embodiment the service negotiation and the resulting establishment of the service option connection may occur prior to receiving the Call Setup Message. In this case the CON REFin the Call Setup Message corresponds to the connection reference of the established service option connection.

Upon receiving an Alert with Information Message that includes the CALL IDassigned to this call the mobile station transitions to waiting for mobile station answer substate . The mobile station then rings the phone and waits for a user response. After receiving the user response the mobile station sends a Connect Order that includes the CALL ID. The mobile station then transitions to conversation substate and may exchange the Flash with Information Message with the base station. Data related to this call is transmitted via the established physical channel s . As shown in the CALL ID is included with each call specific message such that the message can be properly routed and processed.

Similar to upon receiving the ECAM the mobile station transitions to the traffic channel substate. Upon receiving the Call Setup Message the mobile station instantiates a CC state machine of the specified data CC Type and the CC state machine is placed in the conversation substate.

For this new voice call the mobile station transitions to waiting for order substate and can perform the service negotiation procedures. The mobile station receives a Service Request Message that includes the new service option SOfor this call. Upon completion of the service negotiation the mobile station receives a Service Connect Message with the service configuration record that includes the assigned SON CON REF and other relevant parameters. The subsequent communication between the mobile station and the base station proceeds in similar manner as that described above in for the first voice call. Messages to this voice call and other calls with the possible exception of the first call are identified by the CALL ID assigned to the call. Data calls may use in band signaling.

For this new mobile station originated voice call the mobile station transitions to conversation substate and sends a Call Origination Message that includes for example the dialed digits and the CALL TD. The mobile station then performs the service negotiation procedures. In an embodiment the service negotiation may occur prior to the mobile station sending the Call Origination Message from the conversation substate. The service negotiation messages includes the new service option SOand relevant parameters. Upon completion of the service negotiation the mobile station receives a Service Connect Message with the service configuration record that includes the assigned SO CON REF and relevant parameters. The Flash with Information Messages may be exchanged between the mobile station and the base station in similar manner as that described above for . Again messages to this and other calls are identified by the assigned CALL ID.

If the release of this call eliminates a service option connection determined by reviewing the call to service option connection mapping the service negotiation procedures are executed and service option connection related messages are exchanged between the mobile station and the base station. The mobile station transmits a Service Request Message with the service configuration record that includes the CON REFto be released. At the conclusion of the service negotiation the mobile station receives a Service Connect Message that includes the CON REFto be released. Similarly the physical channel can be released if not needed to support any pending call.

If the release of this call eliminates a service option connection the service negotiation procedures are executed and service option connection related messages are exchanged between the mobile station and the base station. The mobile station receives a Service Request Message with the service configuration record that includes the CON REFto be released. At the conclusion of the service negotiation the mobile station receives a Service Connect Message with the service configuration record that includes the CON REFto be released. Similarly the physical channel may be released if not needed to support any pending call.

The elements in the base station and mobile station described above can be implemented in various manners. The receiver and transmitter units of the mobile station and base station can be implemented in one or more integrated circuits discrete components or a combination thereof. The controller of the mobile station can be implemented in one or more integrated circuits an application specific integrated circuit ASIC a digital signal processor DSP a controller a microprocessor other circuits and or software designed to perform the functions described herein or a combination thereof. The other elements of the mobile station and base station can be implemented with a combination of hardware and software in a manner known in the art.

The invention described herein can be applied to many spread spectrum communications systems. The invention is applicable to spread spectrum systems that currently exist and new systems that are continually being considered. A specific CDMA system is described in the aforementioned U.S. Pat. No. 6 574 211. Another CDMA system is disclosed in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459.

The foregoing description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

