---

title: Network access and quality of service troubleshooting
abstract: A method of maintaining a communication service is disclosed. The method comprises providing a communication path from a customer premises equipment (CPE) in a customer network to a port of a router located in a communication service provider network, wherein the port is allocated to the CPE, and wherein the customer network is different from the communication service provider network. The method also comprises determining a connectivity of the communication path from the CPE to the port of the router and determining an interface status of the port located on the router. The method also comprises determining a quality of service (QoS) of the communication path from the CPE to the port located on the router. Determining the connectivity and QoS of the communication path and determining the interface status of the port are initiated from the CPE.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07830816&OS=07830816&RS=07830816
owner: Sprint Communications Company L.P.
number: 07830816
owner_city: Overland Park
owner_country: US
publication_date: 20070813
---
This application includes subject matter related to U.S. patent application Ser. No. 11 551 704 filed Oct. 21 2006 entitled Integrated Network and Customer Database by Jose Gonzalez et al which is hereby incorporated by reference for all purposes.

An enterprise or business may subscribe to a variety of communication services provided by one or more service providers who operate owned or leased telecommunications equipment. The subscriber may be provided access to the public communications network by a local exchange carrier LEC which provides one or more dedicated lines to each subscriber from a switch. The traffic from multiple subscribers may be switched by the LEC to share a common resource according to statistical multiplexing techniques or some other process. Alternatively a subscriber may be allocated a dedicated line for example a T 1 resource on a continuous basis rather than a switched basis.

The subscriber may obtain connectivity to the Internet by subscribing to an Internet service provided by an Internet service provider ISP . The ISP may provide this Internet service with a port on a router operated by the ISP. The port on the router may be dedicated or reserved primarily or completely for the use of the subscriber. The subscriber connectivity to the Internet may be provided by a first communication link from the subscriber to the LEC switch and by a second communication link from the LEC switch to the port on the router. Alternatively the subscriber connectivity to the Internet may be provided directly or indirectly by a single communication link from the subscriber to the port on the router. A router is an electronic device that provides connectivity between two networks and typically supports routing of data packets to other network nodes based on addresses embedded in the header of the data packets.

The communication services may be defined at least in part by a service level agreement SLA that may define a class of service a bandwidth and other key communication parameters. A SLA may also define service availability time to identify the cause of a customer affecting malfunction time to repair a customer affecting malfunction service provisioning time and other. A quality of service QoS and or a class of service associated with the communication service may be implied by the SLA.

A communication service subscribed to by some enterprises is the virtual private network VPN communication service. VPNs may be used by enterprises to communicate confidentially within the enterprise between different sites offices or campuses over a public communications network. VPN traffic can be carried over a public network infrastructure such as the Internet on top of standard protocols or over a service provider s private network with a defined SLA between the subscriber and the service provider. A VPN can send a variety of communications traffic including data voice video or a combination of these and other traffic. In some cases VPNs may be provided based on multi protocol label switching MPLS techniques.

In an embodiment a method of maintaining a communication service is disclosed. The method comprises providing a communication path from a customer premises equipment CPE in a customer network to a port of a router located in a communication service provider network wherein the port is allocated to the CPE and wherein the customer network is different from the communication service provider network. The method also comprises determining a connectivity of the communication path from the CPE to the port of the router and determining an interface status of the port located on the router. The method also comprises determining a quality of service QoS of the communication path from the CPE to the port located on the router. Determining the connectivity and QoS of the communication path and determining the interface status of the port are initiated from the CPE.

In another embodiment a method of troubleshooting a communication service is disclosed. The method comprises providing the communication service to a customer premises equipment CPE located in a customer network wherein the communication service is provided at least in part by a port of a router wherein the router is located in the communication service provider network and wherein the communication service is provided according to a class of service. The method also comprises receiving a first request for a status of the communication service from the customer network wherein the status of the communication service is at least one of a connectivity status of the communication service an interface status of the port of the router and a quality of service QoS status of the communication service. The method further comprises polling the router to determine at least part of the status of the communication service and sending a first reply to the customer network wherein the first reply is based on the first request for the status of the communication service and on polling the router to promote troubleshooting the communication service by a customer.

In yet another embodiment a method of confirming a communication service is provided. The method comprises providing the communication service to a customer premises equipment CPE located in a customer network wherein the communication service is provided in part by a switch in a first service provider network and wherein the communication service is further provided in part by a port of a router located in a second service provider network. The customer network is different from the first and second service provider networks. The method also comprises determining a connectivity of the communication service from the CPE through the switch to the port of the router and determining a quality of service QoS of the communication service. The method further comprises comparing the QoS of the communication service with a service level agreement SLA associated with the communication service thereby confirming the communication service. Determining the connectivity and QoS of the communication service are initiated by a subscriber of the communication service.

These and other features will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings and claims.

It should be understood at the outset that although illustrative implementations of one or more embodiments are illustrated below the disclosed systems and methods may be implemented using any number of techniques whether currently known or in existence. The disclosure should in no way be limited to the illustrative implementations drawings and techniques illustrated below but may be modified within the scope of the appended claims along with their full scope of equivalents.

The present disclosure provides a system and methods to provide transparency of the condition and or status of a communication service thereby promoting maintaining troubleshooting and service verification by a communication service subscriber and or lower level less skilled employees of a provider of the communication service. The subscriber is provided real time access to interface status latency statistics quality of service QoS statistics and connectivity data by a graphical user interface GUI that in one embodiment invokes a simple network management protocol SNMP poll of a port on a router which provides the communication service for example a virtual private network VPN resource. In another embodiment a secure shell SSH interface may be employed to access information from the port on the router. Yet other methods of obtaining the information from the port on the router are contemplated by this disclosure. These novel methods may enable the subscriber to verify or confirm that a recently contracted communication service has been brought into service and is provisioned to support the QoS and or class of service implied by the service level agreement SLA defined in the subscription contract. In some contexts this may be referred to as service assurance. These methods may also enable the subscriber to maintain and troubleshoot the communication service after initial delivery of the communication service. The ability of the subscribers to serve themselves provided by these methods may save the time of employees of the service provider who otherwise might have to hand hold the subscriber through the service confirmation maintenance and troubleshooting processes. Similarly the ability of the subscribers to serve themselves provided by these methods may reduce delays that subscribers might otherwise experience while waiting for attention from staff of the service provider. As mentioned above the disclosed system and methods also may be used by an employee of a provider of the communication service and may promote for example customer facing employees of the provider of the communication service replying in real time to customer questions about contracted or purchased communication services. Additionally the disclosed system and methods may reduce the number of employees of the provider of communication services who are involved in answering customer questions about communication services and or troubleshooting communication services provided to customers.

Turning now to a system is discussed that illustrates one or more embodiments of the disclosure. The system includes customer premises equipment CPE in communication with a router that provides connectivity to the Internet to the CPE . The CPE may be located in a customer network and the router may be located in a communication service provider network also referred to as a service provider network. In an embodiment the Internet connectivity may be provided through a local exchange carrier LEC switch located in a LEC network . The Internet connectivity or other communication service may be provided by a port on the router . The port may be dedicated to the use of the CPE or may be shared by a plurality of CPEs .

The communication service may be provided in part by a communication path . In an embodiment the communication path may include a first link A from the CPE to the LEC switch and a second link B from the LEC switch to the router . The router may provide access to the Internet via a third link . Thus the CPE may access the Internet for example accessing content from a content server not shown via the communication path from the CPE to the router and via the third link from the router to the Internet where the content server not shown is connected to the Internet . While the communication service is promoted by the Internet connectivity a variety of different communication services may be provided by such Internet connectivity. The communication service may include one or more of VPN service email service multimedia communication service video conferencing service voice communication service and other communication services.

While a single communication path is depicted in in some embodiments multiple communication paths may be employed to provide the communication service for example depending on the communication volume associated with the communication service. In some embodiments multiple communication paths may be supported by one port of the router . In another embodiment depending on the communication volume associated with the communication service multiple communication paths may be supported by two or more ports of the router .

The CPE is located in the customer network and may comprise a gateway a hub a modem or other device for promoting data communications. The CPE may be linked to a local area network LAN not shown in the customer network that connects a plurality of computers within the customer network . The CPE may provide devices or computers connected to the CPE with access to the Internet via the communication service. In another embodiment however the CPE may be different from the above described exemplary configuration.

A graphical user interface GUI provides access to a query tool . The GUI may be presented on a display linked to a variety of computers and work stations in the customer network . In an embodiment the GUI may provide one or more buttons that select an asynchronous JAVASCRIPT request AJAX to be sent to a web server via the Internet connectivity for example from the computer presenting the GUI over a LAN connection to the CPE over the communication path to the port of the router over the third link to the Internet and via the Internet to the web server . The AJAX message may include one or more queries related to the status of the communication service the communication path the router and or the port . For example the status queries may include an interface status query a QoS status query a connectivity status query a latency query and other status queries. Based on the response to these status queries the subscriber may obtain a transparent view into the communication service that enables them to verify maintain and troubleshoot the communication service. In an embodiment key operational parameters or information related to the communication path the router and or the port may be displayed highlighted bolded or otherwise emphasized in the GUI to aid in assimilating the information provided.

The router may be a general purpose computer system provided with software and interfaces that promote routing and forwarding of data packets. In some embodiments the router may contain a specialized operating system such as the IOS the JUNOS or the XOS operating systems. In other embodiments however the router may employ a general purpose operating system such as the UNIX the LINUX or the WINDOWS operating systems. In some contexts the router may be referred to as a network switch a layer switch or a switch. The router may support many communication protocols including Internet protocol IP asynchronous transfer mode ATM and others. The router may range in capacity from small to large traffic handling capability. While shown in as outside the cloud representing the Internet the router may be considered to be inside the cloud of the Internet . It is well known that routers for example the router make up a substantial portion of the nodes within the cloud of the Internet .

The web server communicates with the query tool to invoke one or more status queries. The web server returns the results of the status queries and or any time rate of change data to the GUI . The web server returns the results of the status queries with substantially a real time response. In the context of the present disclosure a real time response is intended to mean a response time that is acceptable to most subscribers initiating a status query from the GUI and waiting for the result of the status query to display on the GUI for example waiting about ten seconds or less. For confirming maintaining and or troubleshooting a communication service this may be an acceptable real time response. In other embodiments however a longer response time may be acceptable for example up to about one minute and this longer response time may also be referred to as a real time response.

The web server is shown communicating with the query tool via the Internet but in another embodiment the web server may communicate with the query tool by a communication path within the service provider network for example over a LAN within the service provider network . The status queries may determine a connectivity status of the communication path an interface status of the port a QoS of the communication path a latency of the communication path and other communication service status information.

The query tool may execute on a general purpose computer system in the service provider network and may send a simple network management protocol SNMP message to the router and or to the port to request appropriate data to reply to the status queries. The SNMP message may request current values of a variety of counters for example an input error counter an output error counter an input packet discard counter an output packet discard counter an interface resets counter a carrier transitions counter and other well known counters. Additionally the SNMP message may request current values of other operational parameters of the router and or the port for example a current queue depth an average queue depth a maximum queue depth an offered throughput rate a packet drop rate and other parameters. This process of obtaining values of counters and operational parameters of the router and or the port may be referred to as polling the router and may be accomplished by using the SNMP protocol or by another method.

In another embodiment the query tool may communicate with the router and or the port using a secure shell SSH interface to access information from the router and or the port . In another embodiment the query tool may remotely connect to the router and or the port by another means and run a native command on the router and or the port to obtain operational parameters of the router and or the port . Yet other methods of obtaining the operational information from the router and or the port are contemplated by this disclosure.

The query tool may also initiate a ping from the router to the CPE . The ping function is a simple communication that involves a message being sent from the router to the CPE and the CPE returning the message back to the router whereby a round trip time can be determined and connectivity confirmed at a basic level. The query tool may invoke privileged commands restricted to trusted persons privileged commands which may not be invoked directly by subscribers because of risks that network service might be accidentally degraded.

The query tool may store the results of multiple queries and or multiple pings and calculate various time rate of change quantities for example a maximum round trip time a minimum round trip time and an average round trip time of a plurality of pings. These maximum minimum and average round trip times may provide insight into the communication latency or time delays in the communication path . The communication latency in the communication path may be sensitive to different communication loads. The query tool may also store the results of the different polls to determine that error rates are increasing or decreasing and or that the number of dropped packets per unit time is increasing or decreasing.

In an embodiment the query tool may provide background information that promotes understanding of the information about the communication service provided by the query tool . The background information may be provided based on the information about the communication service for example based on input errors experienced at the port of the router . For example the following background information may be provided when input errors are experienced at the port of the router This interface has experienced input Errors in the last 99 seconds. Any input error value for cyclic redundancy check CRC errors framing errors or aborts above one percent of the total interface traffic suggests some kind of link problem that should be isolated and repaired. Input Errors indicate a circuit cable connector DSU or router hardware problem. 

In an embodiment the query tool may determine a possible root cause of a condition of the communication path for example increased dropped packets and may determine a recommended network management action to take for example increasing the class of service associated with the communication path . The possible root cause may be selected based on error conditions identified through the polling activities and through analyzing the changed performance and statistics of the communication path from an enumerated list of common root causes that are known to those skilled in the art. The query tool may send a message containing the root cause and the recommended network management action to the customer network for example to the GUI where the message contents may be displayed via the web server .

The CPE the computer that supports the GUI the computer that supports the query tool and the web server may be general purpose computer systems. General purpose computer systems are described in greater detail hereinafter. The LEC switch may be a special purpose electronic device comprising redundant processors to provide fail over redundancy to maintain communication service in the presence of a single processor failure a specialized switching fabric to direct communications traffic and a plurality of individual protocol interface boards or circuit packs. Although they may be complicated devices switches such as the LEC switch are well known to those skilled in the art. The router may be implemented on a variety of computing platforms. Some routers may be implemented on simple desktop computers. Some routers may be implemented on general purpose computer systems. Yet other routers may be implemented on computer systems having both hardware and software expressly tailored for the router environment. Routers such as the router are well known to those skilled in the art.

Turning now to a flow chart of a method for maintaining a communication service is described. The method begins at block where a communication path from the CPE to the port on the router is provided. This may involve provisioning the service at the router and bringing the communication path into service in the service provider network . In an embodiment this may further involve provisioning the LEC switch in the LEC network to respond to messages from the CPE in pre programmed ways to switch the first link A to the second link B or in continually bridging the first link A to the second link B.

In block the connectivity of the communication path from the CPE to the port of the router is determined. The connectivity may be determined by the subscriber or other person using the GUI to invoke one or more functions of the query tool for example the ping functionality. The subscriber may deduce whether connectivity does or does not exist from the results of the functions returned to the GUI for example the results from one or more ping invocations.

In block the status of the interface to the port of the router is determined. The status of the interface may be determined by the subscriber or others using the GUI to invoke a command of the query tool for example the polling function or a portion of the polling function. The subscriber may deduce the status of the interface from the polling results returned to the GUI .

In block the QoS of the communication path is determined for example by the subscriber or other using the GUI to invoke the polling function or a portion of the polling function provided by the query tool . The subscriber may deduce the currently provided QoS of the communication path based on the polling results returned to the GUI .

In block the latency of the communication path based on a known communication traffic load is determined. For example the subscriber or other may use the GUI to invoke the ping functionality of the communication service status tool several times in succession while a known or calibrated communication traffic load is present on the communication path . In this manner the maximum round trip time average round trip time and minimum round trip time may be determined by the communication service status tool and reported to the GUI . In some cases the latency of the communication path may be determined with a low communication traffic load.

In block a possible root cause is determined of one or more of the status of the interface to the router port the QoS of the communication path the latency of the communication path or other condition of the communication service. The query tool may identify the possible root cause from an enumerated list of common root causes based on polling the router and or the port for example based on time rate of change quantities calculated or determined by the query tool .

In block a recommended network management action is determined based on the possible root cause determined in block . For example if excessive dropped packets are counted the possible root cause may be identified as insufficient bandwidth and or throughput of the communication path and or the communication service and the recommended network management action may be to upgrade the class of service and or the SLA of the communication service.

Through the process the subscriber or another may determine the current real time condition and status of the communication path and determine maintenance actions to perform to return the communication service to a desired level of performance and or to verify the level of performance of the communication service. For example if the QoS status information indicates that the current queue depth equals the maximum queue depth and the QoS level is the default service the subscriber may deduce that they may be overloading the communication path and losing data packets. The subscriber in this example may determine the appropriate maintenance action is to upgrade their SLA with their Internet service provider to better accommodate their actual communication traffic load.

One or more of the functions of the query tool may be invoked to determine the condition of the communication service and or the communication path in real time. As described above in the context of the present disclosure a real time response is intended to mean a response time that is acceptable to most subscribers.

Turning now to a flow chart of a method for troubleshooting a communication service is described. The method begins at block where a communication service for example a VPN is provided by the service provider. In an embodiment the VPN may be provided by the port on the router to the CPE via the communication path .

In block a request for the status of the communication service is received for example by the web server in the service provider network . The request for the status may include a request for one or more of an interface status of the port a plurality of counters associated with the port and or the router and a connectivity status of the communication path .

In block the router and or the port are polled to determine the requested status of the communication service. This may involve the web server calling a method of an application programming interface API of the query tool to cause the query tool to initiate the poll for status of the router and or the port . This poll may involve privileged and or limited access commands available only to entities with high level privileges for example a superuser privilege or a root privilege in a UNIX operating system. The poll may be accomplished by sending a SNMP message to the router and or the port to provide the requested status information. The poll may involve requesting the router and or the port to execute a ping or a plurality of pings to the CPE to determine communication round trip times between the port and the CPE .

In block the status of the router and or the port is returned for example to the customer network for example the GUI . Based on the status of the router and or the port the subscriber may troubleshoot the communication service.

In block if more status requests are desired for example if a troubleshooting session remains active the method returns to block otherwise the process completes. The determination of status in block may include comparing previous results to current results of the polling of the router and or the port to determine senses of change of key performance indicators for examples increases or decreases of current queue depth and or time rate of change in key performance indicators. In an embodiment an excess of status requests may be detected and discarded for example by the web server or by the query tool to prevent overloading either the router and or the port and overloading the customer network with excessive responses.

Turning now to a flow chart of a method for verifying a communication service is described. The process begins at block where a communication service for example a VPN based on multi protocol label switching MPLS is provided by the service provider. In another embodiment a different communication service may be provided for example a video conferencing service an email service or other communication service. In an embodiment the communication service may be provided by the port on the router to the LEC switch to the CPE via the communication path . When the communication service is first brought into service for example by an Internet service provider provisioning the communication service the subscriber may wish to assure or verify the communication service.

In block the subscriber determines the connectivity of the communication service from the CPE with the port of the router for example by using the GUI to invoke one or more functions of the query tool . The subscriber can infer the connectivity or disconnectedness of the communication service from the results received by the GUI .

Assuming connectivity of the communication service is established the method proceeds to block where the subscriber determines the QoS of the communication service for example by establishing a known communication load on the communication service for example on communication path and using the GUI to invoke the QoS function of the query tool . The subscriber can determine the QoS currently provided by the communication service based on the response provided to the GUI .

In block the QoS of the communication service under the known communication traffic load is compared to the SLA associated with the communication service. If the observed or inferred QoS of the communication service meets or exceeds the SLA associated with the communication service the subscriber has confirmed the communication service contracted for with the Internet service provider. If the observed or inferred QoS does not meet the SLA associated with the communication service the subscriber may call this to the attention of the Internet service provider to obtain upgraded communication service to fix a communication problem or to interwork with the LEC to fix a communication problem.

In an alternative scenario the QoS may meet the SLA associated with the communication service but the QoS may not be adequate to the known communication load placed upon the communication path . In this case assuming the known communication load is typical of the communication needs of the subscriber the subscriber may decide to upgrade their communication service. It may be common for subscribers to underestimate their communication needs and experience poor communication services as a result of an under scoped SLA. The system and method of the present disclosure may provide transparency into the communication service which promotes the subscriber right sizing the SLAs associated with their communication services.

One skilled in the art will readily understand that the method depicted in may be useful to employees of the provider of the communication service for example customer facing employees of the provider of the communication service and may amend the method description above to be practiced by the employees of the provider of the communication service.

Some portions of the system described above may be implemented on any general purpose computer with sufficient processing power memory resources and network throughput capability to handle the necessary workload placed upon it. illustrates a typical general purpose computer system suitable for implementing one or more embodiments disclosed herein. The computer system includes a processor which may be referred to as a central processor unit or CPU that is in communication with memory devices including secondary storage read only memory ROM random access memory RAM input output I O devices and network connectivity devices . The processor may be implemented as one or more CPU chips.

The secondary storage is typically comprised of one or more disk drives or tape drives and is used for non volatile storage of data and as an over flow data storage device if RAM is not large enough to hold all working data. Secondary storage may be used to store programs which are loaded into RAM when such programs are selected for execution. The ROM is used to store instructions and perhaps data which are read during program execution. ROM is a non volatile memory device which typically has a small memory capacity relative to the larger memory capacity of secondary storage. The RAM is used to store volatile data and perhaps to store instructions. Access to both ROM and RAM is typically faster than to secondary storage .

I O devices may include printers video monitors liquid crystal displays LCDs touch screen displays keyboards keypads switches dials mice track balls voice recognizers card readers paper tape readers or other well known input devices.

The network connectivity devices may take the form of modems modem banks ethernet cards universal serial bus USB interface cards serial interfaces token ring cards fiber distributed data interface FDDI cards wireless local area network WLAN cards radio transceiver cards such as code division multiple access CDMA and or global system for mobile communications GSM radio transceiver cards and other well known network devices. These network connectivity devices may enable the processor to communicate with an Internet or one or more intranets. With such a network connection it is contemplated that the processor might receive information from the network or might output information to the network in the course of performing the above described method steps. Such information which is often represented as a sequence of instructions to be executed using processor may be received from and outputted to the network for example in the form of a computer data signal embodied in a carrier wave

Such information which may include data or instructions to be executed using processor for example may be received from and outputted to the network for example in the form of a computer data baseband signal or signal embodied in a carrier wave. The baseband signal or signal embodied in the carrier wave generated by the network connectivity devices may propagate in or on the surface of electrical conductors in coaxial cables in waveguides in optical media for example optical fiber or in the air or free space. The information contained in the baseband signal or signal embedded in the carrier wave may be ordered according to different sequences as may be desirable for either processing or generating the information or transmitting or receiving the information. The baseband signal or signal embedded in the carrier wave or other types of signals currently used or hereafter developed referred to herein as the transmission medium may be generated according to several methods well known to one skilled in the art.

The processor executes instructions codes computer programs scripts which it accesses from hard disk floppy disk optical disk these various disk based systems may all be considered secondary storage ROM RAM or the network connectivity devices .

While several embodiments have been provided in the present disclosure it should be understood that the disclosed systems and methods may be embodied in many other specific forms without departing from the spirit or scope of the present disclosure. The present examples are to be considered as illustrative and not restrictive and the intention is not to be limited to the details given herein. For example the various elements or components may be combined or integrated in another system or certain features may be omitted or not implemented.

Also techniques systems subsystems and methods described and illustrated in the various embodiments as discrete or separate may be combined or integrated with other systems modules techniques or methods without departing from the scope of the present disclosure. Other items shown or discussed as directly coupled or communicating with each other may be indirectly coupled or communicating through some interface device or intermediate component whether electrically mechanically or otherwise. Other examples of changes substitutions and alterations are ascertainable by one skilled in the art and could be made without departing from the spirit and scope disclosed herein.

