---

title: Wireless communication apparatus and wireless communication method
abstract: When a native application and a downloaded application installed on a mobile equipment are simultaneously executed by multitask and when these applications try to use short-range wireless communication simultaneously, the short-range wireless communication may be unavailable because of restrictions on communication resources. An object of the invention is to provide a wireless communication apparatus and wireless communication method capable of performing communication management to permit the applications to use the short-range wireless communication, without a need for a complicated operation of especially terminating an application to release a communication resource in the foregoing case. A communication profile storage  stores combinations of communication profiles which can be simultaneously executed. A short-range wireless communication management unit  determines whether a communication process according to an instruction from an external application  can be executed, based on the communication profiles. When the short-range wireless communication process is determined not to be executed, a disconnection unit  notifies the external application  of unavailability of the communication.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07773989&OS=07773989&RS=07773989
owner: NTT DoCoMo, Inc.
number: 07773989
owner_city: Tokyo
owner_country: JP
publication_date: 20071019
---
The present invention relates to a wireless communication apparatus and wireless communication method for performing short range wireless communication.

The recent mobile equipment is able to perform communication using the short range wireless communication such as Bluetooth. For example as described in Patent Document 1 it is known that the mobile equipment is connected for communication with a headphone or the like by Bluetooth to enable a hands free telephone call.

The multitasking feature has been developed for the recent mobile equipment and for example it can be considered that multiple tasks are simultaneously carried out to implement Bluetooth communication by a native application preinstalled on the mobile equipment before shipment of the mobile equipment and Bluetooth communication by a downloaded application such as i Appli .

Since Bluetooth communication resources a frequency band a memory in the mobile equipment for communication etc. are limited there are however cases where different types of short range wireless communication cannot be simultaneously executed. In such cases it can be contemplated that priority is given to communication by an application having established an earlier communication connection but many downloaded applications such as i Appli are often created based on the assumption that the Bluetooth communication is available which results in posing a problem that a state managed by an application is different from an actual state. For this reason a downloaded application such as i Appli can or cannot operate as programmed depending upon states of communication resources. In this case the downloaded application is hard to use and also hard to create. Furthermore whether the Bluetooth communication is available or not is not determined unless the downloaded application such as i Appli is activated. Therefore when the Bluetooth communication is found to be unavailable after activation of the downloaded application a complicated operation is required as follows for example the application is once terminated to disconnect the Bluetooth communication and then the downloaded application is activated again.

The difference in state management can occur for example in a case where an application is activated by an instruction from an external network to execute the Bluetooth communication. In this case the application operates to perform the Bluetooth communication and manages its operation state but there are practical cases where communication is unavailable because of a lack in the communication resources for the Bluetooth communication. In this case while the external network sends the request for communication by the activation instruction to the application the application fails to perform the communication and this results in failure in desired data acquisition or processing. Therefore there is the problem that the external network side is unable to manage the state of the application correctly.

On the other hand it can also be contemplated that when activation of an application is instructed by an instruction from the external network priority is given to the Bluetooth communication by the application. In that case however communication by a native application having established an earlier communication connection will be disconnected. For example when a user is in use of hands free communication by Bluetooth there occurs an event that the hands free communication is suddenly interrupted. Therefore a problem will arise if communication is disconnected by the instruction from the external network.

In order to solve the above described problems an object of the present invention is therefore to provide a wireless communication apparatus and wireless communication method capable of performing communication management without inconsistency between a communication state managed by an application and an actual state even in a case where communication by the application is unavailable.

In order to solve the aforementioned problems a wireless communication apparatus of the present invention comprises a plurality of applications wireless communication unit for performing short range wireless communication based on instructions from the applications storage unit for storing a table in which combinations of communication profiles allowing simultaneous communication for each of the applications are described and a current use state of execution of the short range wireless communication determining unit for with an instruction from one application determining whether the short range wireless communication is available for the one application based on the combinations of communication profiles described in the table stored in the storage unit and the current use state of the short range wireless communication and notifying unit for notifying the one application that the short range wireless communication is unavailable when the determining unit determines that the short range wireless communication is not available for the one application.

A wireless communication method of the present invention is a wireless communication method of a wireless communication apparatus capable of executing a plurality of applications the wireless communication method comprising a wireless communication step of performing short range wireless communication based on instructions from the applications a determination step of with an instruction from one application determining whether the short range wireless communication is available for the one application based on combinations of communication profiles allowing simultaneous use for each of the applications which are preliminarily stored in a table and a current use state of the short range wireless communication and a notification step of notifying the one application that the short range wireless communication is unavailable when it is determined in the determination step that the short range wireless communication is not available for the one application.

This configuration permits the following operation when one application gives an instruction such as a connection or confirmation of short range wireless communication based on the combinations of communication profiles for a plurality of applications to simultaneously execute the short range wireless communication and the current use state of short range wireless communication whether the short range wireless communication by the one application is available can be determined based on the available combinations of communication profiles held in mobile equipment. When it is determined that the short range wireless communication by the one application is not available the one application is notified that the short range wireless communication is unavailable.

This can avoid a situation in which one application fails to establish a connection of short range wireless communication in spite of an instruction of the connection of short range wireless communication and can also avoid inconsistency between the state instructed by the application and the actual state which can improve convenience of the downloaded application such as i Appli and ease of programming attendant on the state management. The same processing is also performed in a confirmation process to confirm the availability of a connection whereby in an unavailable case of the connection the fact can be notified of.

The wireless communication apparatus of the present invention is preferably configured as follows the storage unit stores a total number of communication connections by the short range wireless communication as a communication profile and the determining unit determines whether the short range wireless communication is available for the one application based on the number of connections by the wireless communication.

This configuration permits whether the short range wireless communication is available for one application to be determined based on the number of connections by the wireless communication. The communication management can also be performed not only based on the communication profiles such as wireless communication resources but also based on the number of connections. This can prevent a failure in operation of an application due to increase in the number of connections and can avoid the inconsistency between the state instructed by the application and the actual state more reliably.

The wireless communication apparatus of the present invention is preferably configured as follows the one application receives an instruction of activation through a network.

The wireless communication apparatus of the present invention is preferably configured as follows when any communication connection by the short range wireless communication is not available a notification of unavailability of connection is sent to the network.

These configurations permit the following operation when one application receives an instruction of activation through the network and when any communication connection by the short range wireless communication is not available the notification of the unavailability of connection is sent to the network. This permits the network to be also notified of the communication state of the short range wireless communication of the one application and can avoid the inconsistency between the state instructed by the network side and the actual state.

The wireless communication apparatus of the present invention is preferably configured so as to further comprise informing unit for informing a user that the short range wireless communication by an application currently in the short range wireless communication should be disconnected.

This configuration permits the user to be informed that the short range wireless communication by the application currently in the short range wireless communication should be disconnected whereby the short range wireless communication can be disconnected based on a user s permission.

The wireless communication apparatus of the present invention is preferably configured to further comprise display unit for displaying applications under connection in accordance with a disconnection request and disconnecting unit for disconnecting a connection of an application selected from the applications displayed by the display unit.

This configuration permits the following operation applications under connection are displayed according to a disconnection request and a connection of an application selected among the displayed applications is disconnected whereby the short range wireless communication connection due to a malfunction or the like can be disconnected. Since the user is allowed to select the disconnection the user is made conscious of the status of utilization of the short range wireless communication. Furthermore this configuration makes it easier to restart the disconnected short range wireless communication by an application after completion of wireless communication by one application and can improve the convenience of wireless communication by applications.

The wireless communication apparatus of the present invention further comprises connection switch unit for executing a wireless communication connection by the short range wireless communication unit in another application different from the one application after disconnection by the disconnecting unit.

This configuration permits the apparatus to execute the wireless communication connection in another application different from the one application and to implement the function of the one application substantially and can provide the wireless communication function easier for the user to use.

The wireless communication apparatus of the present invention is preferably configured as follows the one application sends to the determining unit an inquiry about whether the short range wireless communication is available using an application programming interface and with the inquiry the determining unit determines whether the short range wireless communication by the one application is available.

This configuration permits one application to make the inquiry about the availability of short range wireless communication using the API Application Programming Interface and can facilitate control of connection by the short range wireless communication.

The wireless communication apparatus of the present invention is preferably configured as follows when the user selects a disconnection the one application gives an instruction to instruct the disconnecting unit to perform the disconnection using an application programming interface and with the instruction the disconnecting unit disconnects the connection based on the short range wireless communication by the one application.

This configuration permits one application to disconnect the short range wireless communication using the API Application Programming Interface and can facilitate control of disconnection by the short range wireless communication.

Another wireless communication apparatus of the present invention is a wireless communication apparatus comprising a plurality of applications wireless communication unit for performing short range wireless communication based on instructions from the applications storage unit for storing a table in which combinations of communication profiles allowing simultaneous communication for each of the applications are described and a current use state of execution of the short range wireless communication and determining unit for with an instruction from one application determining whether the short range wireless communication is available for the one application based on the combinations of communication profiles described in the table stored in the storage unit and the current use state of the short range wireless communication wherein the storage unit stores application correlation information to indicate a correlation between one application and an application functionally similar to the one application and wherein when the determining unit determines that the short range wireless communication is unavailable for the one application the application functionally similar to the one application is activated using the application correlation information stored in the storage unit.

The wireless communication apparatus of the present invention is preferably configured as follows the disconnecting unit does not execute a disconnection of the short range wireless communication by an application for which a setting to inhibit the disconnection of wireless communication during the communication is preliminarily configured.

The wireless communication apparatus of the present invention is preferably configured as follows the display unit does not display an application for which a setting to inhibit a disconnection of wireless communication during the communication is preliminarily configured.

The present invention successfully avoids the situation in which one application fails to establish a connection of short range wireless communication in spite of an instruction of the connection of short range wireless communication and also avoids the inconsistency between the state instructed by the application and the actual state.

The present invention can be readily understood in view of the following detailed description with reference to the accompanying drawings presented for an embodiment. Subsequently the embodiment of the present invention will be described with reference to the accompanying drawings. The same portions will be denoted by the same reference symbols as much as possible without redundant description.

The portable information processing terminal of the present embodiment is for example an information processing terminal for delivery management used by a delivery company and the server can acquire a delivery record stored in this portable information processing terminal by accessing the portable information processing terminal . When the server establishes a communication connection to the mobile equipment and accesses the mobile equipment the mobile equipment activates an application for delivery management installed inside. Then this application establishes a communication connection to the portable information processing terminal by short range wireless communication to acquire the delivery record and can transmit the acquired delivery record to the server .

The mobile equipment can use the short range wireless communication to communicate with speaker system for listening to music and with hands free call device for hands free telephone call.

The mobile equipment can wirelessly communicate with portable information processing terminal speaker system and hands free call device by the short range wireless communication but simultaneously connectable terminals are limited in order to avoid duplication of frequencies by wireless communication. The following will describe the control about simultaneous connections.

The functions of this mobile equipment can be implemented by the hardware shown in . is a hardware configuration diagram of mobile equipment . The mobile equipment is physically constructed as a cell phone incorporating CPU RAM and ROM being main storage devices operation unit such as a keyboard and a mouse being input devices wireless communication module display short range wireless communication module and so on as shown in . Each of the functions described with is implemented by retrieving a predetermined computer software onto the hardware such as the CPU RAM etc. shown in operating the wireless communication module operation unit display and short range wireless communication module under control of CPU and reading or writing data from or into RAM . Each of functional blocks will be described below on the basis of the functional blocks shown in .

The task switch unit is a part that performs a control to effect a switch between external application and native application based on a user s operation. The mobile equipment of the present embodiment can activate a plurality of applications simultaneously by multitask control and which application should be made active can be realized according to the switch control by the task switch unit .

The external application is an application downloaded and installed through the wireless communication unit from an external site in accordance with an operation by the user of mobile equipment and is a so called i Appli . An example of this external application is a delivery record management application to be used by a delivery company. This delivery record management application is activated based on an instruction from server and accesses the portable information processing terminal . Then the application acquires a delivery record stored in the portable information processing terminal and returns the delivery record through the wireless communication unit to server . This external application does not have to be limited to the delivery record management application but various types of applications may be installed as external application .

The native application is an application preliminarily installed in the mobile equipment . For example it can be a music application for a music player or a hands free application for hands free telephone call the native application is activated by a user s operation and thereafter outputs music information designated by the user to speaker system or outputs call voice to hands free call device thereby implementing reproduction in each device. This native application does not have to be limited to the music application or the hands free application but a plurality of applications may be installed as native application .

The short range wireless communication management unit is a part that instructs the connection unit or the disconnection unit to perform a connection process or a disconnection process for the short range wireless communication unit to execute short range wireless communication or to perform disconnection of the communication in accordance with an instruction from the external application or the native application .

The short range wireless communication management unit is also a part that determines applications that can be simultaneously activated based on combinations of communication profiles stored in communication profile storage and use state information stored in use state storage . The short range wireless communication management unit can determine the availability of connection of short range wireless communication for an application at a new connection instruction based on the determination.

For example when an application for which no wireless resource is available e.g. an application in duplication of a radio frequency band is to be activated the short range wireless communication unit cannot perform the short range wireless communication by the application at the same time and thus the short range wireless communication management unit outputs an instruction to instruct the disconnection unit to disconnect the short range wireless communication by an application currently under connection. When the total number of communication connections exceeds a maximum number of communication connections the short range wireless communication management unit also outputs the same instruction to instruct the disconnection unit to disconnect the short range wireless communication by the application currently under connection.

The short range wireless communication management unit can also perform the following control when it determines that the wireless communication by the external application cannot be performed and instructs the disconnection unit to perform the disconnection an application or native application functionally similar to the external application is activated to execute wireless communication. For performing this control it is necessary to make the communication profile storage or another storage store information indicating the correlation between the external application and the application functionally similar to this external application and specify the application to be activated instead when the wireless communication by external application cannot be performed. The application to be activated instead must be an application free of duplication of wireless communication resources.

The short range wireless communication management unit is preferably installed as an API Application Programming Interface in the mobile equipment . This short range wireless communication management unit performs an inquiry process about availability of short range wireless communication in response to an inquiry from external application and notifies the external application of the result thereof.

The communication profile storage is a part that stores combinations of simultaneously usable communication profiles. For example as shown in the communication profile storage stores a table of combinations of communication profiles that can be simultaneously activated for example combination indicates that it is possible to simultaneously use an audio communication profile used by a music application and a hands free communication profile used by a hands free application. The use state storage stores a communication profile under use for example as a flag and thereby stores a use state. In addition combination indicates that it is possible to simultaneously use a music application and a terminal management application. These combinations are defined by a manufacturer of mobile equipment so as to avoid simultaneous use of applications causing duplication of wireless communication frequencies. This table can be updated for example by an update of firmware of mobile equipment by Air Download. Besides these pieces of information the maximum number of communication connections for the short range wireless communication may also be stored as a threshold. The short range wireless communication management unit may also be configured to determine the availability of short range wireless communication from external application based on this maximum number of communication connections.

The use state storage is a part that stores the communication profiles and total number of communication connections used by applications currently under the short range wireless communication when an instruction to execute the short range wireless communication is given by the short range wireless communication management unit . For example where a music application being the native application is activated the short range wireless communication management unit lets the use state storage store the communication profile used by the music application and lets the use state storage store a flag in the same table as in the communication profile storage . When the maximum number of communication connections is stored as a threshold in the use state storage the total number of communication connections is incremented by one.

The connection unit is a part that outputs an instruction to instruct the short range wireless communication unit to execute a communication process when receiving a communication instruction from the short range wireless communication management unit . When the connection unit fails to perform the connection process it notifies the external application or native application of the fact and makes the display unit display it.

The disconnection unit is a part that outputs an instruction to instruct the display unit to inform the user of a disconnection instruction when receiving the disconnection instruction from the short range wireless communication management unit . Thereafter if a disconnection instruction is given by a user s operation the disconnection unit outputs an instruction to instruct the short range wireless communication unit to execute a disconnection process of communication. When the disconnection unit fails to perform the disconnection process it notifies the external application of the fact via the short range wireless communication management unit or directly.

The disconnection unit is preferably installed as an API Application Programming Interface in the mobile equipment . This disconnection unit performs the disconnection process of short range wireless communication in accordance with a disconnection instruction from the external application and notifies the external application of the result thereof.

The display unit is a part that displays information indicating active applications e.g. names of applications or the like in order to let the user determine which application should be disconnected prior to execution of the disconnection instruction by the disconnection unit and is provided with an operation button for user s selection. The user uses this operation button to instruct a confirmation request for short range wireless communication and can make the short range wireless communication management unit determine the availability of connection of short range wireless communication.

The short range wireless communication unit is a part that executes a communication process by the short range wireless communication e.g. Bluetooth communication and can perform the short range wireless communication with portable information processing terminal speaker system or hands free call device in accordance with an instruction from external application or native application .

The wireless communication unit is a part that performs wireless communication with base station to make a communication connection to a public mobile communication network and this wireless communication unit can communicate with server through the public mobile communication network. The external application can receive an activation instruction through this wireless communication unit become activated and execute the short range wireless communication.

As the mobile equipment is configured as described above it can prevent simultaneous execution of applications causing duplication of wireless communication frequencies and avoid inconsistency between the process state instructed by the application and the actual state due to shortage of wireless communication resources. It can also prevent disconnection of wireless communication before the user is informed.

Next the operation of mobile equipment will be described. is a flowchart showing an operation executed when the external application of mobile equipment sends a request for the short range wireless communication to the short range wireless communication unit . This operation is based on the presumption that for example while a music application is in the short range wireless communication the server performs a control to access mobile equipment at regular or irregular intervals to activate the external application . For example this operation is processing executed where the server is a delivery management server and tries to acquire a delivery record through mobile equipment from portable information processing terminal storing the delivery record. Without having to be limited to this it is also possible to adopt a configuration wherein the external application requests the short range wireless communication in accordance with a user s operation.

First the external application is activated to instruct the short range wireless communication unit to perform the short range wireless communication short range wireless communication step . Then the short range wireless communication management unit detects this instruction. Then this short range wireless communication management unit performs an inquiry process to inquire about the communication profiles stored in the communication profile storage and the use state information stored in the use state storage S and then acquires the communication profiles and use state information S . Then the short range wireless communication management unit determines whether the short range wireless communication by the short range wireless communication unit is available S determination step .

When it is determined herein that the short range wireless communication is unavailable applications under connection are displayed on the display unit S and the user is inquired as to whether the short range wireless communication should be disconnected S . Then the disconnection unit determines whether the user selected disconnection S . When the disconnection unit selects a disconnection process the disconnection unit then determines whether the disconnection process based on the user s disconnection selection is completed S . When the disconnection process is completed the flow goes to S to perform an update process of the use state information stored in the use state storage S .

When the disconnection process is not completed for example when it is preliminarily defined that the disconnection process halfway is not accepted depending upon a type of the application the flow goes to S without completion of the disconnection process. When in S the user does not select the disconnection of short range wireless communication already executed by native application or when in S the disconnection of short range wireless communication already executed is not completed the wireless communication is not executed because the short range wireless communication by external application is duplicately carried out. Then the disconnection unit notifies the external application of the failure in connection and the result is displayed on the display unit to inform the user thereof S notification step . The external application receiving this notification recognizes the failure in the connection to the portable information processing terminal and notifies the server of the failure in connection according to need using the wireless communication unit .

When in S the short range wireless communication management unit determines that the connection of short range wireless communication by the short range wireless communication unit is available S it is determined whether the connection unit succeeded in the communication connection by the short range wireless communication unit S . When it is determined that the connection of short range wireless communication was successful the short range wireless communication management unit updates the use state information stored in the use state storage S . When it is determined that the communication connection was unsuccessful the external application is notified that the communication connection by short range wireless communication unit was unsuccessful and the fact is displayed on the display unit S .

As the mobile equipment operates in this manner even if the connection was unsuccessful by the short range wireless communication to the portable information processing terminal the external application can recognize the fact. Then it can notify the server of the fact through the use of the wireless communication unit and thus no difference occurs in acquisition of information between server and external application . Namely the following misjudgment can be prevented the server sends an information acquisition request to the mobile equipment a timeout occurs without acquisition of information because of the absence of the wireless communication resource in the mobile equipment and the server determines that there is no information e.g. no delivery record to be sent in the portable information processing terminal . The system is configured so that the external application connects with server but without having to be limited to this the above described processing may be so arranged that the native application establishes a communication connection with the portable information processing terminal and notifies the server of the result of the connection.

The above described processing is configured to perform the connection of short range wireless communication by external application or the disconnection thereof but the processing can also be configured so that only the notification to external application is performed without execution of this short range wireless communication connection. For example the processing may be arranged as follows when the server is a delivery management server and is about to acquire through mobile equipment from the portable information processing terminal storing a delivery record the delivery record the server first confirms whether the short range wireless communication by external application is available. It is also possible to arrange the processing so that the external application makes a confirmation request for short range wireless communication in accordance with a user s operation.

The short range wireless communication management unit determines whether the connection of short range wireless communication by external application as a target of the foregoing confirmation request is available based on the acquired communication profiles and use state information S . Then the external application is notified of the result of the determination herein and the result is also displayed on the display unit to inform the user S .

As the external application receives this notification it can confirm whether the short range wireless communication by the external application is available. In the case where the external application made the confirmation request in accordance with an instruction from server the server may be notified of whether the short range wireless communication by external application is available. This notification permits the server to determine whether the external application is able to acquire information by the short range wireless communication and this eliminates a recognition gap of processing contents between server and the external application.

The following will describe an operation executed when the external application makes a disconnection request to disconnect a communication connection of short range wireless communication by native application . is a flowchart showing the operation of mobile equipment executed when the external application makes a disconnection request to disconnect a communication connection of short range wireless communication by native application .

First the external application accepts a disconnection request of short range wireless communication by native application S . This acceptance may be implemented based on a user s operation on the external application or based on an instruction sent from the server or may be automatically carried out by the external application . The significance of the transmission from server or the automatic execution is that the user is regularly encouraged to disconnect use of the short range wireless communication and if the short range wireless communication is executed by a malfunction the user can be notified of the fact at an early stage.

Next applications under connection are displayed on the display unit in accordance with the disconnection request and the user is made to select an application to be disconnected S . Then the disconnection unit determines whether the user selected a disconnection of native application S . When it is determined herein that the user selected the disconnection it is determined whether the disconnection process was normally performed S . Specifically when a predetermined setting is such that the disconnection of wireless communication is inhibited during communication of native application the disconnection process is not normally carried out. The mobile equipment may also be configured so that a native application with the setting to inhibit the disconnection of wireless communication is not displayed as an application to be disconnected on the display unit . This configuration can prevent a native application without the setting to inhibit the disconnection of wireless communication and a native application with the setting to inhibit the disconnection of wireless communication from being displayed as mixed on the display unit and prevent the user from selecting the native application with the setting to inhibit the disconnection of wireless communication.

When the disconnection process is normally carried out in S a process of updating the use state information in the use state storage is carried out S . When the disconnection process is not performed in S or when disconnection is not selected in S the external application is notified of the failure in disconnection S . The processing may be configured so that the user is notified of the failure.

When the external application implements the disconnection of short range wireless communication by native application in this manner it is feasible to avoid such a complicated work as disconnection of short range wireless communication based on a malfunction or an operation of once terminating the external application then terminating the native application and disconnecting the short range wireless communication thereof and again activating the external application to make the short range wireless communication available.

The below will describe the action and effect of mobile equipment of the present embodiment. The mobile equipment of the present embodiment is configured so that the communication profile storage stores the table in which the combinations of communication profiles available for simultaneous execution of short range wireless communication are described and the use state storage stores the current use state of short range wireless communication. When the mobile equipment has for example an instruction of a connection or confirmation of short range wireless communication from external application the short range wireless communication management unit is able to determine whether the short range wireless communication by application is available based on the communication profiles. When it is determined that the short range wireless communication by external application is not available one application is notified that the short range wireless communication is unavailable.

This can avoid the situation in which one application gives an instruction of a connection of short range wireless communication but fails to establish the connection of short range wireless communication avoid the inconsistency between the state instructed by the application and the actual state and improve convenience of the downloaded application such as i Appli and ease of programming appendant to the state management. The same processing can be performed in the confirmation process to confirm whether a connection is possible whereby when the connection is impossible the fact can be notified of it can also avoid the inconsistency between the state instructed by the application and the actual state.

The mobile equipment is able to determine whether the short range wireless communication by one application is available based on the number of connections by short range wireless communication stored in the communication profile storage . This allows the equipment to perform the communication management not only based on the communication profiles such as wireless communication resources but also based on the number of connections whereby it is feasible to avoid a situation in which an application fails to operate due to increase in the number of connections and to avoid the inconsistency between the state instructed by the application and the actual state more reliably.

The external application in mobile equipment is able to accept an instruction of activation through the network and if the communication connection by short range wireless communication is unavailable it is able to notify that the connection is unavailable to the network through the use of the wireless communication unit . This permits the network to be also notified of the communication state of short range wireless communication of external application and can avoid the inconsistency between the state instructed on the network side and the actual state.

The mobile equipment is configured to display on the display unit that the short range wireless communication by external application currently under short range wireless communication should be disconnected whereby the user can be informed of the fact and the short range wireless communication can be disconnected in accordance with a user s permission.

The mobile equipment is able to display applications under connection on the display unit in response to a disconnection request and to disconnect a connection of an application selected from external application and native application displayed on the display unit whereby the short range wireless communication connection due to a malfunction or the like can be disconnected.

The mobile equipment is configured so that when the disconnection unit disconnects the external application because of shortage of wireless communication resources the wireless communication connection by short range wireless communication unit can be executed in another application different from the external application . This permits the wireless communication connection to be executed in another application different from the external application and the function of external application can be substantially implemented thus providing the wireless communication function easier for the user to use.

In the mobile equipment the external application can make an inquiry about the availability of short range wireless communication using the API Application Programming Interface which can facilitate the control of connection by short range wireless communication.

In the mobile equipment the external application can perform the disconnection of short range wireless communication using the API Application Programming Interface which can facilitate the control of disconnection by short range wireless communication.

