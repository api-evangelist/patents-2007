---

title: Method and system for medium access control (MAC) rate selection
abstract: Aspects of a method and system for medium access control (MAC) rate selection are presented. Aspects of the system may include at least one processor that enables selection of MAC layer parameter values and/or PHY layer parameter values, to maintain a rate of data transmission of at least one transmitted signal, which is no greater than a selected data transfer rate. The error rate of the one or more transmitted signals may be maintained within a specified range based on the selection for varying signal to noise (SNR) ratios.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08144608&OS=08144608&RS=08144608
owner: Broadcom Corporation
number: 08144608
owner_city: Irvine
owner_country: US
publication_date: 20070307
---
This application makes reference to claims priority to and claims the benefit of U.S. Provisional Application Ser. No. 60 885 964 filed Jan. 22 2007 which is incorporated herein by reference in its entirety.

This application makes reference to U.S. application Ser. No. 11 327 690 filed Jan. 6 2006 which is hereby incorporated herein by reference in its entirety.

Certain embodiments of the invention relate to multimedia communications. More specifically certain embodiments of the invention relate to a method and system for medium access control MAC rate selection.

In a communication network data may be transmitted via a network between a transmitting terminal and a receiving terminal. The network may comprise a plurality of communications media and communications devices that facilitate the transfer of data in the form of messages packets or frames between a transmitting terminal and a receiving terminal. Various protocols may be utilized to transmit the data. Some transport layer data protocols may control the quantity of data that may be transmitted during a time interval as measured in bits per second bps for example. The transmission control protocol TCP may be considered to be an example of one such protocol. TCP may limit the amount of data that is transmitted during a time interval based on a congestion window and or a slow start algorithm. At the beginning of transmission of a data flow the congestion window size may be set to an initial value. This may result in a relatively small amount of data being transmitted from a transmitting terminal to a receiving terminal. The receiving terminal may subsequently communicate an acknowledgement upon receipt of the data that was transmitted by the transmitting terminal.

Upon receipt of the acknowledgement the transmitting terminal may increase the value associated with the congestion window to a number larger than the initial window size and transmit subsequent data based on the larger window size of the congestion window. This may result in a larger amount of data being transmitted than during a comparable time interval in which the value associated with the congestion window is smaller. A larger congestion window may also result in a higher data transfer rate between the transmitting terminal and the receiving terminal. The receiving terminal may communicate subsequent acknowledgements upon receipt of subsequent information. The transmitting terminal may continue to increase the size of the congestion window upon receipt of a subsequent acknowledgement.

In instances when the transmitting terminal does not receive a corresponding acknowledgement the transmitting terminal may retransmit or resend previously transmitted data. In addition the transmitting terminal may determine that congestion may exist in the network resulting in the previously transmitted data not being received by the receiving terminal. The previously transmitted data may be considered by the transmitting terminal to be lost . A bit error rate BER packet error rate PER or frame error rate FER may be used as a measure of the lost data. An increase in the BER PER and or FER may result in an increase in the quantity of transmitted data that is lost.

In response to a determination of lost data the transmitting terminal may also reduce the size of the congestion window. The reduction in the size of the congestion window may result in a corresponding reduction in the data transfer rate between the transmitting terminal and the receiving terminal. Once reduced the size of the congestion window may be subsequently increased.

A mechanism by which the congestion window size may be utilized to limit the amount of data that may be transmitted during a time interval is a sliding window protocol. In a sliding window protocol the transmitted data may be sequence numbered. For a given current congestion window size CW the transmitting terminal may transmit a number of data blocks for example packets of data where the sequence number SEQ is within the range SEQ SEQ SEQ CW where SEQis a sequence number for an unacknowledged transmitted data block. When the sequence number for a structure is SEQ SEQ CW the transmitting terminal may delay transmitting the data until one or more previously transmitted blocks or portions of the data have been acknowledged such that the condition SEQ SEQ CWis met. During a slow start the current congestion window size may be such that the transmitting terminal may transmit a single data block and wait for the transmitted data block to be acknowledged before transmitting subsequent data blocks. A procedure in which a transmitting station may transmit a single data block and wait for the transmitted data block to be acknowledged before transmitting a subsequent data block may be referred to as a stop and wait protocol.

Some data link layer data protocols may also control a data transfer rate. The MAC layer as specified in resolution 802.11n from the Institute of Electrical and Electronics Engineers IEEE may be considered to be an example of one such protocol. The MAC layer may utilize a stop and wait protocol. The MAC layer parameters may influence the data transfer rate. For example a contention window parameter may be utilized to determine a number of frame retransmission attempts that may occur if the transmitting terminal does not receive an acknowledgement from the receiving terminal in response to a first transmission attempt. A subsequent frame may not be transmitted until the current frame has been acknowledged or until a maximum number of retransmission attempts based on the contention window parameter have been performed. In some multiple input multiple output MIMO wireless communication systems such as specified in resolution 802.11n from the Institute of Electrical and Electronics Engineers IEEE an exemplary MAC layer parameter may be determined base on an antenna selection procedure in which each of a number of NSS 1 transmitted data streams where NSS may refer to the number of data streams may be transmitted via a selected one or more transmitting antennas among a plurality of NTX 1 transmitting antennas where NTX may refer to the number of transmitting antennas .

The BER PER and or FER may be influenced by values for one or more physical PHY layer parameters utilized by the transmitting station. Examples of PHY layer parameters may comprise a coding rate utilized for binary convolutional coding BCC and a modulation type such as 64 level quadrature amplitude modulation 64 QAM .

When a coding rate is decreased from to for example the data transfer rate may decrease while the BER PER and or FER may also decrease. When the coding rate is increased from to for example the data transfer rate may increase while the BER PER and or FER may also increase. When the modulation type utilized is changed from 64 QAM to 256 QAM the data transfer rate may increase while the BER PER and or FER may also increase. When the modulation type is changed from 64 QAM to binary phase shift keying BPSK the data transfer rate may decrease while the BER PER and or FER may also decrease. In some MIMO systems for which NSS NTX the data rate may decrease when NSS

A maximum data transfer rate for a terminal may be determined based on limitations imposed by the communication medium through which the transmitted data is sent. The maximum data transfer rated supported by the communication medium may be referred to as wire speed. 

For some applications which utilized the transmitting terminal to transmit data via the network the peak data rate required may be less than wire speed. Consequently it may not be necessary to utilize PHY layer parameters to achieve a maximum data rate for the transmitting terminal. Furthermore for such applications that transmit data under real time constraints such as streaming video voice over Internet protocol VOIP retransmission of data may be undesirable due to latency delays associated with the retransmissions.

Further limitations and disadvantages of conventional and traditional approaches will become apparent to one of skill in the art through comparison of such systems with some aspects of the present invention as set forth in the remainder of the present application with reference to the drawings.

A system and or method is provided for medium access control MAC rate selection substantially as shown in and or described in connection with at least one of the figures as set forth more completely in the claims.

These and other advantages aspects and novel features of the present invention as well as details of an illustrated embodiment thereof will be more fully understood from the following description and drawings.

Certain embodiments of the invention may be found in a method and system for medium access control MAC rate selection. Aspects of a system for handling multimedia information in a communication system may comprise a transmitter that enables control of a MAC layer and or a PHY layer in a wireless communication device to select MAC layer and or PHY layer parameter values. MAC layer and or PHY layer parameter values may be selected to enable a transmitting terminal to transmit data at a selected data transfer rate while achieving error rate performance within a specified range. The error rate performance may be measured based on a bit error rate BER packet error rate PER and or frame error rate FER for example. In various embodiments of the invention the setting PHY layer and or MAC layer parameter values to minimize BER and or FER at the PHY layer and or MAC layer may reduce the likelihood of TCP slow start events.

The mobile computing system may comprise a MIMO communication system which enables the mobile computing system to simultaneously transmit data via one or more transmitted signals and or to simultaneously receive data via one or more received signals. The mobile computing system may utilize a wireless communication medium. The mobile computing system may be utilized by a user to execute programs and or applications for example email world wide web WWW browsers database access programs voice of Internet protocol VOIP and or media recorders and players.

The streaming media server may store one or more video programs audio programs multimedia programs and or data. The streaming media server may be communicatively coupled to a MIMO communication system which enables the streaming media server to simultaneously transmit data and or multimedia streams via one or more transmitted signals and and or to simultaneously receive data and or multimedia streams via one or more received signals and

The mobile telephone may be utilized to transmit and or receive voice data and or multimedia communications via wireless communication medium. In addition the mobile telephone may be utilized to transmit and or receive text messages and or to perform WWW browsing.

The Smartphone may be utilized to perform functions similar to those described for the mobile telephone . The Smartphone may be utilized to transmit or receive a signal . In addition the Smartphone may be utilized to perform handheld computer functions such as in a personal digital assistant PDA . Exemplary PDA functions performed by a Smartphone may comprise managing name and address databases personal calendars and to do lists and note taking.

The signals and or may be transmitted via a shared wireless communication medium. The signal may be subject to interference from signals and . Furthermore the signal may be subject to interference from signals and . Similarly the signal may be subject to interference from signals and . A transmitting MIMO communication system may utilize beamforming to enable cancelling of interference between the signals and at a MIMO receiver. The signals and may be transmitted via a different frequency band from the signal to avoid interference. However when a plurality of transmitting MIMO systems attempt to simultaneously transmit signals via a common frequency or frequency range there may be interference between the transmitted signals. Such an episode of interference may be referred to as a collision. A collision may be detected at the MAC layer within the MIMO communication system . Data transmitted via MAC frames for example may be modified or corrupted during a collision. The MAC layer may implement strategies for example retry attempts based on a congestion window parameter in response to a collision.

Even in the absence of interference and or collisions data transmitted via the signals and or may be corrupted during transmission due to nonlinear characteristics of the wireless communications medium. Such nonlinearities may be referred to as channel fading. In a flat fading channel the nonlinear characteristics of the wireless communication medium may be substantially similar across a range of frequencies. In a selective fading channel the nonlinear characteristics of the wireless communication medium may vary across the range of frequencies. Fading may result in bit errors in the transmitted data as detected at a receiving terminal for example the mobile computing system . The rate at which bit errors occur may be measured by a bit error rate BER statistic. Bit errors in received data may result in frame errors and or packet errors detected at the receiving terminal. The rate at which frame errors occur may be measured by a frame error rate FER statistic. The rate at which packet errors occur may be measured by a packet error rate PER statistic.

A transmitting terminal for example the MIMO communication system and or streaming media server may detect the occurrence of bit errors frame errors and or packet errors when the transmitting terminal does not receive an acknowledgement corresponding to a previously transmitted frame and or packet. The transmitting terminal may compute a FER and or PER based on the number of frames and or packets transmitted versus the number of frames and or packets for which corresponding acknowledgements were received. The transmitting terminal may also compute a data transfer rate as measured by bits per second bps for example based on the number of bits transmitted during a given time interval.

In various embodiments of the invention a user may select a data transfer rate which is to be utilized for transmitting voice multimedia and or data from a transmitting terminal. Based on the application being utilized a target BER FER and or PER range may be determined. The target range may comprise a range of acceptable error rates for the application. The transmitting terminal may transmit signals based on an initial set of PHY layer parameter values and or MAC layer parameter values. Exemplary PHY layer parameter may comprise coding rates modulation and modulation types. Exemplary MAC layer parameters may comprise contention window sizes.

The transmitting terminal may then compute BER FER and or PER based on transmitted data. The computed BER FER and or PER values may be compared to corresponding target BER FER and or PER values. When the computed BER FER and or PER values are within the corresponding target ranges the transmitting terminal may maintain current PHY layer parameters and or MAC layer parameters. When the computed BER FER and or PER values are not within the corresponding target ranges the transmitting terminal may select one or more new PHY layer parameter values and or MAC layer parameter values.

Various embodiments of the invention may be practiced in open loop systems in which the transmitting terminal computes BER FER and or PER values based on transmitted data and selects PHY layer parameters and or MAC layer parameters based on the computed values. Various embodiments of the invention may also be practiced in closed loop system in which the transmitting terminal receives feedback information from the receiving terminal. A closed loop system may be utilized in connection with an antenna selection procedure for example. The antenna selection procedure may enable selection of transmitting antennas to be utilized for transmitting selected data streams where the number of transmitting antennas is greater than the number of transmitted data streams NTX NSS for example.

The memory may enable storage and or retrieval of data that may be transmitted via one or more transmitting antennas . . . received via one or more receive antennas . . . and or storage of code that may enable control of the operation of the transceiver . In a MIMO system the number of transmitting antennas . . . may be determined based on the parameter NTX. In the MIMO system the number of receiving antennas . . . may be determined based on a parameter NRX. Each value NTX and NRX may be a number for example an integer.

The processor may enable digital receiver and or transmitter functions in accordance with applicable communications standards. These functions may comprise but are not limited to tasks performed at lower layers in a relevant protocol reference model. These lower layers may comprise the PHY layer and or the MAC layer. These tasks may further comprise the physical layer convergence procedure PLCP physical medium dependent PMD functions and associated layer management functions.

The receiver may enable digital receiver functions that may comprise but are not limited to fast Fourier transform processing equalization demapping demodulation control deinterleaving depuncture and decoding. The transmitter may enable digital transmitter functions that comprise but are not limited to coding puncture interleaving mapping modulation control and inverse fast Fourier transform processing. In a MIMO system the transmitter may enable beamforming processing. The RF front end may enable reception of analog RF signals via the one or more antennas . . . converting the RF signal to baseband and generating digital representations of the received analog baseband signals. The digital representation may be a complex quantity comprising I and Q components. The RF front end may also transmit analog RF signals via the one or more antennas . . . where a digital baseband signal may be converted to an analog RF signal prior to transmission.

In operation the processor may receive data from the receiver . The processor may store received data to the memory for subsequent analysis and or processing. The processor may retrieve data from the memory . The retrieved data may be transmitted via an RF channel by the transmitter . The processor may select values for one or more MAC layer and or PHY layer parameters for transmitting the data. In various embodiments of the invention values for the one or more MAC layer and or PHY layer parameters may be selected based on a selected data transfer rate and a target value range for BER FER and or PER.

The source encoder block may comprise suitable logic circuitry and or code that may enable compression of data prior to transmission. For example the compressed data may be video data in MPEG 4 format. The source encoder block may also communicate information about the compressed data to the cross layer partitioner block . The information communicated may relate to the type of compression. For example if the compressed data comprises video data the source encoder block may communicate the specific type of compression such as MPEG 1 MPEG 2 MPEG 4 H.261 H.263 or H.264. The source encoder block may also communicate the type of chroma subsampling used such as for example 4 4 4 4 2 2 or 4 2 0 chroma subsampling.

The source layer multiplexer block may comprise suitable logic circuitry and or code that may enable reading data from for example the memory block and communicating various portions of the data to the PHY MAC . In a MIMO communication system the data may be split into a plurality of portions according to information from the cross layer partitioner block . Each portion may correspond to a data stream to be transmitted or spatial stream. The information from the cross layer partitioner block may for example be utilized to determine a value for the number of spatial streams NSS.

The PHY MAC block may comprise suitable logic circuitry and or code that may enable conversion of input data in a digital format to output suitably modulated analog data ready for transmission. For example the PHY MAC block may apply a FEC code to the digital data. The PHY MAC block may also apply a specific RF modulation to the analog signal which may have been converted from the digital data and transmitted via at least one transmitting antenna . . . . In a MIMO communication system the PHY MAC block may be utilized to perform beamforming on transmitted spatial streams and to assign each beamformed signal to at least one of the transmitting antennas . . . 

In an embodiment of the invention the PHY MAC block may receive one or more streams of digital data. The PHY MAC block may then operate on the one or more streams as indicated by for example the parameter control block . Accordingly the PHY MAC block may for example apply a specific FEC code to each digital stream. In a MIMO system a plurality of digital streams may be beamformed to generate a corresponding plurality of beamformed signals. Each digital stream and or beamformed signal may then be converted to an analog RF signal which may be modulated by a specific RF modulation scheme. Each modulated RF signal may then be communicated to one or more antennas to be transmitted.

The cross layer partitioner block may comprise suitable logic circuitry and or code that may enable determination of the number of spatial streams and partitioning of data retrieved from the memory block into the NSS number of spatial streams. In a MIMO communication system NSS 1.

In a MIMO communication system the cross layer partitioner block may also indicate to the source layer multiplexer block which portions of data retrieved from the memory block are to be assigned to each of a plurality of NSS 1 spatial streams. The source layer multiplexer block may communicate the corresponding spatial streams to the PHY MAC block . The cross layer partitioner block may then communicate to the parameter control block PHY layer parameter values and or MAC layer parameter values which may be utilized with processing the spatial streams.

In a MIMO communication system specific streams of data may be communicated to specific transmit antennas. The cross layer partitioner block may have information regarding the propagation path from each transmit antenna . . . to a receive antenna where data transmitted via one transmit antenna may be received with fewer bit errors for example than data transmitted by another transmit antenna. Accordingly this information may be used to determine which combination data from one or more spatial streams may be transmitted via which transmit antenna. The combination of data from the one or more spatial streams may be referred to as beamforming. The information regarding the propagation path for each transmit antenna may be generated for example from feedback information from the receiving devices. Alternatively the information may be generated from feedback information from a receiver co located with the transmit block .

The parameter control block may comprise suitable logic circuitry and or code that may enable controlling of various operations to the digital data in the PHY MAC block . For example the parameter control block may determine the FEC code and or the RF modulation that may be used by the PHY MAC block for specific portions of data. The parameter control block may also determine which antennas may be used to transmit which portions of data by controlling routing of the data within the PHY MAC block to the specific antennas.

In various embodiments of the invention the parameter control block may select parameter values utilized to control operations in the PHY MAC block based on a selected data transfer rate and a target value range for BER FER and or PER. Based on BER FER and or PER values computed by the PHY MAC block based on the transmitted signals the parameter control block may select values for for example coding rates modulation types and antenna selection. The selected values may be chosen such that the transmit block may transmit voice multimedia and or data at the selected data transfer rate while achieving a computed BER FER and or PER that is within the corresponding target range for BER FER and or PER. The selected values may be communicated to the PHY MAC block which may utilize the values for transmitting subsequent signals.

In various embodiments of the invention a single coding rate and a single modulation type may be selected. The selected coding rate and modulation type may be utilized for each of the NSS spatial streams. In various other embodiments of the invention the coding rate and or modulation type may be selected adaptively. In a system utilizing adaptive coding a coding rate may be selected for each of the NSS spatial streams individually where a coding rate utilized for one spatial stream may be different from a coding rate utilized for another spatial stream. In a system utilizing adaptive modulation a modulation type utilized for one spatial stream may be different from a modulation type utilized for another spatial stream.

In operation the source encoder block may compress data and store the compressed data in the memory block . For simplicity Output data and Outputn data may be transmitted by the transmit antennas and respectively. The source encoder block may communicate to the cross layer partitioner block that the compressed data is video data using the MPEG 4 format. The source encoder block may also communicate for example start and end memory addresses for the stored video data corresponding to a frame the frame number and the type of frame that may be stored. The type of frame may be for example I frame P frame and B frame. Other information may also be communicated such as for example the chroma sub sampling format.

The cross layer partitioner block may then determine a number of spatial streams NSS into which to portion the video data. Each portion of the video data may be assigned to one of the spatial streams. In a MIMO communication system which utilizes transmitter diversity the number of spatial streams may be less than the number of transmitting antennas or NSS

The cross layer partitioner block may also communicate to the parameter control block the operations to be applied to each stream of data namely Output and Outputn. For example the parameter control block may select values for MAC layer and or PHY layer parameters. The MAC layer and or PHY layer parameter values may be selected and applied uniformly to each of the NSS spatial streams or the MAC layer and or PHY layer parameter values may be selected adaptively.

The cross layer partitioner block may also communicate to the parameter control block to use for example quadrature phase shift keying QPSK RF modulation rather than 16 quadrature amplitude modulation 16 QAM RF modulation for the high priority data Output. The QPSK RF modulation may have a smaller data throughput than the 16 QAM RF modulation however the QPSK RF modulation may be more reliable for a given transmission environment. Additionally the transmit antenna may exhibit more reliable transmission characteristics than the transit antenna . If the transmission environment changes such that the transmit antenna exhibits a more reliable transmission characteristics than the transmit antenna then the cross layer partitioner block may indicate that the higher priority data be output as Outputn.

The cross layer partitioner block may also take in to account feedback information from the receiving device when selecting MAC layer and or PHY layer parameter values. The feedback information may also be utilized at the transmit block when performing beamforming on the plurality of NSS spatial streams. In various embodiments of the invention the cross layer partitioner block may also utilize feedback information from a receiver which is collocated with the transmitter in a transceiver . The feedback information from a receiver may be communicated from the receiver to a collocated transmit block . For example the processor may process the feedback data from a co located receiver and communicate the processed feedback information to the transmit block . The information may be used for example to control the operations on the data streams by the PHY MAC block .

U.S. application Ser. No. 11 327 690 filed Jan. 6 2006 provides a detailed description of feedback in a MIMO system which is hereby incorporated herein by reference in its entirety.

The channel encoder block may comprise suitable logic circuitry and or code that may enable transformation of received binary input data blocks by applying a forward error correction FEC technique for example binary convolutional coding BCC . The application of FEC techniques also known as channel coding may improve the ability to successfully recover transmitted data at a receiver by appending redundant information to the input data prior to transmission via an RF channel. The ratio of the number of bits in the binary input data block to the number of bits in the transformed data block may be known as the coding rate . The coding rate R may be specified using the notation i t where trepresents the total number of bits that comprise a coding group of bits while irepresents the number of information bits that are contained in the group of bits t. Any number of bits t imay represent redundant bits that may enable the receiver to detect and correct errors introduced during transmission of information from a transmitter to a receiver via a wireless communication medium for example. Increasing the number of redundant bits may enable greater capabilities at the receiver to detect and correct errors in received information bits. Increasing the number of redundant bits may increase the value of twithout increasing the number of information bits i and correspondingly reduce the coding rate R. The resulting lower coding rate R may be referred to as a stronger coding rate in comparison to a higher coding rate R. The stronger coding rate may also correspond to a stronger error protection scheme. The stronger error protection scheme may correspondingly enable greater capabilities at the receiver to detect and correct errors in received information bits. Decreasing the number of redundant bits may decrease the value of twithout decreasing the number of information bits i and correspondingly increase the coding rate R. The resulting higher coding rate R may be referred to as a weaker coding rate in comparison to a lower coding rate R.

The invention is not limited to BCC and any one of a plurality of coding techniques for example Turbo coding low density parity check LDPC coding or various block coding techniques such as Reed Solomon FEC may also be utilized.

The puncture block may comprise suitable logic circuitry and or code that may enable alteration of a coding rate for received encoded data by removing redundant bits from the received transformed binary input data blocks. For example for each contiguous block of 4 bits of received data that is encoded based on an R coding rate BCC the received data may comprise 2 information bits and 2 redundant bits. By removing 1 of the redundant bits in the group of 4 received bits the puncture block may alter the coding rate from R to R for example.

The spatial parser block may comprise suitable logic circuitry and or code that may enable a block of data bits associated with a single bit stream to be divided into a plurality of parsed blocks of data bits each of which may be associated with a corresponding plurality of parsed bit streams. The single bit stream may comprise data retrieved from the memory . Each of the parsed bit streams may be referred to as a spatial stream. A spatial stream may comprise an identifiable block of bits that may be processed within a MIMO system.

The spatial parser block may receive the block of data bits associated with the single bit stream b and generate a plurality of parsed bit streams b i where i may be an index identifying a specific parsed bit stream among the plurality of parsed bit streams. The range of values for the index i may be represented as follows 0 1 equation 1 where Nmay represent a number of spatial streams for example N 2 may indicate a MIMO system that comprises 2 spatial streams.

Each of the parsed bit streams b i may comprise a portion of the bits contained in the single bit stream b. The single bit stream bmay comprise the plurality of bits collectively contained in the corresponding plurality of parsed bit streams b i .

Various embodiments of the invention may not be limited to a specific method for allocating bits from a single bit stream to a plurality of spatial streams. For example given a block of Nbits received in a from a single bit stream the spatial parser block may assign about N Nbits to each of the plurality of Nspatial streams. A first block of N Nbits from the bit stream bmay be assigned to spatial stream a second block of N Nbits may be assigned to spatial stream and an Nblock of N Nbits may be assigned to spatial stream N for example. Alternatively a kbit from the bit stream b where k may represent an index for a bit in the block of data bits associated with the bit stream b may be assigned to spatial stream i as indicated in the following equation for example floor mod equation 2 where kmay represent an index for a bit assigned to the ispatial stream floor x may represent an integer value that is not larger than the value x and y mod x may represent the modulus x value for y.

The frequency interleaver block may comprise suitable logic circuitry and or code that may enable a rearrangement of an order of bits among a block of bits associated with a received spatial stream. The frequency interleaver block may utilize a plurality of permutations when rearranging the order of bits among a block of bits associated with a received spatial stream. After rearrangement the interleaved block of bits associated with the ispatial stream b i may be divided into a plurality of sub blocks b f where the index f may represent a frequency. The frequency may correspond to one of a plurality of frequency carriers that may be utilized to transmit a representation of the bits contained in the sub block via a wireless communication medium for example. The representation of the bits may be referred to as a symbol. Each sub block b f may comprise a portion of bits in the block b i . The block of bits b i may comprise the plurality of bits collectively contained in the corresponding plurality of sub blocks b f .

The frequency interleaver block may comprise suitable logic circuitry and or code that may enable a rearrangement of an order of bits among a block of bits associated with a received spatial stream substantially as described for the frequency interleaver block . In various embodiments of the invention the number of frequency interleaver blocks . . . may equal the number of spatial streams N for example.

The constellation mapper block may comprise suitable logic circuitry and or code that may enable a mapping of received bits associated with a spatial stream to one or more symbols. The received bits may be encoded based on an FEC for example and may be referred to as coded bits. The constellation mapper block may receive one or more coded bits b f and generate the symbol sym f based on a modulation type associated with the spatial stream. The number of coded bits associated with b f may be determined based on the modulation type. The representation of the symbol sym f may be a complex quantity comprising in phase I and quadrature Q components. Each symbol sym f associated with the one or more coded bits b f may be associated with a frequency carrier f where k may be an index that identifies a frequency associated with a kfrequency carrier utilized for transmitting a representation of the symbol via the wireless communication medium.

Exemplary modulation types may comprise binary phase shift keying BPSK Quadra phase shift keying QPSK 16 level QAM 16 QAM 64 level QAM 64 QAM and 256 level QAM 256 QAM . For the BPSK modulation type the number of coded bits associated with a symbol may be represented num b f 1 for each frequency carrier f. For the QPSK modulation type the number of coded bits associated with a symbol may be represented num b f 2 for each frequency carrier f. For the 16 QAM modulation type the number of coded bits associated with a symbol may be represented num b f 4 for each frequency carrier f. For the 64 QAM modulation type the number of coded bits associated with a symbol may be represented num b f 6 for each frequency carrier f. For the 256 QAM modulation type the number of coded bits associated with a symbol may be represented num b f 8 for each frequency carrier f.

The spatial stream may comprise a plurality of frequency carriers N for example a 20 MHz RF channel may comprise N 56 frequency carriers f f . . . f f . . . f and f that may be utilized for transmitting coded bits while a 40 MHz RF channel may comprise N 112 frequency carriers f f . . . f f . . . f and f that may be utilized for transmitting coded bits. In a MIMO system the symbols sym f sym f . . . sym f sym f . . . sym f and sym f or sym f sym f . . . sym f sym f . . . sym f and sym f may be collectively referred to as an orthogonal frequency division multiplexing OFDM symbol. The number of coded bits associated with an OFDM symbol N N b f . The number of data bits associated with the OFDM symbol N R N b f where R may refer to the coding rate.

The constellation mapper block may comprise suitable logic circuitry and or code that may enable a mapping of received bits associated with a spatial stream to one or more symbols substantially as described for the constellation mapper block . In various embodiments of the invention the number of constellation mapper blocks . . . may equal the number of spatial streams N for example.

The serial to parallel block may comprise suitable logic circuitry and or code that may enable serial reception of a plurality of bits and subsequent simultaneous output of the serially received plurality of bits. The serial to parallel block may comprise suitable memory latches and or registers to enable the serial to parallel function.

The serial to parallel block may comprise suitable logic circuitry and or code that may enable serial reception of a plurality of bits and subsequent simultaneous output of the serially received plurality of bits substantially as described for the serial to parallel block . In various embodiments of the invention the number of serial to parallel blocks . . . may equal the number of spatial streams N for example.

The beamforming matrix block may comprise suitable logic circuitry and or code that may enable processing of a received plurality of spatial streams and generation of a corresponding plurality of signals that may be simultaneously transmitted by a MIMO transmitter . Each of the generated corresponding plurality of signals may comprise at least one weighted sum of at least a portion of the received plurality of spatial streams. A weighted sum may be computed corresponding to each of the plurality of frequency carriers f. Each of the signals generated from each weighted sum may be represented as X f . The beamforming matrix block may generate the corresponding plurality of signals based on a channel estimate matrix. The channel estimate matrix may be based on a characterization of a wireless communication medium that estimates channel fading. The channel estimate matrix may be computed based on feedback information from a receiver in a closed loop system for example or based on information computed from signals received by a receiver that is collocated with a transmitter .

The IFFT block may comprise suitable logic circuitry and or code that may enable conversion of a frequency domain representation of a signal X f to a time domain representation X t . The corresponding time domain signal may comprise a plurality of OFDM symbols. An OFDM symbol may be computed based on application of an IFFT algorithm to the frequency components associated with the corresponding signal X f . For example a 64 point IFFT algorithm may be utilized by the IFFT block when processing a 20 MHz RF channel while a 128 point IFFT algorithm may be utilized when processing a 40 MHz RF channel. An exemplary method for OFDM symbol computation may be found in clause 17.3.5.9 from the IEEE standard 802.11a 1999 R 2003 .

The time domain representation X t may comprise time domain representations for a plurality of signals x t that may be transmitted simultaneously by a MIMO transmitter as shown in the following equation 

Each of the plurality of signals x t may comprise a plurality of OFDM symbols associated with a jsignal among a plurality of Nsimultaneously transmitted signals from the MIMO transmitter . The OFDM symbols transmitted within the jsignal x t among a plurality of Nsimultaneously transmitted signals may be transmitted serially in time. Each OFDM symbol may span a time duration T referred to as a symbol interval for example T 4 s.

The IFFT block may comprise suitable logic circuitry and or code that may enable conversion of a frequency domain representation of a signal X f to a time domain representation X t substantially as described for the IFFT block . In various embodiments of the invention the number of IFFT blocks . . . may equal the number of generated signals N for example.

The insert GI window block may comprise suitable logic circuitry and or code that may enable insertion of guard intervals in one of a plurality of signals x t transmitted by the MIMO transmitter . The guard interval T may represent a time interval between the end of a current OFDM symbol interval and the beginning of a subsequent OFDM symbol interval. Subsequent to the end of a symbol interval associated with a current OFDM symbol may follow a guard interval time duration T for example T 0.8 s. Following the guard interval time duration a subsequent symbol interval corresponding to a subsequent OFDM symbol may follow.

The insert GI window block may comprise suitable logic circuitry and or code that may enable insertion of guard intervals in one of a plurality of signals x t transmitted by the MIMO transmitter substantially as described for the insert GI window block . In various embodiments of the invention the number of insert GI window blocks . . . may equal the number of generated signals N for example.

The RFE block may comprise suitable logic circuitry and or code that may enable generation of an RF signal from a received generated signal. The RF block may receive a generated baseband signal. The RFE block may generate the RF signal by utilizing a plurality of frequency carrier signals to modulate the received baseband signal. The modulated signal may be transmitted via the antenna . The RFE block may enable generation of a 20 MHz RF signal or of a 40 MHz RF signal for example.

The RFE block may comprise suitable logic circuitry and or code that may enable generation of an RF signal from a received generated signal substantially as described for the RFE block . The modulated signal generated by the RFE block may be transmitted via the antenna . In various embodiments of the invention the number of RFE blocks . . . may equal the number of generated signals N for example.

The processor may comprise suitable logic circuitry and or code that may enable the transmitter to perform transmitter functions in accordance with applicable communications standards. These functions may comprise but are not limited to tasks performed at lower layers for example physical layer PHY and medium access control MAC layer functions in a relevant protocol reference model. These tasks may comprise physical layer functions such as physical layer convergence protocol PLCP physical medium dependent PMD and or associated layer management functions for example. The processor may also enable generation of source information bits and or retrieval of stored source information that may be subsequently coded mapped and transmitted via the wireless medium for example. The processor may also enable computation of values corresponding to beamforming factors that may be utilized within the beamforming matrix for computing signals X f .

The memory may comprise suitable logic circuitry and or code that may enable storage and or retrieval of information and or a representation of the information for example a binary representation comprising bits. The memory may enable storage of source information bits. The stored source information bits may be assigned physical resources within the memory for the storage. The stored source information bits may be subsequently available for retrieval. Retrieved source information bits may be output by the memory and communicated to other devices components and or subsystems that may be communicatively coupled directly and or indirectly to the memory . The memory may enable the stored source information bits to remain stored and or available for subsequent retrieval until the resources allocated for the storage are deallocated. Physical resources may be deallocated based on a received instruction that the stored source information bits be erased from the memory or based on a received instruction that the physical resources be allocated for the storage of subsequent binary information. The memory may utilize a plurality of storage medium technologies such as volatile memory for example random access memory RAM and or nonvolatile memory for example electrically erasable programmable read only memory EEPROM .

In operation the processor may enable the communication of instructions to the memory . The instructions may enable the retrieval of stored multimedia information from the memory . The multimedia information may comprise voice video and or data information. The processor may also receive input that specifies a data transfer rate that may be utilized for transmitting the multimedia information.

In one exemplary embodiment of the invention the retrieved multimedia information may comprise MPEG 1 or MPEG 2 encoded video information. The MPEG video information may be transmitted under real time constraints. Thus the processor may configure MAC layer and or PHY layer parameter values based on content type. For example the processor may set a value for the contention window parameter such that no MAC layer frame retransmission attempts occur when an acknowledgement is not received in response to a previously transmitted MAC frame. The processor may configure the transmitter utilizing transmitter diversity to ensure that computed BER FER and or PER values are within a corresponding target range. In a MIMO communication system utilizing transmitter diversity the number of spatial streams N may be less than the number of transmitting antennas N. The processor may configure the beamforming matrix based on computed channel estimates and on the values Nand N. The value Nmay be determined based on an antenna selection procedure. The data rate for signals transmitted by the transmitter may be less than or equal to the specified data transfer rate. In a transmitter that utilizes a single transmitting antenna N 1 the data rate may refer to the data rate for the signal transmitted by the single transmitting antenna. In a transmitter that utilizes a plurality of transmitting antennas N 1 the data rate may refer to the aggregate data rate for the individual signals transmitted by each of the plurality of transmitting antennas.

Correspondingly the processor may enable selection of PHY layer parameter values. The processor may select a coding rate that is utilized by the puncture block for coding each of the Nspatial streams. Alternatively the processor may configure the puncture block to utilize adaptive coding such that a coding rate is selected and utilized for each spatial stream and a coding rate utilized for one spatial stream may be different from a coding rate utilized for another spatial stream.

The processor may select a modulation type that is utilized by each of the constellation mapper blocks . . . . Alternatively the processor may adaptively select modulation types for each of the constellation mapper blocks . . . such that a modulation type utilized for one spatial streams may be different from a modulation type utilized for another spatial stream.

The one or more coding rates and or one or more modulation types may be selected based on computed values of BER FER and or PER such that the computed value are within a corresponding target value range and that the data rate for signals transmitted by the transmitter is less than or equal to the specified data transfer rate.

The retrieved multimedia information may be communicated by the memory to the channel encoder block . The retrieved multimedia information may be communicated to the channel encoder block as one or more binary input data blocks. Individual data blocks may be presented as input to the channel encoder blocks serially at distinct time instants. Each data block may comprise a plurality of bits.

The spatial parser block may parse the coded data block to generate a plurality of parsed data blocks. A parsed data block among the plurality of parsed data blocks may comprise at least a portion of the bits contained in the coded data block. Each of the parsed data blocks generated from a coded data block may comprise spatial stream data that may be associated with a corresponding spatial stream. Each of the parsed data blocks may be associated with one of a plurality of spatial streams.

Any of the plurality of frequency interleaver blocks . . . may rearrange the order of bits in a received parsed data block for the corresponding spatial stream. Each of the frequency interleaver blocks . . . may generate an interleaved spatial stream block.

Any of the plurality of constellation mapper blocks . . . may map at least a portion of bits contained in a received interleaved spatial stream block to generate a symbol. Each of the constellation mapper blocks . . . may perform its respective mapping operation by utilizing a modulation type.

Any of the plurality of serial to parallel blocks . . . may convert a bit serial representation of the symbol generated in the corresponding spatial stream to a bit parallel symbol representation comprising a plurality of simultaneously output bits. Relating to the plurality of bit parallel symbol representations generated by the corresponding plurality of serial to parallel blocks . . . may correspond to the plurality of source signals and as represented in equation 1c .

The beamforming matrix may perform beamforming to generate a plurality of transmit signals based on the received plurality of bit parallel symbols. The processor may determine values for individual beamforming factors for each of the frequency carriers associated with an RF channel.

Any among the plurality of IFFT blocks . . . may convert a frequency domain representation signal generated for a corresponding transmit signal to a corresponding time domain representation. Any of the plurality of insert GI window blocks . . . may insert guard intervals in a corresponding transmit signal. Any of the plurality of RFE blocks . . . may generate an RF signal for a corresponding transmit signal which may be transmitted via a wireless communications medium via a corresponding one of the plurality of transmitting antennas . . .

Various embodiments of the invention may comprise a rate selection API which receives as input a selected data rate as illustrated by the reference number . The rate selection API may comprise code that perform functions associated with the management plane in a protocol reference model PRM such as specified by the International Organization for Standardization ISO . These functions may comprise setting values to control the operation of protocols in the user plane receiving of notification events from protocols within the user plane and sending responses to one or more protocols within the user plane . For example a notification received by a MAC layer protocol within the user plane may cause the management plane to send a response to the MAC layer protocol the PHY layer protocol and or the ULP . Based on the selected data rate the rate selection API may select MAC layer parameter values which may be communicated to the MAC layer as illustrated by the reference number . The rate selection API may also select PHY layer parameter values which may be communicated to the PHY layer as illustrated by the reference number . The PHY layer parameter values and or MAC layer parameter values may be selected such that the transmitted data rate for the transmitter is less than or equal to the selected data rate.

Based on transmitted bits frames and or packets BER FER and or PER statistics may be computed by the processor . The BER statistics may be associated with the PHY layer and the FER statistics may be associated with the MAC layer for example. The computed BER statistics may be compared with a corresponding BER target range. Based on the comparison the PHY layer may communicate PHY layer reporting to the rate selection API as illustrated by the reference number . The computed FER statistics may be compared with a corresponding FER target range. Based on the comparison the MAC layer may communicate MAC layer reporting to the rate selection API as illustrated by the reference number .

Based on the PHY layer reporting and the MAC layer reporting the rate selection API may communicate modified PHY layer parameter values to the PHY layer and or modified MAC layer parameter values to the MAC layer when the computed BER and or FER statistics are not within a corresponding target range as illustrated by reference numbers and respectively. The modified PHY layer parameter values and or modified MAC layer parameter values may be selected such that the transmitted data rate for the transmitter is less than or equal to the selected data rate.

Various embodiments of the invention may comprise a rate selection algorithm in which a data transfer rate may be selected to achieve a target BER. In one exemplary embodiment of the invention a maximum data transfer rate may be selected by a user. A transmitter may utilize an initial set of PHY layer parameter values and or MAC layer parameter values based on the selected data transfer rate when transmitting data. The transmitter may subsequently decrease the data transfer rate when a BER calculated for the transmitted data is less than the target BER. The transmitter may compute a subsequent set of PHY layer parameter values and or MAC layer parameter values based on the decreased data transfer rate.

In another exemplary embodiment of the invention the target BER may be determined based on a upper layer protocol ULP . For example a first target BER value may be utilized when the ULP is TCP while a second target BER value may be utilized when the ULP is UDP. In other exemplary embodiments of the invention the PHY layer parameter values and or MAC layer parameter values may be selected based on a content type for the transmitted data for example digital video content.

Aspects of a system for medium access control MAC rate selection may include at least one processor that enables selection of MAC layer parameter values and or PHY layer parameter values to maintain a rate of data transmission of at least one transmitted signal which is no greater than a selected data transfer rate. The error rate of the one or more transmitted signals may be maintained within a specified range based on the selection for varying signal to noise SNR ratios. The error rate may be a bit error rate a frame error rate and or a packet error rate.

The one or more processors may enable calculation of at least one computed error rate based on the transmitted signals. The computed error rate may be compared with the specified range for the error rate. MAC layer parameter values and or PHY layer parameter values may be modified based on the comparison. The PHY layer parameter values may comprise a coding rate and or a modulation type. The MAC layer parameters may comprise a contention window value and or a determination of a number of transmitting antennas to be utilized for transmitting signals based on at least one spatial stream. An antenna selection procedure may enable determination of the number of transmitting antennas to be utilized for transmitting signals for the one or more spatial streams.

Accordingly the present invention may be realized in hardware software or a combination of hardware and software. The present invention may be realized in a centralized fashion in at least one computer system or in a distributed fashion where different elements are spread across several interconnected computer systems. Any kind of computer system or other apparatus adapted for carrying out the methods described herein is suited. A typical combination of hardware and software may be a general purpose computer system with a computer program that when being loaded and executed controls the computer system such that it carries out the methods described herein.

The present invention may also be embedded in a computer program product which comprises all the features enabling the implementation of the methods described herein and which when loaded in a computer system is able to carry out these methods. Computer program in the present context means any expression in any language code or notation of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following a conversion to another language code or notation b reproduction in a different material form.

While the present invention has been described with reference to certain embodiments it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted without departing from the scope of the present invention. In addition many modifications may be made to adapt a particular situation or material to the teachings of the present invention without departing from its scope. Therefore it is intended that the present invention not be limited to the particular embodiment disclosed but that the present invention will include all embodiments falling within the scope of the appended claims.

