---

title: System and method for extraction of meta data from a digital media storage device for media selection in a vehicle
abstract: A method is provided for extracting meta data from a digital media storage device in a vehicle over a communication link between a control module of the vehicle and the digital media storage device. The method includes establishing a communication link between control module of the vehicle and the digital media storage device, identifying a media file on the digital media storage device, and retrieving meta data from a media file, the meta data including a plurality of entries, wherein at least one of the plurality of entries includes text data. The method further includes identifying the text data in an entry of the media file and storing the plurality of entries in a memory.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09092435&OS=09092435&RS=09092435
owner: Johnson Controls Technology Company
number: 09092435
owner_city: Holland
owner_country: US
publication_date: 20070403
---
The present application claims the benefit of priority as available under 35 U.S.C. 119 e 1 to U.S. Provisional Patent Application No. 60 789 176 titled System and Method for Extraction of Meta Data from a Digital Media Storage Device for Media Selection in a Vehicle filed on Apr. 4 2006 which is incorporated by reference in its entirety .

The present application relates generally to the field of data extraction from a digital audio video source in a vehicle and in particular a system and method for extracting and processing meta data from media files accessible from a digital media storage device such as a media player in the vehicle.

Vehicles typically include a number of electronic systems such as an audio system a mobile telephone system a navigation system video entertainment system etc. Along with those systems media players i.e. digital audio video players or MP3 players may be setup in the vehicle for a user to access digital audio or video content stored on the media player. A conventional media player includes a data storage device i.e. memory and an embedded software application that allows a user to transfer media files to the player and create custom lists of selected media files referred to as playlists. Media files may be transferred to the memory of the player from various sources including disks e.g. CDs DVDs etc. and Internet sites. Most players are configured to be coupled to a personal computer via a connection port e.g. USB port parallel port serial port etc. in order to transfer media files. The media files typically include data referred to as meta data which identifies the contents of the file. For example with digital audio files such as MP3 files the meta data comprises a tagging format which may include the title of the song the artist s name the title of the album track number genre etc. The tagging format for MP3 i.e. MPEG Audio Layer III files is commonly referred to as ID3.

A media player is typically configured to include a memory having one or more media files stored therein. A media player in a vehicle may be configured to be coupled to or integrated with other vehicle electronic systems such as the audio system for playing the media files from the player. In one known configuration a media player may be connected via an analog audio output e.g. a headphone jack from the media player to the auxiliary input of the vehicle s audio system such that the playback is controlled by the controls of the media player. In another known configuration the media player s control interface is coupled to the control interface of the head unit of an audio system i.e. radio in addition to connecting the analog audio output of the media player to auxiliary input of the vehicle s audio system. In this configuration the user can control the playback of the media from the head unit of the audio system. Yet in another configuration an audio system may include a database of meta data about certain media files. The audio system is configured to determine the meta data of a media file based on a unique identifier relating to that file.

It would be advantageous to provide a system for extracting meta data from a media player in a vehicle that is configured to 1 establish a communication link between a control module and a media player 2 identify media files stored on a media player 3 retrieve meta data from a media file of the media player upon receiving a command from a user 4 automatically retrieve meta data from a media file of the media player upon establishing a wireless communication link with the media player 5 generate and or update a database of meta data based on the meta data extracted from the media player including converting the information to acoustic baseforms so that a user may access and manipulate the media files via voice commands and speech recognition 6 audibly list the meta data entries of a media file based on an audible command of the user 7 generate a second database of meta data using the meta data extracted from a second media player wherein the meta data of the first media player is retained across power cycles thereby eliminating the time consuming process of extracting meta data each time a media player is connected to the system and 8 provide for the use of multiple databases concurrently for example when two or more media players are linked to the control module concurrently.

In accordance with one embodiment a method is provided for extracting meta data from a digital media storage device in a vehicle over a communication link between a control module of the vehicle and the digital media storage device. The method includes establishing a communication link between control module of the vehicle and the digital media storage device identifying a media file on the digital media storage device and retrieving meta data from a media file the meta data including a plurality of entries each entry including text data or enumerated code. The method further includes identifying the text data or code in each entry of the media file and storing the plurality of entries in a memory.

In accordance with another embodiment a control system in a vehicle is provided for extracting meta data from a digital media storage device over a communication link. The system includes a communication module for establishing a communication link with the digital media storage device a processing module coupled to the communication module the processing module being configured to retrieve via communication module meta data associated with a media file from the digital media storage device the meta data including a plurality of entries wherein each of the plurality of entries includes text data and a memory module configured to store the plurality of entries retrieved from the digital media storage device.

The exemplary system shown in enables a wireless communication link to be established between an audio system of vehicle and a media player e.g. a media player with a Bluetooth enabled connection of a vehicle occupant. Alternatively a control system may be provided that includes a wired connection to a vehicle occupant s personal media player . The wired connection may include a cradle for media player or a similar wired adapter such as an analog audio output connection e.g. a headphone jack . The following description will refer to an exemplary control system using a wireless communication link between the vehicle audio system and media player of a vehicle occupant however it should be understood that methods and systems for retrieving and processing meta data from a media player described herein may be used in conjunction with other configurations of control systems such as a wired connection to a vehicle occupant s media player etc.

In the control system in vehicle includes a control module coupled to the audio system and an antenna . In an alternative embodiment control module may be incorporated into audio system . Antenna in conjunction with a communication device in control module enables two way communication with media player . Communication device may be configured as a communication circuit including analog and or digital components such that communication device is capable of transmitting and receiving short range radio frequency RF signals in any of a variety of data transmission formats such as a Bluetooth communications protocol an IEEE 802.11 communications protocol or other personal area network wireless communications protocols or data formats. Media player may include a plurality of transceiver circuits for example a Bluetooth transceiver circuit configured to communicate with communication device .

Control module is also coupled to a user interface and an audio input device . User interface may be used to receive input commands from a vehicle occupant via for example pushbuttons switches a keypad a touch screen display etc. Alternatively input commands to control module may include a set of audio signals from a vehicle occupant. For example a vehicle occupant may speak directly into the audio input device to provide input commands to the control module . Audio input device may include one or more audio input devices configured to receive an oral command from a vehicle occupant. The oral command may be any word or phrase that the occupant may speak utter or otherwise provide to cause the control system or another system to perform a function. A speech recognition system or data processing module in control module may be used to process various data signals such as audio signals e.g. oral input commands received via audio input device and to recognize words or phrases in the oral command. Voice recognition technologies known in the art may be implemented in speech recognition system . For example speech recognition system may comprise any speech recognition software or engine such as IBM Embedded ViaVoice manufactured by International Business Machines Corporation.

Control module may also be coupled to a display . Display may comprise a small cathode ray tube CRT liquid crystal display LCD or various other types of visual displays which are easily visible in various lighting conditions. Control module may comprise one or more analog and or digital electrical or electronic components and may include a microprocessor a microcontroller application specific integrated circuit ASIC programmable logic and or other analog and or digital circuit elements configured to perform various input output control analysis and other functions described herein. Control module may also include memory including volatile and non volatile memory in order to for example store a computer program other software or a data file to perform the functions described herein. Each element in vehicle shown in may be mounted in or coupled to the same or different interior vehicle elements such as a dashboard an overhead console an instrument panel a visor a rearview mirror or other appropriate locations within the vehicle. Preferably user interface audio input device and output display are mounted in a location convenient to the vehicle occupants in particular the driver.

Audio system may include for example a radio an amplifier and at least one speaker configured to provide audio signals to one or more vehicle occupants. The speakers not shown are configured to receive audio output data from control module and or other systems e.g. a digital audio file from a media player information prompts or other messages provided by control module etc. . The speakers may be a part of the vehicle audio system or may be a dedicated audio output device serving only control module .

As mentioned above in the exemplary system shown in control module is linked via a wireless communications link with a media player of a vehicle occupant. A communication link may be established with different media players as different occupants are enabled to use the control system. A communication link may be established for example in response to a command received from the user via user interface or an oral command received via audio input device . The wireless communication link operates in accordance with a wireless communication standard such as Bluetooth communication protocol IEEE 802.11 communication protocol or other appropriate wireless communication standards. Accordingly media player is enabled to operate in accordance with or to communicate with the wireless communications standard used for the wireless communication link.

The communication link between control module and media player enables extraction of meta data from the media files stored in media player to control module . Subsequently the playback of the media files is controlled from user interface or audio input device . For example after a communication link is established between a media player and control module the process of extracting the meta data may begin upon establishing the communication link or as a result of a command by a user. The user may provide the command via inputting the command into the user interface or spoken commands into audio input device . For example a song may be played through control module and audio system by receiving an oral command from a vehicle occupant and sending the playback command to media player via the wireless communication link. Audio information received by control module may be provided to the user via audio system e.g. via speakers not shown and data retrieved from the media player may be displayed on display . Media player may be located anywhere within the proximity of vehicle such as in an occupant s pocket or briefcase in the trunk or within a range of communication with communication device .

Memory includes a database which may also be used to store meta data for the media files of each unique media player or other mass storage device for use by a user during operation of the control system with a particular media player. Memory may include meta data for each media file extracted from a media player. The meta data of each media file includes a plurality of entries. Each media file comprises audio data and meta data wherein the meta data may include a plurality of entries representing a context of each media file in memory such as song title e.g. We Belong Together album title e.g. Breakthrough artist e.g. John Doe genre rhythm and blues time length e.g. 3 10 and track number Track 5 etc. In media player include media file data such as song title album title artist genre time length track number etc. stored in for example memory of media player . A user may utilize known methods to add edit and other wise manipulate media files in media player . Memory may also include meta data for each media file in memory of media player . Each media file may include a plurality of entries representing a context of each media file in memory such as song title album title artist genre time length and track number etc. As mentioned control module includes database stored in memory . Preferably database is stored in non volatile memory e.g. flash EPROM and is therefore maintained across power cycles of the control system.

In one embodiment the media file data are retrieved automatically by control module when a wireless communications link is established between control module and media player . In one embodiment media file data retrieved from media player may be stored in volatile memory e.g. DRAM . Accordingly the media file data stored in volatile memory is not preserved across power cycles of the control system. In an alternative embodiment the media file data may be stored in non volatile memory database shown in and may be maintained across power cycles and available to a user after power on initialization. When a second wireless communications link is established with a different media player e.g. the media player of another vehicle occupant the data in volatile memory may be overwritten with the media file data from the second media player. Alternatively each user may have a media files with meta data from their associated media player stored in non volatile memory . In this embodiment the media file data for a particular media player would only be accessible when that particular user s media player is connected to the control system via the wireless communications link. Each media player may have a unique identifier that identifies one user s media player from another media player.

Music manager includes a media cataloger which is configured to extract the meta data from the connected media device e.g. mass storage device media player mobile phone etc. . In the case of mass storage device it may be connected via a universal serial bus USB connection. Media cataloger searches through the file structure of mass storage device in order to identify audio media stored in memory of the device. Media cataloger is configured to parse the media file to locate the embedded metadata ID3 tags and extract them. USB Playback decodes the audio media during file reading and playback of the audio media files. Media cataloger also searches through the audio media files for various file parameters including an ID3 tag which is a tagging format for MP3 files. Media cataloger may be configured to perform the meta data extraction on a file by file basis such that media cataloger creates a database which is shown as music database . Media cataloger is configured to request that the user re catalog the media files on the device when it detects that a modification or addition has been made to the media files. It should be understood that mass storage device may include media storage devices such as a thumb drive a USB stick etc.

In the case of media player such as an iPod media player it may connect to music manager through a wireless connection with a Bluetooth dongle. An after market dongle called naviPlay is currently manufactured by TEN Technology. Impulsesoft Corporation also created a proprietary protocol that enables the system to extract the meta data from an iPod media player. Upon connecting the Blue tooth dongle with an iPod media player the iPod control recognizes that an iPod media player is connected. Media cataloger interfaces with Bluetooth control module in order to request the meta data over the Bluetooth connection. Media streaming includes a streaming profile such as advanced audio distribution profile A2DP which is used for controlling the streaming of audio data from media player or mobile telephone to the system. It should be further understood that the scope of the present innovation is not limited to an iPod media player. Media player may include any of several types of media storage devices digital audio video players etc. capable of storing media files in memory.

Additionally mobile telephone is shown coupled to Bluetooth control module through Bluetooth host stack . Bluetooth control module preferably includes a hands free profile in order to inter operate with the Bluetooth HFP enabled mobile phone. Alternatively mobile phone may be a Bluetooth enabled phone with a hands free profile. In an alternative embodiment mobile telephone may also include a media player for streaming in media files over a Bluetooth connection. Mobile telephone is configured to stream in audio via media streaming . Media cataloger is further configured to extract the meta data from mobile telephone wherein the meta data are stored in music database .

Music database preferably includes a client application programming interface API for media cataloger to invoke for requests for cataloging media files. Music database may also include SQL database engine and music database schema serving as a relational database management system. A memory module is coupled to music database . Music database includes a volatile memory e.g. RAM and a non volatile memory e.g. flash . Accordingly a meta data catalog stored in volatile memory is not preserved across power cycles of the system whereas the media file may be stored in non volatile memory and may be maintained across power cycles and available after a power on initialization.

Once the media device e.g. mass storage device media player mobile phone etc. has connected music manager informs state manager that a media device has been located e.g. a Bluetooth enabled device is found or a mass storage device has been connected . If cataloging for the media device is necessary music manager informs state manager that cataloging has been completed. State manager uses these data to update graphical user interface GUI and voice user interface VUI that cataloging is occurring and or has been completed via UI Context Manager and integration module . The interface between state manager GUI and VUI demonstrate how a synchronous multimodal user interface is achieved. Existing focus management controls various vehicle systems when multiple systems are in use at the same time. Existing hands free application controls the operation of the connected mobile phone and other vehicle systems when the mobile phone receives a call. For example if the user is playing back music when the mobile phone receives a call the system may be configured to pause music playback at that time. Subsequently the user can disconnect the call and have the music playback automatically resume.

VUI includes speech recognition engine text to speech engine and text to grammar engine . Microphone and speakers are preferably coupled to VUI for processing various data signals such as audio signals e.g. oral input commands audio output data etc. . When the cataloging process is complete state manager notifies VUI that the media device has been cataloged. Upon receiving the update from state manager that cataloging is complete VUI is configured to parse through music database for each of the entries of the meta data and convert the entries to an acoustic baseform i.e. phonemic representation of the entry . The acoustic baseforms are stored in a baseform list in volatile memory . Therefore the baseform list is not preserved across power cycles of the system. In an alternative embodiment 

music manager is notified by a power module not shown that the system is shutting down. Music manager writes the RAM based database s to non volatile memory in order to be maintained across power cycles.

Additionally VUI includes software logic for converting text data including acronyms punctuation and unique sounding names into an acoustic baseform. Text to speech engine is configured to convert several such meta data entries. For example text to speech engine is configured to recognize and convert the artist s name INXS which phonetically sounds like in excess. Another example would be the artist s name 0.38 Special which phonetically sounds like thirty eight special instead of point three eight special In one embodiment the software logic is embedded directly into VUI wherein VUI best converts the text data according to its own rules. In an alternative embodiment the system may use a connected mobile phone e.g. mobile phone to create a dial up connection to the Internet to access an online music database. Alternatively the system can access a shared network drive or a database that includes a phonetic representation in speech synthesis mark up language SSML . Text to speech engine may use the SSML to pronounce the entry correctly and to create the correct acoustic baseform for the entry of the meta data.

Music manager further includes a USB playback and iPod media player playback . Using either in GUI or VUI the user may select a mode to playback media files with USB playback or iPod media player playback . When the user selects a mode of playback GUI and or VUI determine how playback will happen. Upon selecting the artist to be played e.g. play the Beatles state manager notifies music manager and music manager through the two playback sub components accesses music database through the client API 254 to find all the tracks associated with the specified artist. The tracks may then be played back in a pre determined order or at random. For example a user may decide to playback the Beatles albums in alphabetical order and then within the albums in the individual track order. Alternatively a user may decide that to play the albums in the chronological order starting with the first Beatles album.

Tactile user interface TUI includes rotary input general purpose input output GPIO and radio input output radio IO . TUI is coupled to GPIO and I2C unit or IC which is a serial bus. I2C unit is coupled to GPIO Extender and radio unit . Radio unit preferably includes an AM FM tuner a power amplifier equalizer a satellite radio and an auxiliary input.

As the system is playing back the selected track music manager preferably provides playback status of the track. Media cataloger is configured to perform the meta data extraction which includes extracting data such as song title album title artist genre time length track number the elapsed time the recording label featured artist s etc.

State manager is configured to provide the playback status to GUI and VUI . GUI can show the playback status of the current track in the list of the selected tracks. VUI also allows the user to barge in to the playing track and input a desired command. For example a user may press a button in order to activate speech recognition engine and then the user may utter the appropriate command to begin playback of another media file e.g. next pause play Yellow Submarine .

As mentioned a user may manipulate e.g. play pause stop next previous fast forward rewind etc. a media file using an entry of the meta data stored in memory. illustrates a method for speech enabled playback using memory in accordance with an embodiment. At step a control module shown in receives a command to initiate playback of a media file from a user via audio input device . In one embodiment control module prompts the user to indicate which media file to playback at step . The prompt may be played via audio output devices or the audio system . Alternatively the user may provide i.e. utter the entry name with an oral command to play a song e.g. play . After the system receives the track title of the desired media file at step the system identifies the desired entry at step . If there are similar entries in the memory the speech recognition engine selects the best match. At step the speech recognition engine determines if there is more than one entry associated with an acoustic baseform. For example if the user commands the system to play The White Album the system may be configured to recognize that more than one media file is associated with that album title. The control module may be configured to list via an audible prompt or via display the associated media files e.g. songs or tracks for that album name. Alternatively control module can also be configured to just begin playback of the media files i.e. tracks of the album from the beginning of album or from a pre selected track number. The user may then select a media file at step . Once a media file has been determined control module prompts the user to confirm the track title of the media file at step . After confirmation is received at step control module begins playback of the media file. Alternatively the system nay be configured to determine that there is more than one album with a particular phrase in the album title e.g. Greatest Hits . In this case control module is configured to recognize that more than one album title includes the uttered phrase based on a confidence scoring algorithm. Speech recognition engine provides the best matches and the user is then prompted to select the desired album from among the matches.

Control module is also configured to provide a user with a listing of the meta data of the available media files upon request e.g. list albums list artists etc. . illustrates a method for audibly listing media files in accordance with an embodiment. At step control module receives a command from the user via a audio input device to list the contents of database by meta data entry type. In response to the command control module audibly list the meta data entries of each media file at step . For example if the user s command is list albums each album title would be listed. The text e.g. album title of each media file is converted to an audio representation using text to speech engine and the audio may be played in the vehicle using audio output devices or audio system . Preferably the text of the entries is displayed in alphanumeric order sorted character by character on display . A predetermined time period elapses between the playing of each entry. In addition control module is configured to allow the user to interrupt the audible listing of the selected meta data by permitting the user to barge in. A user may barge in during the playing of an entry text or during a predetermined time after the playing of the entry in order to execute a command. If the user provides a command i.e. barges in at step the control module recognizes and performs the requested action at step . For example a user may provide a command to skip to the next entry in the list of selected meta data or to skip to the entry beginning at the next alphanumeric character. A user may also provide commands to select a desired media file once it is heard or to repeat a previous entry. If a media file is selected a user may then initiate an action e.g. playback of a media file . When the last media file is reached or when a file is selected at step the process ends. If the last entry has not been reached the process returns to step and continues until either an entry is selected or the last entry in the database is reached.

While the exemplary embodiments illustrated in the figures and described above are presently preferred it should be understood that these embodiments are offered by way of example only. Accordingly the present invention is not limited to a particular embodiment but extends to various modifications that nevertheless fall within the scope of the appended claims. The order or sequence of any processes or method steps may be varied or re sequenced according to alternative embodiments.

Describing the invention with figures should not be construed as imposing on the invention any limitations that may be present in the figures. The present invention contemplates methods systems and program products on any machine readable media for accomplishing its operations. The embodiments of the present invention may be implemented using an existing computer processors or by a special purpose computer processor for an appropriate vehicle system incorporated for this or another purpose or by a hardwired system.

As noted above embodiments within the scope of the present invention include program products comprising machine readable media for carrying or having machine executable instructions or data structures stored thereon. Such machine readable media can be any available media which can be accessed by a general purpose or special purpose computer or other machine with a processor. By way of example such machine readable media can comprise RAM ROM EPROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium which can be used to carry or store desired program code in the form of machine executable instructions or data structures and which can be accessed by a general purpose or special purpose computer or other machine with a processor. When information is transferred or provided over a network or another communications connection either hardwired wireless or a combination of hardwired or wireless to a machine the machine properly views the connection as a machine readable medium. Thus any such connection is properly termed a machine readable medium. Combinations of the above are also included within the scope of machine readable media. Machine executable instructions comprise for example instructions and data which cause a general purpose computer special purpose computer or special purpose processing machines to perform a certain function or group of functions.

It should be noted that although the diagrams herein may show a specific order of method steps it is understood that the order of these steps may differ from what is depicted. Also two or more steps may be performed concurrently or with partial concurrence. Such variation will depend on the software and hardware systems chosen and on designer choice. It is understood that all such variations are within the scope of the invention. Likewise software implementations of the present invention could be accomplished with standard programming techniques with rule based logic and other logic to accomplish the various connection steps processing steps comparison steps and decision steps.

The foregoing description of embodiments of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed and modifications and variations are possible in light of the above teachings or may be acquired from practice of the invention. The embodiments were chosen and described in order to explain the principals of the invention and its practical application to enable one skilled in the art to utilize the invention in various embodiments and with various modifications as are suited to the particular use contemplated.

