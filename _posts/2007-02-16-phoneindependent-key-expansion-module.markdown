---

title: Phone-independent key expansion module
abstract: A button box provides additional keys that can be used in conjunction with a telephone. In one embodiment, a button box is configured by associating it with a telephone and by programming its keys. When a key on the button box is activated, a key press event is sent from the button box to the associated phone. The phone treats the key press event as if a key on the phone itself had been activated and forwards the event to the voice switch appliance associated with the phone. (Alternatively, the key press event is sent from the button box directly to a voice switch appliance.) The button box's user interface is controlled by a voice switch appliance.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07991150&OS=07991150&RS=07991150
owner: ShoreTel, Inc.
number: 07991150
owner_city: Sunnyvale
owner_country: US
publication_date: 20070216
---
The present application is a continuation of U.S. patent application Ser. No. 11 479 602 filed on Jun. 30 2006 now U.S. Pat. No. 7 940 906 entitled Phone Independent Key Expansion Module which claims the benefit of U.S. Provisional Patent Application Ser. No. 60 701 237 filed on Jul. 20 2005 entitled IP Based Device for Providing Additional Keys to an Existing Phone both of which are incorporated herein by reference.

This invention relates generally to a device for adding keys to a phone and more particularly to a device that can add keys to any phone.

Telephones are often operated using keys each of which provides a particular function. In some situations it is helpful to have dozens of keys. For example a receptionist who supports several people may want to have one key per person that can be used to transfer calls to that person and or indicate whether that person s phone is in use. Rather than incorporate all of these keys into a phone phone manufacturers have created a separate device called a key expansion module that includes additional keys that can be used in conjunction with a phone.

In order to operate a key expansion module KEM has various requirements. For example a KEM needs to communicate with its associated phone in order to transmit key presses. A KEM also needs a source of power. And if a KEM s keys are programmable it needs a way to configure itself. One solution is to attach the KEM to its associated phone. Once the KEM and the phone are attached they can communicate and the phone can provide the necessary power and configuration.

Unfortunately attaching the KEM to the phone means that the phone must be specially designed. Since the phone needs extra hardware to support the KEM the phone will be more expensive. If the phone is not used with a KEM this extra hardware will be superfluous and will impose an unnecessary cost on the customer.

Also the interface between the phone and the KEM both physical and communicative is often fixed. For example the phone and the KEM might snap together to form a single device. Also they might communicate using an external serial bus with a proprietary protocol. In these situations a particular KEM is used with a particular phone. If the phone changes and or the KEM changes they may no longer be compatible.

Computer integrated functionality is implemented using a server and or a voice switch appliance in a distributed telephony environment. The server includes a telephony management software TMS unit a telephony application programming interface TAPI unit and an application unit which are communicatively coupled. The voice switch appliance switch includes a Voice over Internet Protocol VoIP device that serves as a gateway for various telephones and or trunk lines. The server and the switch are coupled to each other via a network. Also coupled to the network are one or more endpoints such as IP based telephones and software telephones one or more software applications that control these endpoints and one or more button boxes.

A button box provides additional keys that can be used in conjunction with a telephone. In one embodiment a button box is configured by associating it with a telephone and by programming its keys. When a key on the button box is activated a key press event is sent from the button box to the associated phone. The phone treats the key press event as if a key on the phone itself had been activated and forwards the event to the voice switch appliance associated with the phone. Alternatively the key press event is sent from the button box directly to a voice switch appliance. The button box s user interface is controlled by a voice switch appliance.

Further features of the invention its nature and various advantages will be more apparent from the accompanying drawings and the following detailed description.

The present invention is now described more fully with reference to the accompanying figures in which several embodiments of the invention are shown. The present invention can be embodied in many different forms and should not be construed as limited to the embodiments set forth herein. Rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the invention to those skilled in the art.

One skilled in the art will recognize that methods apparatus systems data structures and computer readable media can implement the features functionalities or modes of usage described herein. For instance an apparatus embodiment can perform the corresponding steps or acts of a method embodiment.

Telephones are often operated using keys. A key has various characteristics such as its appearance its function and whether it is programmable. Regarding appearance a key can be tangible e.g. a physical button that can be pressed or virtual e.g. a software key soft key that comprises a selectable area of a touch screen display . Regarding function a numeric symbol key is used to enter a piece of information such as a digit 0 9 or a symbol or while a feature key is used to perform a function e.g. a call control function such as transfer hold or conference . If a key is programmable i.e. its function can be changed the key is said to be custom. If it is not programmable the key is said to be dedicated. 

If a user wants additional keys beyond those available on her phone she can use a key expansion module KEM which provides additional keys. Although these keys are located on a separate device the KEM they behave as if they were located on the user s phone. For example activating a key of a particular type will have the same effect regardless of whether the key is located on the user s phone or on a KEM.

A new KEM which will be referred to as a button box can be used in conjunction with any Internet Protocol IP based telephone. In one embodiment a button box s keys are programmable. In this embodiment a button box is configured by 1 associating it with a phone and 2 programming its keys. In one embodiment a button box does not include an audio input device e.g. a microphone . In another embodiment a button box does not include an audio output device e.g. a speaker .

In general a button box s functionality is implemented as follows When a key on the button box is activated a key press event is sent from the button box to the associated phone. The phone treats the key press event as if a key on the phone itself had been activated and forwards the event to the voice switch appliance associated with the phone. Alternatively the key press event is sent from the button box directly to a voice switch appliance. The button box s user interface is controlled by a voice switch appliance.

Enterprise telephony systems which comprise a distributed set of switches and servers offer enterprise applications enabled by the integration of computer systems with telephony services. The software that supports the computer integrated functionality is generally implemented as a client server environment in which the participants or clients distributed telephony users communicate with a server. Computer integrated features rely not only on a server s application platform but also on the availability of the network that connects the switches servers and application services.

The IP phone the software phone the switch the device running the call manager software application the button box the server and the device running the management utility software application are communicatively coupled to each other via the network . The analog phone is communicatively coupled to the switch . The storage device is communicatively coupled to the server .

An endpoint enables a user to carry on a phone call and includes a user interface to convey data to and receive data from the user. An analog phone includes for example a Telephone User Interface TUI that conveys data through a speaker and receives data through a microphone and a keypad. An IP phone includes for example both a TUI and a graphical user interface that conveys data through a display device associated with the IP phone . In one embodiment an IP phone s graphical user interface also receives data from a touchscreen display device associated with the IP phone . A software phone includes for example a software application that runs on a computer and conveys data through a display device and a speaker and receives data through a microphone a keyboard and a pointing device.

In one embodiment an IP phone is a ShorePhone IP phone such as an IP560 IP 560 g or IP 530 phone from ShoreTel Inc. of Sunnyvale Calif. In another embodiment a software phone is a ShorePhone software phone such as a SoftPhone phone from ShoreTel Inc. of Sunnyvale Calif. In yet another embodiment an analog phone is a ShorePhone analog phone such as an AP100 phone from ShoreTel Inc. of Sunnyvale Calif.

A voice switch appliance switch comprises a Voice over Internet Protocol VoIP device that serves as a gateway for various telephones IP based or analog and or trunk lines digital or analog . In the switch is communicatively coupled to an analog phone . It is also communicatively coupled to the network and therefore can communicate with a variety of network enabled devices. The switch is also communicatively coupled to the PSTN via an analog or digital trunk line e.g. a T1 or E1 interface . In the illustrated configuration the switch provides an interface for calls originating from or terminating on the PSTN . A switch also provides call control functionality. For example a switch can execute a call control function such as barge in conference forward hold transfer etc.

In one embodiment a switch controls a user interface e.g. a display device and or an LED of an IP enabled device such as an IP phone or a button box . In this embodiment an IP enabled device is associated with a switch . An association between an IP enabled device and a switch is accessed through a server . The switch sends a signal to the associated IP enabled device that causes the device s user interface to present information. For example a signal from a switch can cause an IP phone s display device to show the user s name the user s extension number and the current date and time. In another embodiment this information can be localized e.g. using Unicode characters and a Unicode enabled phone . In one embodiment a switch is a ShoreGear voice switch such as a T1 or E1 switch from ShoreTel Inc. of Sunnyvale Calif.

A device running a call manager software application such as a general purpose computer controls one or more endpoints with which it is associated. A call manager provides a user with an interface through which she can perform call related functions. In one embodiment multiple call managers control the same endpoint. An association between a call manager and an endpoint that it controls is accessed through a server . In one embodiment a call manager is a ShoreWare desktop software application such as a Personal Call Manager Advanced Call Manager or Operator Call Manager application from ShoreTel Inc. of Sunnyvale Calif.

A button box provides additional keys that can be used in conjunction with an IP phone . In one embodiment a button box is a ShorePhone button box such as a BB24 button box from ShoreTel Inc. of Sunnyvale Calif. Button boxes will be further discussed below.

A server is configured to implement features or functions of the present invention. In one embodiment a server executes one or more software applications in order to provide various voice related services such as voice mail an automated attendant and a contact center. A server is communicatively coupled to a network and a storage device and will be further discussed below. In one embodiment a server executes various ShoreWare software applications such as a ShoreWare Voice Mail application from ShoreTel Inc. of Sunnyvale Calif.

A storage device contains information that is used to support a button box . Alternatively this information can be stored in a server . In one embodiment button box information includes a layout that describes the programming of one or more button box keys. In another embodiment this information includes one or more associations such as between a button box and an IP phone or between a button box and a switch .

In yet another embodiment one IP phone is associated with a group of button boxes and each button box in the group includes a unique identifier which is also part of the button box information. In one embodiment the first button box that is associated with an IP phone receives the identifier 1 the second receives the identifier 2 and so on. In the illustrated embodiment the storage device is directly coupled to the server . In an alternate embodiment the storage device is coupled to the server via the network .

A device running a management utility software application such as a general purpose computer enables a user to manage various aspects of a system . In one embodiment a management utility provides a user with an interface through which she can perform various tasks such as installation administration maintenance and call detail reporting. In one embodiment a management utility is a ShoreWare browser based software application such as a Director application from ShoreTel Inc. of Sunnyvale Calif.

In one embodiment a network includes a partially public or wholly public network such as the Internet. In other embodiments a network includes a private network or one or more distinct or logical private networks e.g. virtual private networks or wide area networks . Communication links to and from the network can be wireline or wireless e.g. terrestrial or satellite based transceivers . In one embodiment a network is a packet switched network such as an IP based wide or metropolitan area network that uses the Ethernet protocol.

The system in is used only by way of example. It is not necessary for a telephony system to include all of the elements shown in . In one embodiment a system includes multiple elements of the same type or different elements that are not shown in . For example in one embodiment a system includes two switches and an edge router not shown to provide local area connectivity for the switches. Also numerous configurations of switches and communication links are possible. For example PSTN links can be coupled to multiple switches at several points within the topology and software switches can also be used.

A server also includes a memory . A memory includes program instructions or functional units that implement features of the present invention. Specifically a memory includes a telephony management software TMS unit and a telephony application programming interface TAPI unit .

In one embodiment a memory also includes one or more application units that interact with the TMS unit and the TAPI unit to enable a specific computer integrated function. An application unit uses the TAPI unit to exchange data with the TMS unit . The TMS unit is able to communicate with and manage one or more switches . For example with reference to the TMS unit included in the server can manage the switch . Through the TAPI unit the TMS unit presents an application unit with a computer telephony integration CTI view of a switch . This enables the application unit to manage the switch . A switch can operate without an associated TMS unit if CTI features are not being used.

In the illustrated embodiment the display device is an LCD screen. It measures 80 pixels by 168 pixels and 13 characters by 14 lines. The illustrated display is grayscale and backlit. In the display is blank. In other embodiments button boxes include different numbers sizes and or types of displays .

In one embodiment when a button box is not associated with a phone the top line shows the IP address of the button box and the next line shows Unbound. When a button box is associated with a phone but the phone is not associated with a user the top line shows Anonymous or Available and the next line shows Button Box followed by the identifier of the button box . When a button box is associated with a phone and the phone is associated with a user the top line shows the extension number of the user and the next line shows Button Box followed by the identifier of the button box .

The remaining 12 lines are divided into two columns of 6 characters each. In one embodiment these 24 cells two per line 12 lines total are used as labels for the keys e.g. to indicate the functions assigned to the various keys . In the illustrated embodiment each line includes two labels one for the key located to the left of the display and one for the key located to the right of the display . In one embodiment a display supports multiple languages such as English French German and Spanish. In another embodiment a display shows different pieces of information and or shows information in different ways.

In one embodiment a button box is an Internet Protocol IP based device. It communicates with other IP enabled devices see below over a network using Ethernet. In one embodiment a button box includes a two port Ethernet switch that is compatible with the 802.3af Power over Ethernet PoE standard. An Ethernet uplink is used to connect the button box to the network via a wall jack. The uplink can also be used to obtain power for the button box via PoE. Alternatively the button box can obtain power from an electrical outlet using a power adaptor. An Ethernet downlink can be used to daisy chain a downstream device onto the button box e.g. an IP phone or a second button box . The button box forwards power to the downstream device using PoE. Alternatively the downstream device can obtain power using a power adaptor.

When a button box first attaches to a network it becomes associated with a switch . This switch controls the button box s user interface e.g. the display and the LED enabled keys by sending various signals to the button box . In one embodiment the switch updates the button box s user interface based on calling activity taking place on the associated phone or on other phones e.g. monitored extensions . In one embodiment a button box remains associated with the same switch even if the button box s configuration is changed. In one embodiment an association between a button box and a switch is stored by a storage device and accessed via a server .

The button box is configured by associating it with an IP phone and by programming one or more of its keys . One way to associate a button box with a phone is by using the management utility . For example the management utility enables a user to select a button box select a phone and create an association between them. Another way to associate a button box with a phone is by using an interface on the button box or an interface on the phone. For example the application unit in the server communicates with the button box or the phone and creates an association as requested by a user via the device s interface. In another embodiment an association is created automatically when a button box is connected to a phone e.g. via the button box s Ethernet downlink and the phone s Ethernet uplink . In one embodiment an association between a button box and a phone is stored by a storage device and accessed via a server .

In one embodiment after a button box has been associated with a phone the switch associated with the button box sends the button box a message that contains the IP address of the associated phone. In one embodiment this message adheres to the Media Gateway Control Protocol MGCP standard RFC 3435 . The switch can access the phone s IP address through the server .

In one embodiment a phone can be associated with a group of button boxes . Each button box in the group is assigned a unique identifier so that the phone can distinguish the various button boxes . In this embodiment the switch associated with the button box also sends the button box its unique identifier.

In another embodiment the switch also informs the phone of its associated button boxes e.g. by sending the phone their IP addresses . This enables the phone to identify legitimate button boxes .

An association between a button box and a phone can also be removed. One way to do this by using the management utility . For example the management utility enables a user to select an association and delete it. Another way to do this is by using an interface on the button box or an interface on the phone. For example the application unit in the server communicates with the button box or the phone and deletes an association as requested by a user via the device s interface. In another embodiment an association is deleted automatically when a button box is disconnected from a phone. Yet another way to do this is by associating a button box with a non existent phone whose IP address is 0.0.0.0.

The programming of a key on a button box is described by a layout. A layout is a set of information that indicates for one or more keys which function is assigned to each key . In one embodiment a layout also includes a parameter for a function. In another embodiment a layout also includes a label for a key which will be shown by the button box s display .

In one embodiment a layout is associated with a user. For example assume that a button box has been associated with a particular phone. If a user becomes associated with that phone e.g. by logging in to the phone the keys on the associated button box will be programmed according to her layout. In one embodiment a user can be associated with multiple layouts. This is useful for example if the person wants to use multiple button boxes simultaneously so that she has more keys available to use .

In one embodiment a layout is a software file that is stored by the storage device and accessed using the server . A switch associated with a button box accesses the button box s layout so that it can determine which labels the button box should display and instruct the button box to do so . A switch associated with a button box s phone accesses the button box s layout so that it can determine which function corresponds to a key press event that it received from the button box directly or via the associated phone . In one embodiment a copy of a layout is stored at a switch so that the switch can access the layout without needing to use the server .

One way to modify a button box s layout is by using the management utility . Another way is by using an interface on the phone that is associated with the button box . For example the phone prompts the user to select a button box key Press the key on the button box that you want to program and then select a function for that key. In one embodiment the user is also prompted to enter a parameter such as an extension number or phone number to be used with the function. The information supplied by the user is then used to modify the button box s layout. In one embodiment after a layout has been modified a switch is notified of this fact and or sent the new layout. If the switch is associated with the button box it can then update the button box s user interface accordingly e.g. a label associated with a key .

In one embodiment a portion of the button box s display is used to show a label for a key . This label can be automatically generated e.g. based on the key s function or it can be specified by the user. Similar to assigning a function to a key a user can specify a label via either the management utility or an interface on the associated phone.

Assume that a button box has been attached to a network and has been configured. When a key on the button box is activated the button box generates a key press event that it sends to its associated phone using the IP address that was earlier received from a switch . Alternatively the button box sends the key press event directly to a switch . Sending the key press event to the associated phone helps avoid race conditions. If the button box is not associated with a phone it sends the key press event to its switch .

A key press event includes information that identifies which key was pressed. In one embodiment the key press event also includes the identifier of the button box that generated the key press event. The button box identifier is used to determine the layout that is associated with the button box . This is useful if there are multiple button boxes associated with the phone each of which has its own layout or if the phone itself includes programmable keys and thus has its own layout . In one embodiment the key press event is sent using the MGCP standard s event notification mechanism.

The phone receives the key press event and forwards it to its switch which can be different from the button box s switch . In one embodiment before the phone forwards the key press event it determines whether the event was received from a legitimate button box based on the information that was earlier received from a switch . If it was then the phone forwards the event to its switch . Otherwise the phone does not forward the event.

Note that the phone sends two types of key press events to its switch events that originated from the phone itself and events that originated from the button box associated with the phone. The phone s switch can distinguish between these events e.g. based on the existence of a button box identifier . In one embodiment however the phone switch treats the button box key press events in the same way that it treats the phone key press events. Namely it determines the desired function based on the appropriate layout and which key was activated. This means that the additional keys on the button box really are treated the same way as the keys on the phone itself.

Assume that the IP phone is associated with the switch A and the button box is associated with the switch B. This means that the switch A controls the IP phone s user interface while the switch B controls the button box s interface. In other words the IP phone and the button box do not have to be associated with the same switch .

The IP phone and the button box become associated using any of the methods described above . This association is stored by the storage device . The button box s switch B instructs the button box to update its display accordingly. The button box s switch B also sends a message to the button box that contains the IP address of the associated IP phone . If the phone were also programmable or if there were already another button box associated with the same IP phone not shown then the switch B would also notify the button box of its unique identifier e.g. 2 . In the illustrated embodiment however this is not the case so a button box identifier is not used. The switch A could also notify the IP phone of the button box e.g. its IP address for later use in determining the legitimacy of received key press events.

A button box key becomes programmed to monitor a particular phone extension using any of the methods described above . For example the key s label part of the display indicates the extension number that is being monitored. The key s LED indicates the status of the monitored extension.

In one embodiment a label can also indicate a monitored extension s status. For example if a label is shown in reverse video e.g. white characters on a black background rather than black characters on a white background then the target extension has a message waiting.

In order to monitor an extension the button box s switch B receives information from the server about the status of the extension. The switch B then instructs the button box to update its user interface e.g. its display and or LED keys accordingly. The IP phone s switch A also monitors the extension and receives information from the server . This enables the phone s switch A to behave properly when it receives a key press event that originated from the button box .

For more information about Extension Monitoring functionality and implementation see U.S. patent application Ser. No. 10 932 614 filed on Sep. 1 2004 and entitled Extension Monitoring in a Distributed Telephony System which is hereby incorporated by reference.

Having described embodiments of a button box and a distributed telephony system that supports it which are intended to be illustrative and not limiting it is noted that modifications and variations can be made by persons skilled in the art in light of the above teachings. It is therefore to be understood that changes can be made in the particular embodiments of the invention disclosed that are within the scope and spirit of the invention as defined by the appended claims and equivalents.

