---

title: Printer with embedded retrieval and publishing interface
abstract: A system and method for a printer that receives a data containing multimedia information or a pointer to multimedia content and performs various actions in accordance with the received document. The printer may retrieve the multimedia content based on pointers within the document or the document itself may include multimedia content.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07573604&OS=07573604&RS=07573604
owner: Ricoh Co., Ltd.
number: 07573604
owner_city: 
owner_country: JP
publication_date: 20070801
---
The present application is a continuation of U.S. patent application Ser. No. 10 814 536 filed Mar. 30 2004 entitled Printer with Embedded Retrieval and Publishing Interface now U.S. Pat. No. 7 253 919 which is a continuation in part of U.S. patent application Ser. No. 09 728 453 filed Nov. 30 2000 entitled Techniques for Receiving Information During Multimedia Presentations and Communicating the Information and U.S. patent application Ser. No. 09 728 560 filed Nov. 30 2000 entitled Techniques for Capturing Information During Multimedia Presentations now U.S. Pat. No. 7 167 191 all of which are herein incorporated by reference in their entireties.

The following patent applications are related to the present application and are incorporated by reference herein in their entirety 

The present invention relates to document printers and more specifically to systems and methods that receive a document containing multimedia or pointers to multimedia and act in accordance with the received document.

Conventional printers receive a representation of a document and then print the document in paper form. Generally a conventional document will contain text and possibly some pictures or static graphics. For example a printer may print a sales report or a snapshot of a web page. If the document is part of a larger multimedia presentation however conventional printers do not adequately represent the complete presentation. For example a sales report might be part of an animated computer slide show. As another example a web page might incorporate an animated picture. As a third example a pointer or local address might point to a digital recording of a television program. Conventional printers can only print a captured snapshot of such multimedia presentations.

Today as more and more electrical databases and computer networks are interconnected people often have multiple data systems and destinations in which to store information. For example a person may receive an email containing information and or a multimedia attachment that he wants to retain. The person may want to print some or all of the information. The person may further want to add the information to a database or to send the information to other people or destinations or to add the information to a web page. Currently the person will need to execute several different software programs and will need to type multiple commands into the programs. He may also need to re enter the information into one or more programs. This is not efficient and is prone to human error since human beings occasionally forget to perform one of more of the tasks usually associated with a received document and are also prone to typographical errors.

What is needed is a printer and method that can capture and print more of the true flavor of a multimedia presentation or multimedia document.

The present invention overcomes the deficiencies and limitations of the prior art by providing a system and method for a printer that can receive pointers or links to multimedia data and trigger an action in response. For example one embodiment of the printer receives multimedia information such as a pointer to multimedia content then retrieves the multimedia content and prints a document representing the multimedia content. Another embodiment further stores the retrieved multimedia content in a database or in local storage of the printer. Another embodiment of a printer gathers multimedia content that is accessible to it e.g. via a network or in its local storage and prints a summary document of the gathered multimedia content.

The action performed by the printer preferably is based on content of the document received by the printer. This content can include printable and non printable data. In certain embodiments the document is analyzed by a data processing system before it is sent to be printed and additional data is added to or coupled with the document. In one embodiment an author or other user provides additional information such as the name of a database a special print command or a pointer to a web page. In another embodiment plug in software on the data processing system analyzes the document and provides additional information about its content. In another embodiment printer driver software on the data processing system analyzes the document and provides additional information about its content. In yet another embodiment the printer analyzes the document after the printer receives it. In certain embodiments the printer retrieves multimedia data in accordance with the document and prints a document in accordance with the document received.

Certain embodiments retrieve multimedia data and store it locally or on a web site. This could be used to print a URL that points to an mp3 audio file or a video file. Because it might take a long time to download the data the user would be happy if the printer takes care of that in the background. Subsequently the user can view a listing of the audio and video files on a web page served by the printer and play selected files on demand. That web page could also allow the user to generate video paper for those files. This could result in the printing of a paper document but it could also provide an electronic representation e.g. pdf for the video paper. The bar codes would refer to the location of the multimedia after it was retrieved by the printer.

In other embodiments the multimedia data itself is sent to the printer in conjunction with or as a part of the document. In some embodiments the received pointers or multimedia data must be processed before printing can occur. Certain embodiments also store the retrieved multimedia data in local storage or in a database.

A printer and associated method that can retrieve and print a representation of multimedia is described. For example a printer receives a document containing or referencing audio and or video multimedia data. The printer then produces a printed document in accordance with the received document. In this application the term multimedia can include any type of multimedia content such as but not limited to graphics JPEGs Gifs etc animation video from any source and in any format photographs scans audio from any source and in any format and combined forms such as Macromedia Flash files or static compound documents whose contents include embedded video audio or animation. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the invention. It will be apparent however to one skilled in the art that the invention can be practiced without these specific details. In other instances structures and devices are shown in block diagram form in order to avoid obscuring the invention.

Reference in the specification to one embodiment certain embodiments or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment.

Some portions of the detailed descriptions that follow are presented in terms of algorithms and symbolic representations of operations on data bits within a data processor memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout the description discussions utilizing terms such as processing or computing or calculating or determining or displaying or the like refer to the action and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

The present invention also relates to apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium such as but is not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards or any type of media suitable for storing electronic instructions and each coupled to a computer system bus.

The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages and Page Description Languages PDLs may be used to implement the teachings of the invention as described herein.

Moreover the present invention is claimed below operating on or working in conjunction with an information system. Such an information system as claimed may be the entire messaging system as detailed below in the preferred embodiment or only portions of such a system. Thus the present invention is capable of operating with any information system from those with minimal functionality to those providing all the functionality disclosed herein.

In the Figure the document is sent over a network such as the Internet an intranet a wireless connection a wide area network or the like. Printer receives the document and performs an action based on the content of the document. One example of such an action is to create and print a document summarizing the multimedia content pointed to by the document. In this case the printer would first retrieve the content. Another example of such an action is to create and print a document summarizing multimedia information or content that is contained within the document. The printer may also perform additional actions such as entering data in a database sending a notification or confirmation adding data to a web page etc. In this example printer retrieves data from component and stores data on component . Examples of actions performed in accordance with content of the document are discussed in further detail below.

It will be understood that the system configurations shown in are examples only and are included to show some configurations usable with the present invention. It will be understood that other configurations are possible. For example the connections between the document source and the printer and between the printer and components and can both be network connections.

In the pointer to local storage takes the form of a bar code that is a part of the printed document . This bar code refers to a location of a cached video clip. In other embodiments the bar code might refer to an original location of the clip or to a location of the printed key frames.

It should be noted that scanning the bar code will enable a data processing system not shown to access the local cached copy of the data even if the original copy on the Web is removed for some reason. Thus for example a human being could rapidly read through document and many similar documents. The human could then cause a data processing system such as a hand held bar code reader to scan the bar code and immediately begin playing the video clip on an associated display. This would present a way for many people to inexpensively look through documents representing stored video clips and then to play or copy the clips that they desired. Storing pointers to video clips as paper documents also has an advantage because paper is long lasting and does not require any software or hardware for viewing. The term printed document and printable document as used herein is not however limited to paper documents. A printer in accordance with the present invention could also output other types of outputs to summarize multimedia inputs.

Another embodiment embeds extra data for example the video clip itself in the print stream over and above what is needed to print the document . The printer caches the data and creates a paper based summary as appropriate.

In the example of the printer may initiate a dialog with a print driver . Such interactive printing is contained in certain embodiments of the present invention and not in others. It is discussed in more detail elsewhere in this application.

In the example of the printer includes a multimedia retrieval interface. This interface may be implemented as hardware and or software. Through it the printer communicates with sites on the network that provide multimedia content. Such an interface can include for example an interface to a locally stored index table. When printer receives a document it determines whether the document it receives matches a document in the index.

In the example of printer further includes multimedia analysis software such as software to perform clip segmentation key frame extraction and image matching. In the example of printer further includes processing logic that may be implemented as software and or hardware and that includes video paper generation. Video paper and audio paper are a paper based interface for audio and video data. Examples of video and audio paper are described in the following documents which are herein incorporated by reference in their entirety.

In the example of printer further includes a printer driver interface to interface with a printer driver in a video source such as a user s data processing system . In one embodiment the processing logic interacts with the user through a print driver dialog and generates video paper.

In the example of printer further includes hardware and or software to perform digital media output including a network interface to read and write media including for example DVDs SDs a network interface card etc.

In various embodiments printer communicates over a network although printer could also have a direct connection to the various components shown. For example a database can be external or internal to printer . In this example printer includes network interface hardware and software required to communicate over a network. Printer further includes Internet communication software that creates and executes commands to communicate with the database. These commands are for example SQL commands http commands or similar commands depending on the nature of database .

In the example of printer performs additional actions besides printing document . In the example printer retrieves data from a web page or site and stores data relating to the received document in a database . It should be noted that other embodiments may additionally create web pages and retrieve multimedia content or information from database . Other embodiments might store and or retrieve data to and from a web site . Other embodiments might store and or retrieve data from a web publishing site such as www.documentmall.com.

determines whether a retrieval query should be added to the document. For example a plug in searches the document for URLs that point to video and embeds them in the PDL sent to the printer. As another example the plug in can construct an explicit query such as a conjunction of pairs of adjacent words in the document that could be applied to a database of stored PowerPoint recordings that are created by a system that we call the Presentation Recorder such as the one described in U.S. patent application Ser. No. 09 728 453 filed Nov. 30 2000 and U.S. patent application Ser. No. 09 728 560 filed Nov. 30 2000 entitled Techniques for Capturing Information During Multimedia Presentations both of which are herein incorporated by reference in their entirety. The presentation recorder saves images of presentation slides together with audio and video of a person describing those presentation slides. The audio and video are time stamped so that a user can retrieve and replay the multimedia associated with any particular slide. Each slide image is OCR d and the results are stored in a full text index. In the present invention a PowerPoint plug in could create queries to such a full text index from each slide. Those queries would be embedded in the comments of the pdf file and the printer would apply them to the Presentation Recorders that it knows about. If it finds a matching recording the printer would retrieve the multimedia store it on the printer and inform the user that this was done. The printer could also print a video paper representation for that data. In some embodiments the plug in retrieves and transmits multimedia data to the printer e.g. audio and video clips are added to the PDL file. These would conventionally be classified as non printing data since conventional printers cannot print audio or video.

Data processing system then sends information to the printer using a format such as Postscript see . This information is termed Page Description Language PDL because it describes the appearance and characteristics of a document to be printed. In this example the PDL includes data in the original document to be printed and data derived by application plug in such as data extracted by the plug in from fields in the document or actual multimedia data fetched by the plug in . It will be understood that the functionality of plug in could also be implemented as part of application software instead of as a plug in.

The communication of data to the printer in a way that does not affect the appearance of the printed document above can be done by including the data as a non printing comment field in the PDL file. This type of non printing comment is currently allowed in Adobe Postscript or Hewlett Packard s PCL. Often a long sequence of unlikely characters signals the presence of such data see Postscript Language Document Structuring Conventions Specification Version 3.0 Sep. 25 1992 http partners.adobe.com asn developer pdfs tn 5001.DSC Spec.pdf . Using Postscript as an example in which comments are indicated by two percent signs at the beginning of a line data fields for a URL could be indicated as RICOH NEPV1.0 URLITEM page 1field Pointer type string value http www.cnn.com.1234 

Performing this processing in an application plug in means that processing can be specialized for an application. For example a PowerPoint plug in can include commands that trigger the printer to search in online databases of previously recorded presentations.

a. determines whether the document contains application derived data and whether any further processing should be applied to the document see . For example the printer searches the received PDL file for commands and data in the comments. If the commands indicate that the document should be searched for links or data the PDL file is searched for those elements. The printer can receive query commands to retrieve image data audio clips URLs or video clips. Functional descriptions of such commands include but are not limited to 

b. The printer optionally processes the document to produce printer derived data e.g. a filter might be applied to postscript data that detects web URL s. In this document processing by the printer is classified as simple or complex. In general simple processing involves the printer executing a well defined external command or recognizing regular expressions such as URLs . Complex processing by the printer involves performing a content based operation on the PDL.

In a preferred embodiment the printer software executes simple processing. It inspects the comments in the PDL file and when it finds 

it determines that a content based analysis of the PDL is not needed. Instead printer executes a command from data processing system .

c. The printer decides and performs an action in accordance with the content of the received document e.g. the commands in the document might indicate that the document should be searched for links to video files and if such links are found the video should be retrieved key frames extracted from it and a video paper representation constructed. A video paper layout may for example disrupt the original layout of the document. Alternately it may be constructed in a layout that minimizes this disruption. For example many URLs can be rewritten as bar codes using at most space occupied by the textual form of a URL in the original document. As another alternative the video paper including information not in the original document such as bar codes links etc can be printed as a separate document or as a cover sheet to the original document.

In general if a retrieval command is embedded in the comments and the appropriate data is located in the PDL then the retrieval command is executed by the printer the retrieved data modified as specified for example key frames extracted from the video and the printed document is modified appropriately. If a retrieval command is not embedded in the comments but URLs pointing to multimedia are present or if the multimedia content itself is present in the PDL the user is prompted for whether he would like the printer to execute the retrieval of multimedia data. As described above the multimedia content is then retrieved and stored on the printer or on an associated storage device either a default or as indicated in a command . Then the paper document is printed and optional additional actions are performed as described below.

In still other embodiments the printer can perform various summation functions such as speech recognition for audio files key frame extraction for video files and so on.

Key frame extraction is described for example in the following documents which are incorporated by reference in their entirety 

Hull Erol Graham and Lee Visualizing Multimedia Content on Paper Documents Components of Key Frame Selection for Video Paper Proceedings of the Seventh International Conf. On Document Anlaysis and Recognition ICDAR 2003.

A. Girgensohn and J. Boreczky Time Constrained Keyframe Selection Technique IEEE Multimedia Systems 99 IEEE Computer Society V. 1 756 761 1999.

In summary in the system shown in when the user executes a print command the application processes the source document and creates a page description language PDL version of the document that includes application derived data computed by an application plug in. Document processing software on the printer detects the presence of that information and prints the original document along with additional information in accordance with the original document. The printer also decides what additional actions should be executed as a function of the application derived and printer derived characteristics of the document.

Performing this processing in a print driver means that the functionality can be delivered in a generic way perhaps across all applications. For example an instruction could be added to every document sent to the printer that tells it to search the document for URLs that point to video clips and to create a paper like summary for each clip. In one implementation at installation the print driver is configured to indicate its multimedia handling capabilities. For example whether it should always look for URLs always retrieve video clips before sending a document always extract key frames before sending a document and so on.

This implementation and that of and is useful in systems where data sent to the printer is commonly stored in a print queue. In such systems the protocol does not allow for user interaction with the printer. Thus any special communication must be embedded within the data initially sent to the printer. Ideally the embedded data does not affect the print spooler or other forwarding device while remaining easy for the printer to detect and parse. As an example the user inserts the following PostScript metadata into the print stream. Note that this metadata has the format of a non printing comment. RICOH NEPV1.0 URL ACTION page 1 x 1234y 1856url http www.cnn.com 1234 action Retrieve and summarize multimedia storage on printer The above example indicates a URL where multimedia data is located. Document processing software of printer looks for commands within the print stream and processes them. Thus in the above example software would retrieve the multimedia content at www.cnn.com 1234 and print a barcode on the printed document at location x 1234 y 1856 where the bar code indicates a storage location of the retrieved multimedia data. Other examples of actions taken by printer in various embodiments include one or more of the following 

In one embodiment printer detects web URLs in the PDL retrieves those pages and prints them as an attachment to the original document.

In another embodiment the printer pre caches web pages corresponding to URLs in the document under the assumption that those web pages will soon be accessed by the user printing the document with their URLs. Alternatively the printer retrieves the web pages and stores them in a database.

In another embodiment the printer retrieves the multimedia content for some or all URLs in a document creates a summary of their contents URL title author date printed number of pages thumbnail for a web page short web page text summary key frames from a video clip etc and prints that summary either embedded in the original document or as an addendum.

The above embodiments provide examples of applying a calculation or analysis to the document received by the printer and performing an action besides printing based on the calculation or analysis.

It will be understood by persons of ordinary skill in the art that the processing described above can be performed at various locations within the system. For example the processing described above in connection with complex document processing performed by the printer could also be performed either totally or partially by data processing system . Similarly processing described as being performed by software on data processing system could be performed by document processing software in printer . Similarly processing could be performed both by the data processing system document source and by the printer.

One advantage of using plug ins in data processing system is that they are easy to add to existing software. In contrast one advantage of performing most or all processing on the printer side is that printers are easier to maintain and service than user computers. In addition if a large enterprise is going to purchase special processing software it is less expensive to purchase software that runs on a small number of printers as opposed to software that runs on each user machine. This is even more important if special purpose hardware such as a powerful signal processor is needed to perform the function because of the expense and difficulty of such installations. Moreover the work environment of printers is usually better monitored and it is physically easier to maintain security over printers that contain sensitive analysis programs such as programs that monitor compliance with licensing or seat requirements or with security requirements than if this analysis software was located in users computers.

The following paragraphs contain additional examples of complex processing by a printer. The printer recognizes a PDL file directly and analyzes the file to detect certain known fields. As stated above these embodiments could also be implemented on data processor .

Other embodiments may automatically choose clips or samples based on identifying a face in the document and finding audio clips of that person speaking. Other embodiments may print an automatic transcript of the audio clips.

In general conventional printer drivers in modern operating systems are not designed to facilitate interactive information gathering. Because the print job can be redirected to another printer or the printing protocol does not allow such interactive sessions the operating system does not encourage interaction with the user. Once initial printer settings are captured further interactions are generally not allowed in conventional printers. One approach to this problem is to embed metadata into the print stream itself as noted above. However it is possible that the printer could need to ask the user for more information in response to computations made from the data supplied by the user. In addition the printer itself might delegate some tasks to other application servers which might in turn need more information from the user. So called Web services or grid computing systems are examples of the sort of application server that the printer might trigger.

In order to allow this interaction without modifying printer driver architecture of the underlying operating system an extra mechanism such as the one shown in is constructed. A UI Listener program listens to a network socket accepts requests for information interacts with a user to obtain such data and then sends the data back to the requester.

Once a print request is sent by user and notification requested from the UI listener the print job is sent by application . Here the print job contains embedded information including the network address of the UI listener authentication information and the latest time that the client will be listening for requests.

If the printer requires additional information of confirmation it sends a request which is detected by the UI listener which displays a dialog box to obtain input from the user . An example of such as request might be a request for a password or user confirmation code that the user must enter to access a database . Alternatively the printer asks for additional information based on computation such as noting the absence of a required field and asking for a value to be entered before printing. The user s input is included in a reply sent to the printer. If the reply does not satisfy the printer it may ask for additional information not shown . If the reply does satisfy the printer it takes a next step. This step might be to perform an action such as sending an email not shown . The next step might also be sending a request for information to an application server such as a database . In this example application server also sends a request for information which is detected by the UI listener. The user is prompted and his response forwarded to the application server . In this example a reply is then sent from the application server to the printer . It will be understood that a particular embodiment may include either or none or requests and without departing from the spirit of the present invention.

A program such as that shown in may have a fixed set of possible interactions or may accept a flexible command syntax that allows the requester to display many different requests. An example of such a command syntax would be the standard web browser s ability to display HTML forms. These forms are generated by a remote server and displayed by the browser which then returns results to the server. In this embodiment however the UI listener is different from a browser in that a user does not generate the initial request to see a form. Instead the remote machine generates this request. In the described embodiment the UI listener is a server not a client.

Because network transactions of this type are prone to many complex error conditions a system of timeouts would be necessary to assure robust operation. Normally each message sent across a network either expects a reply or is a one way message. Messages which expect replies generally have a timeout a limited period of time during which it is acceptable for the reply to arrive. In this embodiment embedded metadata would include metadata about a UI listener that will accept requests for further information. Such metadata preferably includes at least a network address port number and a timeout period. It might also include authentication information designed to prevent malicious attempts to elicit information from the user. Because the user cannot tell whether the request is coming from a printer a delegated server or a malicious agent prudence suggests strong authentication by the UI listener. If the printer or a delegated application server wishes more information it can use the above noted information to request that the UI listener ask a user for the needed information.

While the present invention has been described with reference to certain preferred embodiments those skilled in the art will recognize that various modifications may be provided. For example certain embodiments employ multiple application servers acting in cooperation to perform a function or request. Any of the above functions or requests can be sent across a network or using local cables such as IEEE1394 Universal Serial Bus or wireless networks such as IEEE 802.11 or IEEE 802.15 networks in any combination. Variations upon and modifications to the preferred embodiments are provided for by the present invention which is limited only by the following claims.

