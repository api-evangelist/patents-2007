---

title: Control method and control equipment
abstract: In order to easily download a program obtained from the outside onto a connected device while a device on which a program is to be downloaded is being properly selected, when a second device connected to a first device is controlled by executing a first program inputted to the first device from the outside and a second program prepared beforehand in the first device, the most desirable device is selected as the second device by executing the second program and the first program is executed by using information on the selected device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08032912&OS=08032912&RS=08032912
owner: Sony Corporation
number: 08032912
owner_city: 
owner_country: JP
publication_date: 20071211
---
The present application is a continuation of U.S. patent application Ser. No. 09 743 166 filed Mar. 20 2001 which is a national stage application under 35 U.S.C. 371 of International Application No. PCT JP00 02933 filed May 8 2000 which claims priority from Japanese Application No. P11 127349 filed May 7 1999 the disclosures of which are incorporated herein by reference.

The present invention relates to a control method and a control equipment suitable for use in receiving digital satellite broadcasting and downloading a received music program or the like onto a data storage equipment for example.

Digital satellite broadcasting is being widely used increasingly. As compared with existing analog broadcasting digital satellite broadcasting is resistant to noise and fading and is able to transmit a high quality signal. Digital satellite broadcasting can also increase frequency utilization factor and can provide multiple channels. For example in the digital satellite broadcasting one satellite can secure several hundreds of channels. The digital satellite broadcasting prepares a large number of special channels such as a sports program a movie music and a news program and these special channels are broadcasting the programs of their own contents.

Of these special channels a music program channel is one of the popular channels of the digital satellite broadcasting and is broadcasting promotion programs mainly introducing new songs and hit songs.

The conventional music channel is broadcasting the music promotion programs introducing new songs and hit songs in the form of moving pictures and sounds. Listeners are often urged to purchase a CD with introduced numbers and wish to listen to such numbers while viewing the music promotion programs. Listeners often want to know information about artists in the desired numbers and information about an album of desired numbers. While listeners are viewing music channel programs and wish to get the information about the artist of desired number and the information about the album of such desired numbers it would have been very convenient for the listeners if they could get such information on the spot. When the listeners found favorite numbers it would have been very convenient if they could download audio data of such desired numbers. The conventional music channel is however unable to meet such listeners requests because it is usually transmitting moving pictures and sounds concerning numbers to the listeners one sidedly.

To solve the above problem there is proposed a music contents distribution system capable of easily obtaining information concerning music broadcast on the music channel and which is also able to easily download number data to a data storage equipment Japanese patent application No. 9 308488 1997 . Some proposed music contents distribution system is able to download words data and jacket data as well as the music data.

When a user sets up the music contents distribution system the user who receives digital satellite broadcasting should connect a tuner for receiving digital satellite broadcasting to a data storage equipment recording equipment using a recording medium such as a magnetooptical disk to download a music program received at the tuner onto the recording equipment. When the music program received at the tuner is downloaded onto the recording equipment the recording operation of the recording equipment connected to the tuner should be controlled based on data such as a start time of the corresponding program transmitted together with the music program for example by the digital satellite broadcasting and hence the tuner and the recording equipment should be set in such a manner that they can operate in unison with each other. There are known various types of the recording equipment for recording an audio signal for example and hence an unspecified recording equipment which will be connected to the tuner cannot directly be controlled substantially based on data from a broadcast station from which music program is transmitted.

Only one recording equipment is not always connected to the tuner and a plurality of recording equipment may be connected to the tuner. In that case the broadcast station is unable to select a specific recording equipment to which a music program should be downloaded and hence the tuner has to explore some countermeasures to select a specific recording equipment.

In order to make the above download become possible the assignee of the present application has previously proposed a control equipment in which a program HTML Hyper Text Make Up Language MHEG Multimedia and Hypermedia Information Coding Experts Group XML extensive Markup Language called scripts from the outside obtains device information from an internal program previously prepared in the tuner and is able to instruct the tuner to select a specific device onto which the broadcast music program should be downloaded based on the device information Japanese patent application No. 10 202360 1998 .

The processing proposed by the previously proposed application encounters with the problem that when the user energizes the tuner to start the download first time the tuner is unable to determine which device is the recording equipment onto which the music program should be downloaded. A device that has been selected as the recording device to which the music program should be downloaded is referred to as a default device .

While the default device is not existing e.g. downloading is effected on the recording equipment for the first time the external program should execute the sequence to request the internal program to obtain information of devices currently connected to the tuner to display a list of connected devices and to request a user to select a specific device onto which music program should be downloaded.

Even when the tuner stored the previously obtained information of the device in a predetermined memory within a control section CPU if the corresponding device is not connected to the tuner in the next download e.g. if a user purchases a new device on which data should be downloaded and changes the previous device then the tuner has to again obtain information of currently connected devices to display a list of those connected devices and to urge the user to again select one device that should be used.

In the previously proposed download the download is effected on the device on which the download has been effected previously. Depending on the state of the device onto which data should be downloaded whether the device has already been powered or a recording media has already been inserted into the device after processing for executing the download has started when a recording media is not inserted into the device an abnormality occurs in the download and the download is often ended in somewhere of its processing. There is then the possibility that the tuner will become unable to select a proper device as a default device. Hence the tuner has to make some device to solve this problem.

When a tuner can be connected to various networks e.g. IEEE The Institute of Electrical and Electronics Engineers 1394 system USB Universal Serial Bus etc. unless the user makes complicated input operation to specify a device the user becomes unable to specify a download target device connected to a specific network. Consequently operation for the download becomes considerably cumbersome for the user.

While the problem arising when the music program is transmitted through the digital satellite broadcast has been described so far a similar problem arises when various programs transmitted from the outside by broadcast waves are downloaded onto the receiving side based on data transmitted together with those programs.

It is an object of the present invention to provide a control method and a control equipment in which a program obtained from the outside can easily be downloaded onto a connected device after a device to which a program should be downloaded has properly be selected.

According to the first invention there is provided a control method in which a second device connected to a first device is controlled by executing a first program inputted to the first device from the outside and a second program prepared beforehand in the first device.

The most desirable device is selected from devices connected to the first device as the second device by executing the second program and the first program is executed by using information of the selected device. With this arrangement when an external program for example requests an internal program to obtain default device information even if a default device ID is not stored in a predetermined memory then information of a currently connected device can be obtained by returning information of the most desirable device of the connected devices and a list of connected devices can be displayed. Consequently a user can save a lot of time and labor required when the user selects a target device in a target network from the list of connected devices and hence the user can download data more easily and efficiently.

According to the second invention in the control method according to the first invention the second device is selected when information concerning the second device is not stored in a connected device information storage section of the first device. With this arrangement even when the default device is not selected an optimum device can automatically be selected.

According to the third invention in the control method according to the first invention the second device is selected when a device instructed by information stored in the connected device information storage section of the first device is not connected. With this arrangement when a device that has already been selected as a default device is disconnected from the network an optimum device can automatically be selected from other devices within the network.

According to the fourth invention in the control method according to the first invention device information used at every type of device is stored in the connected device information storage section the first or second program includes processing for selecting the type of device and when a device of the type instructed by the program should be selected the most desirable device is selected as the second device. With this arrangement when various types of devices are controlled device information need not be obtained and hence the user can download data more easily and efficiently.

According to the fifth invention in the control method according to the first invention the information obtained when the second program is executed is information of an identification code granted to the second device. With this arrangement the first device side can discriminate the type of the second device and the second device can properly be controlled based on the discriminated identification code.

According to the sixth invention in the control method according to the first invention the second program is a program for effecting processing on the second device connected through a bus line of a predetermined format. With this arrangement control corresponding to the format of the bus line connecting the first and second devices becomes possible.

According to the seventh invention in the control method according to the first invention the second program is a program for setting information concerning the second device by predetermined input operation. With this arrangement the control method can cope with a second device incapable of transmitting its own information.

According to the eighth invention in the control method according to the first invention the first program is obtained by receiving a signal transmitted from a broadcast signal transmission side through predetermined broadcast waves. With this arrangement when the broadcast signal transmitting side for example transmits a first program for instructing downloading of a broadcasting program of a predetermined channel the side which receives this program can obtain information of a connected device by a second program activated by the first program can effect a proper download on the device and can download an arbitrary broadcasting program in response to an instruction from the broadcast signal transmitting side.

According to the ninth invention in the control method according to the first invention the first program is obtained by receiving a signal transmitted through wired broadcast. With this arrangement an arbitrary broadcast program can be downloaded in response to an instruction from the wired broadcast transmitting side.

According to the tenth invention there is provided a control method in which a second device connected to a first device is controlled by executing a first program inputted into the first device from the outside and a second program prepared beforehand in the first device. When an abnormality occurs in control of the second device and the control is ended information concerning the second device is stored in a predetermined storage section of the first device. Next time a device controlled by the first device is selected the second device is controlled based on information stored in the storage section. With this arrangement while an external program for example requests of an internal program to make the download even when an abnormality occurs in a media inserted into a download target device and the internal program ends abnormally if an ID of such device is stored a user removes the abnormality and uses the device having the stored ID as the default device then the user need not select the default device again and the user can download data more easily and efficiently.

According to the eleventh invention there is provided a control equipment which is comprised of a first storage section in which a first program inputted from the outside is stored a second storage section in which a second program prepared beforehand and which is activated by the first program is stored and a processing section in which programs stored in the respective storage sections are executed after the most desirable device was selected from connected devices by executing the second program stored in the second storage section information of the selected device is obtained and the connected device is controlled based on the obtained information. With this arrangement when an external program requests of an internal program to obtain default device information even if default device ID is not stored in a predetermined memory then information of currently connected device can be obtained by returning information of the most desirable device from the connected devices a list of the connected devices can be displayed and the user can save a lot of time and labor to select a desired device in a desired network from the displayed list of the connected devices. Accordingly there is obtained a network device in which the user can download data more easily and efficiently.

According to the twelfth invention in the control equipment according to the eleventh invention the processing section selects the most desirable device from the connected devices when information of controlled devices is not stored in the second storage section. With this arrangement even when a default device is not selected the optimum device can automatically be selected.

According to the thirteenth invention in the control equipment according to the eleventh invention the processing section selects the most desirable device from other connected devices when the device stored in the second storage section is not connected as the controlled device. With this arrangement when the device that had already been selected as the default device is disconnected from the network the optimum device can automatically be selected from other devices within the network.

According to the fourteenth invention in the control equipment according to the eleventh invention device information used at every type of device is stored in the second storage section and the processing section selects the most desirable device from the type when the device of the type instructed by the first or second program should be selected. With this arrangement when various types of devices are controlled device information need not be obtained and the user can download data more easily and efficiently.

According to the fifteenth invention in the control equipment according to the eleventh invention information that the processing section obtains from the device by executing the second program is information of identification code granted to the device. With this arrangement the control equipment can discriminate the type of the connected device and the connected device can properly be controlled based the discriminated identification code.

According to the sixteenth invention the control equipment according to the eleventh invention includes an interface section for communicating with a device through a bus line of a predetermined format and in which the processing section obtains information of the connected device by communication through the interface section and the connected device can be controlled by communication through the interface section. With this arrangement devices connected by a bus line such as an IEEE 1394 bus for example can be controlled satisfactorily.

According to the seventeenth invention the control equipment according to the eleventh invention includes an input section for inputting information concerning devices and a remote control signal output section for outputting a remote control signal of a predetermined format in response to a command from the processing section and in which the input section obtains information of the connected device when information concerning device is inputted and the processing section enables the remote control signal output section to output a remote control signal based on the obtained information. With this arrangement even when a device incapable of transmitting its own information is connected this device can be controlled satisfactorily.

According to the eighteenth invention the control equipment according to the eleventh invention includes a receiving section for receiving a broadcast signal of a predetermined format and in which a first program contained in the received broadcast signal is stored in the first storage section. With this arrangement when a broadcast signal transmitting side for example transmits the first program instructing the download of a broadcast program of a predetermined channel the control equipment which received this program obtains information of a connected device by the second program activated by the first program and the proper download processing on the device can be executed satisfactorily and an arbitrary broadcast program can properly be downloaded onto the device connected to the control equipment by the instruction from the broadcast signal transmitting side.

According to the nineteenth invention in the control equipment according to the eighteenth invention the receiving section is a receiving section for receiving a satellite broadcast signal relayed by a predetermined artificial satellite. With this arrangement a broadcast program transmitted by the satellite broadcast signal can be downloaded satisfactorily.

According to the twentieth invention in the control equipment according to the eighteenth invention the receiving section is a receiving section for receiving a signal transmitted through a wired broadcast. With this arrangement a broadcast program transmitted via the wired broadcast can be downloaded satisfactorily.

In accordance with the twenty first invention there is provided a control equipment which is comprised of a first storage section in which a first program inputted from the outside is stored a second storage section in which a second program prepared beforehand and which is activated by the first program is stored and a processing section in which the programs stored in the respective storage sections are executed information of connected device is obtained based on execution of the second program stored in the second storage section the connected device is controlled based on the obtained information when an abnormality occurs in the control and the control is ended the controlled device is selected in the next control. With this arrangement while an external program for example requests of an internal program to make downloading even when an abnormality occurs in a media inserted into a download target device and the internal program ends abnormally if an ID of such device is stored a user removes the abnormality and uses the device having the stored ID as the default device the user need not select the default device again and the user can download data more easily and efficiently.

Embodiments of the present invention will be described below with reference to the accompanying drawings.

The system according to the present invention broadcasts a music program by using digital satellite broadcasting enables the viewers to listen to the music program by distributing audio data relating to this music program and further enables the viewers to easily purchase favorite numbers on the spot if any.

The television program server provides materials of ordinary music broadcasting programs. Materials of music program transmitted from the television program material server are moving pictures and sounds. In the ordinary music broadcasting program promotion moving pictures and sounds to introduce new music are broadcast or a countdown of latest hit songs is broadcast.

The tune material server provides an audio program by using an audio channel. A material of the audio program is only sounds. The tune material server transmits materials of audio programs of a plurality of audio channels to the terrestrial station . In the program broadcasting of each channel the same tune is repeatedly broadcast during a predetermined time unit. Respective audio channels are independent and may be used variously. For example one audio channel may broadcast a recommended number of latest Japanese popular songs repeatedly during a predetermined time. Other audio channel may broadcast a recommended number of latest American popular songs repeatedly during a predetermined time and a further audio channel may broadcast a recommended number of Jazz repeatedly during a predetermined time. Moreover a plurality of tunes by the same artist may be repeatedly broadcast from respective audio channels.

The audio adding information server provides time information of tune outputted from the tune material server .

The GUI data server provides data used to produce pictures of a list page of distributed tune and of information page of each tune data used to produce still picture data of a jacket data used to produce a picture for an EPG Electric Program Guide or the like. As will be described in detail later on according to the system to which the present invention is applied a user is able to display the words of the distributed tune concert information of artists or the like on the screen by operating GUI on the screen. The user can select download and reserve the download of music by operating GUI on the screen. The GUI data server transmits data used therefor. GUI data according to this embodiment is data with a format standardized by MHEG Multimedia and Hypermedia Information Coding Experts Group for example.

The terrestrial station multiplexes video data and audio data serving as materials of the music program broadcasting from the television program material server audio data serving as materials of audio channels from the tune material server and GUI data from the GUI data server and transmits multiplexed data. The video data of the television program broadcasting is compressed by an MPEG Moving Picture Experts Group 2 system and the audio data of the television program broadcasting is compressed by an MPEG2 audio system for example. Audio data of each audio channel is compressed by two different systems e.g. the MPEG2 audio system and an ATRAC Adaptive Transform Acoustic Coding system. When these data are multiplexed they are encrypted by using key information from a key information server .

A signal from the terrestrial station is received through an artificial satellite by receiving equipment installed on each home. A plurality of transponders are mounted on the satellite . One transponder has a transmission capability of 30 Mbps for example. As the receiving equipment installed at each home there are prepared a parabolic antenna an IRD Integrated Receiver Decoder which is a receiver to receive and decode a digital satellite broadcast a storage device for storing received data and a television receiver .

A signal transmitted through the satellite is received at the parabolic antenna . The received signal is converted into a predetermined frequency by an LNB Low Noise Block Downconverter attached to the parabolic antenna and supplied to the IRD .

The IRD selects a predetermined channel signal from the received signal and demodulates video data and audio data. The IRD produces also pictures for list pages of distributed music pictures for information pages of each music and pictures for GUI. An output from the IRD is supplied to the television receiver .

The storage device stores therein downloaded audio data. For example as the storage device there can be used an MD recorder player using a magnetooptical disk called an MD mini disc as a recording medium a DAT recorder player using a magnetic tape as a recording medium a DVD recorder player using a video recording optical disk as a recording medium etc. A personal computer also can be used as the storage device and the personal computer can store audio data in a medium such as a hard disk a CD R a CD RW and a memory card.

The IRD is connected through a telephone line network for example to an accounting server . An IC card with various information stored therein is inserted into the IRD . When audio data of music is downloaded information of downloading is memorized in the IC card. The information in this IC card is transmitted through the telephone line network to the accounting server . The accounting server properly accounts for viewers based on the download information. A copyright of a tune to be downloaded can be protected by this proper accounting.

In this manner in the system according to this embodiment the terrestrial station multiplexes video data and audio data serving as material of music program broadcast from the television program material server audio data serving as material of audio channel from the music material server audio adding information data from the audio adding information server and GUI data from the GUI data server and transmits the data thus multiplexed. While the receiving equipment at each home receives this broadcasting the viewer can watch the music program and the GUI picture is displayed based on the GUI data thus transmitted. When the viewer is doing necessary operation while watching the GUI picture the viewer can watch information page about each music and can listen to each music on trial. While the viewer is doing necessary operation while watching the GUI picture the viewer can download audio data of a desired number and store the downloaded audio data in the storage disk .

Next operation done by the viewer at the receiving equipment installed at each home will be described more in detail.

When this broadcasting is received by the receiving equipment at each home a picture shown in is displayed on the television receiver . A television program display area A on the upper left of the screen displays a moving picture based on the music program supplied from the television program material server . A list B of tunes of respective channels broadcast on the audio channels is displayed on the upper right of the screen. A text display area C and a jacket display area D are set to the lower left of the screen. Further a words display button a profile display button an information display button a timer activated recording button a timer activated recording list display button a recording history display button and a download button are displayed on the right hand side of the screen.

While watching titles of tunes displayed on the list B the viewer is looking for interesting music. Having found out the interesting music placing a cursor on the interesting tune by operating arrow keys on a remote commander and pressing the enter key on the remote commander attached to the IRD the viewer can listen to the music pointed by the cursor. Specifically since each audio channel is repeatedly broadcasting the same music during a predetermined unit time while the same picture is being displayed on the television program display area A the audio channel is switched to the audio channel of the interesting music and hence the viewer is able to listen to the interesting music. At that time the jacket display area D displays a still picture of an MD jacket of the interesting music.

In this state when the viewer puts the cursor on the words display button and presses the enter key operation in which the viewer puts the cursor on the button and presses the enter key will hereinafter be referred to as press button the text display area C displays the words of the interesting music at the right time synchronized with audio data. Similarly when the viewer presses the profile display button or the information display button the text display area C displays a profile of an artist corresponding to music or concert information etc. In this manner the viewer is able to know pieces currently distributed and can get detailed information about each piece.

When the viewer wants to purchase the music that the viewer has so far listened to on trial the viewer presses the download button . When the user presses the download button audio data of the selected music is downloaded and stored in the storage device . The viewer can download words data profile information of artist still picture data of jacket etc. together with audio data of music. Each time music is downloaded information of the download is stored in the IC card within the IRD . Information stored in the IC card are supplied to the accounting server once per month and hence a copyright of music to be downloaded can be protected.

When the viewer wants to make a timer activated downloading in advance the viewer presses the timer activated recording button . When the viewer presses this button the GUI picture is switched and a list of music that can be downloaded in a timer activated fashion is displayed on the whole of the screen. This list can display music that had been searched at the unit of one hour at the unit of one week at the unit of genre etc. When the viewer selects desired music that should be timer activated downloaded from this list information of such desired music is registered within the IRD . When the viewer wants to confirm music that had already been timer activated for the download the viewer can display the list of timer activated downloading music on the whole of the screen by pressing the timer activated downloading list display button . The music thus timer activated for the download is downloaded at a timer activated time by the IRD and stored in the storage device .

When the viewer wants to confirm music that had already been downloaded the viewer can display the list of downloaded music on the whole of the screen by pressing the timer activated recording history button .

In this manner in the receiving equipment of the system according to this embodiment the list of music is displayed on the GUI picture of the television receiver . While the viewer is selecting music in accordance with the display on the GUI picture the viewer can listen to the selected music on trial and can learn the words of such music a profile of artist etc. Further the viewer can download the music timer activate download the music and display the list of downloaded music the list of timer activated downloading music etc.

As described above the music contents distribution system according to the present invention can distribute the music broadcast programs and can also distribute audio data of music by using a plurality of audio channels. The viewer can search desired music by using a list of distributed music or the like and can easily store audio data in the storage device . This system will further be described below more fully.

As shown in material data from a television program material registration system is registered on an AV server . The material data comprises video data and audio data. The data registered on the AV server is transmitted to a television program transmitting system in which video data is compressed by the MPEG2 system for example and audio data is compressed by the MPEG2 audio system for example and thereby converted into packets. The output from the television program transmission system is transmitted to a multiplexer .

Audio data from a tune material registration system is supplied to an MPEG2 audio encoder A and an ATRAC encoder B in which it is encoded respectively and registered on an MPEG audio server A and an ATRAC audio server B. MPEG audio data registered on the MPEG audio server A is transmitted to an MPEG audio transmitting system A in which it is converted into packets and sent to the multiplexer . ATRAC data registered on the ATRAC audio server B is transmitted to an ATRAC audio transmitting system B as four times normal speed ATRAC data in which it is converted into packets and transmitted to the multiplexer .

Audio adding information from an audio adding information registration system is registered on an audio adding information database . The audio adding information registered on the audio adding information database is transmitted to an audio adding information transmitting system in which it is converted into packets and transmitted to the multiplexer .

GUI data from the GUI material registration system is registered on a GUI material database . The GUI material data registered on the GUI material database is transmitted to a GUI authoring system in which GUI picture data is processed converted into packets and transmitted to the multiplexer . The GUI material data contains still picture information of jacket words information of tune concert information of artist etc. The still picture information is text data within 640 480 pixels and the words information is text data within 800 characters for example compressed by JPEG Joint Photographic Experts Group system and respectively converted into packets.

The multiplexer multiplexes in timebase video packets and audio packets from the television program transmitting system audio packets from the MPEG audio transmitting system A four times normal speed audio packets from the ATRAC audio transmitting system B audio adding information packets from the audio adding information transmitting system and GUI data packets from the GUI authoring system and also encrypts them by using key information from the key information server .

An output from the multiplexer is supplied to a radio wave transmitting system in which it is added with error correcting codes modulated and frequency converted and transmitted from the antenna to the satellite .

As shown in in the event from the time t to the time t a music program having predetermined contents A is broadcast by the ordinary moving picture program broadcasting. In the event starting from the time t a music program having predetermined contents A is broadcast. Contents that are broadcast in this ordinary music program are moving pictures and sounds.

The audio channel prepares 10 channels from channel CH to CH as shown in and in for example. Each of the audio channels CH CH CH . . . CH broadcasts the same music repeatedly during one event. Specifically during the event from the time t to the time t the audio channel CH repeatedly transmits a tune B the audio channel CH repeatedly transmits a tune C and similarly the audio channel CH repeatedly transmits a tune K. In the event starting from the time t the audio channel CH repeatedly transmits a tune B the audio channel CH repeatedly transmits a tune C and similarly the audio channel CH repeatedly transmits a tune K. This relationship applies for the MPEG audio channel and the four times normal speed ATRAC audio channel as well.

Specifically in and the same numerals within the parentheses of the MPEG audio channels and the four times normal speed ATRAC audio channels indicate the channel programs of the same tune. Numerals within the parentheses of the channel programs of the audio adding information shown in indicate audio adding information added to audio data having the same channel program. Further still picture data and text data transmitted as GUI data also are formed at every channel. These data are time division multiplexed within the MPEG2 transport packets and transmitted as shown in and are rearranged within the IRD by using header information of each data packet as shown in .

As shown in as the receiving equipment at each home there are prepared the parabolic antenna the IRD the storage device and the television receiver . As the storage device there is used a recording and reproducing equipment A using a magnetooptical disk called an MD mini disc as a recording medium as shown in . The recording and reproducing equipment A according to this embodiment is a deck including a terminal which can be connected with an IEEE 1394 system bus line . The IRD also includes a terminal which can be connected with the IEEE 1394 system bus line . The manner in which the IRD and the recording and reproducing equipment A are connected with each other via the IEEE 1394 system bus line will be described. The IEEE 1394 dependent recording and reproducing equipment A is able to store text data including jacket data and words data as well as audio data of music selected by the IRD . According to the connection using the IEEE 1394 system bus line a plurality of devices e.g. up to 64 devices can be connected by a so called link connection and a plurality of storage devices can be connected to the IRD by the IEEE 1394 system bus line at the same time. Accordingly other devices may often be connected between the IRD and the recording and reproducing equipment A.

The input terminal T is the terminal to which the received signal that was converted into a predetermined frequency by the LBN attached to the parabolic antenna is inputted. The analog video output terminal T is the terminal from which the analog television signal is supplied to the television receiver . The analog audio output terminal T is the terminal from which the analog audio signal is supplied to the television receiver . The analog audio output terminal T is the terminal from which the analog audio signal is supplied to an analog input storage device. The optical digital output interface is based on the IEC 958 to transmit PCM audio data to an optical fiber cable not shown . The IEEE 1394 interface transmits video data audio data various commands etc. to the IEEE 1394 format bus line. The man machine interface transmits inputted data which is obtained in the form of an infrared signal when a user operates a remote control device to a control CPU . An IC card is inserted into the IC card slot . The modem is connected through the telephone line network to the accounting server . The infrared interface is the interface used to control the storage device by the infrared signal from the control CPU . An infrared signal for controlling a storage device is outputted from an infrared output section connected through a predetermined signal line to the infrared interface .

A tuner selects a signal having a predetermined frequency from received signals supplied from the terminal T based on a setting signal from the control CPU demodulates and error corrects the selected signal and outputs an MPEG transport stream. A descrambler receives the MPEG transport stream from the tuner receives descrambling key data from the IC card through the IC card slot and the control CPU and descrambles the transport stream by using the key data. A transport IC receives a command inputted when the user operates the remote controller through the man machine interface and the control CPU and extracts MPEG video data and MPEG audio data of a desired television program from the transport stream. An MPEG video decoder decodes the MPEG video data supplied from the transport IC to provide video data obtained before data is compressed. An MPEG audio decoder decodes the MPEG audio data supplied from the transport IC to provide audio data PCM audio data obtained before data is compressed. A DA converter converts the audio data supplied from the MPEG audio decoder into an analog audio signal and supplies the analog audio signal to the analog audio output terminal T.

The control CPU processes the whole of the IRD . Work memories are connected to the control CPU . The memory is the memory in which data can freely be rewritten. MHEG data and audio adding information used to generate GUI pictures from the transport stream received at the tuner and extracted by the transport IC are stored in this memory . The memory is a nonvolatile memory in which programs are set when the IRD is manufactured. In this memory there are stored in advance various programs necessary for operating the IRD . A program stored in the memory is a resident program which is activated based on the MHEG data for example to control processing for generating the GUI picture and processing for controlling the storage device connected to the IRD .

The control CPU receives commands inputted when the user operates the remote control equipment through the man machine interface . The modem is connected to the control CPU . Information necessary for accounting is stored in the IC card . Information in the IC card is transmitted through the telephone line network to the accounting server by using the modem .

The control CPU produces pictures of list pages pictures of information pages of respective tunes or GUI picture data based on the data stored in the memory . Picture data thus produced are written in predetermined areas of a buffer memory within the MPEG video decoder . Consequently as shown in the picture of the list page of the broadcast tune the picture of the information page of the respective tunes or the GUI picture can be displayed on the designated areas on the screen.

In the IRD shown in when the user selects the channel of the music contents distribution system that had been described so far the GUI picture shown in is displayed on the screen of the television receiver .

At that very moment the received signals inputted to the terminal T are supplied to the tuner . The tuner selects a signal having a predetermined receiving frequency from the received signals based on the setting signal from the control CPU demodulates and error corrects the selected signal and outputs the MPEG transport stream.

An output from the tuner is supplied to the descrambler . The descrambling key data stored in the IC card is inputted to the descrambler through the IC card slot and the control CPU and this descrambler descrambles the MPEG transport stream by using the key data. The MPEG transport stream thus descrambled is supplied to the transport IC .

A command inputted from the remote control equipment by the user is inputted to the transport IC through the man machine interface and the control CPU . This transport IC extracts MPEG video data and MPEG audio data of a desired television program from the transport stream in accordance with the command and supplies the video data and the audio data to the MPEG video decoder and the MPEG audio decoder .

The MPEG video data supplied to the MPEG video decoder is decoded into video data obtained before data is compressed and supplied to an NTSC converting block in which it is converted into a composite video signal and outputted from the analog video output terminal T to the television receiver. The MPEG audio data supplied to the MPEG audio decoder is decoded into audio data obtained before data is compressed and supplied to a DA converter in which it is converted into an analog audio signal and outputted from the analog audio output terminal T to the television receiver.

When the viewer selects music based on the tune list B displayed on the GUI picture shown in and listens to audio data of the selected music on trial MPEG audio data is extracted by the transport IC the extracted audio data is decoded by the MPEG audio decoder digital to analog converted by the DA converter and outputted from the analog audio output terminal T to the television receiver .

When the viewer downloads audio data by pressing the download button on the GUI picture shown in audio data is extracted by the transport IC and audio data is outputted from any one of the analog audio output terminal T the optical digital output interface and the IEEE 1394 interface .

Specifically as shown in when the IEEE 1394 dependent recording and reproducing equipment A is connected to the IEEE 1394 interface the four times normal speed ATRAC data is extracted by the transport IC and supplied through the IEEE 1394 interface to the IEEE 1394 dependent recording and reproducing equipment A. At that very time the jacket data compressed by the JPEG system is extracted by the transport IC and supplied through the IEEE 1394 interface to the IEEE 1394 dependent recording and reproducing equipment A. Further at that very time text data such as the words and the profile of the artist is extracted by the transport IC and supplied through the IEEE 1394 interface to the IEEE 1394 dependent recording and reproducing equipment A.

When a storage device of the type which does not include the IEEE 1394 interface is connected to the optical digital output interface the MPEG audio data is extracted by the transport IC decoded by the MPEG decoder and PCM audio data is supplied through the optical digital output interface to the storage device. The arrangement therefor will be described later on.

Next the manner in which the IEEE 1394 dependent recording and reproducing equipment A operates upon recording will be described.

When the IEEE 1394 interface and the IEEE 1394 interface of the IRD shown in are connected with each other the audio data of the music transmitted from the IEEE 1394 interface the text data such as the words and the still picture data such as the jacket are inputted from the IEEE 1394 interface to the recording and reproducing equipment and recorded on the disk by the recording and reproducing section . Respective data are recorded on the disk according to the extended MD format as will be described later on.

When PCM audio data is inputted to the optical digital input interface from the outside the inputted PCM audio data is encoded by the ATRAC encoder and recorded on the disk by the recording and reproducing section .

An analog audio signal is inputted to the analog audio input terminal T from the outside the inputted analog audio signal is analog to digital converted by the AD converter encoded by the ATRAC encoder and recorded on the disk by the recording and reproducing section .

Specifically the IEEE 1394 dependent recording and reproducing equipment A records the words data and the still picture data of the jacket together with the audio data of the music only when it and the IRD are connected to each other by the IEEE 1394 interface and records only the audio data when they are connected to each other by the optical digital interface or the analog audio connection.

Upon reproduction a reproduced signal can be outputted from the IEEE interface or the analog audio output terminal T. When a reproduced signal is outputted from the IEEE 1394 interface if the words data and the jacket data are recorded on the disk together with the audio data of the music then the music data can be outputted to an IEEE 1394 dependent audio device amplifier etc. the words data and the jacket data can be displayed on an IEEE 1394 dependent display and can be printed out by an IEEE 1394 dependent printer.

In this manner the IEEE 1394 dependent recording and reproducing equipment to which the present invention is applied is able to record and reproduce the words data and the jacket data as well as the audio data of the music.

The above recording and reproduction become possible by using an extended MD format shown in . As illustrated audio data of tune is recorded on a main data area by the ATRAC system which is the same as the existing MD format. According to the extended MD format the aforementioned jacket data words data or the like are recorded on an auxiliary data Aux Data area of 2.8 Mbytes. The jacket data and the words data as well as the audio data of the music can be recorded and reproduced by using this format. This extended format can maintain a compatibility with the existing MD format.

Processing executed when the receiving equipment shown in downloads the ATRAC audio data of the music which is the music program and the jacket data and the words data which are the audio adding information will be described with reference to a flowchart of .

First a user the operates the IRD to select an EMD Electric Music Duwnload channel i.e. the music broadcasting channel in which music data can be downloaded as was described so far step . To be concrete while the user is watching an EPG picture displayed on the television receiver the user gives a channel selecting command to the remote control equipment shown in . In the IRD the control CPU receives the user channel selecting command through the man machine interface and supplies a channel setting signal to the tuner thereby to set a desired channel.

When this channel is selected it is determined by the control CPU based on section data called a PMT Program Map Table whether or not the MHEG data for forming the EPG picture list picture exists in the selected channel step . If the MHEG data for forming the EPG picture does not exist in the selected channel then it is determined that the selected channel is not the channel in which the music data can be downloaded. Then control is ended. When the channel in which the above ATRAC audio data is transmitted is selected the MHEG data for forming the EPG picture exists in the selected channel and hence the control CPU activates a program resident program which interprets the previously prepared MHEG data in the work memory to interpret the received MHEG data step .

Based on the interpreted MHEG data the control CPU forms image data of EPG picture and supplies the image data to the decoder so that the image data is displayed on the screen of the television receiver connected to the IRD step . The displayed EPG picture is the picture shown in for example. The control CPU is placed in the standby mode until the user downloads the selected music by operating the keys of the remote control equipment step . When a remote control signal corresponding to the depression of the download button is supplied a get device program within a resident program prepared beforehand in the memory is activated. A device ID of the storage device A connected via the IEEE 1394 system bus line is obtained by this get device program and transmitted to an MHEG data execution processing section step . The device ID is an identification code granted beforehand to the connection of the IEEE 394 system bus line by a predetermined bit rate 64 bits and in which a vendor code a type code of device type and a serial code of a device are arranged according to a predetermined standard. When the device ID is discriminated by the program prepared in the memory the control CPU can understand the type and the function of the connected device. Details of processing for obtaining a device ID by the resident program will be described later on 

When the control CPU obtains the device ID of the connected storage device it generates image data used to display a list of devices connected to the IRD based on the obtained device ID and supplies the generated image data to the decoder to display the image data on the screen of the television receiver connected to the IRD step . The control CPU is placed in the standby mode until the user selects the device displayed on the screen by operating the keys of the remote control equipment step . When the remote control signal corresponding to the selecting operation of this device is supplied the control equipment is placed in the standby mode until ATRAC data of the number that was instructed to be downloaded at the step is received. At the right time in which this data is received still picture data JPEG data such as jacket data of this number and text data such as words of this number are transmitted to the selected device storage device from the IEEE 1394 interface to the bus line . At that very time a node ID set to the selected device is granted to data transmitted from the IEEE 1394 interface as a destination address. The ATRAC data which is audio data of the number is transferred in an isochronous transfer mode isochronous transfer and the JPEG data and the text data are transferred in an asynchronous transfer mode asynchronous transfer . Control data which enables the device at the destination to execute processing such as recording transmitted ATRAC data also is transmitted in the asynchronous transfer mode. With this processing the data transmitted to the bus line is recorded on a connected device i.e. the disk loaded onto the IEEE 1394 dependent recording and reproducing equipment A in the state shown in .

It is determined by the control CPU whether or not the download of all data concerning the number selected by the IEEE 1394 bus line is ended step . If it is determined that the download is ended then it is determined whether or not the download of another number is instructed step . If it is determined that the download of another number is instructed then control goes back to the step whereat another number is downloaded. If it is determined at the step that the download of all selected numbers is ended processing concerning the download is ended. When the download of this ATRAC audio data is executed if this data is pay data then predetermined accounting processing is executed details of accounting processing will be omitted .

The manner of getting a device ID based on the resident program shown in this flowchart will be described more in detail with reference to a flowchart of and a diagram showing a correspondence of programs shown in . First the states of the programs will be described with reference to . As the program script shown by received MHEG data and which is stored in the memory connected to the control CPU there are prepared a program for instructing the download a program for instructing control device processing to control a connected storage device a program for instructing get device processing to obtain a device ID of a connected storage device a setting area of variables set by each processing etc. Addresses of resident programs corresponding to commands of programs for instructing each processing are set to the control CPU . Execution programs of respective commands are prepared beforehand at predetermined address positions of the memory

The processing for getting the device ID by the resident program in the state in which the programs are set as described above will be described with reference to the flowchart of . When the command corresponding to the depression of the download button is issued at the step of the flowchart of a name of a resident program activated by operation in the script get device is supplied to a processor section of the control CPU step . The processor section judges the storage address of the corresponding program get device stored in the memory based on the command instructed by the received program and the data corresponding to the address of the resident program prepared on the IRD side and transmits an execution command of the program of such address step .

Since this execution command is generated the processor section within the control CPU executes the get device program stored in the memory step . While this get device program is being executed data for requesting the return of device ID is transmitted from the IEEE 1394 interface to all nodes devices connected to this interface by the bus lines in the asynchronous transfer mode for example. All nodes which received this data return device IDs granted to the devices to the IRD through the bus line in the asynchronous transfer mode and returned data are supplied from the IEEE 1394 interface to the control CPU . If this device ID is transmitted the control CPU judges the type of the device based on the transmitted device ID.

When there is connected as the storage device capable of recording ATRAC audio data e.g. the IEEE dependent recording and reproducing equipment A connected as shown in the control CPU generates image data used to display a list of devices on the screen by using the resident program and supplies the image data to the decoder so that the image data is displayed on the screen of the television receiver connected to the IRD step . When the device list is displayed types of devices judged from the device IDs abbreviated names of device types such as MD DVD and personal computer are displayed. If there are a plurality of device types having the same name then they are displayed with serial numbers like MD MD for example. Depending on the circumstances more detailed information such as vender names may also be displayed. The steps following the step in which the user selects the device from the displayed device list are the same as those of the flowchart shown in .

With the above processing when the device as the storage device capable of recording ATRAC audio data is connected to the IRD through the IEEE 1394 system bus line based on the MHEG data transmitted from the ATRAC audio data transmitting side the processing for generating a list of connected devices is activated the processing itself is executed by the resident program prepared beforehand within the IRD to display the list and the user can easily select a device onto which ATRAC audio data is downloaded. Although the IRD displays the list based on the MHEG data transmitted from the transmitting side apparently in actual practice the details of the processing for getting the device ID are executed by the resident program prepared in the IRD and a proper device ID can be obtained based on the actual arrangement of the IRD . In sectionicular since a large number of devices e.g. 64 devices can be connected by the IEEE 1394 format bus line a proper device can efficiently be selected from a plurality of devices connected to the IRD by the bus line based on the displayed list.

While the download is being selected device IDs are always obtained and the list of all devices is displayed in the processing shown in the flowchart of . If a default device get request program stored in the memory judges the most desirable device from more than one device currently connected by some processing and returns data of the most desirable device to the second program then a user can omit operation for selecting a device and can more easily and efficiently download data. This processing for selecting a desirable device will be described later on. Processing executed when the default device exists will be described with reference to a flowchart of . In the flowchart of the steps from the step for selecting the EMD channel to the step for downloading the selected number are the same as those of the flowchart of .

Referring to if it is determined at the step that the download button is depressed then the control CPU within the IRD gets the default ID into the CPU step . It is then determined whether or not the default device ID is stored in the control CPU by the execution of this processing step . If the default device ID is stored in the control central processing unit then the control CPU generates image data for urging the user to confirm the download on the default device and displays the image data on the screen of the television receiver so that the user may confirm the download on the default device step . When the user selects the download on the default device by operating the remote control equipment the download on the default device is executed similarly to the processing at the aforementioned step of the flowchart of step . When this download is finished step the device ID of the device to which the data has already been downloaded is stored in a predetermined memory within the control CPU and set to the default device step . Then it is determined whether or not another number is downloaded step . If it is determined that another number is downloaded then control goes back to the step . If it is determined that another number is not downloaded then the download processing is ended.

If it is determined at the step that the default device ID is not stored and if it is determined at the step that the number is not downloaded to the default device then control goes to a step whereat the device ID is obtained by the get device processing and a list based on the obtained device ID is displayed step . Then the user selects a device from the displayed list step and executes the download on the selected device step . The steps to are the same as the steps to described in the flowchart shown in . After the download was started at the step control goes to a step whereat the central processing unit is placed in the standby mode until the download is ended. At that time the device ID of the device to which the number was downloaded is stored in a predetermined memory within the control CPU as a default device ID step .

In this manner since the device ID of the device that had been used in the last time download is stored in the IRD as the default device ID when data is downloaded on the same device as that was used the last time the processing for getting the device ID of the device connected via the bus line need not be executed and hence a time required by the selection processing can be reduced. Moreover the selecting operation required by the user is only the confirmation work at the step and hence the user can operate the control equipment considerably easily. While the default device ID is stored in the predetermined memory at the step the present invention is not limited thereto and the default device ID may be stored before the download is ended. For example although the designated device is connected to the network if a recordable recording media is not inserted into the device then the download will not be ended normally. If the device ID is stored even in such case then after the user has made necessary operation after the user has inserted a correct recording media the external program again obtains the default device ID and executes the download processing based on the default device ID thus obtained so that the number of the user s input operation can be decreased thereby making it possible for the user to use the control equipment more easily and efficiently.

Processing in which the program stored in the memory properly selects the default device and transmits information to the external program will be described in detail. Most preferably the ID of the device on which data was downloaded should be stored in the predetermined memory within the control CPU . Then when the external program instructs the default device get request the device ID stored in the memory should be transmitted to the external program. If default device IDs and their types are stored in the predetermined memory within the control CPU at every type of the device in preparation for requests of default devices with device type designated from the external program then even when data is downloaded onto various types of devices default devices are being prepared for devices of respective types and hence the user can save a lot of time and labor. As the types of devices there are enumerated an MD recorder player a DAT recorder player a DVD recorder player a digital video DV recorder player a personal computer etc.

An example of processing in that case will be described with reference to a flowchart of . The fundamental processing sequence is the same as the processing of the flowchart shown in . Specifically after the depression of the download button has been detected at the step when information of a default device is obtained at a step a default device concerning the type designated at that time is obtained. Then after the download has been ended at the step when information of a default device is stored in the memory within the control CPU at a step not only the ID of such default device but also information of the device type e.g. type such as MD DAT may be stored in the memory.

When the receiver IRD is powered for the first time or when the user disconnects the device which becomes the default device in the above sequence from the network in the next download even though the devices that had been used so far are stored in the memory within the control CPU the list should be displayed again and the user has to select the device. In such case when the devices of the type designated by the external program are connected to the network the optimum device may be selected from the connected devices as the default device and the internal program may return default device information to the external program.

A flowchart of shows an example of processing executed in the above case. Processing of this flowchart will be described below. Steps to are the same as those shown in . Steps executed when data is downloaded on the default device shown by an ID stored in the memory within the control CPU steps to also are the same as those shown in the preceding flowchart.

If it is determined at the step that the default device ID is not stored in the memory within the control CPU or if such device is disconnected from the network by the user even when the default device identification code is stored in the memory then control goes to a step whereat it is determined by the internal program whether or not a device which agrees with the conditions types of devices on which data should be downloaded requested from the outside at the step is connected to the network at present. If it is determined that more than one proper devices are connected to the network then the internal program selects the device that is connected nearest to the network from a timebase standpoint as the default device and returns information of such default device to the external program. If the default device is selected at the step then it is determined by the user whether or not data should be downloaded on the selected device step . If the user selects the download of data on the selected device then the download of data on the selected device is executed step and control goes back to the step .

If the default device cannot be selected at the step or if the user does not designate the download of data on the default device at the step or then control goes to a step whereat the external program requests the resident program to obtain the device ID of the connected device and displays the list of the devices. Then if the user selects a desired device from the list step then the download of data on the selected device is executed step and control goes back to the step .

Also in this case when information of the default device is stored in the memory within the control CPU at the step after the download has been ended at the step the ID of such device and the type of such device are stored in the memory.

While data is downloaded on the storage device connected to the IRD by the IEEE 1394 format bus line as described above the present invention is not limited thereto and data can be downloaded on a storage device which does not include the IEEE 1394 format interface. is a diagram showing an example of a system configuration of receiving equipment used in that case. A storage device prepared herein is a disc recording and reproducing equipment B using a magnetooptical disk called an MD as a recording medium. This disc recording and reproducing equipment includes an optical digital input interface . An output terminal of an optical digital input interface of an IRD is connected to an input terminal of the optical digital input interface of the disc recording and reproducing equipment B by an optical cable or coaxial cable so that digital data can be transmitted. The disc recording and reproducing equipment includes also a man machine interface to which a remote control signal based on infrared rays is inputted. An infrared ray output section connected to the infrared ray interface see of the IRD is disposed in the vicinity of an infrared ray light receiving section of this man machine interface

With the above arrangement based on image data formed by the control CPU of the IRD some setting picture e.g. initialization picture is displayed on the screen of the television receiver and the user sets the connection of the disc recording and reproducing equipment A by selecting pictures on the screen with the remote control equipment . At that time the user may set the type of the connected device or the like. Based on the information set by the user s operation the control CPU gives a peculiar device ID to the connected device. For example assuming that the device ID obtained from the device connected by the above IEEE 1393 format bus line is formed of 64 bits then the device ID set by the user is formed of 65 bits in which 1 bit is added to the lowest order bit of 64 bits and the user can recognize by the added 1 bit that the device code is the device code given by the setting of user. 64 bits other than the lowest order 1 bit may be set based on the state provided by the setting of user. Alternatively bits other than the lowest order 1 bit may be made negligible.

When the user operates the control equipment to instruct the download received ATRAC audio data is supplied to the audio decoder within the IRD in which the ATRAC data is decoded into digital audio data which is not compressed and supplied from the optical digital output interface through the optical cable to the optical digital input interface of the disc recording and reproducing equipment B. At the same time a command for controlling the recording at the recording and reproducing equipment B is generated by the control CPU of the IRD and such command is supplied to the infrared ray interface so that a remote control signal for starting the recording operation of the recording and reproducing equipment B is outputted from the infrared ray output section connected to the infrared ray interface to thereby record the supplied digital audio data on the disc. At that time after the supplied audio data has been again encoded into the ATRAC audio data and compressed the recording and reproducing equipment B records the encoded ATRAC audio data.

At the right time the download is ended a command for stopping the recording at the recording and reproducing equipment B is generated from the control CPU of the IRD and such command is supplied to the infrared ray interface so that a remote control signal for stopping the recording operation at the recording and reproducing equipment B is outputted from the infrared ray output section connected to the infrared ray interface thereby to stop the recording operation on the disc.

When data is downloaded on the storage device by the connection which does not use the bus line as described above still picture data and text data accompanying with the ATRAC audio data are not transmitted and only the audio data is recorded on the disc.

With the above arrangement the present invention can cope with the download on the storage device which is not provided with the interface of the IEEE 1394 format bus line.

While the audio data called ATRAC audio data is downloaded on the storage device using the recording medium called the MD mini disc as described above the present invention is not limited thereto and can be applied to processing executed when other data such as audio data image data electronic mail data and various contents data of internet obtained from the outside are downloaded on the connected storage device based on program data simultaneously transmitted from the data transmitting side.

While the MHEG format data is transmitted as the EPG data distributed from the broadcast station side as described above the present invention is not limited thereto and can be applied to the case in which the above data is transmitted as data of other formats. For example the present invention can be applied to the case in which data of HTML format and data of XML format are transmitted. For example when the data of the XML format is transmitted XML data may be interpreted at the step in which the MHEG data is interpreted in the flowchart of . This relationship applies for other processing in the embodiment than the flowchart of as well.

While the digital satellite broadcasting relayed by the artificial satellite is applied as the transmission line from the transmitting side of audio data or the like to the receiving equipment as described above the present invention is not limited thereto and other broadcasting transmission line can be applied. For example in a so called cable television the ATRAC audio data and the like may be transmitted by a predetermined channel of a transmission line in which the transmitting side and the receiving equipment are directly connected with a cable by using an optical cable or a coaxial cable and data may similarly be downloaded on the receiving equipment side. Further other transmission line such as a telephone line network may be used.

Furthermore while the storage device and the device connected to the storage device are connected together by the IEEE 1394 format bus line as described above it is needless to say that they may be connected by data transmission lines of other formats. For example data can be transmitted in a bidirectional fashion by a radio transmission line capable of similarly transmitting data. When data is transmitted in a wireless fashion there can be applied a standard called a Bluetooth Bluetooth for example.

