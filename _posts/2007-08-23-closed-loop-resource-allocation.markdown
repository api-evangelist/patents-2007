---

title: Closed loop resource allocation
abstract: Method and apparatus for performing transmission data rate allocation in a high speed wireless communications network. A macro control loop with the network of base stations on one side and all the subscriber stations on the other side. Subscriber station selects a rate based on the amount of data queued for transmission (). Adjusts this rate based on the available power headroom of the subscriber station (). This adjusted transmission rate is then adjusted again to account for protection of base stations in the candidate set of the subscriber station (). This rate is then adjusted in accordance with busy tone signals indicative of the loading conditions of active set base stations of the subscriber station (). The base stations react to these action by refreshing measurements of their instantaneous traffic load and providing feedback in the form of soft busy tones. The algorithm is named Closed Loop Resource Allocation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07680052&OS=07680052&RS=07680052
owner: QUALCOMM Incorporated
number: 07680052
owner_city: San Diego
owner_country: US
publication_date: 20070823
---
The present Application for Patent is a Continuation and claims priority to patent application Ser. No. 10 321 067 entitled CLOSED LOOP RESOURCE ALLOCATION filed Dec. 12 2002 now allowed which is a continuation of U.S. Pat. No. 6 563 810 entitled CLOSED LOOP RESOURCE ALLOCATION issued May 13 2003 and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present invention relates to wireless communications. More particularly the present invention relates to a novel and improved method and apparatus for determining the transmission data rates in a high speed wireless communication system.

A modern day communication system is required to support a variety of applications. One such communication system is a code division multiple access CDMA system which conforms to the TIA EIA IS 95 Subscriber station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System hereinafter referred to as the IS 95 standard. The CDMA system allows for voice and data communications between users over a terrestrial link. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS and U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM both assigned to the assignee of the present invention and incorporated by reference herein.

In this specification base station refers to the hardware with which the subscriber stations communicate. Cell refers to the hardware or the geographic coverage area depending on the context in which the term is used. A sector is a partition of a cell. Because a sector of a CDMA system has the attributes of a cell the teachings described in terms of cells are readily extended to sectors.

In the CDMA system communications between users are conducted through one or more base stations. A first user on one subscriber station communicates to a second user on a second subscriber station by transmitting data on the reverse link to a base station. The base station receives the data and can route the data to another base station. The data is transmitted on the forward link of the same base station or a second base station to the second subscriber station. The forward link refers to transmission from the base station to a subscriber station and the reverse link refers to transmission from the subscriber station to a base station. In IS 95 systems the forward link and the reverse link are allocated separate frequencies.

The subscriber station communicates with at least one base station during a communication. CDMA subscriber stations are capable of communicating with multiple base stations simultaneously during soft handoff. Soft handoff is the process of establishing a link with a new base station before breaking the link with the previous base station. Soft handoff minimizes the probability of dropped calls. The method and system for providing a communication with a subscriber station through more than one base station during the soft handoff process are disclosed in U.S. Pat. No. 5 267 261 entitled MOBILE ASSISTED SOFT HANDOFF IN A CDMA CELLULAR TELEPHONE SYSTEM assigned to the assignee of the present invention and incorporated by reference herein. Softer handoff is the process whereby the communication occurs over multiple sectors which are serviced by the same base station. The process of softer handoff is described in detail in copending U.S. patent application Ser. No. 08 763 498 entitled METHOD AND APPARATUS FOR PERFORMING HANDOFF BETWEEN SECTORS OF A COMMON BASE STATION filed Dec. 11 1996 now U.S. Pat. No. 5 933 787 issued Aug. 3 1999 by Klein S. Gilhousen et al. assigned to the assignee of the present invention and incorporated by reference herein

Given the growing demand for wireless data applications the need for very efficient wireless data communication systems has become increasingly signicant. The IS 95 standard is capable of transmitting traffic data and voice data over the forward and reverse links. A method for transmitting traffic data in code channel frames of fixed size is described in detail in U.S. Pat. No. 5 504 773 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention and incorporated by reference herein. In accordance with the IS 95 standard the traffic data or voice data is partitioned into code channel frames which are 20 msec wide with data rates as high as 14.4 Kbps.

A system completely dedicated to high speed wireless communications is disclosed in U.S. patent application Ser. No. 08 963 386 the 386 application filed Nov. 3 1997 entitled METHOD AND APPARATUS FOR HIGHER RATE PACKET DATA TRANSMISSION now U.S. Pat. No. 6 574 211 which is assigned to the assignee of the present invention and incorporated by reference herein. In the 386 application the base station transmits to subscriber stations by sending frames that include a pilot burst time multiplexed in to the frame and transmitted at a rate based on channel information transmitted from the subscriber station to the base station.

A significant difference between voice services and data services is the fact that the former imposes stringent and fixed delay requirements. Typically the overall one way delay of speech frames must be less than 100 msec. In contrast the data delay can become a variable parameter used to optimize the efficiency of the data communication system. Specifically more efficient error correcting coding techniques which require significantly larger delays than those that can be tolerated by voice services can be utilized. An exemplary efficient coding scheme for data is disclosed in U.S. patent application Ser. No. 08 743 688 entitled SOFT DECISION OUTPUT DECODER FOR DECODING CONVOLUTIONALLY ENCODED CODEWORDS filed Nov. 6 1996 now U.S. Pat. No. 5 933 462 issued Aug. 3 1999 by N. T. Sindhushayana et al. assigned to the assignee of the present invention and incorporated by reference herein.

Another significant difference between voice services and data services is that the former requires a fixed and common quality of service QOS for all users. Typically for digital systems providing voice services this translates into a fixed and equal transmission rate for all users and a maximum tolerable value for the error rates of the speech frames. In contrast for data services the QOS can be different from user to user can be negotiated and should be subject to some fairness constraints. The QOS that a data communication system provides to a subscriber is typically described by the delay average throughput blockage probability connection loss probability experienced during service time.

A wireless data communication system can typically provide a range of transmission data rates both in the forward and reverse links. These transmission data rates are allocated to the various active traffic sources according to a strategy identified as medium access control that must account for the fact that the sources typically offer different incoming information data rates depending essentially on the selected data application. Also channel conditions and overall system load should be considered when allocating transmission data rate to a specific subscriber.

Medium access control amounts to allocating the resource to the active subscriber stations in the network in a way that optimizes the trade off between overall system throughput QOS and algorithm complexity. While in the forward link one can exploit the one to many nature of the transmission to perform optimal centralized resource allocation at the base station in the many to one reverse link the problem of optimization of the medium access control strategy is complex and can be solved with a centralized approach at the base station or with a distributed approach at the subscriber stations. Although many of the techniques described herein may be extended to the medium access control of the forward link signals the focus of the present invention is set on medium access control for the reverse link.

The information that should be used to perform resource allocation in the reverse link resides both at the network of base stations and at the subscriber stations. Specifically at the network side resides the information pertaining to the instantaneous traffic load and spare capacity of each base station. The load can be quantified for example by the rise of the overall received energy over the floor set by the noise power spectral density. The spare capacity is the difference between the maximum allowable load that prevents network instability and the instantaneous load. At the subscriber station resides information about terminal class for example maximum transmission power transmission buffer size supported data rate set channel conditions for example signal to noise plus interference ratio for all received pilots transmit power headroom and traffic source state for example buffer state buffer overflow average throughput in the past delay statistics . In principle information can be exchanged between the network and the subscribers but this involves signaling over the air interface which implies a waste of resources and a delay in the decision making process.

A first problem is therefore to design a medium access control strategy for the reverse link that exploits in an optimal way the available information minimizing signaling messages. Also it is desirable for the medium access control strategy to be robust in terms of changes in the subscriber station class and in the network topology. Another fundamental problem is resource allocation for a subscriber station in soft handoff. In this case the traffic load and spare capacity of all base stations involved in the soft handoff identified as base stations in the active set must be considered again possibly minimizing signaling in the network. Yet another fundamental problem is protection of base stations that are not in soft handoff with a particular subscriber station but that nevertheless are connected to that subscriber station through an electromagnetic link with path loss comparable to those measured in the active set. These base stations are referred to herein as the candidate set.

The present invention described in the following is an efficient and novel method and apparatus designed to address and solve all the above mentioned fundamental problems for a reverse link medium access control strategy.

The present invention is a novel and improved method and apparatus for performing transmission data rate allocation in the reverse link of a high speed wireless communications network. The present invention forms a macro control loop with the network of base stations on one side and all the subscriber stations on the other side. Each subscriber station selects a data rate based on the amount of data queued for transmission. Adjusts this rate based on the available power headroom. This adjusted transmission rate is then adjusted again to account for protection of base stations in the candidate set of the subscriber station. This rate is then adjusted in accordance with signals indicative of the loading conditions of active set base stations of the subscriber station. The base stations react to the subscriber stations action by measuring their instantaneous traffic load and providing feedback in the form of soft busy tones. The method is referred to herein as Closed Loop Resource Allocation.

It is an objective of the present invention to optimize reverse link medium access control by placing the data rate allocation under the control of the subscriber station which has a greater amount of information by which to determine the transmission rate than do the elements on the network side. The subscriber has information regarding the amount of information it has queued to transmit and the amount of available transmit power headroom the signal to noise plus interference ratios in both the active set and the candidate set links all of which are essential factors in selecting a reverse link transmission rate. The base stations do not have this information absent a significant amount of signaling which is undesirable.

It is another objective of the present invention to prevent a subscriber station from creating unacceptable interference to candidate base stations by its reverse link transmission thus enforcing candidate set protection.

It is another objective of the present invention to allow data rate allocation on a per packet basis to provide the flexibility that is necessary to provide efficient service to subscriber stations offering traffic with high burstiness.

It is another objective of the present invention to provide fairness in resource allocation among the subscriber stations by taking into account the average throughput in the recent past and the possible buffer overflow condition.

It is another objective of this invention to provide efficient reverse link medium access control without requiring any signaling in the backhaul between base station transceivers and base station controllers even when the subscriber station is in soft handoff. This is highly desirable because it makes resource allocation independent from the network architecture and the associated transmission and processing delays.

It is another objective of the present invention to minimize the necessary signaling on the air interface.

It is another objective of the present invention to avoid resource waste that occurs when the rate used by the subscriber station is smaller than the allocated rate. In fact in closed loop resource allocation the allocated rate and the used rate are always coincident.

It is yet another objective of the present invention to provide soft multi bit busy tones that indicate not only whether a base station is in an overload condition or not but also provides some indication of the extent of its loading.

In block the subscriber station determines the parameters Rand R. Rand Rare the minimum rate and the maximum rate at which the subscriber station is capable of transmitting. In the exemplary embodiment Rfor a particular subscriber station can optionally be set by the serving base station by means of over the air signaling. An exemplary set of rates R in Kbps and corresponding packet sizes P R in information bytes for those rates is illustrated in Table 1 below.

In control block the subscriber station determines whether the number of bytes of information in the transmit buffer is greater than the packet size for the maximum transmission rate. In the case of the exemplary numerology the maximum rate is 307.2 Kbps and the corresponding maximum packet size is 2048 bytes. If the number of bytes of information in the transmit buffer is greater than the packet size for the maximum transmission rate then in block variable Ris set equal to R. If the number of bytes of information in the transmit buffer is not greater than the packet size for the maximum transmission rate then in block variable Ris set to the lowest available rate at which the entire contents of the transmit buffer Q can be transmitted in a single packet.

In block the subscriber station determines the rate of its last transmission R . In the preferred embodiment this value is stored in RAM and overwritten after each transmission. In block a temporary rate variable Ris set to the minimum of either the rate indicated by Ror twice the rate R.

In the exemplary embodiment the buffer of the subscriber station is separated into two portions. A first portion includes new data for transmission and the second portion includes RLP Radio Link Protocol data which are packets that were previously transmitted but could be retransmitted. In the preferred embodiment a flag Fis set when the new data buffer of the subscriber station is nearly full. In response to the setting of the nearly full buffer flag the subscriber station adjusts is rate selection algorithm. In a first exemplary embodiment the subscriber station adjusts the rate selection algorithm so as to bias its transmission rate to one of increasing the transmission rate as will be described in greater detail further in. In an alternative embodiment the subscriber station transmits at a predetermined higher rate. It will be understood that one skilled in art can modify the responses to the setting of a full buffer flag so as to increase the transmission rate in a variety of ways that are all within the scope of the present invention. For fairness the Fflag should not be set for more than Ntimes e.g. 25 out of the last 100 packets.

Returning to the operation moves to block wherein the subscriber station determines the maximum rate based on the power headroom R . illustrates the operation performed in step is greater detail. In block the subscriber station determines the maximum transmit power P at which the subscriber station is capable of operating. In the exemplary embodiment the maximum transmit power depends on the power amplifier in the subscriber station be it mobile or fixed and on the amount of battery energy in the subscriber station if the subscriber station is mobile.

In block the subscriber station computes a maximum allowed transmit power which is the maximum transmit power P dB determined in step less a power margin P dB that allows to track future power level fluctuations. Then the subscriber station sets a variable Requal to the max rate R which can be reliably transmitted with a power P R dB less than the maximum allowed transmit power P dB P dB . In block the subscriber station sets a new variable Requal to the minimum of Rdetermined in step and Rdetermined in step .

Returning to the process then moves to block where the subscriber station determines the maximum transmission rate in accordance with a candidate set protection criterion. The purpose of the rate adjustment in step is to protect members of the candidate set of the subscriber station from having their reverse links overloaded by subscriber stations not in communication with them but which are sufficiently visible in terms of path loss to cause interference problems.

In the exemplary embodiment the subscriber station is not informed of loading problems of base stations in the candidate set because it does not receive the pertinent busy tone. Thus the candidate set protection algorithm is provided for preventing uncontrolled overload of the candidate set base stations. In the exemplary embodiment the amount of reduction in the maximum allowable rate of transmission is based upon the strength of the pilot signals from the candidate base stations. In particular the strength of the pilot signals from the candidate base stations relative to the strength of the pilot signals from the active set base stations.

In block the subscriber station computes a metric that is a function of the difference in strength of the signals received by base stations in the active set and signals received by base stations in the candidate set. In the exemplary embodiment the metric is set to the difference between the sum of the Ec Io of the all member of the active set in decibels and the sum of the Ec Io of the all the members in the candidate set in decibels as illustrated in equation 1 below 

In a first alternative embodiment the metric is set to the difference between the weakest member of the active set and the strongest member of the candidate set as illustrated in equation 2 below min dB max dB 2 where E i Iis the strength of the ith pilot of the active set including all related multipath components and E j Iis the strength of the jth pilot in the candidate set including all related multipath components.

In a second alternative embodiment the metric is set to the difference between the weakest member of the active set and the sum of the members of the candidate set as illustrated in equation 3 below 

In a third alternative embodiment the metric is set to the difference between the strongest member of the active set and the strongest member of the candidate set as illustrated in equation 4 below max dB max dB 4 where E i Iis the strength of the ith pilot of the active set including all related multipath components and E j Iis the strength of the jth pilot in the candidate set including all related multipath components.

A fourth alternative embodiment computes the metric based on the selection of the pilot in the active set that is driving the power control algorithm.

Other methods of determining the metric will be evident to one skilled in the art and are within the scope of the present invention.

In block a variable Ris set to the maximum rate R such that the difference between the power necessary to transmit a packet from the subscriber station at rate R P R dB less a protection factor exceeds the computed metric value . In the exemplary embodiment the protection factor is determined as the power in decibels required to transmit at a rate that is equal to Ntimes R where Nis an integer scaling factor and Ris the minimum rate at which the subscriber station is capable of transmitting.

In block a variable R which is the adjusted rate after performing the candidate set protection operation is determined by selecting the minimum rate of either Ror R.

Returning to in block the subscriber station selects the maximum busy tone from the ones received from all base stations in the active set. In a simple case where the busy tone is a single bit indicative of either the reverse link capacity loading condition or the existence of additional reverse link capacity the selection of the maximum busy tone is simply a matter of OR ing all of the received busy tones. If any of the busy tones indicates a capacity loading condition the subscriber station stochastically reduces the rate of its transmissions as described later. If all the busy tones indicate additional reverse link capacity then the subscriber station stochastically increases its transmission rate as described later.

In the preferred embodiment the busy tone is a soft multi bit busy tone namely with two bits b b which corresponds to the meanings in Table 2 below.

In block the base station compares the estimated reverse link loading to a first threshold value TH . If the estimated reverse link loading is less than the threshold value TH then the base station reverse link is determined to be scarcely loaded and in block the busy tone bits are set to 0 0 . If the estimated reverse link loading is greater than or equal to TH then the operation moves to block .

In block the base station compares the estimated reverse link loading to a second threshold value TH . If the estimated reverse link loading is less than the threshold value TH then the base station reverse link is determined to be stable and in block the busy tone bits are set to 0 1 . If the estimated reverse link loading is greater than or equal to TH then the operation moves to block .

In block the base station compares the estimated reverse link loading to a third threshold value TH . If the estimated reverse link loading is less than the threshold value TH then the base station reverse link is determined to be heavily loaded and in block the busy tone bits are set to 1 0 . If the estimated reverse link loading is greater than or equal to TH then the operation moves to block . In block the base station is determined to be over loaded and the busy tones are set to 1 1 .

All of the threshold comparisons can be implemented through hysteresis cycles to prevent too frequent crossing.

In block the subscriber station receives the busy tones from all of the base stations in its active set and selects the highest busy tone.

In block the rate of transmission for the current packet is selected in accordance with the maximum busy tone b b selected in step .

In control block the subscriber station determines whether the maximum busy tone b b has the value 0 0 which would indicate that all the base stations in its active set are scarcely loaded. In this case deterministic rate increase is possible the operation moves to control block and the rate of transmission of the packet is set to R. If the maximum busy tone does not have the value 0 0 the operation moves to control block .

In control block the subscriber station determines whether the maximum busy tone b b has the value 0 1 which would indicate that at least one base station in its active set is stable but not scarcely loaded . If the maximum busy tone has the value 0 1 the operation moves to control block where stochastic rate increase is possible. In control block the subscriber station determines whether the computed rate Ris less than or equal to R. If Ris less than or equal to R then in block the current packet is transmitted at rate R. If Ris greater than R then in block the current packet is transmitted at a stochastically determined rate such that the packet is transmitted at rate Rwith probability p or is transmitted at rate Rwith probability 1 p. If the maximum busy tone does not have the value 0 1 the operation moves to control block .

In the exemplary embodiment the probability p of increasing the transmission rate of the subscriber station is determined in accordance with past activity of the subscriber station and on the buffer nearly full flag F . In particular in the exemplary embodiment the probability is determined in accordance with the average rate used in a predetermined number of previous packets R. In the exemplary embodiment the probability is determined in accordance with the equation 

In control block the subscriber station determines whether the maximum busy tone b b has the value 1 0 which would indicate that at least one base station in its active set is heavily loaded. If the maximum busy tone has the value 1 0 the operation moves to control block in which stochastic rate decrease is necessary. In control block the subscriber station determines whether the computed rate Ris less than R. If Ris less than R then in block the current packet is transmitted at rate R. If Ris greater than or equal to R then in block the current packet is transmitted at a stochastically determined rate such that the packet is transmitted at rate Rwith probability p or is transmitted at the greater of R 2 or Rwith probability 1 p. In the exemplary embodiment the number p is again computed according to equation 5 .

If the maximum busy tone does not have the value 1 0 the operation moves to block which indicates that the at least one base station in the active set of the subscriber station is in an overload condition. In block the transmission rate of the current packet is determined to be the greater of R 2 or R.

Referring to the figures represents the exemplary data communication system of the present invention which comprises multiple cells . Each cell is serviced by a corresponding base station or base station . Base stations are base stations that are in active communication with subscriber station and are said to make up the active set of subscriber station . Base stations are not in communication with subscriber station but have signals with sufficient strength to be monitored by subscriber station for addition to the active set if the strength of the received signals increases due to a change in the propagation path characteristics. Base stations are said to make up the candidate set of subscriber station .

In the exemplary embodiment subscriber station receives data information from at most one base station on the forward link at each time slot but it receives busy tone information from all base stations in the active set. Also the subscriber station communicates with all base stations in the active set on the reverse link. If the number of active base stations is more than one the subscriber station is in soft handoff. Subscriber stations especially those located near a cell boundary can receive the pilot signals from multiple base stations in the candidate set. If the pilot signal is above a predetermined threshold subscriber station can request that base station be added to the active set of subscriber station . In the exemplary embodiment before the candidate base station is added to the active set there is typically no way for the subscriber station to monitor its busy tone. If a way is provided to monitor the busy tone of a candidate base station then this busy tone enters the set inside of which a maximum is selected according to step described above.

A block diagram of the exemplary forward link architecture of the present invention is shown in . The data is partitioned into data packets and provided to CRC encoder . For each data packet CRC encoder generates frame check bits e.g. the CRC parity bits and inserts the code tail bits. The formatted packet from CRC encoder comprises the data the frame check and code tail bits and other overhead bits which are described below. The formatted packet is provided to encoder which in the exemplary embodiment encodes the data in accordance with a convolutional or turbo encoding format. The encoded packet from encoder is provided to interleaver which reorders the code symbols in the packet. The interleaved packet is provided to frame puncture element which removes a fraction of the packet in the manner described below. The punctured packet is provided to multiplier which scrambles the data with the scrambling sequence from scrambler . The output from multiplier comprises the scrambled packet.

The scrambled packet is provided to variable rate controller which demultiplexes the packet into K parallel inphase and quadrature channels where K is dependent on the data rate. In the exemplary embodiment the scrambled packet is first demultiplexed into the inphase I and quadrature Q streams. In the exemplary embodiment the I stream comprises even indexed symbols and the Q stream comprises odd indexed symbol.

Each stream is further demultiplexed into K parallel channels such that the symbol rate of each channel is fixed for all data rates. The K channels of each stream are provided to Walsh cover element which covers each channel with a Walsh function to provide orthogonal channels. The orthogonal channel data is provided to gain element which scales the data to maintain a constant total energy per chip and hence constant output power for all data rates. The scaled data from gain element is provided to multiplexer MUX which multiplexes the data with a preamble sequence. The output from MUX is provided to multiplexer MUX which multiplexes the traffic data the power control bits and the pilot data. The output of MUX comprises the I Walsh channels and the Q Walsh channels.

The reverse link power control RPC bits are provided to symbol repeater which repeats each RPC bit a predetermined number of times. The repeated RPC bits are provided to Walsh cover element which covers the bits with the Walsh covers corresponding to the RPC indices. The covered bits are provided to gain element which scales the bits prior to modulation so as to maintain a constant total transmit power.

In addition a forward activity bit is provided to symbol repeater . The forward activity bit alerts subscriber station to a forthcoming blank frame in which the base station will not transmit forward link data. This transmission is made in order to allow subscriber station to make a better estimate of the C I of the signal from base stations . The repeated versions of the forward activity bit are Walsh covered in Walsh cover element so as to be orthogonal to the Walsh covered power control bits. The covered bits are provided to gain element which scales the bits prior to modulation so as to maintain a constant total transmit power.

In addition a busy tone is provided to symbol repeater . The busy tone alerts subscriber station to a reverse link loading condition. In an exemplary embodiment the busy tone is a single bit indicative of the reverse link being fully loaded or having spare capacity. In the preferred embodiment the busy tone is a two bit signal indicative of a request by base stations for subscriber stations in its coverage area to either deterministically increase or decrease the rate of their reverse link transmissions or to stochastically increase or decrease the rate of their reverse link transmissions. The repeated versions of the busy tone is Walsh covered in Walsh cover element so as to be orthogonal to the Walsh covered power control bits and forward activity bit. The covered bit is provided to gain element which scales the bits prior to modulation so as to maintain a constant total transmit power.

The pilot data comprises a sequence of all zeros or all ones which is provided to multiplier . Multiplier covers the pilot data with Walsh code W. Since Walsh code Wis a sequence of all zeros the output of multiplier is the pilot data. The pilot data is time multiplexed by MUX and provided to the I Walsh channel which is spread by the short PNcode within complex multiplier see . In the exemplary embodiment the pilot data is not spread with the long PN code which is gated off during the pilot burst by MUX to allow reception by all subscriber stations . The pilot signal is thus an unmodulated BPSK signal.

A block diagram of the exemplary modulator used to modulate the data is illustrated in . The I Walsh channels and Q Walsh channels are provided to summers and respectively which sum the K Walsh channels to provide the signals Iand Q respectively. The Iand Qsignals are provided to complex multiplier . Complex multiplier also receives the PN I and PN Q signals from multipliers and respectively and multiplies the two complex inputs in accordance with the following equation 

In the exemplary embodiment the data packet is spread with the long PN code and the short PN codes. The long PN code scrambles the packet such that only the subscriber station for which the packet is destined is able to descramble the packet. In the exemplary embodiment the pilot and power control bits and the control channel packet are spread with the short PN codes but not the long PN code to allow all subscriber stations to receive these bits. The long PN sequence is generated by long code generator and provided to multiplexer MUX . The long PN mask determines the offset of the long PN sequence and is uniquely assigned to the destination subscriber station . The output from MUX is the long PN sequence during the data portion of the transmission and zero otherwise e.g. during the pilot and power control portion . The gated long PN sequence from MUX and the short PNand PNsequences from short code generator are provided to multipliers and respectively which multiply the two sets of sequences to form the PN I and PN Q signals respectively. The PN I and PN Q signals are provided to complex multiplier .

The block diagram of the exemplary traffic channel shown in is one of numerous architectures which support data encoding and modulation on the forward link. Other architectures such as the architecture for the forward link traffic channel in the CDMA system which conforms to the IS 95 standard can also be utilized and are within the scope of the present invention.

A diagram of the exemplary forward link frame structure of the present invention is illustrated in . The traffic channel transmission is partitioned into frames which in the exemplary embodiment are defined as the length of the short PN sequences or 26.67 msec. Each frame can carry control channel information addressed to all subscriber stations control channel frame traffic data addressed to a particular subscriber station traffic frame or can be empty idle frame . The content of each frame is determined by the scheduling performed by the transmitting base station . In the exemplary embodiment each frame comprises 16 time slots with each time slot having a duration of 1.667 msec. A time slot of 1.667 msec is adequate to enable subscriber station to perform the C I measurement of the forward link signal. A time slot of 1.667 msec also represents a sufficient amount of time for efficient packet data transmission.

In the exemplary embodiment each forward link data packet comprises 1024 or 2048 bits. Thus the number of time slots required to transmit each data packet is dependent on the data rate and ranges from 16 time slots for a 38.4 Kbps rate to 1 time slot for a 1.2288 Mbps rate.

An exemplary diagram of the forward link slot structure of the present invention is shown in . In the exemplary embodiment each slot comprises three of the four time multiplexed channels the traffic channel the control channel the pilot channel and the overhead control channel. In the exemplary embodiment the pilot signal is transmitted in two bursts and the overhead control channel is transmitted on either side of the second pilot burst. The traffic data is carried in three portions of the slot and .

The first pilot burst is time multiplexed into the first half of the slot by multiplexer . The second pilot burst is time multiplexed into the second half of the slot. On either side of the second pilot burst overhead channel data including the forward activity bit the busy tones and the power control bits are multiplexed into the slot.

In the exemplary embodiment the busy tone is a two bit signal and the busy tone is only set once per frame. In the exemplary embodiment the busy tone is interleaved among the slots of a frame such that the even slots carry the first bit of the busy tone and the odd slots carry the second bit of the busy tone. Other ways to interleave the busy tone bits are obvious to the skilled in the art and are within the scope of the present invention.

Transmitter is responsible for upconverting filtering and amplifying the reverse link signal for transmission. Transmitter provides a signal to rate allocation control processor indicative of the amount of power headroom available for transmission of the current data packet. In response to this signal rate allocation control processor determines the adjustment to the rate of transmission of the next packet as described with respect to block above.

Forward link signals are received by subscriber station at antenna and provided through duplexer to receiver . Receiver downconverts filters and amplifies the received signal and provides the signal to pilot energy calculator . Pilot energy calculator calculates the energy of the pilot signals received from active set base stations and candidate set base stations .

The received signals are provided to pilot despreader which despreads the pilot signals in accordance with control signals from search controller . In the exemplary embodiment search controller provides a PN offset of a candidate set or active set base station to pilot despreader which in response despreads the pilot signal from a candidate set base station or active set base station .

The despread pilot symbols are provided to squaring element which computes the energy of the symbols and provides the symbol energy values to accumulator . Accumulator accumulates the energies over the time interval of the pilot burst and provides the pilot burst energy to rate allocation element . In response to the pilot burst energies from the candidate set base stations Ec Io and the pilot burst energies from active set base station Ea Io rate allocation control processor computes the candidate set protection adjustment to the selected rate as described with respect to block above.

The received signals are also provided to busy tone demodulators . Busy tone demodulators demodulate the busy tone values for each active set base station and provide the busy tone values for each base station to rate allocation control processor . In response rate allocation control processor selects maximum busy tone as described in above and calculates the rate of the transmission as described with respect to above.

Once the rate of transmission has been determined by rate allocation control processor a signal indicative of the selected rate is provided to buffer modulator and transmitter . Buffer outputs a block of data in accordance with the selected transmission rate to modulator . Modulator modulates the signal in accordance with the selected data rate and provides the modulated data to transmitter . Transmitter amplifies the signal in accordance with selected transmission rate and provides the signal through duplexer for transmission through antenna . The rate selected can be indicated to the active base stations through a reverse link message.

The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

