---

title: Method and apparatus for transmitting and receiving variable rate data
abstract: A variable rate transmission system transmits a variable rate data packet including an accompanying rate indication signal indicative of the transmission rate of the variable data packet. The data packet can be spread using a long pseudonoise (PN) code, the mask of which can be selected in accordance with the transmission rate of the variable rate data packet. A preamble, providing the transmission rate, can be punctured into an outgoing pilot signal. The rate indication signal can be encoded in accordance with a set of orthogonal functions that are part of the indication of the transmission rate of the data packet.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07961592&OS=07961592&RS=07961592
owner: QUALCOMM Incorporated
number: 07961592
owner_city: San Diego
owner_country: US
publication_date: 20071115
---
The present Application for patent is a Continuation and claims priority to patent application Ser. No. 10 858 873 entitled METHOD AND APPARATUS FOR TRANSMITTING AND RECEIVING VARIABLE RATE DATA filed Jun. 1 2004 now allowed which is a Continuation and claims priority to patent application Ser. No. 09 158 254 entitled METHOD AND APPARATUS FOR TRANSMITTING AND RECEIVING VARIABLE RATE DATA filed Sep. 22 1998 now U.S. Pat. No. 6 798 736 issued on Sep. 28 2004 both assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present invention relates to communications. More particularly the present invention relates to a method and apparatus for transmitting and receiving variable rate packets of data with signals indicative of the data rate of those packets.

The use of code division multiple access CDMA modulation techniques is one of several techniques for facilitating communications in which a large number of system users are present. Although other techniques such as time division multiple access TDMA frequency division multiple access FDMA and AM modulation schemes such as amplitude companded single sideband ACSSB are known CDMA has significant advantages over these other techniques. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS and assigned to the assignee of the present invention and incorporated by reference herein. The use of CDMA techniques in a multiple access communication system is further disclosed in U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING SIGNAL WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM assigned to the assignee of the present invention and incorporated by reference herein.

In the aforementioned U.S. Pat. No. 5 103 459 the 459 patent the use of orthogonal Walsh codes to provide channelization to different subscriber stations is described. This allows a base station to transmit many separate channels to a plurality of users in the coverage area of the base station. In the 459 patent one of the orthogonal Walsh channels that was transmitted was a pilot channel that allowed for the coherent demodulation of the traffic channels transmitted on other orthogonal Walsh channels. A method for transmitting a CDMA signal from a mobile station which is capable of coherent demodulation is described in U.S. patent application Ser. No. 08 856 428 now abandoned entitled REDUCED PEAK TO AVERAGE TRANSMIT POWER HIGH DATA RATE IN A CDMA WIRELESS COMMUNICATION SYSTEM filed May 14 1997 assigned to the assignee of the present invention and incorporated by reference herein. In U.S. patent application Ser. No. 08 856 428 the mobile station transmits a plurality of different channels wherein each of the channels is distinguished by use of a short Walsh sequence. In addition U.S. patent application Ser. No. 08 856 428 describes a method of complex pseudonoise PN spreading that reduces peak to average ratio in the transmission of a QPSK modulated signal.

CDMA systems often employ a variable rate vocoder to encode data so that the data rate can be varied from one data frame to another. An exemplary embodiment of a variable rate vocoder is described in U.S. Pat. No. 5 414 796 entitled VARIABLE RATE VOCODER assigned to the assignee of the present invention and incorporated by reference herein. The use of a variable rate communications channel reduces mutual interference by eliminating unnecessary transmissions when there is no useful speech to be transmitted.

Similarly it is desirable for providing variable rate transmission of digital data in CDMA wireless communication systems. When there is a great deal of digital information to be transmitted and when minimizing delay is important then data should be transmitted at high transmission rates. However when there is less data to be transmitted or when minimizing delay is not as important it is desirable to reduce the transmission rate of digital data in a wireless communication system because transmission at rates lower than the maximum transmission rate can result in increased range extended battery life and reduce interference to other users.

One technique for the receiver to determine the rate of a received data frame is described in U.S. Pat. No. 5 566 206 entitled METHOD AND APPARATUS FOR DETERMINING DATA RATE OF TRANSMITTED VARIABLE RATE DATA IN A COMMUNICATIONS RECEIVER assigned to the assignee of the present invention and incorporated by reference herein. Another technique is described in U.S. patent application Ser. No. 08 126 477 entitled MULTIRATE SERIAL VITERBI DECODER FOR CODE DIVISION MULTIPLE ACCESS SYSTEM APPLICATIONS filed Sep. 24 1993 now U.S. Pat. No. 5 710 784 issued Jan. 20 1998 to Kindred et al. assigned to the assignee of the present invention and incorporated by reference herein. According to these techniques each received data frame is decoded at each of the possible rates. Error metrics which describe the quality of the decoded symbols for each frame decoded at each rate are provided to a processor. The error metrics may include Cyclic Redundancy Check CRC results Yamamoto Quality Metrics and Symbol Error Rates. These error metrics are well known in communications systems. The processor analyzes the error metrics and determines the most probable rate at which the incoming symbols were transmitted.

The present invention provides a novel and improved apparatus and method for transmitting and receiving variable rate data. In the first embodiment of the present invention the data is spread using a long pseudonoise code generated by a linear feedback PN generator the mask of which is selected in accordance with the transmission rate of the variable data and the specific user transmitting the data. Thus by identifying at the receiver which mask will allow the received waveform to be correctly despread the rate of the data can be determined. In the second embodiment of the present invention a preamble from a predetermined set of preambles is punctured into the outgoing pilot signal to provide rate indication information. In the third embodiment the rate indication signal is encoded in accordance with a set of orthogonal functions which are part of the indication of the rate of the data packet.

Referring to the figures illustrates the transmission apparatus of the present invention in block diagram form. The data packet to be transmitted is provided to cyclic redundancy check CRC and tail bit generator . The number of bits of data in the data packet determines the effective rate R of the transmission. CRC and tail bit generator generates a set of CRC bits such as parity bits in accordance with methods that are well known in the art. The CRC bits along with a set of tail bits are appended to the data packet.

The data packet with the appended CRC and tail bits is provided to forward error correction encoder . Encoder can be any form of digital forward error correction encoder such as a convolutional encoder a Reed Solomon encoder or other known forward error correction coder. In the exemplary embodiment encoder is a turbo coder the design of which is well known in the art and is described in detail in U.S. Pat. No. 5 446 747 entitled ERROR CORRECTION CODING METHOD WITH AT LEAST TWO SYSTEMATIC CONVOLUTIONAL CODINGS IN PARALLEL CORRESPONDING ITERATIVE DECODING METHOD DECODING MODULE AND DECODER which is incorporated by reference herein.

The encoded packet is provided to interleaver which reorders the encoded symbols in the packet to provide temporal diversity that provides for additional protection against burst errors. The reordered packet is then provided to repetition generator which provides redundant versions of the interleaved symbols into the packet so as to output packets of fixed number of symbols regardless of the data rate of the packet R. The packet from repetition generator is provided to gain element which adjusts the gain of the packet in accordance with the rate R of the packet and in order to provide the correct power ratio between the pilot channel and the data channel.

The packet from gain element is provided to subchannel spreading element . Subchannel spreading element spreads the packet using a short spreading sequence W that is used to allow the receiver to separate the pilot channel from the data channel. In the exemplary embodiment the short spreading sequences used are short orthogonal Walsh sequences. The use of short orthogonal Walsh sequences to provide channelization on the reverse link is described in detail in the aforementioned U.S. patent application Ser. No. 08 856 428 now abandoned. The spread packet from subchannel modulation element is provided to scrambling element . Scrambling element scrambles the packet in accordance with a pseudonoise PN sequence generated by long code generator .

Turning to an exemplary embodiment of the PN generator is illustrated. The packet is covered using a pseudonoise PN sequence derived from a IIR filter composed of a linear shift register with associated summing elements and taps. In the exemplary embodiment IIR filter is a tap IIR filter that is used in the scrambling of reverse link transmissions in the Telecommunications Industry Association standard TIA EIA IS 95 A entitled Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System. 

The outputs from IIR filter are provided to a bank of AND gates . Each of the outputs of IIR filter is ANDed with a 42 bit Long Code Mask. The results of the ANDing operations are provided to modulo 2 addition means which performs the summing operation to provide the long code sequence as a serial output. The long code generated in this fashion has important autocorrelation characteristics that are well known in the art. Long codes of this fashion are used in cellular CDMA systems to distinguish one mobile station from another. When two distinct long code masks are used the resulting two long code sequences are uncorrelated or at least have very limited correlation. The present invention takes advantage of this property of the generated long codes in order to encode the rate information.

As shown in in the present invention the exemplary 42 bit long code mask comprises n bits which identify the rate of transmission and 42 n bits which are used to identify the user. For example if there are two possible transmission rates then a single bit n 1 would be sufficient to identify the transmission rate. If there were 3 or 4 possible transmission rates then two bits n 2 would be necessary to specify the rate and so on. In the bits identifying the transmission rate are the most significant bits MSBs however any of the bits would be equally applicable and the bits identifying the rate need not even be consecutive.

Returning to the information regarding the rate of the information is provided to mask selector that provides a mask in accordance with the rate information R and the identity of the transmitting remote station. Mask selector could be implemented using a memory device such as a RAM or ROM device that stores mask codes that are retrieved in accordance with the rate of the packet to be transmitted. The selected mask is provided to long code generator which provides the generated long code to scrambling elements and .

In the exemplary embodiment the remote station transmits both a data channel and a pilot channel that allows for coherent demodulation of its transmitted signal. The present invention is not limited to systems that transmit a data channel with an accompanying pilot channel nor is it limited to reverse link transmissions. The present invention is equally applicable to any variable rate transmission system in which the receiver does not know a priori the rate of the transmission and in which the data is scrambled using a pseudonoise sequence.

A set of pilot signal bits is provided to subchannel spreading element . The pilot signal carries no information and the exemplary embodiment is simply a string of zeroes. The pilot bits are spread by a short Walsh sequence W which in the exemplary embodiment is orthogonal to W and is used to distinguish the pilot channel from the data channel. The subchannel spread packet is provided to scrambling element which as described previously scrambles the packet in accordance with the long code generated by long code generator .

The PN scrambled packets from scrambling elements and are provided to complex PN spreading means which performs a complex spreading operation as described in aforementioned U.S. patent application Ser. No. 08 856 428. The inputs I and Q are complex spread by the input psueudonoise sequences PNand PNto provide outputs I and Q in accordance with the following equations 1 . 2 

The outputs from complex PN spreading means are provided to baseband filters BBF and which provide the appropriate filtering of the resultant waveform. The filtered waveforms are provided to upconversion elements and and are upconverted to the carrier frequency f in accordance with a QPSK modulation format. The two upconverted waveforms are summed in summing element the output of which is provided to transmitter TMTR which amplifies and filters the signal and provides it to antenna for transmission.

Again the exemplary embodiment illustrates a method for distinguishing between two possible rates. One skilled in the art will understand that the receiver structure shown can be extended to an arbitrary number of potential rates by increasing the number of demodulator decoder elements . In the exemplary embodiment the complex despread packet data is provided to demodulator decoders and . It will be understood by one skilled in the art that the demodulation can also work with one hardware element running at a higher rate. Moreover the receiver can descramble the pilot using the different long code masks corresponding to the different rate hypothesis and estimate the resulting energy obtained by using each hypothesis.

Demodulator decoder demodulates the data using a long code mask associated with the first data rate hypothesis and demodulator decoder demodulates the data using a long code mask associated with the second data rate. As described previously the two long PN codes corresponding to the two rate hypotheses will be uncorrelated. The demodulation and decoding of the data using the correct long code mask corresponding to the correct rate hypothesis will demodulate and decode correctly while the decoding of the data using the incorrect long code mask corresponding to the incorrect rate hypothesis will demodulate and decode incorrectly. The correct demodulation and decoding corresponding to the correct hypothesis of the data will be detected by CRC check and selector . CRC check and selector element will generate a set of CRC bits from the decoded data estimates and will compare those with the decoded CRC estimates. If the generated CRC bits match the decoded CRC estimates the data at that rate will be provided to the user.

Turning to the details of demodulator decoders the complex PN despread packets are provided to descrambling elements and . The packets are descrambled in accordance with long PN codes generated by long code generators which generate the long codes in accordance with a long code mask corresponding to the mobile station and a rate from the set of possible rates as described with respect to the transmission process.

The descrambled data packets from descrambling elements and are provided to subchannel despreading elements and which remove the Walsh subchannel coverings from the received data stream. Subchannel despreading elements and remove the data subchannel covering from the descrambled data in accordance with the data subchannel Walsh sequence W . Subchannel despreading elements and remove the pilot subchannel coverings from the descrambled data in accordance with the pilot subchannel Walsh sequence W .

The output from subchannel despreading elements and are provided to pilot filter which performs a moving average filtering operation on the signal in order to reduce the effects of noise on the received pilot signal. The I and Q components from pilot filter are provided to dot product circuit which performs a coherent demodulation of the QPSK data channel. The design of dot product elements is well known in the art and is described in detail in U.S. Pat. No. 5 506 865 entitled PILOT CARRIER DOT PRODUCT CIRCUIT which is assigned to the assignee of the present invention and incorporated by reference herein.

The demodulated data signal out of dot product element is provided to repetition combiner . Repetition combiner combines the repeated symbols in the packet in accordance with the rate hypothesis being tested by the demodulation decoder . Deinterleaver which reorders the symbols in accordance with a rate dependent deinterleaving format provides the reordered symbols. The reordered symbols are provided to decoder which decodes the symbols. In the exemplary embodiment decoder is a turbo decoder the implementation of which is well known in the art and is described in detail in U.S. Pat. No. 5 446 747. The present invention is equally applicable to other decoder structures such as trellis decoders and block decoders.

The decoded data packets from demodulator decoder and are provided to CRC check and selector . In the exemplary embodiment the CRC bits are checked and the data that passes the CRC check is output as the data demodulated and decoded at the correct rate. The present invention also anticipates the use of other methods for packet selection such as those involving the use of the accumulated metric from demodulator decoder estimates of received pilot energy following despreading by the different long code masks or the use of symbol error rate SER which depend on the number of symbol corrections made by demodulator decoder .

Again the exemplary embodiment illustrates a method for distinguishing between two possible rates. One skilled in the art will understand that the receiver structure shown can be extended to an arbitrary number of potential rates by increasing the number of demodulator elements . In the exemplary embodiment the complex PN despread packet data is provided to demodulators and

Demodulator demodulates the data using a long code mask associated with the first data rate hypothesis and demodulator demodulates the data using a long code mask associated with the second data rate hypothesis. As described previously the two long PN codes corresponding to the two rate hypotheses will be uncorrelated. The demodulation of the data using the correct long code mask corresponding to the correct rate hypothesis will demodulate correctly yielding a high energy demodulated signal while the decoding of the data using the incorrect long code mask corresponding to the incorrect rate hypothesis will demodulate incorrectly yielding low energy noise. The correct demodulation corresponding to the correct rate hypothesis will be detected by selector which will compare the energies of the two demodulated data streams.

Selector element will provide the correctly demodulated data packet to repetition combiner which combines the data in accordance with the detected rate of the received data. The combined symbols are provided to deinterleaver which reorders the symbols in accordance with a deinterleaving format selected on the basis of the determined rate. The reordered symbols are provided to decoder which decodes the symbols in accordance with a predetermined error correction format. In the exemplary embodiment decoder is a turbo decoder though the present invention is equally applicable to other decoders such as trellis or block decoders. The decoded data packet is then output to the user.

Turning to the details of demodulators the complex PN despread packets are provided to descrambling elements and . The packets are descrambled in accordance with long PN codes generated by long code generators which generate the long codes in accordance with a long code mask corresponding to a rate from the set of possible rates as described with respect to the transmission process.

The descrambled data packets from descrambling elements and are provided to subchannel despreading elements and which remove the Walsh subchannel coverings from the received data stream. Subchannel despreading elements and remove the data subchannel covering from the descrambled data in accordance with the data subchannel Walsh sequence W . Subchannel despreading elements and remove the pilot subchannel coverings from the descrambled data in accordance with the pilot subchannel Walsh sequence W .

The output from subchannel despreading elements and are provided to pilot filter which performs a moving average filtering operation on the signal in order to reduce the effects of noise on the received pilot signal. The I and Q components from pilot filter are provided to dot product circuit which performs a coherent demodulation of the QPSK data channel. The design of dot product elements is well known in the art and is described in detail in U.S. Pat. No. 5 506 865 entitled PILOT CARRIER DOT PRODUCT CIRCUIT which is assigned to the assignee of the present invention and incorporated by reference herein.

The demodulated data signal out of dot product element is provided to energy calculator and to selector . Energy calculator computes the energy of the demodulated packet and provides the energy value to selector . Selector selects the demodulated packet with the greatest amount of energy. The selected packet is provided to repetition combiner which combines the redundant symbol energies and provides the combined energies to deinterleaver . Deinterleaver reorders the combined symbol energies and provides them to decoder . Decoder decodes the data and provides it to the user.

The packet output by CRC and tail bit generator is provided to encoder which performs a forward error coding on the packet. In the exemplary embodiment encoder is a turbo encoder. The encoded symbols are provided to interleaver which reorders the symbols in accordance with a predetermined interleaving format. The reordered symbols are provided to repetition generator . which generates a set of redundant symbols to output a packet of a fixed number of symbols regardless of the data rate of the packet.

The packet from repetition generator is provided to gain adjustment means which adjusts the gain of the packet based on the data rate of the packet and the E Nrequired for proper transmission of the reverse link signal. The gain adjusted packet is provided to multiplexer . In the exemplary embodiment multiplexer performs a simple switching operation that punctures a rate indication preamble into the data packet by overwriting a first portion of the frame. The overwritten data could be recovered by means of the forward correction decoder at the receiver. In an alternative embodiment the packet length could be adjusted so that none of the data would require to be overwritten by the preamble.

In the current embodiment of the present invention the set of rate indication preambles are of lengths that vary in accordance with the data rate of the packet to be transmitted. In the exemplary embodiment the lower the data rate of the packet the longer will be the preamble included with the packet. In the exemplary embodiment the set of possible rates differ from one another by factors of two for example 9.6 Kbps 19.2 Kbps 38.4 Kbps and 76.8 Kbps. In the exemplary embodiment the length of the preamble varies in inverse proportion with the data rate of the packet. In this way the proportion of the data in the packet that is overwritten by the preamble remains constant due to the variable duration of the packets to be transmitted as a function of the data rate.

Turning to an exemplary set of four preambles is illustrated. In the exemplary embodiment illustrates the proposed preamble for the highest possible rate in the rate set i.e. 76.8 Kbps . illustrates the proposed preamble for the second highest possible rate in the rate set i.e. 36.4 Kbps . illustrates the proposed preamble for the third highest possible rate in the rate set i.e. 19.2 Kbps . illustrates the proposed preamble for the lowest possible rate in the rate set i.e. 9.6 Kbps .

The important characteristic to be observed regarding the proposed preamble structure is that the preamble sequences are orthogonal over selected time periods. For example the preamble sequence illustrated in is orthogonal to preamble sequences illustrated in C and D over the period of its duration 0 to 4 T . Similarly the preamble sequence illustrated in is orthogonal to the preamble sequences illustrated in over the period of its duration 0 8 T . Lastly the preamble sequence illustrated in is orthogonal to the preamble sequence illustrated in over the period of its duration 0 16 T . The benefit of the orthogonality of the preamble waveforms is realized at the receiver by making detection of the preamble more accurate because the correlation between two orthogonal sequences is zero. Thus by passing the preamble sequence through a correlator such as a matched filter will yield zero energy for all preamble rate hypotheses except the correct preamble rate hypothesis. illustrate an alternative set of proposed preamble waveforms which manifest the same orthogonal properties as those illustrated in A D.

Referring back to the data packet is provided to subchannel spreading element which covers the packet in accordance with the Walsh sequence W. In addition the rate indication signal is Walsh covered by subchannel spreading element . The data signal and the preamble signal are combined by multiplexer . In an alternative embodiment the data packet could be combined with the preamble prior to performing the Walsh covering operation. The combined Walsh covered packet is then provided to scrambling means which scrambles the packet in accordance with a long code sequence provided by long code generator and mask . The long code is uniquely assigned to the remote station and used to distinguish the transmission of different remote stations simultaneously communicating with a given base station.

In the modulation of the pilot signal a set of predetermined pilot symbols are provided to Walsh covering means . In the exemplary embodiment the pilot symbol sequence is a string of all zeroes. Walsh covering means covers the pilot symbols in accordance with the Walsh sequence W. The Walsh covered pilot symbols are provided to spreading means which scrambles the Walsh covered pilot symbols in accordance with a long PN sequence from long code generator and mask . The outputs from scramblers and are input to complex PN spreading element along with pseudonoise sequences PNand PN. Complex PN spreading element performs a complex PN spreading on the input signal in accordance with equations 1 and 2 above.

The I and Q channel outputs from the complex PN spreading element are provided to baseband filters BBFs and . Baseband filters and filter the baseband signals and provide the filtered signals to upconverters and . Upconverters and upconvert the signals in accordance with a QPSK modulation format wherein the resulting upconverted signals are 90 degrees out of phase with one another. The upconverted signals are summed in summing element and provided to transmitter TMTR where the signal is amplified and filtered and transmitted through antenna .

The despread I and Q signals are provided descrambling elements and . Descrambling elements and descramble the signals in accordance with a long code provided by long code and mask generator . The descrambled I and Q signals are provided by descrambling elements and to subchannel despreading elements and which remove the Walsh subchannel coverings from the received signals. Subchannel despreading elements and remove the data subchannel covering from the descrambled data in accordance with the data subchannel Walsh sequence W . Subchannel despreading elements and remove the pilot subchannel coverings from the descrambled data in accordance with the pilot subchannel Walsh sequence W .

The output from subchannel despreading elements and are provided to pilot filter which performs a moving average filtering operation on the signal in order to reduce the effects of noise on the received pilot signal. The I and Q components from pilot filter are provided to dot product circuit which performs a coherent demodulation of the QPSK data channel. The design of dot product elements is well known in the art and is described in detail in U.S. Pat. No. 5 506 865 entitled PILOT CARRIER DOT PRODUCT CIRCUIT which is assigned to the assignee of the present invention and incorporated by reference herein.

The demodulated data signal out of dot product element is provided to demultiplexer De Mux . Demultiplexer outputs the data initially to preamble detector . Preamble detector determines the rate indicated by the despread preamble. Many implementations of preamble detectors are possible. For example preamble detector can be implemented using a bank of matched filters or other correlators. Upon finding a preamble with sufficient correlation energy to one of the predetermined set of preambles the rate is declared as having been successfully detected. In an alternative embodiment the preamble could be detected noncoherently in which case the despread data would be provided directly to the preamble detector through demultiplexer from subchannel despreading elements and .

Upon successful detection of one of the candidate preambles preamble detector sends a signal indicative of the detected rate to repetition combiner deinterleaver and decoder which perform their operations in accordance with this information. In addition upon detection of the end of the preamble message preamble detector sends a signal indicating the detection of the end of the preamble to demultiplexer in response to which demultiplexer begins to output the despread data to repetition combiner .

Repetition combiner combines the repeated symbol energies in the packet in accordance with the detected rate of the received packet. The combined symbol energies are provided to deinterleaver which reorders the symbol energies in accordance with a deinterleaving format selected in accordance with the rate signal from preamble detector . The reordered symbols are provided to decoder which decodes the symbols. In the exemplary embodiment decoder is a turbo decoder the implementation of which is well known in the art and is described in detail in U.S. Pat. No. 5 446 747. The present invention is equally applicable to other decoder structures such as trellis decoders and block decoders. The decoded data estimates are output by decoder to the user.

In the preferred embodiment the rate request information provides an indication both of the rate at which the remote station desires data to be downloaded to it and also the base station or base station sector which the remote station wishes to perform the data transmission. In the preferred embodiment the indication of which base station or sector of a predetermined set of base stations or sectors is based on a spreading function that will only be properly decoded by the base station sought to transmit to the remote station.

In identifying the Walsh function the superscript identifies the order of the Walsh function and the subscript identifies the index of the Walsh function of that order. Tables 1 3 below provide the Walsh function used in the current description.

As in the previous two embodiments the pilot channel symbols are a simple predetermined sequence. In the exemplary embodiment the pilot symbols are a string of all zeroes which are provided to multiplexer MUX . In the exemplary embodiment the rate indication signal is a biorthogonal waveform. Thus the input to Walsh covering element is a binary value the switching of which will result in the inversion of the resultant waveform. The symbols from Walsh covering element are provided to Walsh covering element which provides a second Walsh covering of the data in which the index of the Walsh cover used provides the second portion of the rate indication value. In the exemplary embodiment the second Walsh covering can take on eight different forms which in combination with the input bit allows for the specification of up to 16 different rates. The Walsh symbols from Walsh covering element are provided to multiplexer . In the exemplary embodiment the rate indication is punctured into the pilot symbols once every slot for 32 consecutive slots 2 frames spanned by a reverse link packet. This is to provide time diversity in a fading environment.

Turning to the rate request message the exemplary embodiment provides for the specification of up to 16 possible forward link from the base station to the remote station data rates. A 4 bit index is provided to block encoder . In the exemplary embodiment block encoder maps the 4 bit input into a set of 8 possible Walsh symbols or their inverse using a 8 4 4 block code the design and implementation of which are well known in the art. The block encoded rate request is then provided to repetition generator which provides redundancy for the purposes of time diversity to protect against burst errors. The rate request message is then provided to gain adjustment element which adjusts the gain to provide for proper reception of the rate request message. The gain adjusted signal is provided to Walsh covering element which provides additional redundancy into the rate request message.

The Walsh covered message from Walsh covering element is then provided to Walsh covering element . The purpose of Walsh covering element is to indicate the best base station or base station sector from which to receive forward link data. In the exemplary embodiment the remote station measures the C I of transmissions from a set of base stations from which it is capable of receiving data. The base station which can provide data to the remote station at the highest C I is selected by the remote station to download data to the remote station. The selected base station is indicated by using a Walsh sequence that will only be properly demodulated by the selected base station. All base stations and sectors in the remote stations active set or set of base station sectors capable of transmission to the remote station will attempt to demodulate the signal using an assigned Wsequence. However only the selected base station will correctly demodulate the request and will transmit to the remote station. The encoded rate request information the rate indication and the pilot data are time multiplexed together by multiplexer . The multiplexed control signal is provided to subchannel spreading element which covers the resulting signal with a Walsh covering that is orthogonal to that used to cover the data subchannel.

On the data subchannel variable rate data packets are provided to CRC and tail bit generator . CRC and tail bit generator generates a set of redundant check bits and append those check bits along with a set of tail bits to the packet.

The packet output by CRC and tail bit generator is provided to encoder which performs a forward error coding on the variable rate data packet. In the exemplary embodiment encoder is a turbo encoder. The encoded symbols are then provided to interleaver which reorders the symbols in accordance with a predetermined interleaving format. The reordered symbols are then provided to repetition generator which generates a set of redundant symbols to output a packet containing a fixed number of symbols regardless of the data rate of the packet.

The packet from repetition generator is provided to gain adjustment means which adjusts the gain of the packet based on the data rate of the packet and the E Nrequired for proper transmission of the reverse link signal. The gain adjusted packet is provided to subchannel spreading element which covers the packet with a Walsh sequence that is orthogonal to the Walsh sequence used to cover the control packet.

The data packet and the control packet are provided to scrambling means and respectively. Scrambling elements and scramble the packets in accordance with a long code sequence provided by long code generator and mask . The outputs from scrambling elements and are input to complex PN spreading element along with pseudonoise sequences PNand PN. Complex PN spreading element performs a complex PN spreading on the input signal in accordance with equations 1 and 2 above.

The I and Q channel outputs from the complex PN spreading element are provided to baseband filters BBFs and . Baseband filters and filter the baseband signals and provide the filtered signals to upconverters and . Upconverters and upconvert the signals in accordance with a QPSK modulation format wherein the resulting upconverted signals are 90 degrees out of phase with one another. The upconverted signals are summed in summing element and provided to transmitter TMTR where the signal is amplified and filtered and provided through duplexer for transmission through antenna .

In addition remote station includes a variable rate receive subsystem for receiving forward link variable rate data from a base station or plurality of base stations capable of transmitting to remote station . The forward link variable rate data is received through antenna and provided through duplexer to variable rate receive subsystem .

The complex PN despread packets are provided to descramblers and . The packets are descrambled in accordance with long PN codes generated by long code and mask generators which generate the long code sequence as described above with respect to previous embodiments.

The descrambled data packets from descramblers and are provided to subchannel despreading elements and which remove the Walsh subchannel coverings from the received data stream. Subchannel despreading elements and remove the data subchannel covering from the descrambled data in accordance with the pilot subchannel Walsh sequence W . Subchannel despreading elements and remove the data subchannel coverings from the descrambled data in accordance with the pilot subchannel Walsh sequence W .

The output from subchannel despreaders elements and are provided to demultiplexer De Mux . Demultiplexer separates out the different portions of the received control channel corresponding to the pilot symbols the rate indication symbols and the data request symbols and outputs that data to three separate outputs.

The pilot symbols provided by demultiplexer onto a first output are provided to pilot filter which performs a moving average filtering operation on the signal in order to reduce the effects of noise on the received pilot signal. The I and Q components from pilot filter are provided to dot product circuit which performs a coherent demodulation of the QPSK data channel. The design of dot product elements is well known in the art and is described in detail in U.S. Pat. No. 5 506 865 entitled PILOT CARRIER DOT PRODUCT CIRCUIT which is assigned to the assignee of the present invention and incorporated by reference herein.

The demodulated data signal out of dot product element is provided to repetition combiner . Repetition combiner combines the repeated symbols in the packet in accordance with the detected reverse link rate signal provided by rate indication decoder . The combined symbol energies are provided to deinterleaver which reorders the symbols in accordance with the detected rate indication signal provided by rate indication decoder . The reordered symbols are provided to decoder which decodes the symbols in accordance with the detected rate indication signal. In the exemplary embodiment decoder is a turbo decoder the implementation of which is well known in the art and is described in detail in U.S. Pat. No. 5 446 747. The present invention is equally applicable to other decoder structures such as trellis decoders and block decoders.

Demultiplexer provides the received symbol energies corresponding to the rate indication signal on a second output to rate indication decoder . Rate indication decoder can be implemented in a variety of ways such as by using a bank of correlators to correlate the received symbol energies with the possible rate indication waveforms. The waveform that has the highest correlation energy would be detected as the transmitted waveform thus determining the rate indication value. The rate indication value is provided to repetition combiner deinterleaver and decoder to assist in the operation of those elements.

Demultiplexer provides the received symbol energies corresponding to the rate request message signal on a third output to rate request DRQ decoder . Each base station in the active set of the remote station would attempt to decode the rate request message using an assigned Walsh sequence. Only the base station that the remote station desires to transmit the data will be able to correctly decode the rate request message. After the selected base station or sector removes the Walsh covering from the rate request message the message is block decoded to provide the requested rate information to the base station. This information is provided to a control processor in the selected base stations or sector which schedules data transmissions to the remote station in accordance with this rate request.

The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

