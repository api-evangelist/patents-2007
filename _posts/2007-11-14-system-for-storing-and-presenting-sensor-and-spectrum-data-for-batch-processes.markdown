---

title: System for storing and presenting sensor and spectrum data for batch processes
abstract: A system for monitoring and controlling a batch process. The system includes a control system that is operable to control the batch process and to receive measured process variables of the batch process. An analyzer analyzes a material sample from the batch process and generates array data representative of the composition of the material sample. An analyzer controller is operable to collect the array data from the analyzer and the measured process variables from the control system. A software data server running on a computer is operable to retrieve the array data and the measured process variables from the analyzer controller. A software information management system running on the computer is operable to receive the measured process variables and the array data from the data server and to store the measured process variables and the array data in a database in an associated manner.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07756657&OS=07756657&RS=07756657
owner: ABB Inc.
number: 07756657
owner_city: Cary
owner_country: US
publication_date: 20071114
---
This application claims the benefit of U.S. provisional patent application No. 60 858 974 filed on Nov. 14 2006 which is hereby incorporated by reference in its entirety.

The present invention is directed toward batch processes and more particularly toward a system for storing and presenting sensor and spectral data for batch processes.

A batch process is a process in which a limited quantity of ingredients are added and processed in a step wise fashion. A recipe defines the equipment procedures and formula used to run a batch process. An automated batch process is typically controlled by a process control system having controller subsystems for controlling the valves pumps and other physical equipment required to perform the batch process. When a plurality of batch processes are being run to produce a plurality of different products a software batch management application is typically provided to interface with the process control system. In such a case the controller subsystems store and execute control logic for executing procedures within the batch process such as delivering ingredients to a reactor while the batch management application will allocate and de allocate equipment store recipes schedule batch processes generate reports and store and archive batch data. The batch management application may also provide process variable setpoints to controller subsystems and may control the execution of batch procedures such as stopping a current batch procedure or starting a subsequent batch procedure.

During or after the run of a batch process it is often desirable to analyze the product of the batch process to ascertain its composition. The composition of the product may be used to control the batch process to improve the batch process and or to comply with governmental regulations. The product of a batch process is typically analyzed using a spectrometer. A spectrometer is a device that is used to determine the chemical composition of a sample using electromagnetic radiation e.g. light. In a spectrometer electromagnetic radiation is interacted with a sample to produce a spectrum that is detected and then analyzed to determine the composition of the sample. An emission spectrometer excites molecules of a sample to higher energy states and then analyzes the radiation emitted when the molecules decay to their original energy state. An absorption spectrometer passes light through a sample and measures the absorption of light at various wavelengths. In a dispersive type of absorption spectrometer the light is separated into its component wavelengths using a prism or a holographic grating and the absorption at each wavelength is individually measured. In an interference type of absorption spectrometer modulated light having a range of different wavelengths is passed through a sample to obtain a combined measurement of the absorption at the different wavelengths. The combined measurement is then converted into a spectrum using Fourier transform computations. This interference type of absorption spectrometer typically utilizes infrared light and thus is known as a Fourier transform infrared FTIR spectrometer.

An FTIR spectrometer typically includes a Michelson interferometer or other similar type of interferometer that splits a broadband beam of infrared light into two parts. A Michelson interferometer has four arms. A first arm contains a source of infrared light such as a quartz halogen bulb a second arm contains a stationary fixed mirror a third arm contains a moving mirror and a fourth arm is open. At the intersection of the four arms is a beam splitter that is constructed to transmit half of the impinging radiation and reflect the other half of the impinging radiation. The transmitted light beam strikes the fixed mirror and the reflected light beam strikes the moving mirror. After reflecting off the respective mirrors the two light beams recombine at the beam splitter. The combined light beam is then directed through a sample cell containing the sample to be analyzed which modifies the interference pattern of the combined beam. The modified beam then impinges on a detector.

For each wavelength of light the distance traveled by the light from the moving mirror changes so as to be in and out of phase with the light from the fixed mirror which causes the intensity of the wavelength of the combined light beam to change in a sinusoidal manner due to the additive nature of waves. For each wavelength a plot of light intensity versus optical path difference for one scan of the moving mirror is called an interferogram. A scan of the moving mirror is one complete movement of the mirror along its travel path.

Since the light used in the interferometer has a plurality of different wavelengths the detector measures a total interferogram which is the summation of all the interferograms from all the different infrared wavelengths. Thus the total interferogram is a sum of sinusoidal waves each of which contains information about the wavenumber of a given infrared peak and amplitude information about the peak intensity at that wavenumber. The Fourier transform computations transform the summed sinusoidal waves into a raw spectrum. This raw spectrum not only contains information about the sample but about the spectrometer as well. To obtain information only about the sample another calculation is performed using a reference or background spectrum. A background spectrum is taken before starting the analysis of the sample when there is no sample in the cell or there is a blank sample . The background spectrum only contains information about the spectrometer including the sample cell etc. The raw spectrum is ratioed against the background spectrum to produce a transmittance spectrum which is then converted to an absorbance spectrum in the form of absorbance versus wavenumber. shows an interferogram for a sample and shows the absorbance spectrum of the sample. The interferogram the raw spectrum and the absorbance spectrum from an FTIR spectrometer may be collectively referred to as spectral data .

The absorbance spectrum is used to determine the presence and concentration of a chemical species or analyte within a sample based on the wavenumber or range of wavenumbers absorbed and the magnitude of the absorbance of particular spectral regions. In other words an analyte will absorb radiation in particular spectral regions creating a characteristic spectral profile according to the chemical structure of the analyte. A chemometric model determined for an analyte calculates the concentration of that analyte as a function of the magnitude of the absorbance in these spectral regions. The chemometric model is determined using multivariate mathematical correlation techniques to develop the model based on spectral measurements of a number of standards wherein the concentration of the analyte being modeled is known

Typically the spectral data from a spectrometer in a batch process is only stored if required for regulatory audit purposes. If stored the spectral data is conventionally stored separate from other information about the batch process such as sensor data temperature pH pressure etc. and batch management data e.g. batch start batch stop batch abort batch runtime equipment used etc. .

It would therefore be desirable to provide a system for use with a batch process wherein the system stores spectral data from a spectrometer in association with sensor data and batch management data. The present invention is directed to such a system.

In accordance with the present invention a system for monitoring and controlling a batch process is provided. Field instruments and a sample system are connected to the batch process. The field instruments are operable to measure process variables of the batch process and the sample system is operable to obtain a sample of material being produced by the batch process. The system includes a control system for controlling the batch process. The control system is connectable to the field instruments to receive the measured process variables therefrom. An analyzer is connectable to the sample system to receive the material sample therefrom. The analyzer is operable to analyze the material sample and to generate array data representative of the composition of the material sample. An analyzer controller is connectable to the analyzer and to the control system and is operable to collect the array data from the analyzer and the measured process variables from the control system. At least one computer is connectable to the analyzer controller and to the control system. A software data server is stored on the at least one computer and is executable to retrieve the array data and the measured process variables from the analyzer controller. A software information management system is stored on the at least one computer and includes a database. The information management system is executable to receive the measured process variables and the array data from the data server and to store the measured process variables and the array data in the database in an associated manner.

It should be noted that in the detailed description that follows identical components have the same reference numerals regardless of whether they are shown in different embodiments of the present invention. It should also be noted that in order to clearly and concisely disclose the present invention the drawings may not necessarily be to scale and certain features of the invention may be shown in somewhat schematic form.

 batch process shall mean a process in which a limited quantity of ingredients are added and processed in a step wise fashion 

 recipe shall mean an identification of the equipment procedures and formula used to run a batch process 

Referring now to there is shown schematic drawing of a portion of an enterprise that can benefit from the use of the present invention. The enterprise includes a process cell operable to perform one or more batch processes. The process cell includes a mixing vessel or reactor a plurality of ingredient storage tanks and a piping system connecting the ingredient storage tanks to the reactor . The reactor includes a stirring device for mixing ingredients during the batch process. The piping system has pumps for pumping ingredients from the ingredient storage tanks to the reactor . The batch processes may be processes for the manufacture of beer paint pharmaceutical compounds specialty chemicals or other types of batch made products.

Reference is now also made to . For purposes of monitoring and controlling the process cell the enterprise is provided with process field devices a sample system an analysis system a distributed control system DCS and an automation software system that includes a batch system and an information management system . The automation software system is stored in and runs on one or more computers having at least one interface device such as a keyboard and a display screen for displaying information to a user. In the embodiment shown in some components of the automation software system are stored in and run on a server computer and other components are stored in and run on a client workstation .

The process field devices include monitoring devices such as sensors and control devices such as valves for monitoring and controlling the batch processes. The process field devices communicate operating values of the batch process to the DCS over a field network which may utilize shielded twisted pair wires coaxial cables fiber optic cables or wireless communication channels.

The sample system is connected to the reactor to obtain samples of the batch product being produced therein. The sample system may include valves piping and pumps as well as sensors for measuring properties of the samples such as temperature pH etc. The sample system is connected to the analysis system to provide the samples to the analysis system .

The analysis system includes one or more spectrometers and one or more analyzer controllers . The spectrometers may be FTIR spectrometers that are operable to generate absorption spectrums for the samples. The analyzer controllers run applications that obtain absorption spectrums and other information from the spectrometers and makes this data available to the automation software system . An application running on an analyzer controller inter alia specifies a particular spectrometer the data to be collected from the spectrometer e.g. absorption spectrum the data collection interval e.g. every ten minutes and the data collection period e.g. one week . An application may also specify sensor data associated with the spectrometer that is to be collected. The sensor data is obtained from the DCS over the network . The analyzer controller comprises a computer having a controller software system shown in running thereon. The analyzer controller includes a processor and a monitor . Referring now to the controller software system includes an application server a result database a configuration database I O services a console GUI a model predictor and analyzer adapters that include drivers for the spectrometers . The application server performs all of the logic scheduling and computations for the applications. The model predictor applies chemometric models to absorption spectra to obtain the chemical compositions of samples. The results of the applications are stored in the result database which is implemented as a Microsoft SQL server database and a series of files. Referring now to the I O services includes one or more OPC DA servers to read and write I O values. The I O services permit the application server to communicate with the automation software system and other devices and computer programs. All of the I O services are based on the OPC protocol.

The DCS interacts with the batch system the analysis system and the information management system and is operable to store and execute control logic for procedures of a recipe for a batch process send transaction messages to the batch system at the end of a phase react to abnormal conditions and generate exception and event messages and alarms. The DCS generally includes one or more controllers and associated control devices as well as a graphical operator control interface operator workplace that forms part of the automation software system . Input signals from the field devices are communicated over the field network to the network by 4 20 mA signaling and or by one or more of the conventional control protocols such as the HART protocol the Foundation Fieldbus protocol or the Profibus protocol. For any of the field devices communicating via the Foundation Fieldbus protocol the field network comprises HSE H1 linking devices which connect the field devices to a high speed Ethernet subnet which is connected to the network through an FF HSE communication interface of the controller s or through an FF OPC server not shown . For any field devices communicating via the Profibus protocol the field network comprises DP PA linking devices which connect the field devices to a Profibus DP line which is connected to the network through a Profibus communication interface of the controller s or through a Profibus OPC server not shown . For any field devices communicating via 4 20 mA signaling and or the HART protocol the field network typically comprises shielded twisted pair wires which connect the field devices to an I O subsystem which includes one or more I O modules with one or more associated module termination units as is shown in . The I O subsystem is connected by a module bus to the controller s which is are connected to the network .

The network interconnects the client work station the server computer the analyzer controllers and the controller s . The network includes a pair of redundant Ethernet cables over which information is communicated using the Manufacturing Message Specification MMS communication protocol and a reduced OSI stack with the TCP IP protocol in the transport network layer. Together the network and the field network help form a communication link over which information may be transmitted between the field devices and clients.

The controller s contain control programs for controlling the batch processes of the enterprise . The control programs utilize operating values from the field devices which are received by the controller s from the I O subsystem . The control programs are written in one or more of the five IEC 61131 3 standard languages Ladder Diagram Structured Text Function Block Diagram Instruction List and Sequential Function Chart. Outputs from the control programs are transmitted to the control devices of the process field devices over the field network .

The client work station is a personal computer PC with a central processing unit CPU a monitor for providing visual displays to an operator and a keyboard for manually entering data. The CPU has an operating system running thereon which may be a Windows operating system available from Microsoft Corporation.

In addition to the batch system and the information management system the automation software system includes a graphical user interface GUI a connectivity server an aspect server an analytical data server a data export tool and a data visualization tool . The batch system the information management system the connectivity server the aspect server and the analytical data server run on the server computer while the GUI the data export tool and the data visualization tool run on the client work station .

Referring now also to the connectivity server includes an OPC server network based on Microsoft s OLE now Active X COM and DCOM technologies. The OPC server network includes a controller OPC server that makes information from the controller s available to any OPC client connected to the network such as the analyzer controllers . As set forth above an FF OPC server and or a Profibus server may also be provided to connect the field devices to the network without having to be connected to the controller s . The FF OPC server and the Profibus server are also based on Microsoft s OLE now Active X COM and DCOM technologies that make information available to any OPC client on the network .

The analytical data server is an OPC server and provides the spectral data sensor data and calculated composition data from the analyzer controllers to OPC clients such as the information management system using OPC. The analytical data server communicates with the analyzer controllers using a TCP IP protocol. The configuration file is edited with a text editor to specify the computer names or IP addresses of the analyzer controllers . On startup the executable reads the configuration file and begins sending a request message to each specified analyzer controller . In response each analyzer controller sends a reply message. The first request is for the status of the analyzer controller . The status reply includes the start time of the analyzer controller which the analyzer data server encrypts to generate an authentication key used in subsequent requests sent to that analyzer controller . The analyzer data server then requests a configuration from the analyzer controller . The configuration contains a list of I O items read and written by the analyzer controller plus an optional list of usernames and encrypted passwords with user read and write permissions for I O items.

If the application server of an analyzer controller is restarted with a new configuration the analyzer data server will have a request rejected due to invalid authentication new start time . As a result the analyzer data server will re request the status and then re request the configuration. This ensures automatic updating of configurations in the analyzer data server .

Periodically the analyzer data server requests a refresh of time stamped I O item values which are more recent than a specified time. A reply from an analyzer controller returns its current time used in the next refresh request and the list of time stamped I O item values. The first request specifies time zero to get all I O item values and subsequent requests use the time returned in the last reply.

In addition to the periodic updates an OPC client may explicitly read a list of OPC items to an analyzer controller or write values to a list of OPC items of the analyzer controller . The analyzer data server verifies the OPC client s read and write permissions for each OPC item. If the OPC client is permitted to read or write the OPC items the read or write request is forwarded to the analyzer controller .

For increased reliability the analyzer data server can use redundant network connections to each analyzer controller . When both primary and backup connections are working the analyzer data server alternates use of the primary and backup connections. When neither primary nor backup connection is working the analyzer data server repeatedly alternates between checking the primary and backup connections until one connection works. When only one of two connections is working the analyzer data server uses that connection while periodically testing the failed connection until the failed connection works.

The analyzer data server implementation separates the OPC DA interfaces from the analyzer controller Application Programming Interface API allowing the OPC DA clients to be unaffected by any changes in the API. The analyzer data server creates an OPC server object for each connected OPC client. The OPC client can browse the available OPC items which represent the I O items in the connected analyzer controller . Each analyzer controller must have a unique name which is used as the branch of a tree and the prefix to all OPC items belonging to that analyzer controller . This allows multiple analyzer controllers to have identical I O names which are seen as different OPC items in the analyzer data server .

The analyzer data server has a single system object with zero or more device objects zero or more tag objects a tag tree and a tag index. The tag tree is browsed by OPC DA clients. The tag index is an alphanumeric sorted list of tag names allowing each tag to quickly be found by its unique name. Each tag object represents one I O point in a spectrometer . This code is generic to different OPC DA servers.

The analyzer data server implements FtirDevice objects to communicate with the analyzer controllers and FtirTag objects to represent the analyzer controller I O items. For spectral data the FtirTag maintains a list of many simpler tag objects representing the different components of the complex spectral data. Since each tag is a potential OPC item in an OPC group the list of available tags OPC items is greater than the list of I O items in an analyzer controller .

An additional feature of the analyzer data server is to automatically update a tag s quality OPC item quality to reflect the status of the connection to the tag s analyzer controller .

The aspect server includes an aspect directory containing all aspect objects and their aspects as well as an aspect framework AFW server . The AFW server is operable to wrap together HTML pages aspects for an object in a web compliant AFW file that can be launched from an object tree in the GUI . The aspect server implements a method of organizing information using aspect objects or simply objects and aspects associated with the objects. An object represents physical matter such as a valve or virtual matter such as a function and acts as a holder or container for information such as run time data concerning the object. Information concerning an object is contained in its aspects. An aspect is an assembly of information describing certain properties of an object such as functional properties physical construction properties and location properties. Information in an aspect is presented in a view which may be a list a table a diagram a drawing or a graphic. An aspect may have more than one view.

In the GUI objects and aspects are graphically represented by icons. In the description below when reference is made to an object or aspect it should be understood that the reference may be to the icon for the object or aspect and or to its associated object or aspect depending on the context.

The GUI has a client server architecture and has communication based on OPC. A suitable graphical user interface that may be utilized for the GUI is Process Portal which is commercially available from the assignee of the present invention ABB Inc. The GUI has a plurality of workplaces that may be utilized. Each workplace comprises a collection of user interactive functions such as tool bars faceplates windows pull down menus buttons scroll bars iconic images wizards etc. that are combined for a particular use such as controlling a batch process maintaining an asset such as a pump in the enterprise or configuring a model of the enterprise . Enterprise personnel may select a particular workplace from a workplace login page of the GUI . Three of the workplaces that may be selected are an operator workplace a plant explorer workplace and an engineering workplace . The plant explorer workplace is used to explore and build hierarchically structured models of the enterprise while the operator workplace is configured for process operators responsible for controlling the batch processes. The engineering workplace includes tools for implementing and servicing control configurations. The plant explorer workplace and the engineering workplace each include a main window comprising an application bar and a plurality of frames or areas including an object area an aspect list area and selectably a preview area . The application bar includes a fixed display area a tool collection and shortcuts. The object area is where an object browser displays the object tree which is a list or tree of objects for a selected object structure functional locational or control with each root object at a top level and its child objects at a lower or leaf level. An object can be accessed by right clicking on the object in an object tree which opens a context menu containing a number of actions that can be performed. The aspect list area displays all aspects of a currently selected object in an object tree . If the preview area is enabled the preview area displays the view of an aspect currently selected in the aspect list area . If the preview area is not enabled the view of a selected aspect is displayed as a pop up window. The view of an aspect can also be displayed in the main window .

The batch system is a software system that configures runs and manages batch processes performed by the process cell . The batch system configures batch processes by planning organizing and designing batch control schemes for use by the DCS in controlling the batch processes. The batch system runs and manages batch processes by scheduling batches ensuring that equipment needed by one batch process is not being used by another batch process guiding the DCS through the steps or phases of a batch recipe transmitting values for the various parameters in the batch recipes to the DCS generating batch reports and archiving batch data. The batch system comprises a batch database that stores batch recipes a batch operation manager a batch analysis manager and a batch client that is integrated into the GUI . The batch operation manager has four functional areas batch operation recipe management equipment configuration and batch production history.

The batch system produces recipes for batch processes using an object oriented approach. More specifically a recipe is produced using a graphical programming routine wherein a recipe procedure diagram RPD is drawn using graphical blocks each of which is a software routine. The graphical blocks represent operations sub recipes phases and batch manager actions. Batch manager actions BMA include allocating hardware resources sending operator messages and collecting data about process variables. With regard to allocating resources several different pieces of equipment may be available for performing a particular function in a batch process. In a hardware allocation BMA a particular piece of equipment may be selected in the manner described below. The graphical blocks can be combined in any sequence supported by the batch resources i.e. the process cell the DCS etc. A graphical block for an operation causes the DCS to perform a control action such as opening a valve or retrieve process data such as a pressure or a temperature of a fluid . The graphical programming routine permits recipes to be configured as single threads of processing branched logic or parallel operations. When a batch is being run by the batch system an operator may monitor the progress of the batch by viewing a copy of the RPD for the batch created during recipe configuration.

A batch overview window not shown provides access to the batch operation functions and provides a summary of all the batches in the production schedule. Information about the batches is provided in a scroll down table wherein the rows represent batches respectively and the columns represent different types of information about the batches respectively. The different types of information include batch identification lot identification campaign identification recipe identification batch priority batch state i.e. running aborted pausing etc. mode of operation i.e. automatic manual or semi automatic schedule status i.e. not scheduled scheduled active input pending and start and end times. Functions that can be accessed through the batch overview window include scheduling a new batch invoking a batch schedule window to schedule a new batch displaying an RPD for a batch or sub procedure and responding to pending operator messages for a batch. The batch overview window can be accessed from a button on the application bar .

Referring now to there is shown a screen shot of the plant explorer workplace showing a recipe called Harlow Test . In the object area the object tree contains an object for the recipe. An RPD for the recipe is shown in the preview area . The batch schedule window has been invoked from the batch overview window. The batch schedule window permits an operator to schedule a new batch of the recipe. The operator may set the parameters of the recipe for the new batch through a batch parameters window that is accessed by clicking on a parameters button in the batch schedule window . A piece of equipment such as the spectrometer designated HLWWOFT 03 may be selected for use in the new batch by entering the value Required in the box for the piece of equipment in the parameters window . The value is entered using a pop up menu that is accessed by clicking on a button .

The information management system is a software system running on the server computer . Information within the automation software system is stored in a database of the information management system using logs. Spectral data such as absorption spectrums are stored as profile logs while sensor data such as temperatures pressures etc. are stored as numerical logs. The information management system stores each profile log as a flat file i.e. a file that contains records wherein each record is set forth in a single line. Logs may be defined in the plant explorer workplace . Referring now to there is shown a screen shot of the plant explorer workplace wherein the object tree is a control structure showing a parent object for an analyzer controller called FTSW800. A child object for a spectrometer designated HLWWOFT 03 is selected to produce a list of all of the aspects of the child object in the aspect list area . An aspect of the object called Batch Equipment is selected in the aspect list area to produce a view in which logs for the spectrometer may be defined. The view comprises a table having a column for log name a column for showing the log type and a column for log value. Logs for spectral data composition data and sensor data from the spectrometer may be defined in the view . For example a profile log schematically shown in for an absorption spectrum from the spectrometer for a particular sample stream may defined in a row . For row column specifies a log value HSABB REF PROFILE for the profile log . The log value is the OPC data point designation for the profile log in the information management system . As shown in column the profile log is a text file which as described above is a flat file that will include spectral data. For the numerical logs such as for sensor data and composition data the log values in the column are the OPC data point designations for the data in the information management system . The OPC data point designations for the numerical logs in the information management system include the OPC data point designations for the data in the analyzer controller associated with the spectrometer designated HLWWOFT 03. Initially the default log values for the OPC data point designations for the numerical logs in the information management system are the OPC data point designations for the data in the analyzer controller . For example a numerical log shown schematically in and defined in row has a default log value in column of . PMODXPSABB which is its OPC data point in the analyzer controller . In the information management system the numerical log will have an OPC data point name that includes . PMODXPSABB . More specifically the OPC data point name will have . PMODXPSABB plus a prefix. As shown in column the numerical log is an OPC data point i.e. . PMODXPSABB .

Each time the information management system receives a new absorption spectrum for the profile log from the analyzer controller the new absorption spectrum is entered into the profile log along with a time stamp for the new absorption spectrum. Thus the profile log contains a plurality of absorption spectrum entries each with a time stamp. Each profile log in the information management system may be accessed through its OPC data point.

In addition to storing profile logs containing spectral data the information management system also stores numerical logs for a batch containing sensor data e.g. temperature pressure etc. associated with a sample and its spectral data. The information management system also stores batch management data e.g. batch start batch stop batch abort batch runtime equipment used etc. for a batch in PDL tables. The sensor data stored in the information management system and associated with the spectral data may be obtained from the analyzer controllers or more directly from the process control system .

Analyses of one or more samples from a batch may be performed in a laboratory after the batch has been completed. The laboratory analysis data may be entered into the automation software system through the GUI of the client work station . When the laboratory data is entered it is associated with the spectral data for the batch by identifying the OPC data point for the profile log for the spectral data. The laboratory data is also stored in a log in the information management system .

For a particular batch all of the equipment used in the batch such as the spectrometer designated HLWWOFT 03 and its associated analyzer controller is known as described above. Therefore the logs and the OPC data points in the information management system for all of the equipment used in a batch are also known. These OPC data points identify the logs stored in the information management system that contain spectral data sensor data and composition data for the batch. Since the batch start and stop times are also known the spectral data in the profile logs for the batch can be identified using the time stamps in the profiled log. In this manner spectral data sensor data composition data laboratory data and batch management data that are stored in the database of the information management system can all be associated with the batch and thus with each other.

Referring now to the data export tool is a software application that is stored in and runs on the client work station . The data export tool may be accessed through the GUI . The data export tool is operable to gather all data spectral sensor etc. for a particular batch for a particular time period time slice from the database of the information management system and make this data available to the data visualization tool . As shown in the data export tool includes a window having a tree listing a plurality of batches for which data is available. Selection boxes are disposed adjacent to the listed batches respectively. A particular batch is selected by checking its associated selection box. As shown in a batch FBRMChSample has been selected. A time slice selection box is located below the tree and permits a user to manually select a time slice of the selected batch for which data is desired. Once a batch and time slice have been selected and the window is closed the data export tool gathers all data spectral sensor etc. for the selected batch for the selected time slice from the database of the information management system and makes this data available to the data visualization tool .

Referring now to the data visualization tool is a software application that is stored in and runs on the client work station . The data visualization tool may be accessed through the GUI . The data visualization tool is operable to display the spectral data for a selected batch for a selected time slice in a two dimensional plot or in a three dimensional plot . The data visualization tool also allows visualization of chemometric models as two dimensional or three dimensional scatter plots of the internal model variables called principal components . Sensor data batch management data and composition data associated with the spectral data for a selected batch for a selected time slice may be accessed in the data visualization tool and displayed adjacent to the two or three dimensional plot of the spectral data.

In sum the information management system stores sensor data batch data spectral data and additional computed composition properties associated with the spectrum as related data. It also stores the lab measurements if any associated with the spectral data. For certain processes which are continuous virtual batches may be created based on time period.

The sensor data is published by the DCS via OPC DA interface. Occasionally the sensor data is scanned by the analytical data server and published via OPC DA interface along with analyzer spectrometer measurements. This data is retrieved by the information management system and stored as temporal data.

The batch events mainly batch start stop abort and production line used are generated by high level applications such as the batch system or occasionally by control systems. These events are published using the OPC AE interface. The events are retrieved and stored as structured data in the information management system .

The analyzer data server provides the analyzer spectrometer measurements along with instrument and stream identification and calculated material properties. Whenever a new spectrum measurement is available along with calculated material properties these are published. The information management system retrieves this data and stores it.

The information management system looks up the instrument and stream identification used by the running batches. The information management system then associates the analyzer measurement sensor data and calculated material properties with the corresponding batch.

The lab measurements are entered using a graphical user interface. The spectrum identification is specified at the time of entering the lab data. The spectrum identification ties lab data with the corresponding spectrum data. The spectrum identification may be scanned using a bar code or radio frequency identification RFID .

The sensor data batch data instrument stream data and spectrum data are all stored in the information management system as relational data. The graphical user interface makes it convenient to traverse data from a list of batches to a list of spectrum associated with a batch to spectrum measurement to material properties seamlessly.

It should be appreciated that in the foregoing description the automation software system and its components comprise software stored on computer readable medium such as nonvolatile memory in the server computer or the client work station as the case may be. This software includes program instructions that when executed by a processor in the server computer or the client work station as the case may be performs the functions described above with regard to the automation software system . Similarly the controller software system of analyzer controller comprises software stored on computer readable medium such as nonvolatile memory in the computer . This software includes program instructions that when executed by the processor performs the functions described above with regard to the controller software system .

It should also be appreciated that the invention described above is not limited to use with an FTIR spectrometer the invention may be used with any analyzer that produce array data to which a model is applied to determine various physical and chemical characteristics. Examples of other analyzers that may be used include 

While the invention has been shown and described with respect to particular embodiments thereof those embodiments are for the purpose of illustration rather than limitation and other variations and modifications of the specific embodiments herein described will be apparent to those skilled in the art all within the intended spirit and scope of the invention. Accordingly the invention is not to be limited in scope and effect to the specific embodiments herein described nor in any other way that is inconsistent with the extent to which the progress in the art has been advanced by the invention.

