---

title: Automated priority restores
abstract: A priority restore agent in a data storage system generates a priority restore data set for a client computer system or device by identifying a set of active data sets and/or a set of key data sets within client system data generated by the client computer system. The priority restore agent looks at or processes file system attributes for the client system data and compares these attributes with predefined restore parameters. The restore parameters may indicate that any file that has been accessed, modified, or created within a particular period of time be included in the priority restore data set. The key data sets may be identified in a set of automated restore rules. A data protection application within the data storage system can restore data in the priority restore data set onto the client computer system after a disaster or system crash.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08065273&OS=08065273&RS=08065273
owner: EMC Corporation
number: 08065273
owner_city: Hopkinton
owner_country: US
publication_date: 20070509
---
The present application claims the benefit of U.S. Provisional Application Ser. No. 60 746 940 filed May 10 2006 and entitled AUTOMATED PRIORITY RESTORES which application is incorporated by reference in its entirety.

The present invention relates in general to data storage and backup solutions for archiving data and recovering data. More particularly embodiments of the invention relate to software hardware systems and methods for facilitating automated restores of select data or files based on user selectable criteria.

The need for reliable backup and archiving of information is well known. Businesses are devoting large amounts of time and money toward information system IS resources that are devoted to providing backup and archive of information resident in computers and servers within their organizations that produce and rely upon digital information. Generally backup involves using a data storage application to make a coherent copy of data. Backup has become more important as the amount of data used by enterprises has exploded. Historically tape has been used as the medium for backing up data i.e. providing an archival copy of data. Initially tape was a much cheaper medium than disk and other storage media and although tape remains the medium of choice for backup disk solutions are becoming more popular for backup due to their higher speed relative to tape. For example a disk storage device may be used for initial backup and system mirror. Additionally disk storage devices may be used to store snapshots at least temporarily that provide a consistent point in time copy of a data set such as a logical volume and these snapshots may be used to make backups or archival copies that are stored to tape e.g. stored at a remote location .

When enterprise systems fail and or data is lost a recovery process is initiated to restore the enterprise systems and individual machines. In order to restore data a backup administrator or data storage administrator typically acts to perform a full restore. In a full restore most companies restore all the files for which backups were created to the destroyed or corrupted system. Such a full restore can be very time consuming and costly with some restore services involving a mobile vault containing backups exported to tape or disk being transported to an enterprises site or data center. In other cases the backups are stored in formats unique to the data storage application and the restore process involves converting the backups or archived data from this archive format to its native format. The restore of all files or data to an enterprise s systems and machines is typically performed even though most files are rarely or never accessed by the system or large portions of the system. In a disaster recovery or multiple system failure scenario the restoring of files or data that are not important or relevant to the system or portions of the system requires a significant amount of time.

Some efforts have been made to facilitate and simplify restoring data. However there remains a need for improved techniques of restoring systems quickly and efficiently after a disaster or system failure and preferably such a system would be useful regardless of which data protection system or application is utilized for creating backups.

Reference will now be made to the drawings to describe various aspects of exemplary embodiments of the invention. It should be understood that the drawings are diagrammatic and schematic representations of such exemplary embodiments and accordingly are not limiting of the scope of the present invention nor are the drawings necessarily drawn to scale.

The present invention is directed to methods systems and components for generating a priority restore data set for client nodes and or computer systems. The method may further include performing a restore of the client nodes and or computer systems using the priority restore data set such as after a disaster or system crash. In prior data protection systems restore processes typically involved restoring all data files to a client node or system even though many of the files or client data had not been accessed in a long period of time or simply was not relevant or useful to each client node or system. The priority restore method of the invention speeds up recovery time by reducing the amount of data that needs to be immediately restored to allow a client node or system to resume operation. In part this is achieved by creating priority restore data sets for the client nodes or systems and this creating may be done automatically such as periodically upon the expiration of a refresh time period .

Briefly the concept involves providing an agent on client systems that acts to automatically generate a priority restore data set that can then be used to restore data from or using any data protection system or application. The client agent or priority restore agent typically will run on a server and or client desktops laptops or other workstations. The priority restore agent creates a restore data set based upon looking at or processing file system attributes and comparing these attributes with predefined restore parameters that are used to identity which files or data sets are to be included in the restore data sets. For example the restore parameters may indicate that any file that has been accessed modified or created within a particular period of time i.e. a priority restore window be included in the priority restore data set. The restore window may be a policy that is created or set for groups or for all clients within a system and that is enforced locally or centrally.

Additionally in some embodiments of the invention the method includes identifying a set of key or important data sets that are identified in a set of automated restore rules e.g. by file type file identifier application or the like and including these key data sets in the priority restore data set. In some cases these key data sets are always restored for certain clients groups of clients or all clients. These key data sets are typically merged with the automatically generated data sets to create the priority restore data set s .

To practice the invention the computer and network devices may be any devices useful for providing the described functions including well known data processing and storage and communication devices and systems such as computer devices typically used as hosts in user or client computer systems with processing memory and input output components and server devices configured to maintain and then transmit digital data over a communications network. Data typically is communicated in digital format following standard communication and transfer protocols. The data storage resources such as archive devices are generally described as disk optical and tape devices that implement RAID and other storage techniques and that may use SCSI and other I O data transfer and storage protocols but the invention is not intended to be limited to the exemplary embodiments or to specific hardware and storage mechanisms as it is useful for nearly any data storage arrangement in which archives of digital data such as data volumes are generated and maintained and for which it is desired to obtain virtual and or point in time views of subsets of such stored or archived data to leverage the backups by facilitating searching and other data storage managing tasks.

In the client system a data protection application is provided that has a restore module for restoring the client nodes when recovery is required e.g. when a loss of data occurs. To this end the data protection application may be nearly any data protection application or system that is useful for creating backups snapshots and or archive copies of data for later recovery from disaster system crashes or the like. The data protection application communicates over network a LAN a WAN the Internet or other wired and or wireless digital communications network with a remote storage that includes memory . The remote storage may be a disk based archival mechanism and or be a tape based system. The data protection application typically generates archive backups of the data sets e.g. all or large portions of the data generated by the client nodes. The archive backups may take many forms to practice the invention and may include complete copies of content changes to the content or the like and may be organized as content addressed storage or other high efficiency storage arrangements. The restore module may be used to restore the client nodes with the archive backups e.g. restoring all data that has been archived for long term storage to the client system .

However in many cases it is much more desirable to only restore data that has been recently touched or that is important or key to the client nodes or the system applications and business. To this end the client computer system includes a priority restore agent e.g. that may run on server on a separate device as shown or on each client node . Memory is provided for storing a value for a restore window that defines a time period for which data or files should be retained within a priority restore data set. The memory also stores restore parameters that define values for attributes of the data sets that are to be used by the priority restore agent in identifying data sets for inclusion in the priority restore data set.

For example the data sets may be part of a file system and the restore parameters may include values that indicate a file has been accessed modified or created and when this information is combined with the value of the restore window the priority restore agent may access the memory and determine which data sets are active based on the restore parameter and the restore window i.e. which files have been accessed modified or created within the time period defined by the restore window . Further automated restore rules may be provided in memory that define rules for further identifying key data sets within the set of all data sets in memory that should also be included in the priority restore data set .

For example files of a certain type or associated with a particular application or business process may be identified in the restore rules for capture for certain clients groups of clients or all the clients . The priority restore agent acts such as periodically when a defined refresh period expires to access or look at the attributes of the data sets e.g. of a file system and determine all the data sets that are active based on the window and parameters e.g. which files have been recently touched within the last month or some other useful time period and which are key data sets and these data sets are combined to create a priority restore data set .

A copy of the restore data set is shown in local memory but to protect against disaster a copy may also stored in remote storage but in some embodiments only one of these copies is provided or additional copies are stored . A request for restore may be received by the data protection application or remote data protection system and a restore module or module may restore one or more of the client nodes using the priority restore data set or rather than the full archive backups .

Also as shown the system may include a standalone or remote client node that is linked to network and includes a CPU running applications . The applications use and or create client data that is stored in local memory . A remote data protection system linked to the network runs a high efficiency storage application with restore module to create archive backups of the client data . In this manner the client node can be restored with all or large portions of the client data . As discussed above there may be situations where a more speedy recovery is desirable but that still recovers data needed by an operator of the client node .

Often such a quick and effective restore is achievable for the client node by loading a priority restore agent on the client node . The restore agent functions to retrieve a restore window value and restore parameters from memory or from another system such as data protection system or another central management system not shown and in some cases rules identifying key or important files that should always be restored for the client regardless of when they were last touched or used by the applications . The restore agent then accesses the client data or its file system to determine which portions of the client data should be captured in a priority restore data set that is stored remote from client node . The priority restore data set for the client node typically will include all files that have been created accessed or modified within the restore window and may also include key data or files useful for operating the client node and or that are deemed critical by or for the operator of the client node .

The values for the restore window the restore parameters and the automated restore rules may be default values or may be user tunable and or selectable. For example some clients may desire the restore window to be relatively short such as one week to one month while other clients may desire a longer time period to be used such as one month to three months or longer. Also the definition of data or a file that has been touched or that is active may vary among clients and can be set to suit the parameters available for inspection in the data sets e.g. any definition of active can be used as long as the priority restore agent can determine which portion of the client data meets the definition. The client or another administrator may also provide input for defining which data or files should be identified as key data sets and always included in the priority restore data sets .

When the client node needs to be restored the high efficiency storage application may received a restore request or otherwise be caused to use its restore module to restore the client node using its corresponding priority restore data set rather than all archived data for the client node .

The priority restore agent accesses a data set or file system to identify a set of key data sets or files based on the automated restore rules e.g. all files of a particular type or the like . The priority restore agent accesses the data set or file system and determines identifies from the file system or data set attributes and the values of the restore parameters which of the data sets or files are active e.g. active data sets . Continuing the priority restore agent generates a priority restore data set by combining the data sets defined in steps and . Note that such restore data sets may be generated on a client node or client system basis or for groups of client nodes or an entire enterprise. In other words each client node may be restored independently with differing restore data from a unique or a shared priority restore data set.

The method continues with a determination of whether a refresh period has expired and if so a new priority restore data set is generated by accessing the client file system or data sets again. For example a priority restore data set may be generated periodically such as hourly or some other time period selected to provide adequate data protection and restore functionality while not unduly increasing the processing overhead associated with the priority restore agent being resident on a client system.

The method continues with a restore request or some other initiator for a restore process for one or more client devices systems. At and a data protection application may restore the client nodes or systems associated with the restore request using the priority restore data set associated with particular client nodes or systems . The restore request in some cases may indicate that a subset of the priority restore data set be used to restore a particular client. For example a restore request may indicate that all files of a particular type should be restored initially. Alternatively an operator of a data protection or backup application may use its restore module to select data sets or files within the priority restore data set for restoring onto one or more of the client nodes .

Embodiments included general purpose and or special purpose devices or systems that include both hardware and or software components.

Embodiments may also include physical computer readable media and or intangible computer readable media for carrying or having computer executable instructions data structures and or data signals stored thereon. Such physical computer readable media and or intangible computer readable media can be any available media that can be accessed by a general purpose or special purpose computer. By way of example and not limitation such physical computer readable media can include RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices other semiconductor storage media or any other physical medium which can be used to store desired data in the form of computer executable instructions data structures and or data signals and which can be accessed by a general purpose or special purpose computer. Within a general purpose or special purpose computer intangible computer readable media can include electromagnetic means for conveying a data signal from one part of the computer to another such as through circuitry residing in the computer.

When information is transferred or provided over a network or another communications connection either hardwired wireless or a combination of hardwired or wireless to a computer hardwired devices for sending and receiving computer executable instructions data structures and or data signals e.g. wires cables optical fibers electronic circuitry chemical and the like should properly be viewed as physical computer readable mediums while wireless carriers or wireless mediums for sending and or receiving computer executable instructions data structures and or data signals e.g. radio communications satellite communications infrared communications and the like should properly be viewed as intangible computer readable mediums. Combinations of the above should also be included within the scope of computer readable media.

Computer executable instructions include for example instructions data and or data signals which cause a general purpose computer special purpose computer or special purpose processing device to perform a certain function or group of functions. Although not required aspects of the invention have been described herein in the general context of computer executable instructions such as program modules being executed by computers in network environments and or non network environments. Generally program modules include routines programs objects components and content structures that perform particular tasks or implement particular abstract content types. Computer executable instructions associated content structures and program modules represent examples of program code for executing aspects of the methods disclosed herein.

Embodiments may also include computer program products for use in a system. The computer program product may comprise a physical computer readable medium having computer readable program code stored thereon the computer readable program code comprising computer executable instructions that when executed by a processor cause the system to perform the methods disclosed herein.

The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is therefore indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.

