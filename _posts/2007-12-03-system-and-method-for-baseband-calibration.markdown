---

title: System and method for baseband calibration
abstract: A system includes at least one of a first generator, at least two of a second generator, and a load board. The at least one of a first generator one of receives and transmits analog signals. The at least two of a second generator one of receives and transmits digital signals. The load board is disposed between the first generator and the second generators and electrically coupled therebetween to calibrate parameters relating to communications. The load board includes a direct path for each of the analog signals between the at least one of the first generator and a corresponding number of devices under test and for each of the digital signals between the at least two of the second generator and a corresponding number of devices under test.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08008933&OS=08008933&RS=08008933
owner: Verigy (Singapore) Pte. Ltd.
number: 08008933
owner_city: Singapore
owner_country: SG
publication_date: 20071203
---
In today s communication radio frequency RF modulation protocols have increased in complexity. Therefore the process of making the communications more accurate has accordingly become more complex. In the past the time and effort required to implement the necessary hardware and software to accomplish this extended accuracy has been very large. RF signals which have been down converted to a baseband frequency range have been historically comprised of single complex electrical signals where complex entails two types of data embedded therein real and imaginary. These signals have been called IF in nature because they represent data in the intermediate frequency range. A direct conversion of the IF waveform into two separate real signals is becoming the normal practice. These two signals are commonly called the I for in phase and the Q for in quadrature. In quadrature refers to the signal being 90 degrees out of phase. The motivation to convert single complex IF waveforms into two real waveforms stems from the fact that two digital to analog converters DAC operate at twice the speed of a single DAC. These will double the possible data transmission rate of the communication and increase the accuracy of the transmission fidelity. Because of this advantage single signal complex IF intermediate stages are disappearing. However one requirement of I and Q arbitrary waveform generators AWG and digitizers DGT is that they be highly balanced in phase and magnitude relative to each other. This is a difficult practice time intensive and costly to achieve.

Historically the requirement to achieve balanced I and Q signals has challenged automatic test equipment ATE since such a balance is frequency and magnitude dependent. In order to calibrate out the frequency response of the I and Q paths calibration at each tone frequency must occur. However it is nearly impossible for a system calibration procedure to calibrate an ATE at all possible frequencies as the number involved is infinite. A more tractable approach is to calibrate at only those frequencies and amplitudes to be used by a given test program performed by the ATE. Conventional systems and software have been upgraded to enable users to accomplish this using a new Application Programming Interface API new additions to the analog calibration menu and a new calibration load board. Nevertheless efficiency problems still occur in particular with regard to a number of relays required on the load board.

The present invention relates to a system that comprises at least one of a first generator at least two of a second generator and a load board. The at least one of a first generator one of receives and transmits analog signals. The at least two of a second generator one of receives and transmits digital signals. The load board is disposed between the first generator and the second generators and electrically coupled therebetween to calibrate parameters relating to communications. The load board includes a direct path for each of the analog signals between the at least one of the first generator and a corresponding number of devices under test and for each of the digital signals between the at least two of the second generator and a corresponding number of devices under test.

The exemplary embodiments of the present invention may be further understood with reference to the following description and the appended drawings wherein like elements are referred to with the same reference numerals. The exemplary embodiments of the present invention provide a system and method for baseband calibration in particular relating to I and Q signals of a radio frequency RF wave. The exemplary embodiments of the system and method utilize a load board with direct paths that replace a plurality of relays that are conventionally used. Consequently the efficiency of the calibration is vastly improved. The load board the calibration the paths and the associated method will be described in detail below.

Decreasing the time necessary to implement precisely matched I and Q signals is an endeavor that has been sought since the advent of utilizing baseband waves in communications. The baseband waves may be transmitted using an intermediate frequency IF . The I and Q signals of the IF may be utilized to increase efficiency of transmitting the signals thereby increasing the data transmission rate by a factor of two. Those skilled in the art will understand that I Q modulators have at least twice a bandwidth of IF modulators. The bandwidth of an arbitrary waveform generator AWG or analog signal digitizer DGT pair relates to a speed that they transmit data. One proposed solution that has been implemented is utilizing multiple converters such as arbitrary waveform generators AWG and analog signal digitizers DGT . When two converters of a multi channeled instrument MCB are used for either converting from analog to digital or from digital to analog when done precisely and properly the time necessary to send the same signals from a single converter i.e. same amount of data may be halved i.e. rates are doubled . However when the two converters are not in phase not aligned etc. inaccuracies result. In particular the inaccuracies may relate to phase and magnitude of the baseband wave when the baseband wave is subjected to a path with active non linear components. The inaccuracies may create a situation where utilizing a single converter may be equivalent to using two converters. Specifically data from a first converter or a second converter would have the same rate as having the single converter as data from both converters would not produce the doubled or even greater rate as the single converter.

Furthermore the calculations and preparations necessary for using multiple converters are immense and a single miscalculation may result in the inaccuracies. I and Q modulators use relative phase and magnitude to encode data. The different frequency responses of I and Q paths introduce significant errors e.g. inaccuracies . Consequently the errors in phase and magnitude corrupt the accuracy of measurement. These converters must be calibrated so that the errors are calibrated out. However system level calibration or characterization of this response is impossible as the number of possible frequencies filter gain load board component settings are infinite. Therefore the calibration time would take years. The exemplary embodiments of the present invention seek to reduce this time.

Because there are no active components in the transmission path the initial parameters of the initial waveform may be substantially identical to the terminal parameters of the terminal waveform . That is there is a zero phase delay and a zero magnitude change.

Because there are active components in the transmission path the initial parameters of the initial waveform may be altered to the terminal parameters of the terminal waveform . The active components may include for example filters amplifier chains load board components e.g. buffers etc. As illustrated in a phase delay h may be introduced by the active non linear components . In addition a magnitude change a may also be introduced by the active non linear components . If the baseband wave initially resembles a sin wave originating at an origin on Cartesian coordinates e.g. 0 0 the baseband wave may be shifted by the phase delay h in a positive direction on the x axis while the magnitude change a may stretch the baseband wave that elongates the wave.

Because there are active components in the transmission paths originating from the AWG the initial parameters of the initial waveform may be altered to the terminal parameters of the terminal waveform . The active components may include for example filters amplifier chains load board components e.g. buffers etc. As illustrated in with respect to the AWG a phase delay h a may be introduced by the active non linear components C. In addition a magnitude change a a may also be introduced by the active non linear components . With respect to the AWG a phase delay h b and a magnitude change a a may be introduced by the active non linear components . If the baseband wave initially resembles a sin wave originating at an origin on Cartesian coordinates e.g. 0 0 the baseband wave may be shifted by the phase delay h a in a negative direction on the x axis while the magnitude change a a may stretch the baseband wave that elongates the wave. The baseband wave may be shifted by the phase delay h b in a positive direction on the x axis while the magnitude change a b may stretch the baseband wave that also elongates the wave but elongating the wave greater than the elongation from the magnitude change a a.

It should be noted that the above examples described in utilizing an AWG is only exemplary. The above examples may also refer to the baseband wave originating from a DGT. That is an analog to digital conversion and a digital to analog conversion may exhibit the same phenomena errors shifts changes etc. described above.

The AWG may be for an in phase analog signal or a baseband IDAC out. The AWG may be for a quadrature phase analog signal or a baseband QDAC out. The DGT may be for an in phase digital signal or a baseband IADC out. The DGT may be for a quadrature phase digital signal or a baseband QADC out. The DUTs may be the devices used for the conversion. Specifically the DUT may be for a transmitter I signal in while the DUT may be for a transmitter Q signal in. The DUT may be for a receiver I out while the DUT may be for a receiver Q out. Disposed between a path from the DUT to the DUT are the relays . Disposed between a path from the DUT to DUT are the relays . Furthermore the relay is disposed between a path from between the relays and the relays and the AWG . Similar to the conventional load board other baseband devices have multiple I Q signal pairs. If fourteen relays are required for each I Q pair the number of relays becomes very large as does the maintenance of the load board over time. As discussed above these relays decrease the efficiency and increase the cost and complexity related to calibration of the baseband waveform.

Two independent AWG or DGT used to transmit or receive baseband quadrature I Q signals have a given relative phase and magnitude inaccuracy between them as they transmit or receive signals through an analog or digital path. The extent of these imbalances is frequency and amplitude dependent. The imbalance may be calibrated out by sourcing and measuring signals at the amplitudes and frequencies of interest measuring these offsets i.e. calibration factors and applying them later during production tests.

According to the exemplary embodiments of the present invention I Q calibration may be broken into two components. The first component relates to derivation of a tester s magnitude and phase calibration factors. The tester component will be discussed in further detail below with reference to . The second component relates to application of a load board s magnitude and phase calibration factors. The load board component will be discussed in further detail below with reference to .

The principle involves initially calibrating the DGTs using differential signals of a single AWG . Those skilled in the art will understand that it may be assumed that the phase and magnitude difference between the AWG differential outputs is almost zero as discussed above with reference to where the initial waveforms were substantially identical. Once the DGTs have been calibrated relative to each other the AWGs would subsequently be calibrated.

However because the conventional load board must be used with the relays e.g. relays implementation of the calibration principle becomes complex as the relays must enable not only the calibration paths but also the paths required to test the DUT e.g. DUTs . Thus the exemplary embodiments of the present invention further include application of the load board s magnitude and phase calibration factors.

It should be noted that for the exemplary embodiments of the load board the direct path and the direct path have equal path lengths. Furthermore the direct path and the direct path have equal path lengths. Assuming equal transmission rates equal paths ensure that the time required for the I or Q signals to pass therethrough are also equal. The equal path lengths may be realized as modern load board manufacturing techniques enable such a design. However it should be noted that the equal path lengths is only exemplary. In another embodiment different path lengths may be used for example by including in the calibration the differences in path lengths.

The design of the load board may be realized because the total frequency response of the I Q path is a result of two contributors i.e. one inside the tester itself e.g. AWGs or DGTs and one on the load board e.g. DUTs . If a tester s analog path is calibrated at a test program s set of specific frequencies using a dedicated common load board whose looping paths resemble the load board then base calibration factors may be stored in for example a memory of the tester a controller etc. Once the path lengths of the direct paths and are ascertained magnitude and phase imbalances from the traces on the board may be added to the base calibration factors in the form of time delays e.g. h in seconds and attenuation values e.g. a in dB.

With basic system calibration of the conventional load board the amplitude and digital timing may have been calibrated at spot frequencies. However the calibration may not be able to calibrate out certain errors or mismatches. For example one reason may be that either the absolute or relative phase or magnitude imbalance between two or more AWG or DGT transmission paths through the test head up to a pogo pin of the conventional load board . The imbalance is frequency dependent and a function of the active non linear components e.g. filters amplifier chains load board components etc. in the transmission path. Due to the innumerable variables involved the calibration may be too complex to handle. In another example another reason may be the load board buffer and or trace length mismatches. BIQC allows a tester to compensate for these perturbations. In particular according to the exemplary embodiments of the present invention these perturbations may be compensated for in a reasonably simple manner on a per frequency basis thereby improving an overall efficiency of the baseband calibration.

Those skilled in the art will understand that BIQC greatly improves a fidelity of RF and baseband measurements. The exemplary embodiments of the present invention enable a more efficient improvement of the fidelity of the RF and baseband measurements. For example multi tone power ratio MTPR tests are cumulative inter modulation distortion IMD components of many tones accumulating from energy in a location where a tone should be missing. A small phase imbalance between I and Q signals adds significantly to the IMD component found in the missing tone location. Better phase balance added by performing BIQC reduces an amount of this IMD and decreases the missing tone component of the MTPR.

In another example an amount of upper or lower RF side band suppression on either side of an RF carrier e.g. transmission side of an RF transmitter is a strong function of the balance between the magnitude and phase of a tester s I Q AWG baseband input pair. Similarly an ability of a DUT RF receiver to down convert signals is measured by an amount of balance that the I Q DGTs have. When a tester s I Q DGTs are not balanced a device may be perceived as nonconforming to standards when the tester is uncalibrated or out of balance. That is the device may be conforming but the measurements are not accurate. BIQC may eliminate such scenarios.

In yet another example error vector measurements EVM such as those used in testing 802.11 a b g transceivers are highly sensitive to phase and magnitude imbalances. When testing this type of device it is highly desirable that the tester s AWG DGT are as balanced as possible. The accuracy of the measurements provided by the BIQC greatly improves the balance thereto.

The baseband calibration of the I Q signals may be done at various times. Theoretically all analog instruments have given frequency responses which differ from one unit to another. Variances across identical instruments are usually handled by applying loose enough specifications to handle a Gaussian deviation of performance across all manufactured load boards. A result is a lost opportunity to assess a true accuracy of an individual analog instrument unless BIQC is performed prior to production tests.

System calibration guarantees performance to all analog card specifications. BIQC increases analog card accuracy above that specified for a family. An individual card s frequency responses are revealed and compensated as well as a load board s perturbations introduced by active non linear components e.g. buffers or trace length mismatches. Therefore BIQC may be done whenever highly balanced I Q signals are to be sourced or measured by the I Q AWG or DGT and it is known that such qualities are frequency dependent. Generally BIQC is performed when baseband or RF measurements are to be made. In practice due to the method of implementation of BIQC BIQC may be re run whenever a program implementing BIQC 1 is run for the first time 2 is run on a new MCB when an old MCB is replaced 3 when a new test is added to a program requiring highly balanced I Q signals and new analog sets are created 4 when a new pin configuration is used in the program 5 a new analog setup is used in the program etc.

It should be noted that it is not required to re run BIQC for every load board for a given device as BIQC calibrates up to a pogo pin plain. Phase and magnitude offsets of a given load board are added to BIQC calibration factors via a member function of a new API class. The arguments to the API may be required to be modified when 1 a new load board is developed for a same device or its baseband traces have changed or 2 in line components e.g. buffers on the load board are replaced e.g. due to damage .

In step a calibration is performed. With reference to an MCB DGT I Q calibration the DGT e.g. DGTs is calibrated from the differential output of a single AWG e.g. AWG . With reference to an MCB AWG I Q calibration the calibrated double core DGT e.g. is used to measure I Q signals from two separate AWGs e.g. .

In step the waveform is digitized. With reference to the MCB DGT I Q calibration the waveforms on the two separate DGT e.g. DGTs are digitized. With reference to the MCB AWG I Q calibration each waveform for each AWG e.g. AWGs is digitized. In step additionally a complex Fast Fourier Transform FFT is performed on each local digital signal processor DSP .

In step a phase difference is mathematically computed. With reference to the MCB DGT I Q calibration the phase difference may be determined between the DGT through a set of equations Phase of signal tan 2 Fund. Bin Imaginary Fund. Bin Real Phase of signal tan 2 Fund. Bin Imaginary Fund. Bin Real and Phase Imbalance Deg 180 Phase of Phase of With reference to the MCB AWG I Q calibration the phase difference may be determined between the AWG through another set of equations Abs. Phase of signal tan 2 Fund. Bin Imaginary Fund. Bin Real Abs. Phase of signal tan 2 Fund. Bin Imaginary Fund. Bin Real and Rel. Phase Imbalance Deg 180 Phase of Q Phase of 

In step the phase imbalance is converted from degrees to seconds. With reference to the MCB DGT I Q calibration the following equation may be used Phase Imbalance Time Phase Imbalance Deg 360 Fundamental Tone Frequency . Accordingly with the MCB AWG I Q calibration the relative phase imbalance in degrees may be used.

In step the time is assigned to I or Q trigger delay. For the MCB DGT I Q calibration the time is assigned to the DGT trigger delay while the time is assigned to the AWG trigger delay for the MCB AWG I Q calibration. The determination of which signal is assigned the time depends on the polarity of the imbalance. Thus when the polarity is positive the time is assigned to the I trigger delay. When the polarity is negative the time is assigned to the Q trigger delay.

In step for either the MCB AWG or DGT I Q calibration the trigger delay value is fixed. The phase and magnitude calibration factors may also be stored for example in an array. In step a determination is made whether to repeat steps . When further frequencies filters gains etc. are to be used for the calibration the steps may be repeated for each.

Those skilled in the art will understand that the above described exemplary embodiments may be implemented in any number of manners including as a separate software module as a combination of hardware and software etc. For example the calibration may be performed using a tester with a program containing lines of code that when compiled may be executed on a processor of a computing device.

It will be apparent to those skilled in the art that various modifications may be made in the present invention without departing from the spirit or scope of the invention. Thus it is intended that the present invention cover the modifications and variations of this invention provided they come within the scope of the appended claims and their equivalents.

