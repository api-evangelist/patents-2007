---

title: Set top terminal performing service group number autodiscovery during initialization or boot-up process
abstract: A set top terminal is provided that includes a receiver having at least one tuner for receiving programming content over a content delivery system and a processor operatively associated with the receiver. The set top terminal also includes a switched digital video (SDV) application module operatively associated with the processor. The SDV application module is configured to perform an autodiscovery process by tuning to prescribed autodiscovery frequencies received by the tuner while the SDV application module is being initialized.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08499327&OS=08499327&RS=08499327
owner: General Instrument Corporation
number: 08499327
owner_city: Horsham
owner_country: US
publication_date: 20071212
---
The present invention relates generally to content delivery systems that deliver switched digital video SDV channels to subscribers.

Switched digital video SDV refers to an arrangement in which broadcast channels are only switched onto the network when they are requested by one or more subscribers thereby allowing system operators to save bandwidth over their distribution network. In conventional cable or satellite broadcast systems every broadcast channel is always available to all authorized subscribers. In contrast a switched digital video channel is only available when requested by one or more authorized subscribers. Also unlike video on demand which switches a singlecast interactive program to a user switched digital video switches broadcast streams making each stream available to one or more subscribers who simply join the broadcast stream just as they would with normal broadcast services. That is once a switched service is streamed to a subscriber subsequent subscribers associated with the same service group as the first subscriber can tune to the same broadcast stream. The switched digital video will often share the same resource managers and underlying resources with other on demand services.

As noted switched digital video is largely a tool to save bandwidth. From the subscriber perspective he or she still receives the same broadcast video service when using a switched broadcast technique ideally the user is not able to discern that the stream was switched at all. If each one of the digital broadcast channels is being watched by subscribers in the same service group the switched digital video approach does not yield any bandwidth savings. However a more likely situation statistically is that only a certain number of the digital broadcast channels are being watched by subscribers in the same service group at any given time. Those channels not requested by a subscriber need not be broadcast thereby saving bandwidth.

One way to support switched digital video is to utilize the session manager to manage SDV and other sessions. For each channel change the subscriber will set up a broadcast session with the session manager which will determine if the requested channel is already being sent to the corresponding service group that the subscriber belongs to.

The subscriber will be assigned to join the existing SDV session if the requested channel is available at the service group or assigned to a new SDV session if the requested channel is not available at the service group. The session manager will negotiate with the edge devices to allocate resources required for the session. The edge device e.g. a digital modulator such as a QAM modulator needs to dynamically retrieve the MPEG single program transport stream that carries the requested SDV program likely via IP multicast or possibly IP unicast and generate the MPEG multiple program transport stream. As part of the session setup response message the video tuning parameters such as frequency and MPEG program number are sent back to the subscriber to access the requested SDV channel.

Each time the subscriber requests an SDV program the subscriber terminal sends a channel change request to the session manager. The channel change requests include the subscriber s service group number so that the session manager can properly identify the subscriber terminal and the edge device s with which it is associated. Accordingly the subscriber terminal must be able to determine the service group to which it belongs. The subscriber terminal determines its service group using an autodiscovery process which is performed the first time the subscriber requests an SDV channel and periodically thereafter. The autodiscovery process involves two phases. In the first phase the subscriber terminal sequentially tunes to frequencies in a frequency plan that is specified in a configuration message which has been previously provided by the session manager. The subscriber terminal will continue to search the frequencies until it discovers the particular frequency or frequencies on which the service group number is made available. The second phase of the autodiscovery process involves in one instance extracting the service group number from the appropriate frequency or frequencies.

The autodiscovery process can occupy a significant amount of time because the subscriber terminal may need to search a relatively large number of frequencies before the service group number is discovered. This can cause an undue delay between the time the subscriber requests an SDV channel and the time the subscriber receives the SDV channel thereby inconveniencing the subscriber.

In accordance with one aspect of the present invention a set top terminal is provided that includes a receiver having at least one tuner for receiving programming content over a content delivery system and a processor operatively associated with the receiver. The set top terminal also includes a switched digital video SDV application module operatively associated with the processor. The SDV application module is configured to perform an autodiscovery process by tuning to prescribed autodiscovery frequencies received by the tuner while the SDV application module is being initialized.

In accordance with another aspect of the invention the SDV application module may be configured to be initialized while the set terminal is booting up.

In accordance with another aspect of the invention the receiver may include a plurality of tuners and the SDV application may be configured to sequentially tune to two or more of the prescribed autodiscovery frequencies in parallel using the plurality of tuners.

In accordance with another aspect of the invention the autodiscovery process may terminate when a service group number is extracted from a transport stream on one of the prescribed autodiscovery frequencies.

In accordance with another aspect of the invention the autodiscovery process may terminate when a prescribed number of transport stream IDs TSIDs have been extracted from transport streams received on the prescribed autodiscovery frequencies sufficient to determine a service group number.

In accordance with another aspect of the invention the SDV application module may be configured to extract TSIDs from transport streams received on the prescribed autodiscovery frequencies transmit the extracted TSIDs over the content delivery system and in response thereto receive a message over the content delivery system in which a service group number is contained.

In accordance with another aspect of the invention a method is provided for requesting SDV programming from a content delivery system using a set top terminal. The method includes beginning a boot up sequence during which the set top terminal is initialized. An autodiscovery process is performed by tuning to prescribed autodiscovery frequencies received by the set top terminal while an SDV application module is being initialized. A channel change request is transmitted over a content delivery system in order to receive an SDV program. The channel change request includes a service group number that is acquired based on information obtained during the autodiscovery process.

As detailed below a method apparatus and system is provided in which the time consuming portion of the autodiscovery process used by a set top terminal to determine its service group number tuning to the various frequencies in the autodiscovery frequency plan is performed by a set top terminal while it is performing its internal initialization process. As a result the service group number will be readily available when the subscriber requests an SDV channel thereby reducing the delay between the time the subscriber requests an SDV channel and the time the subscriber receives the SDV channel.

Some or even all of the hubs are connected to multiple users typically via distribution networks such as local cable access networks e.g. HFC networks . For simplicity of explanation only each hub is shown as being connected to a distinct HFC network which in turn communicates with end user equipment as illustrated. In particular hubs and in communicate with access networks and respectively. Each access network and in turn communicates with multiple end user devices such as set top or subscriber terminals. In the example of access network communicates with set top terminals and access network communicates with set top terminals and and access network communicates with set top terminals and .

In addition to the switch or router each hub can include an array of radio frequency transmitter edge devices such as edge QAM modulators . The number of edge devices in each hub may vary as needs dictate. For instance as previously noted the number of edge devices needed to implement SDV channels is generally much greater than the number of edge devices needed to implement broadcast channels. As used herein the term QAM refers to modulation schemes used for sending signals over cable access networks. Such modulation schemes might use any constellation level e.g. QAM 16 QAM 64 QAM 256 etc. depending on the details of a cable access network. A QAM may also refer to a physical channel modulated according to such schemes. Typically a single QAM modulator can output a multiplex of ten or twelve programs although the actual number will be dictated by a number of factors including the communication standard that is employed. The edge QAM modulators usually are adapted to i receive Ethernet frames that encapsulate the transport packets ii de capsulate these frames and remove network jitter and iii transmit radio frequency signals representative of the transport stream packets to end users over the HFC network. Each transport stream is mapped to a downstream QAM channel. Each QAM channel has a carrier frequency that differs from the carrier frequency of the other channels. The transport streams are mapped according to a channel plan designed by the MSO that operates the network.

Each hub and also includes an edge resource manager for allocating and managing the resources of the edge devices . The edge resource manager communicates with and receives instructions from the session manager located in the headend . In some cases the edge resource manager and or session manager can be located in the headend.

Headend may also include a network DVR . The network DVR stores content that can be transmitted to set top terminal via a hub and access network in response to a user request to play a program stored on the DVR . Other user input requests are also serviced by network DVR including for example requests to accelerate the playing of a program in the forward direction e.g. cueing and in the reverse direction e.g. reviewing . The content is stored by the network DVR upon a user request. The content may be provided to the network DVR from any available content source including for example content source .

It should be noted that in some cases the functionality of some or all of the SDV manager may be transferred to each of the hubs and . For example as described below autodiscovery frequency plans and Channel Change Messages may be communicated between the set top terminals and the hubs. In addition some or all of the functionality of the SDV manager may be distributed among other components such as an SDV operations manager SDVOM which is sometimes used to configure and monitor SDV systems.

Headend may also include a variety of other components for offering additional services. For example in a video on demand VOD server is shown for storing programs or other content for distribution to subscribers on an on demand basis. Although not shown one of ordinary skill in the art would recognize that other components and arrangements for achieving the various functionalities of headend are possible. For example the head end may comprise typical head end components and services including a billing module an advertising insertion module a subscriber management system SMS a conditional access system and a LAN s for placing the various components in data communication with one another. It will also be appreciated that the headend configuration depicted in is a high level conceptual architecture and that each network may have multiple head ends deployed using different architectures.

The edge devices provide programming to the set top terminals using the downstream in band channels. To communicate control information and the like with the headend and or the relevant hub the set top terminals may use out of band OOB or DOCSIS channels or an IP tunnel or an IP connection and associated protocols. However in some cases communication of control information and the like can be performed using in band channels as well.

Control information that may be communicated over the out of band channels includes SDV Channel Change Messages CCM which are used to send configuration information between the set top terminals and the SDV manager in the headend . For instance the SDV manager sends the autodiscovery frequency plan to the set top terminals. Additionally the SDV manager receives channel change requests for switched digital content from a set top terminal to bind that content to a session on one of the edge devices serving that set top terminal s service group. The channel change request message is generated by the SDV application or its designated proxy resident in the set top terminal in response to the subscriber s program channel request that is entered through the set top terminal s user interface. The SDV manager responds to the set top terminal with the frequency and program number where that content may be found.

Referring to the top of an OCAP software stack includes a Monitor Application Electronic Program Guide EPG SDV application and any other applications that may be deployed in a particular network. These applications are run on top of a software layer called the Execution Engine and interface to the Execution Engine using the well known OCAP APIs . The client device may also include certain software applications or Native Applications that do not run within the Execution Engine but directly run on top of the Operating System Middleware for the client device. Native Applications are typically written for e.g. a particular hardware configuration of the set top terminal. Examples of such Native Applications may include management of front panel functionality remote control interaction games and the like. The objects downloaded to the client device in accordance with the techniques described herein may include any of the aforementioned applications and programs as well as additional applications programs or other objects. However during an upgrade many of the objects that need to downloaded may be directed to applications located above the OCAP application programming interface .

As previously mentioned the set top terminal performs an autodiscovery process to determine its service group number when it first requests an SDV channel. Of course such autodiscovery processes may be used for other purposes as well. The service group number is used by the set top terminal whenever it sends a channel change request. To perform the autodiscovery process the SDV client scans the frequencies in the frequency plan that has been provided to it in a configuration or control message received from the SDV manager when the SDV client is first initialized. There are two modes in which autodiscovery may be performed. In the first mode the set top terminal tunes to the frequencies in the frequency plan until it finds the appropriate frequency which is typically repeatedly transmitted either in band or out of band using a protocol such as the mini carousel protocol MCP . Once the set top terminal finds the appropriate frequency on which the mini carousel is operating the set top terminal extracts the service group number which is generally contained in a packet having a predetermined packet identifier PID that is known to the set top terminal.

In the second mode of autodiscovery the set top terminal extracts the transport stream ID TSID when it tunes to the frequencies listed in the frequency plan. It should be noted that as used herein the term TSID may refer to the particular element defined in accordance with MPEG for defining an MPEG transport stream. More generally however as used herein the term TSID is used to refer to any identifier that can be used to uniquely identify a digital transport stream regardless of format. The TSID is available from the Program Association Tables PATs located in the transport streams being transmitted on the various frequencies in the frequency plan. Accordingly when tuning to a particular frequency the tuning operation only needs to progress to the point where the PAT has been received. The number of frequencies that are to be searched will be the smaller of the total number of frequencies in the frequency plan and the number of different TSIDs that need to be acquired. The number of different TSIDs that need to be acquired is generally specified in the configuration message that also provided the frequency plan. Once the minimum number of TSIDs have been collected the set top terminal sends an autodiscovery request message to the SDV manager. Based on the TSIDs the SDV manager can determine the service group number to which the set top terminal belongs. The response from the SDV manager to the set top terminal will specify the set top terminal s service group number.

To reduce the time lag between the time the subscriber requests an SDV channel and the time the SDV channel is actually provided instead of performing the autodiscovery process when the client requests an SDV channel all or part of the process can be advantageously performed when the set top terminal is first initialized or booted up. The initialization or boot up process begins when the subscriber powers up the set top terminal and requires the set top terminal to perform a series of internal self tests after which program instructions residing in non volatile memory are transferred to the main memory. Once the program instructions and any necessary data have been transferred to main memory the processor then starts executing the program instructions. During the boot up sequence video audio is not available to the subscriber because the tuner s is inactive. Further the subscriber is unable to tune to any of the channels. Control of the system is not relinquished to the viewer until the completion of the boot up sequence at which time the viewer gains full control of the set top terminal and is able to view video and tune to a desired channel.

Upon entering the autodiscovery superstate each individual tuner enters its own tuner specific state which will be described immediately below. To reduce the time needed to perform the entire autodiscovery process the activities performed by the tuners during their respective tuner specific states may all be performed in parallel with one another. It should be noted that for purposes of generality this example assumes that the set top terminal includes two or more tuners. If only one tuner is available the process is the same except that the autodiscovery superstate becomes co extensive with the individual tuner specific state .

During the tuner specific state the tuner first enters a sub state in which the tuner requests one of the frequencies in the frequency plan and attempts to tune to that frequency on the content delivery system. The tuner transitions to a sub state in which it awaits the results of the tuning operation. In order to complete the transition a guard condition may need to be satisfied which in this case confirms that the tuning request has been successfully executed. At this point the autodiscovery process bifurcates depending on whether the tuner needs to extract TSIDS in which case the tuner transitions to sub state or whether the tuner needs to extract the service group number directly from the appropriate frequency transmitted by a mini carousel in which case the tuner transitions to sub state .

Turning first to the case where the tuner can extract the service group number directly the tuner transitions from sub state to sub state during which the tuner waits until it determines whether the in band mini carousel IBMC is transmitting on the particular frequency that is currently being searched by the tuner. During the transition from sub states to a guard condition may need to be satisfied which confirms that the tuner has successfully tuned to the appropriate frequency currently being searched. If this particular frequency is indeed the correct frequency on which the mini carousel is transmitting then the tuner transitions from state to an end state by satisfying the guard condition in which the SDV application extracts the service group number from the appropriate packet which as previously noted can be identified by the packet s PID. On the other hand if a timeout period expires guard condition indicating that this particular frequency is not the correct frequency on which the mini carousel is transmitting then the tuner transitions from sub state back to sub state in which the next frequency in the frequency plan is searched. This process continues until the correct frequency is located and the service group number is extracted after which the tuner transitions to the end state . The set top terminal including the SDV application completes its initialization process by signaling the superstate since guard condition is satisfied that the tuner has finished executing its state logic. When the superstate determines that the last tuner finished executing its state logic the superstate transitions to state during which the SDV application deregisters from the underlying set top terminal platform.

Turning now to the case where the tuner needs to extract the TSIDS from a number of frequencies in the frequency plan the tuner transitions from sub state to sub state during which the tuner processes the transport stream received on the particular frequency that is currently being searched by the tuner. The transport stream is processed by examining the PAT from which the TSID can be determined. During the transition from sub states to a guard condition may need to be satisfied which confirms that the tuner has successfully tuned to the appropriate frequency currently being searched. Once the TSID has been extracted during sub state the SDV application determines if more TSIDs need to be acquired in accordance with the information provided to it in the configuration message. If more TSIDs are needed the tuner transitions from sub state back to sub state since guard condition is true in which the next frequency in the frequency plan is searched. This process continues until the correct number of TSIDs have been obtained after which the tuner transitions to the end state since guard condition is true . The set top terminal including the SDV application once again completes its initialization process by signaling the superstate since guard condition is satisfied that the tuner has finished executing its state logic. When the superstate determines that the last tuner finished executing its state logic the superstate transitions to state during which the SDV application deregisters from the underlying set top terminal platform.

Since the aforementioned processes depicted in are performed while the set top box is being initialized during power up the service group number is either immediately available when the subscriber subsequently requests an SDV channel or the service group number can be immediately obtained by sending an autodiscover request message with the TSIDs to the SDV manager which will respond with the service group number. In either case the time consuming portion of the autodiscovery process tuning to the various frequencies in the autodiscovery frequency plan has been already been performed while the set top terminal has been booting up which is already a relatively time consuming process during which the set top terminal is largely unavailable for use by the subscriber. As a result the time lag between when the subscriber requests an SDV program and the time when the SDV program is actually received can be substantially reduced in some cases by as much as several seconds.

It should be emphasized that the state processes depicted in are presented for illustrative purposes only and that the methods systems and techniques described herein more generally encompass any process for acquiring the information that needs to be obtained during autodiscovery.

As previously mentioned some or all of the functionality of the SDV manager may be distributed among other components in either the headend or the hubs. For instance while the SDV manager may provide the set top terminal with the frequencies in the frequency plan this information alternatively may be provided by any other suitable entity.

The processes described above including but not limited to those presented in connection with may be implemented in general multi purpose or single purpose processors. Such a processor will execute instructions either at the assembly compiled or machine level to perform that process. Those instructions can be written by one of ordinary skill in the art following the description of presented above and stored or transmitted on a computer readable medium. The instructions may also be created using source code or any other known computer aided design tool. A computer readable medium may be any medium capable of carrying those instructions and include a CD ROM DVD magnetic or other optical disc tape silicon memory e.g. removable non removable volatile or non volatile packetized or non packetized wireline or wireless transmission signals.

A method and apparatus has been described for performing an autodiscovery process by tuning to prescribed autodiscovery frequencies received by a set top terminal while the set top terminal SDV application is being initialized. As a result the service group number will be readily available when the subscriber requests a channel thereby reducing the delay between the time the subscriber requests an SDV channel and the time the subscriber receives the SDV channel. Among its other advantages by performing autodiscovery during the initialization process all the tuners in the set top terminal can be utilized. In contrast if autodiscovery is performed after the initialization process is complete not all the tuners may be available for autodiscovery since one or more of them may be being used to provide content to the subscriber.

