---

title: Broadcast AM receiver, FM receiver and/or FM transmitter with integrated stereo audio codec, headphone drivers and/or speaker drivers
abstract: An apparatus includes processor and a control interface. The processor is adapted to in a first mode of operation, operate as part of one of a wireless receiver and a wireless transmitter and in a second mode of operation. The processor also processes a first audio band signal to generate a second audio band signal. The control interface selects one of the first and second modes of operation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08174415&OS=08174415&RS=08174415
owner: Silicon Laboratories Inc.
number: 08174415
owner_city: Austin
owner_country: US
publication_date: 20070629
---
This application claims the benefit under 35 U.S.C. 119 e to U.S. Provisional Application Ser. No. 60 881 747 entitled BROADCAST AM RECEIVER FM RECEIVER AND OR FM TRANSMITTER WITH INTEGRATED STEREO AUDIO CODEC HEADPHONE DRIVERS AND OR SPEAKER DRIVERS which was filed on Jan. 22 2007 and is a continuation in part of U.S. patent application Ser. No. 11 396 097 entitled TRANSCEIVER HAVING MULTIPLE SIGNAL PROCESSING MODES OF OPERATION filed on Mar. 31 2006. Each of these prior applications is hereby incorporated by reference in its entirety.

The invention generally relates to broadcast am receiver fm receiver and or fm transmitter with integrated stereo audio codec headphone drivers and or speaker drivers.

Devices exist that provide FM transmitter functionality for short range communication of audio content to an FM receiver. For example an FM transmitter may be used to transmit audio content from a portable music player to an FM receiver in a vehicle. The FM transmitter transmits on a particular FM frequency and then the vehicle FM receiver is tuned to that FM frequency to receive and output the audio content.

Other devices exist that provide audio broadcast reception and audio reproduction to allow users to hear music and other content broadcast by audio broadcasters. In addition many devices will output this audio content through speakers and or headphones. The speakers and headphones will typically require speaker driver circuitry and headphone driver circuitry. In addition some devices attempt to provide stereo audio decoding equalizer functionality and other more complex audio processing. This audio processing is typically accomplished using an audio CODEC coder decoder . For example for one existing solution an analog audio tuner is provided in one or more integrated circuits and one or more additional integrated circuits is used to provide the CODEC and driver functionality.

The current solutions are not efficient and suffer from requiring a number of different integrated circuits.

In an embodiment of the invention an apparatus includes processor and a control interface. The processor is adapted to in a first mode of operation operate as part of one of a wireless receiver and a wireless transmitter and in a second mode of operation. The processor also processes a first audio band signal to generate a second audio band signal. The control interface selects one of the first and second modes of operation.

Advantages and other features of the invention will become apparent from the following drawing description and claims.

Referring to in accordance with embodiments of the invention described herein a multimode frequency modulation FM transceiver which may be fabricated on a monolithic semiconductor die has several different signal processing modes of operations in which the transceiver performs FM transmission FM reception analog mixing digital mixing and codec functions. More specifically as described herein the multimode FM transceiver has an FM transmit mode in which the transceiver functions as an FM transmitter an FM receive mode in which the transceiver functions as an FM receiver and an audio mode in which the transceiver functions as a codec. In each of these modes of operation the multimedia FM transceiver may perform various analog and or digital mixing functions. Additionally in accordance with some embodiments of the invention the multimode FM transceiver includes a digital audio interface which allows the communication of digital audio signals between the transceiver and circuitry off chip circuitry for example that is external to the transceiver .

In accordance with embodiments of the invention which are described herein the FM transmit FM receive and audio modes are orthogonal in that the multimode FM transceiver is in only one of the modes at a time. However it is understood that in other embodiments of the invention the multimode FM transceiver may operate in two or more of the FM receive FM transmit and audio modes concurrently.

In general the multimode FM transceiver may receive one or more of the following input source signals in accordance with some embodiments of the invention a digital audio called DIN which is received through the digital audio interface an incoming radio frequency RF signal that is received from an external receive antenna a digital audio band signal that is received from the digital audio interface and left channel called LIN and right channel called RIN analog stereo channel signals that are received at input terminals and respectively.

Depending on the particular configuration of the multimode FM transceiver the transceiver is capable of mixing two or more of its input source signals together to generate one or more of the following output signals an outgoing FM transmission signal to drive an external transmit antenna left channel called LOUT and right channel called ROUT analog stereo signals that appear at output terminals and respectively and a digital output signal called DOUT that is routed through the digital audio interface . In accordance with some embodiments of the invention the multimode FM transceiver may also provide a low impedance RF transmission output signal called TXB at an output terminal for purposes of driving a low impedance load.

As described herein the multimode FM transceiver reuses some of its hardware components for purposes of reducing the complexity and size of the transceiver as well as reducing the overall time that may be consumed designing the transceiver . For example in accordance with some embodiments of the invention a digital signal processor DSP of the multimode FM transceiver performs both digital FM modulation for the FM transmit mode and digital FM demodulation for the FM receive mode for the transceiver . As another example of the hardware reuse analog to digital converters ADCs and of the multimode FM transceiver perform transformations between the analog and digital domains for both complex when the transceiver is in the FM receive mode and real when the transceiver is in the FM transmit mode signals. Additionally the ADCs and may be used in the audio mode for purposes of digitizing the LIN and RIN stereo channel signals.

As another example of hardware reuse by the multimode FM transceiver in accordance with some embodiments of the invention digital to analog converters DACs and of the transceiver convert digital audio band signals from the digital to the analog domain for both the FM receive and audio modes. The DACs and are also used during the FM transmit mode for purposes of converting intermediate frequency IF band signals from the digital to the analog domain.

Turning now to the overall topology of the multimode FM transceiver the transceiver includes a multiplexer for purposes of routing the appropriate analog signals to the ADCs and for conversion. For example the multiplexer may select an incoming analog IF signal during the FM receive mode and select the LIN and RIN stereo channel signals during the FM transmit and audio modes. The digital signals that are provided by the ADCs and are routed to the DSP .

For the FM receive mode the multimode FM transceiver includes analog mixers that are coupled to a tunable local oscillator the frequency of which selects the desired FM channel to which the transceiver is tuned. In response to the incoming RF FM signal the mixers produce corresponding analog IF FM quadrature signals that pass through programmable gain amplifiers PGAs before being routed to the ADCs and . Thus the ADCs and convert the analog IF quadrature signals from the PGAs into digital signals which are provided to the DSP . The DSP demodulates the received complex signal to provide corresponding digital left and right channel stereo signals at its output terminals and these digital stereo signals are converted into the analog counterparts by the DACs and respectively. As described further below mixing may then be performed by mixers or analog adders which provide the ROUT and LOUT stereo signals at the output terminals and respectively. It is noted that the digital demodulated stereo signals may also be routed from the DSP to the digital audio interface to produce the DOUT digital signal.

In the FM transmit mode of the multimode FM transceiver the content to be transmitted over the FM channel selected by the frequency of the local oscillator for example may originate with the DIN digital data signal the LIN and RIN stereo channel signals or a combination of these signals. Thus depending on whether the analog signals communicate some or all of the transmitted content the multimode FM transceiver may use the ADCs and . The DSP performs FM modulation on the content to be transmitted over the FM channel to produce digital orthogonal FM signals which are provided to the DACs and to produce corresponding analog orthogonal FM signals which are in the IF range. Analog mixers which mix the analog orthogonal FM signals with a frequency that is selected by the local oscillator of the multimode FM transceiver frequency translate and combine the signals to produce an RF FM signal that is provided to the transmit antenna .

In the audio mode of the multimode FM transceiver the DSP may be used to perform digital mixing. Analog mixing in the audio mode may be performed using the adder as further described below.

Among the other features of the multimode FM transceiver in accordance with some embodiments of the invention the transceiver includes a control interface for purposes of receiving various signals that control the mode FM transmit FM receive or audio in which the transceiver is operating as well as the specific submode configuration for the mode as further described below. In accordance with some embodiments of the invention the multimode FM transceiver may also include a microcontroller unit MCU that coordinates the general operations of the transceiver such as configuring the ADCs and and DACs and configuring data flow through the multiplexer etc. as further described below.

Referring to in accordance with some embodiments of the invention the multimode FM transceiver may be part of a multimedia portable wireless device which in turn is part of a wireless system . As examples the wireless device may be a dedicated MP3 player a cellular telephone or personal digital assistant PDA with the capability of playing music downloads part of a wireless link between a satellite antenna and an FM receiver etc.

Among its other various functions the wireless device may store digital songs on storage which may be a flash memory or hard disk drive as just a few examples. The wireless device generally includes an application subsystem that may for example receive input from a keypad of the wireless device and display information on a display . Furthermore the application subsystem may generally control the retrieval and storage of songs from the storage and the communication of the songs via the DIN data signal see for example with the multimode FM transceiver . As shown the multimode FM transceiver may be directly connected to relatively low power left channel and right channel speakers for purposes of playing a stored song a mixed version of the song or other sounds as further described below. As depicted in the multimode FM transceiver may be coupled by a matching network to the receive antenna and may be coupled by a matching network to the transmit antenna .

Although the wireless device may include the speakers and it may be desirable to play sounds that are generated by the wireless device over a more sophisticated speaker system. Therefore in accordance with some embodiments of the invention the wireless device via the multimode FM transceiver may broadcast content to be played over an FM channel to the receiver of an adjacent stereo system as an example . As shown the stereo system includes an RF antenna for purposes of receiving the transmitted content from the wireless device .

In accordance with some embodiments of the invention the wireless device may have the ability to communicate over a communications network such as a cellular network. For these embodiments of the invention the wireless device may include a baseband subsystem that is coupled to the application subsystem for purposes of encoding and decoding baseband signals for this wireless network. A baseband subsystem may be coupled to a transceiver that is connected to corresponding transmit and receive antennas. For these embodiments of the invention the multimode FM transceiver may be used to mix in audio content for purposes of indicating operation of the baseband subsystem . For example in accordance with some embodiments of the invention in response to an incoming phone call the multimode FM transceiver may mix an audible ring signal that lets a listener of the wireless device be aware that an incoming call is being received. Other embodiments are possible and are within the scope of the appended claims.

In accordance with some embodiments of the invention when in the FM receive mode the multimode FM transceiver may establish the general signal flow that is depicted in . The various functions i.e. submodes of the FM receive mode that may be provided by the multimode FM transceiver during the FM receive mode are controlled in general by four bits that may be written via the control interface see a bit called DI which controls the enablement of the DIN digital data input signal a bit called DO which controls the enablement of the DOUT digital data out signal a bit called LO which controls the enablement of the LOUT and ROUT stereo channel signals and a bit called LT that controls enablement of the RIN and LIN stereo channel input signals. A bit called RX which also may be written via the control interface is used to select the FM receive mode.

Conceptually the DI signal generally controls the state of a switch which controls communication of the DIN signal with the DSP . The DO signal generally controls a switch that controls communication of the DOUT signal from the DSP . The LO signal controls two switches and the switch controls communication between the output terminal of the DAC and the mixer and the switch controls communication between the output terminal of the DAC and the mixer . The LT signal controls the states of two switches and the LT signal controls the state of a switch which is coupled between the RIN right stereo channel signal input terminal and the mixer and the LT signal also controls the state of a switch which is coupled between the LIN stereo channel input signal terminal and the mixer .

The combination of the LT LO DO and DI signals provide up to sixteen possible submodes for the FM receive mode as depicted in the chart of . Some of these submodes however may not be used and as such are indicated as being invalid in . For example for submode one an invalid mode that is depicted in all of the LT LO DO and DI bits are de asserted to disable all of the input and output signals to and from the multimode FM transceiver .

As examples of the possible submodes for the FM receive mode the LT signal may be asserted a logic one bit for example to couple the RIN and LIN stereo channel signals to the analog mixer . If the LO signal is also asserted a logic one bit for example then the RIN and LIN stereo channel signals may be mixed with the received content from a selected FM channel. If the LT signal is asserted and the LO signal is however de asserted a logic zero bit for example then a microphone connected to the terminals and may be used to play a user s voice directly over the output speakers and see for example of the wireless device . As another example if the DI signal is asserted then the multimode FM transceiver may be used for purposes of digital mixing in which the DIN digital input signal may be mixed with the content received from the FM channel. For example in accordance with some embodiments of the invention the DI signal may be asserted for purposes of mixing a digital ring tone signal with the received FM content to audibly indicate an incoming phone call. The assertion of the DO signal may be used for purposes of digital recording. Thus in accordance with some embodiments of the invention the mixed FM content and DIN digital input signal may be sent to the DOUT digital output signal for purposes of permitting the application subsystem see to digitally record the mixed signal. Other variations are possible.

As depicted in in accordance with some embodiments of the invention in addition to performing FM demodulation as depicted by box the DSP may also perform digital mixing as depicted by the mixers and . Thus the mixer may be used for purposes of mixing for the left stereo channel and the mixer may be used for purposes of mixing for the right stereo channel. As depicted in the DOUT digital output signal is derived from the output of the mixers and .

In accordance with some embodiments of the invention the multimode FM transceiver has the general signal flow which is depicted in for the FM transmit mode. Referring also to that depicts all of the possible submodes the particular submode of the FM transmit mode is generally programmed in response to four signals the LT signal the DO signal the DI signal and a signal called LI. The LI signal when asserted enables connection of the LIN left channel stereo input terminal and the RIN right channel stereo input terminal to the ADC and the ADC respectively. Additionally a signal called TX is used to place the multimode FM transceiver in the FM transmit mode.

As depicted in twelve possible valid submodes of the FM transmit mode may be achieved by manipulating the states of the LT LI DO and DI signals in accordance with some embodiments of the invention. Referring back to as an example in accordance with some embodiments of the invention the LI signal may be asserted to cause the switches and to couple the LIN and RIN stereo channel signals to the ADCs and . The ADCs and in turn provide digitized representations of the LIN and RIN stereo channel signals to the DSP . The digital adders and of the DSP digitally mix the digitized LIN and RIN signals with the incoming DIN signal if the DI signal is asserted and then performs FM modulation to transmit the mixed content over the FM channel to a nearby stereo system for example. Thus the LI signal may be asserted for purposes of transmitting the LIN and RIN signal content out over the selected FM channel. This may be used for example for purposes of mixing output signals from a microphone connected to the terminals and so that audio input from the user may be mixed with a song that is played back received via the DIN signal and played over the stereo channels.

As another example the LIN and RIN stereo channel signals may be used to communicate audio content to be transmitted out over the RF FM channel while the DIN signal indicates a ring tone to play over the channel. As yet another example the LI signal may be de asserted and the DI signal may be asserted to facilitate direct digital transmission by the multimode FM transceiver . As yet another example the DO signal may be asserted for purposes of performing digital recording of the digital signals provided by the mixers and . Thus many combinations are possible in accordance with the many different possible embodiments of the invention.

As an example of the possible submodes in accordance with some embodiments of the invention analog to digital conversion of the RIN and LIN stereo channel signals may be accomplished by asserting the LI and DO signals. Thus the DOUT signal for this submode indicates the digitized version of the RIN and LIN stereo channel signals. As another example digital to analog conversion of the DIN signal may be accomplished by asserting the DI and LO signals. In this mode the DACs and form the LOUT and ROUT signals which indicate the analog left and right channel signals derived from the DIN digital input signal. Regarding mixing digital mixing may be accomplished by asserting the DI and LI signals. Thus the RIN and LIN stereo channel signals are digitized and mixed with the DIN data signal via the mixers and . The digital output may then be obtained by asserting the DO signal so that the DOUT signal indicates the digitally mixed signal. Analog mixing may likewise be performed. For example the DI LO and LT signals may be asserted so that analog representations of the DIN signal appear at the mixer which mixes the RIN and LIN signals with these analog signals to produce the analog LOUT and ROUT signals. As yet another variation a line bypass may be performed by asserting the LT signal and de asserting the LO signal to couple the stereo input terminals and to the stereo output terminals and respectively. Thus many variations are possible and are within the scope of the appended claims.

Referring back to in accordance with some embodiments of the invention the ADC may be a delta sigma modulator DSM . Due to the reuse of the ADCs and in the different operating modes of the multimode FM transceiver the ADCs and processes either a pair of independent real stereo signals or an interrelated pair of I and Q quadrature signals depending on the selected mode.

A real signal may be defined as an electrical time varying physical quantity of the real world i.e. a voltage current or power. The real signal is characterized by a symmetric spectrum for positive and negative frequencies i.e. the center frequency of its spectrum may be represented by two phasors of the same amplitude rotating at the equal and opposite rotational frequency. A complex or quadrature signal may be defined as a signal that can be represented by two real signals the real or in phase I or imaginary or quadrature Q parts such that the center frequency of its spectrum can be represented by a single phasor rotating with positive or negative rotational frequency. If half of the bandwidth is smaller than its center frequency then the signal spectrum has only positive and negative frequency components. Conversely there will be a nonsymmetrical spectrum with respect to DC which extends to DC itself. Based on this definition the case of a passband spectrum which is not symmetric i.e. which not extend up to DC is not considered as a complex signal but the superimposition of two complex signals. In fact the center frequencies of the two passband spectrum may be represented by two phasors of different amplitude rotating in opposite directions. This situation happens for instance in presence of mismatches in I and Q paths the two center frequency components can be represented by two phasors of different amplitude rotating in equal opposite directions. Note also as a real signal itself can be considered as the superimposition of two complex signals.

For a downconverted quadrature I Q low IF or zero IF radio signals the DSM can be operated either in real or complex configuration as the in phase I and quadrature Q real signals represent the real and imaginary parts of the same complex signal. In particular the complex configuration is particularly advantageous in terms of signal to noise ratio SNR for low IF signal especially if the IF frequency is not that low with respect to the signal bandwidth. Conversely for stereo audio signal only the real configuration can be used because the LIN and RIN stereo channel signals are two completely independent real signals.

Although the discussion below considers only discrete time DT based DSM embodiments of the invention may also include continuous time DSM CT DSM as a CT DSM is equivalent to a DT DSM with an anti aliasing filter AAF front end.

Referring to in accordance with some embodiments of the invention the ADCs and may together have a digital to analog converter architecture . In particular the architecture may include two delta sigma modulators DSM and each of which has a similar design. Each DSM receives an analog signal and converts this analog signal into its digital counterpart. For example the DSM receives an analog signal called U and provides a digital signal called Y . Similarly the DSM receives an analog signal called U and provides a digital signal called Y . As depicted in a cross coupling network potentially couples the DSMs and together depending on whether the ADCs and process independent real signals or two interrelated signals that represent the I and Q components of a complex signal.

More specifically when the ADCs and process independent real signals such as the LIN and RIN stereo channel signals for example the cross coupling network is decoupled from the DSMs and so that the DSMs and are each independent to produce the corresponding digital counterpart signal. However when the U and U signals are quadrature signals i.e. interrelated real signals that represent the I and Q components of a complex signal the cross coupling network couples the DSMs and together to produce the corresponding quadrature digital signals that appear as the Y and Y signals. As depicted in in accordance with some embodiments of the invention the cross coupling network receives a signal called I Q a signal that may be asserted for example to cause the cross coupling network to effectively disappear and de asserted for example to cross couple the DSMs and to process the quadrature signals.

As depicted in in accordance with some embodiments of the invention the DSM includes a summing node that receives an output signal from a DAC which converts the Y digital output signal into an analog signal. The summing node subtracts the signal that is provided by the DAC from the input signal U . This produces a signal called A that is provided to a filter network of the DSM . The filter network in turn provides an output signal called B that is provided to a quantizer which provides the Y output signal. It is noted that the quantizer performs noise shaping so that the DSP see may easily remove noise from the digitized signal. The filter network also receives the I Q signal and receives indications of coefficients for the filter network via a bus . Thus depending on the state of the I Q signal the filter network adapts its structure accordingly. Furthermore the coefficients that are programmed into the filter network via the bus change according to whether the DSM is processing independent real signals or quadrature signals.

The DSM may have a similar structure to the DSM in accordance with some embodiments of the invention.

As a more specific example depicts in the Z domain a filter i.e. an embodiment of the filter of the DSM a filter i.e. an embodiment of the filter of the DSM and the cross coupling network that is coupled in between. The filter networks and are each a fourth order real Chebychev type filter in accordance with some embodiments of the invention. Each filter network includes coefficient gains that are non zero when the DSMs and are processing independent real signals and are set to zero to effectively remove the gains when the DSMs and are processing interrelated quadrature signals of a complex signal. The cross coupling network also includes gains that are non zero when the DSMs and are processing the interrelated quadrature signals and are zero when the DSMs and are processing the independent real signals.

Thus referring also to for the case when the DSMs and are processing quadrature signals the gains effectively disappear as depicted in . It is noted that the various remaining gains for the filter networks and are programmed or adjusted for processing of the quadrature signals to adjust the zeros and center frequency of the effective loop filter.

In accordance with some embodiments of the invention the MCU may control the generation of the I Q signal and the programming of the filter coefficients depending on the mode of the multimode RF transceiver .

In which depicts the filter networks and during the DSM s processing of real signals the gains see are zero and the gains are adjusted for processing the independent real signals. Thus effectively the cross coupling network disappears when the DSMs and are processing independent real signals.

Referring to in accordance with some embodiments of the invention each DAC may have the following design. The DAC includes a digital side and an analog side . The digital side includes a programmable interpolator and second order delta sigma modulator . The analog side includes a first order switched capacitor filter and a second order active RF filter .

For the FM receive mode of the multimode FM transceiver the signal coming from the DSP has a bandwidth of 16 kHz as an example whose Nyquist frequency fis 32 kHz as an example . The programmable interpolator interpolates this signal by 96 times as an example which means the oversampling ratio is 96 and the oversampling frequency fis about 3 MHz. This over sampled signal is then processed by the second order delta sigma modulator to produce a one bit stream.

The above components are implemented in digital hardware. The one bit stream is the filtered by the first order switched capacitor filter to remove out of band quantization noise and reconstruct into analog signal. The active RF filter further smoothes the signal. The order of the filters are chosen to minimize area and power. Higher order filters may be used to improve performance. The signal from time active RF filter may be sent to a headphone amplifier to drive a speaker.

For the FM transmit mode of the multimode FM transceiver the signal experiences the same processing procedure. But due to the wider signal bandwidth fis now 456 kHz as an example . The oversampling ratio is 26 times as an example and fis about 12 MHz as an example . This is possible because the FM transmission SNR requirement is much relaxed than the receiving path. The delta sigma modulator is still second order but is reconfigured to pass a signal centered at 128 kHz with a bandwidth of 200 kHz.

For the receiver modulator the zero location of the noise transfer function is put at DC but for the transmitter modulator the zero position is optimized and is put around 128 kHz. The bandwidth of the switched cap active filter may be changed to accommodate the signal by switching off part of the integration capacitor. The bandwidth of the active RF filter is also programmed accordingly.

Systems and methods are disclosed for efficiently integrating an audio processor CODEC coder decoder within the same integrated circuit as an FM receiver an AM receiver an FM transmitter or any combination of the three. As described herein therefore the audio CODEC can be integrated with an FM receiver an AM receiver an FM transmitter an AM FM receiver an FM receiver FM transmitter an AM receiver FM transmitter or an AM FM receiver FM transmitter. In addition a headphone driver and or a speaker driver can also be integrated within the same integrated circuit. Advantageously circuit blocks within the integrated circuit may be reused in different modes of operation in order to reduce size requirements for the integrated circuit as further described below.

Integrated circuit can be for example a CMOS integrated circuit. In the example embodiment depicted the integrated circuit has the input output pins as set forth in the following table.

As also depicted an antenna is coupled to the TXO pin. This antenna can be implemented in a variety of ways depending upon the application. It is noted that internal to the integrated circuit the signal from the TXO pin can be rerouted to the LNA for receive operations. For example in a cell phone implementation a small antenna that is internal to the cell phone device could be provided for limited receive and transmit. In addition an external antenna could be provided for receive as well. If desired on chip variable capacitance circuitry can also be utilized to help tune the antenna for FM transmit operation and or receiver operation.

Headphones with left and right speakers can be coupled to the HPR and HPL pins through respective capacitors. Other configurations could also be implemented without the capacitors such as a configuration that provides for a common mode voltage for the headphone common signal. The headphones can also act as an FM antenna for the system. Left and right speakers can be coupled to the SPR SPL and COM pins. Other configurations could also be implemented such as configurations where only two output signals are used in combination with capacitors such as is shown for the headphones. It is noted that the FB symbol in represents a ferrite bead that can be included to help prevent the receive RF energy from going into the headphone section of the integrated circuit.

For FM receiver FM RX operation an FM signal is received at the FM input pin FMIN and passed through a low noise amplifier LNA . A mixer then receives the FM signal and mixes it down to a desired frequency. The signal is then digitized to produce I and Q path signals using ADC . The digitized FM signal is then processed with the DSP . Digital audio signals are provided to the audio DAC digital to analog converter and to interface and control interface . Analog audio signals are provided to the interface and control interface from the DAC . The interface and control block provides an analog and digital audio interface an audio mixer and volume control. In particular the interface takes the analog inputs to the ADC and it takes the digital audio inputs straight into the DSP . The interface also takes the analog out of the DAC and sends it through volume controls to the outputs the speaker and headphone amps as shown in . So aside from the digital interface the interface is essentially an analog signal routing block as the interface takes in the analog to the ADC and takes analog from the DAC and sends to the outputs. It is noted that the FM receive path can utilize a digital low IF architecture in mixing the received signals. It is also noted that the digital signal processing and other control can be implemented at least in part through the use of an on chip software programmable microcontroller MCU .

For FM transmit FM TX operation digital audio signals are provided to the DSP . The DSP processes the signals and outputs them as I and Q signals to DAC which may be a single bit or multiple bit architecture. The DAC provides analog output signals to the mixer . The mixer outputs an FM signal to the TXO pin through a variable gain amplifier. It is noted that the FM transmit can also be a low IF architecture. Analog input may also be used into the interface into the ADC and then as described in this paragraph.

For both the FM receiver and FM transmit operations a frequency synthesizer is utilized to generate desired mixing signals for the mixer and the mixer . The frequency synthesizer receives a reference signal at pins X and X for example from a crystal oscillator. In addition a control interface is provided through which external control of the integrated circuit is provided. A power management unit PMU is also included within the integrated circuit.

For audio reproduction the audio DAC produces analog audio signals. The interface and control block is used for controlling the audio interface. This block also includes controls for an audio mixer and volume control. The headphone pins HPR and HPL are driven by headphone driver which includes a pair of variable gain headphone drivers. The speaker pins SPR SPL and COM are driven using speaker driver which includes two variable gain speaker drivers for the SPR and SPL pins and one common mode speaker driver for the COM pin . It is again noted that the use of capacitors helps eliminate the need for the COM pin and the use of a COM pin helps eliminate the need for capacitors. Either configuration and or other configurations can be used as desired.

Advantageously the circuit blocks within the integrated circuit are re used for different modes of operation for the integrated circuit . For example the ADC is used to generate digital I and Q path signals for the FM receiver mode of operation and the ADC is also used for digitizing analog audio signals for the FM transmit mode of operation. The DSP is used to digitally process receive signals in FM receiver mode to digitally process transmit signals in FM transmit mode and to process audio signals for the CODEC audio processing. Circuit blocks can also be re used if AM reception is added to the receive path as described with respect to below. In addition the frequency synthesizer may also in effect re used to create the clocking signals for the audio portion ADC DAC headphone and or speaker amplifier if a class D type circuit . In short the re use of circuit blocks provides a significant advantage for generating a reduced cost reduced size integrated circuit. In other embodiments of the invention the DAC may be re used in place of the DAC in the audio reproduction mode. Thus many variations are contemplated and are within the scope of the appended claims.

Integrated circuit can be for example a CMOS integrated circuit. As depicted the integrated circuit has the input output pins as set forth in the following table.

The integrated circuit embodiment in has similar FM transmit and FM receive functionality and circuitry as described above with respect to the integrated circuit embodiment of . In addition the integrated circuit includes AM receiver circuitry.

As depicted an AM antenna such as a loop antenna can be coupled between RFGND and an AMI input pin. It is also noted that a ferrite bar antenna could be used for AM reception. This ferrite bar antenna for AM reception can be implemented as a long multi turn loop of wire around a pencil shaped rod. One side can be grounded while the other side is resonated with on chip tuning capacitors to help maximize the voltage. A centertap of the ferrite bar can be used to get a signal into the LNA . Many arrangements with and without the centertap can also be implemented. In addition as depicted the on chip tuning capacitors can be implemented using a variable capacitance circuit coupled between the RFGND and AMI pins within the integrated circuit .

In operation the AM signal is received by the AM antenna and provided to the AMI pin. The AM signal is then passed through a low noise amplifier LNA . A mixer then receives the AM signal and mixes it down to a desired frequency. The mixer receives mixing signals from frequency synthesizer .

As with the FM signal the AM signal is then digitized to produce I and Q path signals using ADC . The digitized AM signal is then processed with the DSP . Digital audio signals are provided to the audio DAC digital to analog converter and to interface and control interface . Analog audio signals are provided to the interface and control interface from the DAC . As above the interface provides an analog and digital audio interface an audio mixer and volume control. It is noted that the AM receive path can utilize a digital low IF architecture in mixing the received signals. It is also noted that the digital signal processing and other control can be implemented at least in part through the use of an on chip software programmable microcontroller MCU as indicated in with respect to the MCU label included with DSP .

As above the circuit blocks within the integrated circuit are advantageously re used for different modes of operation for the integrated circuit . For example the ADC is used to generate digital I and Q path signals for the FM receiver mode of operation to generate digital I and Q path signals for the AM receiver mode of operation and to digitize analog audio signals for the FM transmit mode of operation. The DSP is used to digitally process receive signals in FM receiver mode to digitally process receive signals an AM receiver mode to digitally process transmit signals in FM transmit mode and to process audio signals for the CODEC audio processing. In addition the frequency synthesizer is in effect re used in order to create the clocking signals for the audio portion ADC DAC headphone amplifier if a class D type circuit in addition to being used for generating mixing signals for mixers and . In this regard a class D type amplifier typically has a relatively large amount of the associated noise. For purposes of minimizing interference between operation of the class D type amplifier and an FM AM receiver in accordance with some embodiments o the invention the use of the same frequency synthesizer may be used for purposes of reducing the interference. For example the current tuned frequency in the FM or AM receiver is used as a measure for purposes of determining at which frequency to operate the class D type amplifier. As another example the currently tuned frequency of the AM FM receiver may be used for purpose of determining how to filter the class D type amplifier s output. Thus many variations are possible and are within the scope of the appended claims. In short the re use of circuit blocks provides a significant advantage for generating a reduced cost reduced size integrated circuit.

Similar to the integrated circuit of in other embodiments of the invention the DAC may be re used in place of the DAC in the audio reproduction mode. It is noted that previous patent applications assigned to the same assignee as this current application Silicon Laboratories Inc. describe embodiments that the re use circuit blocks for different modes of operation with an integrated circuit. For example re use of circuit blocks within an integrated circuit having an FM receiver mode of operation and an FM transmit mode of operation are described in U.S. patent application Ser. No. 11 396 097 filed Mar. 31 2006 and entitled TRANSCEIVER HAVING MULTIPLE SIGNAL PROCESSING MODES OF OPERATION which is hereby incorporated by reference in its entirety. Re use of circuit blocks within an integrated circuit having an FM receiver mode of operation and an AM receiver mode of operation are described in U.S. patent application Ser. No. 10 881 926 filed Jun. 30 2004 and entitled INTEGRATED LOW IF TERRESTRIAL AUDIO BROADCAST RECEIVER AND ASSOCIATED METHOD which is hereby incorporated by reference in its entirety.

Looking back to the stereo audio CODEC processing provides high quality audio for two stereo channel inputs with optional differential inputs the GPIO inputs for example and a microphone input. For example in some embodiments of the invention the GPIO input terminal may be the left channel the GPIO terminal may be the right channel the GPIO terminal may be the left channel and the GPIO terminal may be the right channel. Channel assignments may be changed in accordance with other embodiments of the invention. The integrated digital core provides stereo audio enhancements for either analog or digital audio inputs with audio equalization multiple input mixing noise cancellation and automatic level control ALC and limiting on each input and output. All functionality is fully programmable and can be configured to save power in simple usage models requiring little or no audio manipulation or simple analog signal pass through. Dedicated voice DACs also provide a lower power option versus full audio output to headphones or speakers. In addition by including the integrated 16 headphone and 8 stereo speaker drivers the need for external power amplifiers is eliminated.

The integrated circuit described herein offers unmatched AM FM receiver performance and adjustability including excellent selectivity and sensitivity tunable seek performance and adjustable audio parameters for variable broadcast environments and user preferences. The FM transmitter provides digital capacitive antenna tuning to maximize voltage output in almost any system configuration. The FM transmitter also provides programmable dynamic gain compression and frequency deviation for maximum audio volume and signal strength on target receivers. Both the FM receiver and the FM transmitter can use a single small integrated antenna which the part automatically self calibrates across the FM band for optimum transmit power or received signal strength.

In addition European Radio Data Service RDS and US Radio Broadcast Data Service RBDS decoding error correction and encoding can also provided through the operation of the DSP.

Applications for the integrated circuit described herein include but are note limited to cellular handsets digital media players portable gaming devices portable navigation GPS portable radios CD players consumer electronics counter top stereos radios docking stations.

In operation the integrated circuits described herein provide a highly efficient integration of the AM receive FM receive and or FM transmit function with the stereo audio CODEC headphone amplifier driver and or stereo speaker driver. In addition the preferred digital low IF architecture of the AM receiver FM receiver FM transmitter allows the integrated circuit to offer a high quality stereo audio CODEC with two stereo channel inputs and preamp and bias for microphone input with very little incremental silicon. The efficient reuse of functionality and circuitry described herein allows the integrated circuit to efficiently add the stereo headphone and speaker drivers thus offering a complete AM receive FM receive and FM transmit solution or combinations thereof plus the audio CODEC and amplifier sub system in a single very small and highly integrated die. The result is a significant reduction in required board space and BOM build of materials compared to existing solutions.

Other embodiments are within the scope of the appended claims. For example other components of the integrated circuit may be reused in different modes of operation. As a more specific example depicts an integrated circuit in accordance with some embodiments of the invention. In general the integrated circuit is a similar design to the integrated circuit of with the following differences. In particular the integrated circuit uses the DAC for the additional function of converting the audio signals from the DSP into analog signals which are provided to the mixer . Thus the integrated circuit replaces the DAC see of the integrated circuit by reusing the DAC for an additional function.

While the present invention has been described with respect to a limited number of embodiments those skilled in the art having the benefit of this disclosure will appreciate numerous modifications and variations therefrom. It is intended that the appended claims cover all such modifications and variations as fall within the true spirit and scope of this present invention.

