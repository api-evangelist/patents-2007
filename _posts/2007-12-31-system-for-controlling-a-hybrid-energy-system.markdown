---

title: System for controlling a hybrid energy system
abstract: A method includes identifying a first operating sequence of a repeated operation of at least one non-traction load. The method also includes determining first and second parameters respectively indicative of a requested energy and output energy of the at least one non-traction load and comparing the determined first and second parameters at a plurality of time increments of the first operating sequence. The method also includes determining a third parameter of the hybrid energy system indicative of energy regenerated from the at least one non-traction load and monitoring the third parameter at the plurality of time increments of the first operating sequence. The method also includes determining at least one of an energy deficiency or an energy surplus associated with the non-traction load of the hybrid energy system and selectively adjusting energy stored within the storage device during at least a portion of a second operating sequence.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08360180&OS=08360180&RS=08360180
owner: Caterpillar Inc.
number: 08360180
owner_city: Peoria
owner_country: US
publication_date: 20071231
---
This invention was made with Government support under Contract No. DE FC36 01GO11095 awarded by the Department of Energy. The Government may have certain rights in this invention.

The present disclosure relates to a hybrid energy system and more particularly to a method and apparatus for controlling a hybrid energy system.

Hybrid energy systems typically include an engine having its prime mover e.g. a crankshaft mechanically decoupled from one or more loads e.g. traction and or non traction loads. Hybrid energy systems usually also include an energy storage device configured to store energy received from either the engine during an engine overpowering mode or from the loads during an energy regenerating mode. The engine and storage device are electrically coupled to the loads via a motor generator to allow the engine to also operate as an energy source rather than a conventional drive mechanism and allowing the storage device to recover regenerated energy. The amount and frequency of operated requested and regenerated energy with respect to the loads are usually independent of the amount of energy stored within the storage device. Often regenerated energy is wasted as heat because the storage device can only accept a portion of the regenerated energy. Additionally the engine output is often increased to satisfy energy demands from the loads because the storage device can only output a portion of the demanded energy. Furthermore operator requested energy may periodically exceed the maximum energy output of the engine and storage device.

U.S. Pat. No. 5 832 396 the 396 patent issued to Moroto et al. discloses a hybrid vehicle having a hybrid energy system including a battery and a method for charging the battery. The method of the 396 patent includes inputting a destination and determining a route that the vehicle may take. The method also includes determining the current residual charge of the battery and makes a schedule for a target value of the residual charge in the battery based on the driving route present location of the vehicle and road conditions. The schedule is based on the necessary driving output estimated from the route information such as altitude or road type. If the vehicle is being driven on the determined route a controller controls the current residual charge of the battery to match the scheduled residual charge of the battery at a given location on the determined route by adjusting the output of a motor and or engine. If the determined route includes an initial uphill slope and a subsequent downhill slope the engine may be operated to increase the residual charge of the battery to be approximately 100 before driving uphill and the residual charge of the battery may not be immediately replenished because the battery will be later charged when driving downhill.

Because the method of the 396 patent adjusts the residual charge of the battery based on road conditions the controller includes a memory for storing map data for the driving route. Although map data may be readily available for on road applications e.g. permanent highways it may not be readily available for off road applications e.g. temporary construction sites. Additionally the method of the 396 patent may charge and discharge the battery based on changing traction loads energy demands and regeneration however it may not account for changing non traction loads.

In one aspect the present disclosure is directed to method of controlling a hybrid energy system. The method includes identifying a first operating sequence indicative of a repeated operation of the at least one non traction load. The first operating sequence includes a plurality of time increments. The method also includes determining first and second parameters of the hybrid energy system respectively indicative of a requested energy of the at least one non traction load and an output energy of the at least one non traction load. The method includes comparing the determined first and second parameters at the plurality of time increments of the first operating sequence. The method also includes determining a third parameter of the hybrid energy system indicative of energy regenerated from the at least one non traction load. The method also includes monitoring the third parameter at the plurality of time increments of the first operating sequence. The method also includes determining at least one of an energy deficiency or an energy surplus associated with the non traction load of the hybrid energy system. The energy deficiency is a function of the first and second determined parameters and the energy surplus is a function of the third determined parameter. The method further includes selectively adjusting energy stored within the storage device during at least a portion of a second operating sequence as a function of the determined energy deficiency or the determined energy surplus. The second operating sequence includes a plurality of time increments.

In another aspect the present disclosure is directed to a machine including a hybrid energy system including an energy source an energy storage device at least one non traction load and a controller. The controller is configured to monitor one or more parameters of the machine during a first manipulation sequence of the non traction load. The controller is also configured to determine a first energy indicative of an amount of energy requested by an operator to be directed toward the at least one non traction load during the first manipulation sequence. The controller is also configured to determine a second energy indicative of an amount of energy output from the at least one non traction load during the first manipulation sequence. The controller is also configured to determine a third energy indicative of an amount of energy regenerated from the at least one non traction load during the first manipulation sequence. The controller is further configured to automatically control the energy stored within the storage device during a second manipulation sequence as a function the determined first second and third energies. The second manipulation sequence is substantially similar to the first manipulation sequence.

Engine may include any conventional energy source configured to convert energy from one form to another such as for example a gasoline or diesel combustion engine a fuel cell a natural gas engine a turbine and or any other energy conversion device. Engine may also include a prime mover e.g. a crankshaft not shown that is mechanically decoupled from traction load and non traction loads . Engine may be operatively connected to hub via an electrical mechanical and or hydraulic connection and may effectively operate as a source of energy. Engine may be controlled by controller to selectively vary the amount of energy output therefrom as a function of controller varying one or more operating parameters of engine e.g. an amount of fuel injected into a combustion chamber or the timing of intake and exhaust valves.

Storage device may include any source of energy such as for example an electrical circuit and may be configured to selectively receive store and deliver energy. Storage device may include an electrical circuit receiving energy from engine traction load and or non traction loads via hub storing energy and or delivering energy to engine traction load and or non traction loads . It is contemplated that storage device may include any quantity type and or size of batteries one or more capacitors and or other components configured to store electrical energy. It is also contemplated that storage device may be alternatively configured as a hydraulic circuit with one or more pumps and or accumulators configured to receive and store hydraulic energy.

Traction load may include one or more propulsion components of machine such as for example a traction device a marine propeller and or any type of propulsion load known in the art. Specifically traction load may operate to consume energy directed from hub in a propulsion mode and traction load may operate to produce energy directed toward hub in a dynamic braking mode. For example traction load may include a motor generator configured to in a propulsion mode convert electrical energy received from hub into mechanical energy to be delivered to one or more traction devices . Additionally the motor generator may be configured to in a dynamic braking mode convert mechanical energy received from one or more traction devices into electrical energy to be delivered to hub . Traction load may be a variable load may be periodically operated may repeat a given cycle may dynamically change during operation of system and may affect one or more operating parameters of engine and or storage device to correspondingly change. For example traction load may vary as traction devices interact with different materials and or different grades of a surface traction load may vary as inertia of one or more driven components increases or decreases and or may vary in any manner known in the art. As such energy may be output i.e. transferred from system and machine to an environment to propel machine relative to a surface.

Non traction loads may include one or more non propulsion components of machine such as for example hydraulic systems configured to affect movement of one or more hydraulic actuators to manipulate an implement . For example non traction loads may include one or more pumps e.g. fixed or variable displacement pumps and or any other source of hydraulic energy. Non traction loads may be variable loads may be periodically operated may have variable operating durations and or schedules may repeat a given cycle and or may be essential or non essential to achieve a desirable and or required operation of system or machine . For example a variable displacement pump may selectively request energy from hub to deliver pressurized fluid toward one or more hydraulic actuators in response to a command signal e.g. an operator command input. The pressurized fluid may be controlled and directed via a plurality of valves to affect extension and retraction of one or more hydraulic actuators to affect manipulation of a linkage and or implement . As such energy may be output i.e. transferred from system and machine to an environment to affect manipulation thereof e.g. lift and move material via a bucket break up surface material via a ripper load material into another machine and or any other task conventionally associated with an industry such as for example mining construction farming.

Hub may be configured to selectively receive energy from engine storage device traction load and or non traction loads convert mechanical into electrical energy and or deliver electrical energy to engine storage device traction load and or non traction loads . Hub may include one or more conventional motor generators configured to receive mechanical energy rotate a rotor thereof and generate an electrical current within a stator thereof. Hub may also include one or more conventional inverters. The operation of a motor generator and an inverter is well known in the art and is not further described. Hub may also include one or more conventional switches configured to selectively direct and effect the direction and destination of the electrical energy. The one or more switches may include mechanical or virtual e.g. software switches and are well known in the art and are not further described. It is contemplated that hub may additionally include an electrical circuit interconnecting the various components thereof. It is also contemplated that hub may include hydraulic circuit with one or more pumps and or accumulators configured to receive and or distribute hydraulic energy and or may include a mechanical transmission configured to receive and or distribute mechanical energy.

Controller may include one or more microprocessors a memory a data storage device a communications network and or other components known in the art. Controller may monitor one or more parameters of system and may affect the operation of engine storage device and or hub . Specifically controller may be configured to perform one or more steps of method as described below with reference to . Controller may be integrated within a general machine control system capable of controlling additional various functions of machine . Controller may be configured to receive input signals from one or more sensors perform one or more algorithms to determine appropriate output signals and may deliver the output signals to affect control of engine storage device and or hub . For example controller may control the amount of fuel delivered to engine the timing of intake and exhaust valves associated with engine the directional flow of energy associated with storage device the inverter motor generator and or switches of hub additional functions and or parameters associated with engine storage device and or hub as known in the art and or one or more combinations thereof. It is contemplated that controller may also receive and deliver signals via one or more communication lines not referenced as is known in the art. It is also contemplated that controller may be configured to monitor the energy stored within storage device i.e. the state of charge of storage device via any suitable method e.g. via one or more sensors not shown configured to produce a signal indicative of a voltage and or current. It is further contemplated that controller may be further configured to monitor any parameter of system via any suitable sensor and configured affect the operation of one more components associated with traction load and or non traction loads e.g. traction motors and or hydraulic pumps.

Sensors may each include one or more conventional sensors configured to establish a signal as a function of a sensed operating parameter. Sensors may sense one or more operator inputs indicative of requested traction energy output configured to affect control of engine and or storage device as well as the energy output directed toward traction load to e.g. propel machine relative to a surface. For example sensors may be configured to sense an amount of displacement of one or more operator interface devices e.g. pedals and or any other operator interface devices known in the art and generate a signal indicative thereof. Sensors may sense one or more operator inputs indicative of a requested non traction energy output configured to affect control of engine and or storage device as well as adjust the energy output directed to non traction loads to e.g. manipulate implement to perform a task. For example similar to sensors sensors may be configured to sense an amount of displacement of one or more operator interface devices e.g. joysticks and generate a signal indicative thereof. Sensors may sense one or more operating parameters of traction load indicative of the amount of energy output from traction load e.g. output to an environment. For example sensors may be configured to sense an amount of torque and or speed of an output shaft of a transmission and generate a signal indicative thereof. Sensors may sense one or more operating parameters indicative of the amount of energy output from non traction loads e.g. output to an environment. For example sensors may be configured to sense fluid flow rate and or pressure output from a source of pressurized fluid configured to affect movement of an implement to perform a task e.g. via a hydraulic system. Sensors and may sense one or more operating parameters indicative of the amount of energy input to traction load and non traction loads respectively. For example sensors may be configured to sense the amount of energy directed via hub from engine and or storage device toward traction load and non traction loads respectively.

Sensors may include a plurality of sensors establishing a plurality of signals with respect to a common operating parameter and that the plurality of signals may be combinable into a common signal by for example averaging or summing. Sensors may embody any type of sensor known in the art such as for example infrared or radar sensors flow meters transducers hall sensors and or any other sensor known in the art and may be disposed at any location relative to engine storage device traction load and non traction loads respectively.

Step may include determining a first sequence of an operating cycle. The operating cycle may be a substantially repeated operation of one or more components of machine which may correspond to a substantially repeated operation of system . Specifically an operator may repeat a given cycle of operations e.g. movement of machine and or manipulation of implement through a plurality of sequences. Step may include determining the first sequence as a function of an operator manually indicating the start and end of a given cycle via an operator interface device e.g. a push button not shown and controller receiving a signal indicative of the manually operated interface device. For example an operator may control machine to substantially traverse the same route to repetitively perform a particular task e.g. transporting material from one site to another. As such operator requested energy directed toward traction load and the environmental loadings acting on traction load with respect to a timing during a first sequence may be substantially similar with respect to a corresponding timing during a second sequence. Also an operator may control machine to substantially repeat the same manipulations of implement to repetitively perform a particular task e.g. transferring material from one pile to another pile. As such operator requested energy directed toward non traction loads and the environmental loadings acting on non traction loads with respect to a timing during a first sequence may be substantially similar with respect to a corresponding timing during a second sequence. That is a time incremented pattern of operator requested energy and environmental loadings on traction load and non traction loads may be substantially repeated during respective sequences of a given cycle.

Step may include determining an operator requested energy output for traction load and or non traction loads . Specifically step may include sensing one or more parameters associated with system and determining the requested energy as a function of the sensed parameters. For example step may include sensing via sensors and respectively a displacement of one or more operator interface devices e.g. pedals or joysticks configured to affect control of traction load and or non traction loads . It is contemplated that the amount of displacement of an operator interface device may correspond to the desired amount of control e.g. a larger displacement may correspond to a larger requested amount of energy.

Step may include determining the amount of energy output from traction load and or non traction loads . Specifically step may include sensing one or more parameters associated with system and determining the actual amount of output energy as a function of the sensed parameters. For example step may include sensing via sensor torque and or speed of a transmission output shaft and may include sensing via sensor the pressure and or flow rate of pressurized fluid directed toward one or more actuators. Step may also include sensing the actual energy input to traction load and or non traction loads and determining the actual energy output therefrom as a function of the energy input and the efficiency of one or more energy converting components thereof. For example step may for traction load include sensing via sensor the energy e.g. current or torque input to a transmission operatively connected and configured to one or more traction devices and functionally relating the sensed energy with an empirically determined transmission efficiency. Step may for non traction loads include sensing via sensor the energy e.g. current or torque input to one or more hydraulic pumps of a hydraulic system configured to supply a flow of pressurized fluid toward one or more actuators to affect manipulation of implement and functionally relating the sensed energy with an empirically determined efficiency of the hydraulic system.

Step may include comparing the requested energy with the output energy. Specifically step may include comparing the requested rate of output energy e.g. torque or fluid flow and the rate of actual output energy at a plurality of time increments during the first sequence to determine if the requested energy is less than the output energy at any one of the time increments. If so step may include determining an energy deficiency associated with system . An energy deficiency may be indicative of an operator requesting more energy from traction load and or non traction loads than system can provide. It is contemplated that step may include comparing the requested and output energy at each time increment of the first sequence and may include determining a plurality of energy deficiencies. It is also contemplated that step may include comparing the requested and output energy via any method known in the art such as for example by mapping the requested and output energies versus time as the first sequence is performed or by electronically comparing the requested and output energies at one or more discrete time increments during the first sequence. It is understood that system may include various sources of potential energy such as chemical e.g. fuel associated with engine and or electrical e.g. voltage associated with storage device and an energy deficiency may be indicative of system being incapable of converting energy from one form to another to meet operator requests. For example due to structural limitations engine may be incapable of converting energy from fuel into mechanical and or electrical energy at a rate sufficient to enable system to output energy toward traction load and or non traction loads to meet operator requests.

For example an operator may displace an operator interface device e.g. pedals and request energy to be directed toward traction load to affect a given ground speed of machine . In response system may initially output sufficient energy from engine and or storage device toward traction load . If however traction load substantially increases e.g. machine travels up a hill system may no longer be capable of outputting the requested energy and the ground speed of machine may slow. As another example an operator may displace an operator interface device e.g. joysticks and request energy to be directed toward one or more non traction loads to affect a manipulation of implement . In response system may initially output sufficient energy from engine and or storage device toward non traction loads . If however non traction loads substantially increase e.g. implement transition from soft material to hard material system may no longer be capable of outputting the requested energy and the movement of implement may slow or stall. Additionally system may initially deliver sufficient energy to traction load and or non traction loads to achieve the requested output and may subsequently cease to provide sufficient energy due to prolonged operation of a high load operation. For example as machine progresses up a hill at high speed controller may control engine and or storage device to maximum energy output to satisfy the high energy demand. When the energy stored within storage device is depleted machine may slow because engine may not be capable of satisfying the high energy demand without additional energy output from storage device .

Step may include monitoring the energy regenerated by system . Specifically step may include determining the amount of energy regenerated from traction load and non traction loads at the plurality of time increments during the first sequence to determine if regenerated energy is dissipated to an environment. If so step may include determining an energy surplus associated with system . An energy surplus may be indicative of system being capable of regenerating energy from traction load and or non traction loads yet not being capable of storing the regenerated energy within storage device . For example step may include sensing one or more parameters of system and or machine indicative of dissipated regenerated energy such as for example sensing displacement e.g. via sensors or additional sensors of an operator interface device configured to retard movement of machine e.g. pedals and or configured to retard movement of implement e.g. joysticks . It is contemplated that step may include sensing any parameter of system and or machine indicative of mechanical and or hydraulic retarding of traction load and or non traction loads . It is also contemplated that regenerated energy may be directed toward storage device during a dynamic braking operation associated with traction load or an over running operation associated with non traction loads . Regenerated energy and the systems associated with such energy are well known in the art and are not further explained.

Step may include adjusting the amount of energy stored within storage device as well as adjusting the timing of charging and discharging storage device during a second sequence of the operating cycle. Specifically step may include adjusting the operation of storage device as a function of the determined energy deficiencies and energy surpluses. If an energy deficiency was determined at a given time increment during the first sequence step may include increasing the amount of energy stored within storage device before the corresponding time increment during the second sequence to reduce and or eliminate the energy deficiency by allowing storage device to output additional energy than it would otherwise. If an energy surplus was determined at a given time increment during the first sequence step may include decreasing the amount of energy stored within storage device before the corresponding time increment during the second sequence to reduce and or eliminate the energy surplus by allowing storage device to accept additional energy than it would otherwise. It is contemplated that storage device may be controlled to be at any state of charge and may be charged and discharged according to any timing during the second sequence. It is also contemplated that step may include controller automatically controlling the timing and amount of energy associated with storage device during the second sequence. It is further contemplated that step may further reduce and or eliminate energy deficiencies and or surpluses in third and subsequent sequences of the cycle.

The disclosed method and apparatus may be applicable to control any hybrid energy system. The disclosed method and apparatus may advantageously store and direct energy. The operation of method is explained below with reference to a particular example of a repetitive manipulation of non traction loads e.g. implement for exemplary purposes only. It is understood that the operation of method is equally applicable to repetitive manipulation of traction load e.g. traction device and or a combination of repetitive manipulation of non traction loads and traction load and that the operation of method is not limited to the particular example explained below but is applicable to any type of manipulation of non traction loads traction load and or any combination thereof.

System may be operatively associated with machine and traction load may be operatively configured to propel the vehicle relative to a work site surface. Traction load may include one or more traction motors configured to receive electrical energy from hub and direct mechanical energy e.g. torque and speed toward traction devices . Non traction loads may include one or more hydraulic pumps configured to receive energy from hub and supply pressurized fluid to one or more hydraulic actuators via a hydraulic system to affect manipulation of implement . Hub may selectively receive electrical energy from engine and or storage device . For example traction load may selectively produce electrical energy during a dynamic braking mode or an over running operation e.g. downhill movement or deceleration and may regenerate electrical energy to hub . For example non traction loads may selectively produce electrical energy during an over running operation e.g. an external load assists in moving implement and may regenerate electrical energy to hub . For example electrical energy directed to hub from traction load and or non traction loads may be further directed from hub to storage device stored therein and subsequently directed toward traction load and or non traction loads to reduce the amount of energy required from engine .

For example an operator may affect manipulation of implement through one or more sequences of a repetitive cycle including movement of an arm and bucket to load the bucket with material from a first pile movement of the arm to position loaded bucket adjacent a second pile movement of the bucket to empty the material to the second pile and movement of the arm and empty bucket to position the bucket adjacent the first pile. An operator may for example indicate the beginning of a first sequence of the cycle just before loading the bucket and may indicate the end of the first sequence just after positioning the empty bucket adjacent the first pile step . The operator may perform the cycle and controller may determine the energy requested by the operator to affect each of the manipulations step and may determine the energy output from implement step . Controller may compare the requested energy and the output energy to determine if an energy deficiency occurred during the first sequence step . For example controller may determine that an energy deficiency occurred when loading the bucket with material from the first pile. Controller may also include determining the amount of energy regenerated from the implement to determine if an energy surplus occurred during the first sequence step . For example controller may determine that an energy surplus occurred when moving the empty bucket adjacent the first pile.

The operator may perform a second sequence of the cycle substantially similar to the first sequence. Alternatively the operator may program controller to automatically affect the desired manipulations of implement during the second and subsequent sequences of the cycle. During the second sequence controller may adjust the timing and energy stored within storage device step . During the second sequence controller may discharge storage device sometime before moving the bucket adjacent the first pile and may charge storage device sometime before loading the bucket. For example controller may increase the energy within storage device before loading the bucket and subsequently direct that energy toward implement while loading the bucket to reduce and or eliminate the energy deficiency associated with that manipulation. Additionally controller may deplete the energy stored within storage device before moving the bucket adjacent the first pile and subsequently directing regenerated energy thereto while moving the bucket adjacent the first pile to reduce and or eliminate the energy surplus associated with that manipulation. It is contemplated that controller may affect a discharge of storage device by controlling system to direct energy from storage device toward non traction load and correspondingly reducing the output of engine and or controlling storage device to remain at a low energy storage level from e.g. a maximum energy output operation. It is also contemplated that controller may affect a charge of storage device by controlling system to direct energy from engine toward storage device and or controlling storage device to remain at a high energy storage level from e.g. a regeneration operation.

A conventional control methodology for a hybrid energy system may attempt to maintain the energy within a storage device to be approximately 50 so that the storage device is capable of both an energy assist operation and an energy regeneration operation. However a 50 state of charge may be not be sufficient to meet a requested energy output and a 50 storage capacity may not be sufficient to fully accept regenerated energy input given upcoming variations in traction load and or non traction loads . Although a 50 state of charge may allow for some energy output and some energy input it may not be sufficient for both operations. By increasing the energy within storage device system may be more capable of outputting additional energy during subsequent manipulations. By decreasing the energy within storage device system may be more capable of regenerating additional energy during subsequent manipulations. By adjusting the timing and energy stored within storage device as a function of determined energy deficiencies and energy surpluses system may be configured to more sufficiently meet requested energy and accept regenerated energy.

It will be apparent to those skilled in the art that various modifications and variations can be made to the disclosed system for controlling a hybrid energy system. Other embodiments will be apparent to those skilled in the art from consideration of the specification and practice of the disclosed method and apparatus. It is intended that the specification and examples be considered as exemplary only with a true scope being indicated by the following claims and their equivalents.

