---

title: Feedback reduction system
abstract: A feedback reduction system adaptively processes a microphone signal. An adaptive feedback suppression filter circuit processes the microphone signal, and an adaptive feedback compensation filter circuit further processes the microphone signal. The adaptive feedback suppression filter circuit processes the signal based upon output from the adaptive filter compensation filter circuit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08175290&OS=08175290&RS=08175290
owner: Nuance Communications, Inc.
number: 08175290
owner_city: Burlington
owner_country: US
publication_date: 20070710
---
This application claims the benefit of priority from International Application No. PCT EP2006 000197 filed Jan. 11 2006 which claims the benefit of priority from European Patent Application No. 05 000404.3 filed Jan. 11 2005. Application Nos. PCT EP2006 00197 and 05 000404.3 are incorporated by reference.

This disclosure relates to signal processing systems. In particular this disclosure relates to a system that reduces acoustic feedback.

In two way speech communication between parties that simultaneously transmit and receive audio signals some suppression of signals may occur. Without such signal suppression feedback may occur which may affect the quality and intelligibility of a voice conversation. Acoustic feedback may degrade the communication signal.

Hands free voice communication systems in vehicles may suffer from feedback. Vehicle communication systems may allow for hands free telephony with remote subscribers at a far end outside the vehicle and may also allow for inter cabin communication. Microphones and loudspeakers provided for front seat and backseat passengers may provide improved acoustic conditions in the presence of background noise.

Methods to reduce acoustical feedback may utilize filters similar to the echo compensation filters used in mobile telephones. Linear or nonlinear filters may synthesize a replica of the acoustic feedback and a compensation signal may be obtained from the received signal of the loudspeakers. The compensation signal may be subtracted from the microphone output signal to generate a resulting signal.

However it may be difficult to adapt the filter with high accuracy and an acceptable convergence rate. The impulse response may be identified for the frequencies showing the strongest feedback only allowing in principle adaptation of the filter coefficients for these frequencies. However the filters may not be reliable at other frequencies. Consequently perceptible artifacts caused by acoustic feedback may affect the intelligibility of acoustic signals. Therefore there is a need for a system that reduces feedback.

A feedback reduction system adaptively processes a microphone signal. An adaptive feedback suppression filter circuit processes the microphone signal and an adaptive feedback compensation filter circuit further processes the microphone signal. The adaptive feedback suppression filter circuit processes the signal based upon an output from the adaptive filter compensation filter circuit.

Other systems methods features and advantages will be or will become apparent to one with skill in the art upon examination of the following figures and detailed description. It is intended that all such additional systems methods features and advantages be included within this description be within the scope of the invention and be protected by the following claims.

An audio signal may be detected by one or more microphones and digitized to generate a microphone output signal. Preprocessing the microphone signal may include a Fast Fourier Transform process and may result in a complex microphone signal.

A feedback suppression filter circuit and a feedback compensation filter circuit may be adaptive. The respective filter coefficients may be adapted during signal processing. A suppression filter circuit may generate feedback components of the microphone signal that may be subtracted from the microphone signal. The feedback compensation filter circuit may provide an estimate for the impulse response that may be subtracted from the microphone signal. The filter coefficients of the feedback compensation filter circuit may be adapted for the dominant feedback frequency or dominant feedback frequencies. The output of the feedback compensation filter circuit may influence processing by the feedback suppression filter circuit .

Processing by the feedback suppression filter circuit and the feedback compensation filter circuit may result in a stable feedback reduction without significant oscillation of the suppression characteristics. Feedback effects may be reduced below perceptible levels.

The feedback compensation filter circuit may estimate an impulse response and the filter coefficients may be adapted. If the feedback compensation filter circuit generates a first input signal for the feedback suppression filter circuit the dependence of the feedback suppression filter circuit on the compensation filter may be efficient. Consequently the output signal may be improved.

Processing by the adaptive feedback suppression filter circuit may be performed in a signal path and in a non signal path. The adaptation of the filter coefficients of the adaptive feedback suppression filter circuit may be performed in the non signal path and the adapted filter coefficients may be used in the signal path.

Separation of the signal path from the non signal path referred to as the shadow path for background signal processing may avoid artifacts due to the feedback compensation being mixed with the output signal. Such artifacts may be generated during the adaptation of the feedback compensation filter circuit and may only influence the signal input in the shadow path and not the output audio signal.

After adaptation of the feedback suppression filter circuit based on filter coefficients generated by the feedback compensation filter circuit the filter coefficients may be used without modification in the signal path to generate one or more accurate feedback components. The feedback components may be subtracted from the microphone signal. Use of the unmodified filter coefficients may indicate a direct dependence of the suppression filtering process on the compensation filtering process. In some systems modification of the filter coefficients obtained in the shadow path may be performed before using such coefficients in the signal path.

The portion of the microphone signal subtracted may be modified and added to the first input signal of the shadow path. The microphone signal may be corrected for feedback components by the feedback suppression filter circuit . Initially the feedback components may be obtained by predetermined filter coefficients. The filter coefficients of the feedback suppression filter circuit may be obtained based on the first input signal. The first input signal serves as a working signal generated by the feedback compensation filter circuit and provides an impulse response.

Artifacts generated by the feedback compensation filter circuit may only influence the working signal rather than affecting the output signal directly. The algebraic manipulations may be performed efficiently by robust processes. An adaptive or non adaptive decorrelation filter circuit may enhance the convergence characteristics of the adaptation processes. An inverse decorrelation filter circuit may not be necessary if the signal decorrelation occurs in the shadow path only.

The adaptive feedback suppression filter circuit may include a finite impulse response filter or an infinite impulse response filter. Finite impulse response FIR filters are generally stable because no feedback branch is provided. Recursive infinite impulse response IIR filters typically meet a given set of specifications with a lower filter order than a corresponding FIR filter. Feedback suppression for a very narrow band typically can be achieved more efficiently by IIR filters. IIR filters may require continuous stability checking. Adaptation of the filter coefficients of the adaptive feedback suppression filter circuit and or the adaptive feedback compensation filter circuit may be performed based on a normalized least mean square process satisfying convergence characteristics.

If more than one microphones are used to detect audio signals the microphone signal may be processed by an adaptive or non adaptive beamforming circuit. Each of the microphones may provide a microphone signal input to the beamforming circuit. The beamforming circuit may output a beamformed signal also referred to as the microphone signal. 

The beamforming circuit may include a blocking matrix and an adaptive noise canceling circuit that may subtract noise signals generated by an adaptive noise canceling circuit. The blocking matrix and an adaptive noise canceling circuit may enhance the intelligibility of the output audio.

The feedback reduction system may be used in a vehicle communication system. Feedback reduction may be desirable in vehicle cabins. The vehicle cabin may include directional microphones and loudspeakers located at each seat of the vehicle. The feedback reduction system may also improve the intelligibility of speech signals generated by the hearing aids.

The signals generated by the microphone may be preprocessed. The preprocessing may include Fast Fourier Transform processing which may generate a complex microphone signal y n where n is the frequency bin. If a microphone array or an array of directional microphones are used preprocessing may include a time delay corresponding to the different microphone signals. For each microphone signal the time delay may be adjusted based on the geometry of microphones to synchronize the microphone signals with a corresponding desired target signal.

An adaptive weighted sum beamforming circuit may combine the preprocessed or time delayed signals of the multiple microphones to obtain a single beamformed signal. The single beamformed signal may be referred to as the microphone signal y n which may have an improved signal to noise ratio. The beamforming circuit may include an adaptive blocking matrix and an adaptive noise canceling filter.

The microphone signal y n may be corrected for feedback contributions included in the impulse response h n . The adaptive feedback suppression filter circuit having a coefficient vector c n may reduce acoustic feedback. In some systems the adaptive feedback suppression filter circuit may be a finite impulse response FIR . If acoustic feedback occurs at particular frequencies the FIR filter may suppress those specific frequencies.

Prior to filtering the microphone signal y n may be delayed by a delay circuit . The amount of delay may be equal to about N clock cycles where N may be less than the inverse of the respective feedback frequency. In some systems the value of N may be chosen to cause a delay of about 2 milliseconds to avoid suppressing short time correlations that is to preserve the short time spectral envelope. Suppression of the short time spectral envelope may result in a artificial sounding processed speech signal. The filter may have between about 80 to about 100 filter coefficients or taps using a sampling rate of about 16 kHz. The filter coefficients may be calculated using an NLMS process.

The FIR filter may be adapted using the microphone signal y n and an output signal u n . Feedback may be minimized in the output signal u n . An artificially generated or working signal tilde over n may used instead of y n . The working signal tilde over n may be generated by the feedback compensation filter circuit having a vector of filter coefficients n . The FIR filter of the feedback compensation filter circuit may include several filter components working independently at different frequency ranges.

The feedback compensation filter circuit may model the impulse response h n of the loudspeaker and the microphone using an estimated impulse response. Convoluting the output signal u n with the estimated impulse response may yield an estimated feedback signal circumflex over d n . An error signal e n may be obtained by subtracting the estimated feedback signal circumflex over d n from the microphone signal y n . The error signal e n may be used for adaptation of the compensation filter circuit . The error signal e n may not be used directly to generate the actual audio output signal u n .

The calculated filter coefficients of the feedback compensation filter circuit may be used to generate the working signal tilde over n as follows. To obtain the respective working signal tilde over n for the microphone signal y n using the estimated impulse response n the microphone signal y n may be delayed by the delay circuit and feedback components circumflex over r n may be subtracted from y n by the feedback suppression filter circuit . The working signal tilde over n may be generated by convoluting the feedback components circumflex over r n with the estimated impulse response and adding the convolution results to the microphone signal y n . The working signal tilde over n may provide an input signal for feedback suppression filter circuit which in some systems may not include a feedback path.

Adding the convolution of the feedback components circumflex over r n with the estimated impulse response n may be performed in the background or the shadow path rather than in the actual signal path. The working signal tilde over n may not used as the audio signal output from the signal processing components but rather may be used to adapt the feedback suppression filter circuit which may operate in the shadow path. A copy of the working signal tilde over n may be used in the signal path to generate the desired loudspeaker output signal u n . Adaptation may optimize the shadow path output signal n that may result by subtracting the feedback components circumflex over r n from the microphone signal in the shadow path.

Adaptation of the feedback suppression filter circuit and the feedback suppression filter circuit may be performed using an NLMS process having a small step size. The size of the steps may range from about 10to about 10.

In some systems the convergence rate for the feedback suppression filter circuit may be increased by processing the working signal tilde over n with a decorrelation filter before inputting the working signal tilde over n to the suppression filter . The decorrelation filter may be an adaptive filter. Because adaptation may be performed in the shadow path rather than in the signal path an inverse decorrelation filter may not be needed.

The adaptive compensation filter circuit may include a vector of filter coefficients n . The adaptive compensation filter circuit may estimate an impulse response to obtain an estimate for the feedback signal circumflex over d n . The feedback signal circumflex over d n may be subtracted from the microphone signal y n to generate the reduced error signal e n . A copy of the coefficient vector n may be used to generate the signal tilde over e n . The signal tilde over e n may be input to the feedback suppression filter circuit after a time delay .

Convoluting the feedback components circumflex over r n with the estimated impulse response and adding the convolution result to the error signal e n may yield the signal tilde over e n . The signal tilde over e n may be input to the feedback suppression filter circuit . The feedback suppression filter circuit may be an FIR or an IIR filter. Adaptation of the coefficient vector n of the feedback suppression filter circuit may be performed by optimizing the signal tilde over e n for the resulting signal n . The adaptive feedback suppression filter circuit may use a copy of n to correct the error signal e n for the feedback components circumflex over r n . The signal u n may be output by the loudspeaker with reduced feedback.

If more than one microphone is used a beamforming circuit may generate a beamformed signal. Adaptive or non adaptive noise reduction filters may process the beamformed signal. The processed microphone signal may be phase shifted when the feedback reduction system of is used with a hearing aid. The phase shift may be the difference in phase between y n and u n . The feedback suppression filter circuits and may provide the phase shift.

The microphones positioned closest to the driver may detect speech by the driver and may generate a microphone signal. A signal processing circuit may process the microphone signal. The signal processing circuit may include the feedback reduction system. The signal processing circuit may output the driver s speech to the backseat passengers . Similarly a signal processing circuit may process and output speech from the backseat passengers to the driver .

The signal processing systems and may reduce feedback. The vehicle communication system may include adaptive feedback suppression filters and feedback compensation filters described above with respect to . The processing of speech signals from the driver and processing of speech signals from the passengers may not be independent.

The logic circuitry and processing described above may be encoded in a computer readable medium such as a CD ROM disk flash memory RAM or ROM an electromagnetic signal or other machine readable medium as instructions for execution by a processor. Alternatively or additionally the logic may be implemented as analog or digital logic using hardware such as one or more integrated circuits including amplifiers adders delays and filters or one or more processors executing amplification adding delaying and filtering instructions or in software in an application programming interface API or in a Dynamic Link Library DLL functions available in a shared memory or defined as local or remote procedure calls or as a combination of hardware and software.

The logic may be represented in e.g. stored on or in a computer readable medium machine readable medium propagated signal medium and or signal bearing medium. The media may comprise any device that contains stores communicates propagates or transports executable instructions for use by or in connection with an instruction executable system apparatus or device. The machine readable medium may selectively be but is not limited to an electronic magnetic optical electromagnetic or infrared signal or a semiconductor system apparatus device or propagation medium. A non exhaustive list of examples of a machine readable medium includes a magnetic or optical disk a volatile memory such as a Random Access Memory RAM a Read Only Memory ROM an Erasable Programmable Read Only Memory i.e. EPROM or Flash memory or an optical fiber. A machine readable medium may also include a tangible medium upon which executable instructions are printed as the logic may be electronically stored as an image or in another format e.g. through an optical scan then compiled and or interpreted or otherwise processed. The processed medium may then be stored in a computer and or machine memory.

The systems may include additional or different logic and may be implemented in many different ways. A controller may be implemented as a microprocessor microcontroller application specific integrated circuit ASIC discrete logic or a combination of other types of circuits or logic. Similarly memories may be DRAM SRAM Flash or other types of memory. Parameters e.g. conditions and thresholds and other data structures may be separately stored and managed may be incorporated into a single memory or database or may be logically and physically organized in many different ways. Programs and instruction sets may be parts of a single program separate programs or distributed across several memories and processors. The systems may be included in a wide variety of electronic devices including a cellular phone a headset a hands free set a speakerphone communication interface or an infotainment system.

While various embodiments of the invention have been described it will be apparent to those of ordinary skill in the art that many more embodiments and implementations are possible within the scope of the invention. Accordingly the invention is not to be restricted except in light of the attached claims and their equivalents.

